
\chapter{The \texttt{base} package}
\inputencoding{latin1}
\HeaderA{base-package}{The R Base Package}{base.Rdash.package}
\aliasA{base}{base-package}{base}
\keyword{package}{base-package}
%
\begin{Description}\relax
Base R functions
\end{Description}
%
\begin{Details}\relax
This package contains the basic functions which let \R{}
function as a language:  arithmetic, input/output, basic
programming support, etc.  Its contents are available through
inheritance from any environment.

For a complete
list of functions, use \code{library(help="base")}.
\end{Details}
\inputencoding{latin1}
\HeaderA{.Device}{Lists of Open/Active Graphics Devices}{.Device}
\aliasA{.Devices}{.Device}{.Devices}
\keyword{device}{.Device}
%
\begin{Description}\relax
A pairlist of the names of open graphics devices is stored in
\code{.Devices}. The name of the active device (see
\code{\LinkA{dev.cur}{dev.cur}}) is stored in \code{.Device}.  Both are symbols
and so appear in the base name space.
\end{Description}
%
\begin{Value}
\code{.Device} is a length-one character vector.

\code{.Devices} is a \LinkA{pairlist}{pairlist} of length-one character vectors.
The first entry is always \code{"null device"}, and there are as many
entries as the maximal number of graphics devices which have been
simultaneously active.  If a device has been removed, its entry will be
\code{""} until the device number is reused.
\end{Value}
\inputencoding{latin1}
\HeaderA{.Machine}{Numerical Characteristics of the Machine}{.Machine}
\keyword{sysdata}{.Machine}
\keyword{programming}{.Machine}
\keyword{math}{.Machine}
%
\begin{Description}\relax
\code{.Machine} is a variable holding information on the numerical
characteristics of the machine \R{} is running on, such as the largest
double or integer and the machine's precision.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Machine
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
The algorithm is based on Cody's (1988) subroutine MACHAR.  As almost
all current implementations of \R{} use 32-bit integers and IEC 60059
floating-point (double precision) arithmetic, most of these values are
the same for almost all \R{} builds.

Note that on most platforms smaller positive values than
\code{.Machine\$double.xmin} can occur.  On a typical \R{} platform the
smallest positive double is about \code{5e-324}.
\end{Details}
%
\begin{Value}
A list with components (for simplicity, the prefix `double' is
omitted in the explanations)
\begin{ldescription}
\item[\code{double.eps}] the smallest positive floating-point number
\code{x} such that \code{1 + x != 1}.  It equals
\code{base\textasciicircum{}ulp.digits} if either \code{base} is 2 or \code{rounding}
is 0;  otherwise, it is \code{(base\textasciicircum{}ulp.digits) / 2}.  Normally
\code{2.220446e-16}.
\item[\code{double.neg.eps}] a small positive floating-point number \code{x}
such that \code{1 - x != 1}.  It equals \code{base\textasciicircum{}neg.ulp.digits}
if \code{base} is 2 or \code{round} is 0;  otherwise, it is
\code{(base\textasciicircum{}neg.ulp.digits) / 2}.  Normally \code{1.110223e-16}.
As \code{neg.ulp.digits} is bounded below by \code{-(digits + 3)},
\code{neg.eps} may not be the smallest number that can alter 1 by
subtraction.
\item[\code{double.xmin}] the smallest non-vanishing normalized
floating-point power of the radix, i.e., \code{base\textasciicircum{}min.exp}.
Normally \code{2.225074e-308}.
\item[\code{double.xmax}] the largest finite floating-point number.
Typically, it is equal to \code{(1 - neg.eps) * base\textasciicircum{}max.exp}, but
on some machines it is only the second, or perhaps third, largest
number, being too small by 1 or 2 units in the last digit of the
significand.  Normally \code{1.797693e+308}.
\item[\code{double.base}] the radix for the floating-point representation:
normally \code{2}.
\item[\code{double.digits}] the number of base digits in the floating-point
significand: normally \code{53}.
\item[\code{double.rounding}] the rounding action. \\{}
0 if floating-point addition chops; \\{}
1 if floating-point addition rounds, but not in the IEEE style; \\{}
2 if floating-point addition rounds in the IEEE style; \\{}
3 if floating-point addition chops, and there is partial underflow; \\{}
4 if floating-point addition rounds, but not in the IEEE style, and
there is partial underflow; \\{}
5 if floating-point addition rounds in the IEEE style, and there is
partial underflow.  Normally \code{5}.
\item[\code{double.guard}] the number of guard digits for multiplication
with truncating arithmetic.  It is 1 if floating-point arithmetic
truncates and more than \code{digits} base \code{base} digits
participate in the post-normalization shift of the floating-point
significand in multiplication, and 0 otherwise.
\item[\code{double.ulp.digits}] the largest negative integer \code{i} such
that \code{1 + base\textasciicircum{}i != 1}, except that it is bounded below by
\code{-(digits + 3)}.  Normally \code{-52}.
\item[\code{double.neg.ulp.digits}] the largest negative integer \code{i}
such that \code{1 - base\textasciicircum{}i != 1}, except that it is bounded below by
\code{-(digits + 3)}. Normally \code{-53}.
\item[\code{double.exponent}] 
the number of bits (decimal places if \code{base} is 10) reserved
for the representation of the exponent (including the bias or sign)
of a floating-point number.  Normally \code{11}.
\item[\code{double.min.exp}] 
the largest in magnitude negative integer \code{i} such that
\code{base \textasciicircum{} i} is positive and normalized.  Normally \code{-1022}.
\item[\code{double.max.exp}] 
the smallest positive power of \code{base} that overflows.  Normally
\code{1024}.
\item[\code{integer.max}] the largest integer which can be represented.
Always \code{2147483647}.
\item[\code{sizeof.long}] the number of bytes in a C \code{long} type:
\code{4} or \code{8} (most 64-bit systems, but not Windows).
\item[\code{sizeof.longlong}] the number of bytes in a C \code{long long}
type.  Will be zero if there is no such type, otherwise usually
\code{8}.
\item[\code{sizeof.longdouble}] the number of bytes in a C \code{long double}
type.  Will be zero if there is no such type, otherwise possibly
\code{12} (Windows, 32-bit Linux/Solaris) or \code{16} (64-bit
Linux/Solaris, Intel Mac OS X).
\item[\code{sizeof.pointer}] the number of bytes in a C \code{SEXP}
type.  Will be \code{4} on 32-bit builds and \code{8} on 64-bit
builds of \R{}.
\end{ldescription}
\end{Value}
%
\begin{References}\relax
Cody, W. J. (1988)
MACHAR: A subroutine to dynamically determine machine parameters.
\emph{Transactions on Mathematical Software}, \bold{14}, 4, 303--311.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Platform}{.Platform}} for details of the platform.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
.Machine
## or for a neat printout
noquote(unlist(format(.Machine)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{.Platform}{Platform Specific Variables}{.Platform}
\keyword{file}{.Platform}
\keyword{utilities}{.Platform}
%
\begin{Description}\relax
\code{.Platform} is a list with some details of the platform under
which \R{} was built.  This provides means to write OS-portable \R{}
code.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Platform
\end{verbatim}
\end{Usage}
%
\begin{Value}
A list with at least the following components:

\begin{ldescription}
\item[\code{OS.type}] 
character string, giving the \bold{O}perating \bold{S}ystem
(family) of the computer.  One of \code{"unix"} or \code{"windows"}.

\item[\code{file.sep}] 
character string, giving the \bold{file} \bold{sep}arator used on your
platform: \code{"/"} on both Unix-alikes \emph{and} on Windows (but
not on the once port to Classic Mac OS).

\item[\code{dynlib.ext}] 
character string, giving the file name \bold{ext}ension of
\bold{dyn}amically loadable \bold{lib}raries, e.g., \code{".dll"} on
Windows and \code{".so"} or \code{".sl"} on Unix-alikes.  (Note for
Mac OS X users: these are shared objects as loaded by
\code{\LinkA{dyn.load}{dyn.load}} and not dylibs: see \code{\LinkA{dyn.load}{dyn.load}}.)

\item[\code{GUI}] 
character string, giving the type of GUI in use, or \code{"unknown"}
if no GUI can be assumed.  Possible values are for Unix-alikes the
values given via the \option{-g} command-line flag (\code{"X11"},
\code{"Tk"}), \code{"AQUA"} (running under \code{R.app} on Mac OS X),
\code{"Rgui"} and \code{"RTerm"} (Windows) and perhaps others under
alternative front-ends or embedded \R{}.

\item[\code{endian}] 
character string, \code{"big"} or \code{"little"}, giving the
endianness of the processor in use.  This is relevant when it is
necessary to know the order to read/write bytes of e.g. an integer or
double from/to a connection: see \code{\LinkA{readBin}{readBin}}. 

\item[\code{pkgType}] 
character string, the preferred setting for
\code{\LinkA{options}{options}("pkgType")}.  Values \code{"source"},
\code{"mac.binary"}, \code{"mac.binary.leopard"} and
\code{"win.binary"} are currently in use.

\item[\code{path.sep}] 
character string, giving the \bold{path} \bold{sep}arator,
used on your platform, e.g., \code{":"} on Unix-alikes and
\code{";"} on Windows.  Used to separate paths in environment
variables such as \code{PATH} and \code{TEXINPUTS}.

\item[\code{r\_arch}] 
character string, possibly \code{""}.  The name of the
architecture-specific directory used in this build of \R{}.

\end{ldescription}
\end{Value}
%
\begin{Section}{AQUA}
\code{.Platform\$GUI} is set to \code{"AQUA"} under the Mac OS X GUI,
\code{R.app}. This has a number of consequences:
\begin{itemize}

\item the \env{DISPLAY} environment variable is set.
\item appends \file{/usr/local/bin} to the \env{PATH} environment variable.
\item the default graphics device is set to \code{quartz}.
\item selects native (rather than Tk) widget for
\code{\LinkA{menu}{menu}(graphics = TRUE)}.
\item HTML help is displayed in the internal browser.
\item The spreadsheet-like data editor/viewer uses a Quartz version
rather than the X11 one.

\end{itemize}

\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{R.version}{R.version}} and \code{\LinkA{Sys.info}{Sys.info}} give more details
about the OS.  In particular, \code{R.version\$platform} is the
canonical name of the platform under which \R{} was compiled.

\code{\LinkA{.Machine}{.Machine}} for details of the arithmetic used, and
\code{\LinkA{system}{system}} for invoking platform-specific system commands.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Note: this can be done in a system-independent way
## by file.info()$isdir
if(.Platform$OS.type == "unix") {
   system.test <- function(...) { system(paste("test", ...)) == 0 }
   dir.exists <- function(dir)
       sapply(dir, function(d)system.test("-d", d))
   dir.exists(c(R.home(), "/tmp", "~", "/NO"))# > T T T F
}
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{abbreviate}{Abbreviate Strings}{abbreviate}
\keyword{character}{abbreviate}
%
\begin{Description}\relax
Abbreviate strings to at least \code{minlength} characters,
such that they remain \emph{unique} (if they were),
unless \code{strict=TRUE}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
abbreviate(names.arg, minlength = 4, use.classes = TRUE,
           dot = FALSE, strict = FALSE,
           method = c("left.kept", "both.sides"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{names.arg}] a character vector of names to be abbreviated, or an
object to be coerced to a character vector by \code{\LinkA{as.character}{as.character}}.
\item[\code{minlength}] the minimum length of the abbreviations.
\item[\code{use.classes}] logical (currently ignored by \R{}).
\item[\code{dot}] logical: should a dot (\code{"."}) be appended?
\item[\code{strict}] logical: should \code{minlength} be observed strictly?
Note that setting \code{strict=TRUE} may return \emph{non}-unique
strings.
\item[\code{method}] a string specifying the method used with default
\code{"left.kept"}, see `Details' below.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The algorithm (\code{method = "left.kept"}) used is similar to that of
S.  For a single string it works as follows.
First all spaces at the beginning of the string are stripped.
Then (if necessary) any other spaces are stripped.
Next, lower case vowels are removed (starting at the right)
followed by lower case consonants.
Finally if the abbreviation is still longer than \code{minlength}
upper case letters are stripped.

Characters are always stripped from the end of the word first.
If an element of \code{names.arg} contains more than one word (words
are separated by space) then at least one letter from each word will be
retained.

Missing (\code{NA}) values are unaltered.

If \code{use.classes} is \code{FALSE} then the only distinction is to
be between letters and space.  This has NOT been implemented.
\end{Details}
%
\begin{Value}
A character vector containing abbreviations for the strings in its
first argument.  Duplicates in the original \code{names.arg} will be
given identical abbreviations.  If any non-duplicated elements have
the same \code{minlength} abbreviations then, if \code{method =
  "both.sides"} the basic internal \code{abbreviate()} algorithm is
applied to the characterwise \emph{reversed} strings; if there are
still duplicated abbreviations and if \code{strict=FALSE} as by
default, \code{minlength} is incremented by one and new abbreviations
are found for those elements only.  This process is repeated until all
unique elements of \code{names.arg} have unique abbreviations.

The character version of \code{names.arg} is attached to the returned
value as a names argument: no other attributes are retained.
\end{Value}
%
\begin{Section}{Warning}
This is really only suitable for English, and does not work correctly with
non-ASCII characters in multibyte locales.  It will warn if used with
non-ASCII characters.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{substr}{substr}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c("abcd", "efgh", "abce")
abbreviate(x, 2)
abbreviate(x, 2, strict=TRUE)# >> 1st and 3rd are == "ab"

(st.abb <- abbreviate(state.name, 2))
table(nchar(st.abb))# out of 50, 3 need 4 letters :
as <- abbreviate(state.name, 3, strict=TRUE)
as[which(as == "Mss")]

## method="both.sides" helps:  no 4-letters, and only 4 3-letters:
st.ab2 <- abbreviate(state.name, 2, method="both")
table(nchar(st.ab2))
## Compare the two methods:
cbind(st.abb, st.ab2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{agrep}{Approximate String Matching (Fuzzy Matching)}{agrep}
\aliasA{fuzzy matching}{agrep}{fuzzy matching}
\keyword{character}{agrep}
%
\begin{Description}\relax
Searches for approximate matches to \code{pattern} (the first argument)
within the string \code{x} (the second argument) using the Levenshtein
edit distance.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
agrep(pattern, x, ignore.case = FALSE, value = FALSE,
      max.distance = 0.1, useBytes = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{pattern}] a non-empty character string to be matched (\emph{not}
a regular expression!).  Coerced by \code{as.character} to a string
if possible.
\item[\code{x}] character vector where matches are sought.  Coerced by
\code{as.character} to a character vector if possible.
\item[\code{ignore.case}] if \code{FALSE}, the pattern matching is \emph{case
sensitive} and if \code{TRUE}, case is ignored during matching.
\item[\code{value}] if \code{FALSE}, a vector containing the (integer)
indices of the matches determined is returned and if \code{TRUE}, a
vector containing the matching elements themselves is returned.
\item[\code{max.distance}] Maximum distance allowed for a match.  Expressed
either as integer, or as a fraction of the \emph{pattern} length (will be
replaced by the smallest integer not less than the corresponding
fraction of the pattern length), or a list with possible components
\begin{description}

\item[\code{all}:] maximal (overall) distance
\item[\code{insertions}:] maximum number/fraction of insertions
\item[\code{deletions}:] maximum number/fraction of deletions
\item[\code{substitutions}:] maximum number/fraction of
substitutions

\end{description}

If \code{all} is missing, it is set to 10\%, the other components
default to \code{all}.  The component names can be abbreviated.

\item[\code{useBytes}] logical. in a multibyte locale, should the comparison
be character-by-character (the default) or byte-by-byte.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The Levenshtein edit distance is used as measure of approximateness:
it is the total number of insertions, deletions and substitutions
required to transform one string into another.

As from \R{} 2.10.0 this uses \code{tre} by Ville Laurikari
(\url{http://http://laurikari.net/tre/}), which supports MBCS
character matching much better than the previous version.
\end{Details}
%
\begin{Value}
Either a vector giving the indices of the elements that yielded a
match, or, if \code{value} is \code{TRUE}, the matched elements (after
coercion, preserving names but no other attributes).
\end{Value}
%
\begin{Author}\relax
Original version by David Meyer. Current version by Brian Ripley.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{grep}{grep}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
agrep("lasy", "1 lazy 2")
agrep("lasy", c(" 1 lazy 2", "1 lasy 2"), max = list(sub = 0))
agrep("laysy", c("1 lazy", "1", "1 LAZY"), max = 2)
agrep("laysy", c("1 lazy", "1", "1 LAZY"), max = 2, value = TRUE)
agrep("laysy", c("1 lazy", "1", "1 LAZY"), max = 2, ignore.case = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{all}{Are All Values True?}{all}
\keyword{logic}{all}
%
\begin{Description}\relax
Given a set of logical vectors, are all of the values true?
\end{Description}
%
\begin{Usage}
\begin{verbatim}
all(..., na.rm = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] zero or more logical vectors.  Other objects of zero
length are ignored, and the rest are coerced to logical ignoring
any class.
\item[\code{na.rm}] logical.  If true \code{NA} values are removed before
the result is computed.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function: methods can be defined for it
directly or via the \code{\LinkA{Summary}{S3groupGeneric}} group generic.
For this to work properly, the arguments \code{...} should be
unnamed, and dispatch is on the first argument.

Coercion of types other than integer (raw, double, complex, character,
list) gives a warning as this is often unintentional.
\end{Details}
%
\begin{Value}
The value is a logical vector of length one.

Let \code{x} denote the concatenation of all the logical vectors in
\code{...} (after coercion), after removing \code{NA}s if requested by
\code{na.rm = TRUE}.

The value returned is \code{TRUE} if all of the values in \code{x} are
\code{TRUE} (including if there are no values), and \code{FALSE} if at
least one of the values in \code{x} is \code{FALSE}.  Otherwise the
value is \code{NA} (which can only occur if \code{na.rm = FALSE} and
\code{...} contains no \code{FALSE} values and at least one
\code{NA} value).
\end{Value}
%
\begin{Section}{S4 methods}
This is part of the S4 \code{\LinkA{Summary}{S4groupGeneric}}
group generic.  Methods for it must use the signature
\code{x, ..., na.rm}.
\end{Section}
%
\begin{Note}\relax
That \code{all(logical(0))} is true is a useful convention:
it ensures that
\begin{alltt}
  all(all(x), all(y)) == all(x,y)
  \end{alltt}

even if \code{x} has length zero.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{any}{any}}, the `complement' of \code{all}, and
\code{\LinkA{stopifnot}{stopifnot}(*)} which is an \code{all(*)}
`insurance'.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
range(x <- sort(round(stats::rnorm(10) - 1.2, 1)))
if(all(x < 0)) cat("all x values are negative\n")

all(logical(0))  # true, as all zero of the elements are true.
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{all.equal}{Test if Two Objects are (Nearly) Equal}{all.equal}
\methaliasA{all.equal.character}{all.equal}{all.equal.character}
\methaliasA{all.equal.default}{all.equal}{all.equal.default}
\methaliasA{all.equal.factor}{all.equal}{all.equal.factor}
\methaliasA{all.equal.formula}{all.equal}{all.equal.formula}
\methaliasA{all.equal.language}{all.equal}{all.equal.language}
\methaliasA{all.equal.list}{all.equal}{all.equal.list}
\methaliasA{all.equal.numeric}{all.equal}{all.equal.numeric}
\methaliasA{all.equal.raw}{all.equal}{all.equal.raw}
\aliasA{attr.all.equal}{all.equal}{attr.all.equal}
\keyword{programming}{all.equal}
\keyword{utilities}{all.equal}
\keyword{logic}{all.equal}
\keyword{arith}{all.equal}
%
\begin{Description}\relax
\code{all.equal(x,y)} is a utility to compare \R{} objects \code{x}
and \code{y} testing `near equality'.  If they are different,
comparison is still made to some extent, and a report of the
differences is returned.    Don't use \code{all.equal} directly in
\code{if} expressions---either use \code{isTRUE(all.equal(....))} or
\code{\LinkA{identical}{identical}} if appropriate.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
all.equal(target, current, ...)

## S3 method for class 'numeric':
all.equal(target, current,
          tolerance = .Machine$double.eps ^ 0.5,
          scale = NULL, check.attributes = TRUE, ...)

attr.all.equal(target, current,
               check.attributes = TRUE, check.names = TRUE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{target}] \R{} object.
\item[\code{current}] other \R{} object, to be compared with \code{target}.
\item[\code{...}] Further arguments for different methods, notably the
following two, for numerical comparison:
\item[\code{tolerance}] numeric \eqn{\ge}{} 0.  Differences smaller than
\code{tolerance} are not considered.
\item[\code{scale}] numeric scalar > 0 (or \code{NULL}). See `Details'.
\item[\code{check.attributes}] logical indicating if the
\code{\LinkA{attributes}{attributes}(.)} of \code{target} and \code{current}
should be compared as well.
\item[\code{check.names}] logical indicating if the \code{\LinkA{names}{names}(.)}
of \code{target} and \code{current} should be compared as well (and
separately from the \code{attributes}).
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
There are several methods available, most of which are dispatched by
the default method, see \code{\LinkA{methods}{methods}("all.equal")}.
\code{all.equal.list} and \code{all.equal.language} provide
comparison of recursive objects.

Numerical comparisons for \code{scale = NULL} (the default) are done
by first computing the mean absolute difference of the two numerical
vectors.  If this is smaller than \code{tolerance} or not finite,
absolute differences are used, otherwise relative differences scaled
by the mean absolute difference.

If \code{scale} is positive, absolute comparisons are made after
scaling (dividing) by \code{scale}.

For complex arguments, the modulus \code{\LinkA{Mod}{Mod}} of the difference
is used: \code{all.equal.numeric} is called so arguments
\code{tolerance} and \code{scale} are available.

\code{attr.all.equal} is used for comparing
\code{\LinkA{attributes}{attributes}}, returning \code{NULL} or a
\code{character} vector.
\end{Details}
%
\begin{Value}
Either \code{TRUE} (\code{NULL} for \code{attr.all.equal}) or a vector
of \code{\LinkA{mode}{mode}} \code{"character"} describing the differences
between \code{target} and \code{current}.
\end{Value}
%
\begin{References}\relax
Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer (for \code{=}).
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{identical}{identical}}, \code{\LinkA{isTRUE}{isTRUE}}, \code{\LinkA{==}{==}}, and
\code{\LinkA{all}{all}} for exact equality testing.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
all.equal(pi, 355/113)
# not precise enough (default tol) > relative error

d45 <- pi*(1/4 + 1:10)
stopifnot(
all.equal(tan(d45), rep(1,10)))        # TRUE, but
all      (tan(d45) == rep(1,10))       # FALSE, since not exactly
all.equal(tan(d45), rep(1,10), tol=0)  # to see difference
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{all.names}{Find All Names in an Expression}{all.names}
\aliasA{all.vars}{all.names}{all.vars}
\keyword{programming}{all.names}
%
\begin{Description}\relax
Return a character vector containing all the names which occur in an
expression or call.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
all.names(expr, functions = TRUE, max.names = -1L, unique = FALSE)

all.vars(expr, functions = FALSE, max.names = -1L, unique = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] an expression or call from which the names are to be
extracted.
\item[\code{functions}] a logical value indicating whether function names
should be included in the result.
\item[\code{max.names}] the maximum number of names to be returned.  \code{-1}
indicates no limit (other than vector size limits).
\item[\code{unique}] a logical value which indicates whether duplicate names
should be removed from the value.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These functions differ only in the default values for their
arguments.
\end{Details}
%
\begin{Value}
A character vector with the extracted names.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
all.names(expression(sin(x+y)))
all.vars(expression(sin(x+y)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{any}{Are Some Values True?}{any}
\keyword{logic}{any}
%
\begin{Description}\relax
Given a set of logical vectors, is at least one of the values true?
\end{Description}
%
\begin{Usage}
\begin{verbatim}
any(..., na.rm = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] zero or more logical vectors.  Other objects of zero
length are ignored, and the rest are coerced to logical ignoring
any class.
\item[\code{na.rm}] logical.  If true \code{NA} values are removed before
the result is computed.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function: methods can be defined for it
directly or via the \code{\LinkA{Summary}{S3groupGeneric}} group generic.
For this to work properly, the arguments \code{...} should be
unnamed, and dispatch is on the first argument.

Coercion of types other than integer (raw, double, complex, character,
list) gives a warning as this is often unintentional.
\end{Details}
%
\begin{Value}
The value is a logical vector of length one.

Let \code{x} denote the concatenation of all the logical vectors in
\code{...} (after coercion), after removing \code{NA}s if requested by
\code{na.rm = TRUE}.

The value returned is \code{TRUE} if at least one of the values in
\code{x} is \code{TRUE}, and \code{FALSE} if all of the values in
\code{x} are \code{FALSE} (including if there are no values).  Otherwise
the value is \code{NA} (which can only occur if \code{na.rm = FALSE}
and \code{...} contains no \code{TRUE} values and at least one
\code{NA} value).
\end{Value}
%
\begin{Section}{S4 methods}
This is part of the S4 \code{\LinkA{Summary}{S4groupGeneric}}
group generic.  Methods for it must use the signature
\code{x, ..., na.rm}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{all}{all}}, the `complement' of \code{any}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
range(x <- sort(round(stats::rnorm(10) - 1.2,1)))
if(any(x < 0)) cat("x contains negative values\n")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{aperm}{Array Transposition}{aperm}
\keyword{array}{aperm}
%
\begin{Description}\relax
Transpose an array by permuting its dimensions and optionally resizing
it.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
aperm(a, perm, resize = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{a}] the array to be transposed.
\item[\code{perm}] the subscript permutation vector, which must be a
permutation of the integers \code{1:n}, where \code{n} is the
number of dimensions of \code{a}.  The default is to reverse the
order of the dimensions.
\item[\code{resize}] a flag indicating whether the vector should be
resized as well as having its elements reordered (default \code{TRUE}).
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A transposed version of array \code{a}, with subscripts permuted as
indicated by the array \code{perm}.  If \code{resize} is \code{TRUE},
the array is reshaped as well as having its elements permuted, the
\code{dimnames} are also permuted; if \code{resize = FALSE} then the
returned object has the same dimensions as \code{a}, and the dimnames
are dropped.  In each case other attributes are copied from \code{a}.

The function \code{t} provides a faster and more convenient way of
transposing matrices.
\end{Value}
%
\begin{Author}\relax
Jonathan Rougier, \email{J.C.Rougier@durham.ac.uk} did the
faster C implementation.
\end{Author}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{t}{t}}, to transpose matrices.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# interchange the first two subscripts on a 3-way array x
x  <- array(1:24, 2:4)
xt <- aperm(x, c(2,1,3))
stopifnot(t(xt[,,2]) == x[,,2],
          t(xt[,,3]) == x[,,3],
          t(xt[,,4]) == x[,,4])

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{append}{Vector Merging}{append}
\keyword{manip}{append}
%
\begin{Description}\relax
Add elements to a vector.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
append(x, values, after = length(x))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] the vector to be modified.
\item[\code{values}] to be included in the modified vector.
\item[\code{after}] a subscript, after which the values are to be appended.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A vector containing the values in \code{x} with the elements of
\code{values} appended after the specified element of \code{x}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
append(1:5, 0:1, after=3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{apply}{Apply Functions Over Array Margins}{apply}
\keyword{iteration}{apply}
\keyword{array}{apply}
%
\begin{Description}\relax
Returns a vector or array or list of values obtained by applying a
function to margins of an array.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
apply(X, MARGIN, FUN, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{X}] the array to be used.
\item[\code{MARGIN}] a vector giving the subscripts which the function will
be applied over.
\code{1} indicates rows, \code{2} indicates columns,
\code{c(1,2)} indicates rows and columns.
\item[\code{FUN}] the function to be applied: see `Details'.
In the case of functions like \code{+}, \code{\%*\%}, etc., the
function name must be backquoted or quoted.
\item[\code{...}] optional arguments to \code{FUN}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{X} is not an array but has a dimension attribute,
\code{apply} attempts to coerce it to an array via \code{as.matrix}
if it is two-dimensional (e.g., data frames) or via \code{as.array}.

\code{FUN} is found by a call to \code{\LinkA{match.fun}{match.fun}} and typically
is either a function or a symbol (e.g. a backquoted name) or a
character string specifying a function to be searched for from the 
environment of the call to \code{apply}. 
\end{Details}
%
\begin{Value}
If each call to \code{FUN} returns a vector of length \code{n}, then
\code{apply} returns an array of dimension \code{c(n, dim(X)[MARGIN])}
if \code{n > 1}.  If \code{n} equals \code{1}, \code{apply} returns a
vector if \code{MARGIN} has length 1 and an array of dimension
\code{dim(X)[MARGIN]} otherwise.
If \code{n} is \code{0}, the result has length 0 but not necessarily
the `correct' dimension.

If the calls to \code{FUN} return vectors of different lengths,
\code{apply} returns a list of length \code{prod(dim(X)[MARGIN])} with
\code{dim} set to \code{MARGIN} if this has length greater than one.

In all cases the result is coerced by \code{\LinkA{as.vector}{as.vector}} to one
of the basic vector types before the dimensions are set, so that (for
example) factor results will be coerced to a character array.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{lapply}{lapply}}, \code{\LinkA{tapply}{tapply}}, and convenience functions
\code{\LinkA{sweep}{sweep}} and \code{\LinkA{aggregate}{aggregate}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Compute row and column sums for a matrix:
x <- cbind(x1 = 3, x2 = c(4:1, 2:5))
dimnames(x)[[1]] <- letters[1:8]
apply(x, 2, mean, trim = .2)
col.sums <- apply(x, 2, sum)
row.sums <- apply(x, 1, sum)
rbind(cbind(x, Rtot = row.sums), Ctot = c(col.sums, sum(col.sums)))

stopifnot( apply(x, 2, is.vector))

## Sort the columns of a matrix
apply(x, 2, sort)

##- function with extra args:
cave <- function(x, c1, c2) c(mean(x[c1]), mean(x[c2]))
apply(x,1, cave,  c1="x1", c2=c("x1","x2"))

ma <- matrix(c(1:4, 1, 6:8), nrow = 2)
ma
apply(ma, 1, table)  #--> a list of length 2
apply(ma, 1, stats::quantile)# 5 x n matrix with rownames

stopifnot(dim(ma) == dim(apply(ma, 1:2, sum)))

## Example with different lengths for each call
z <- array(1:24, dim=2:4)
zseq <- apply(z, 1:2, function(x) seq_len(max(x)))
zseq         ## a 2 x 3 matrix
typeof(zseq) ## list
dim(zseq) ## 2 3
zseq[1,]
apply(z, 3, function(x) seq_len(max(x)))
# a list without a dim attribute
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{args}{Argument List of a Function}{args}
\keyword{documentation}{args}
%
\begin{Description}\relax
Displays the argument names and corresponding default values of a
function or primitive.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
args(name)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] a function (a closure or a primitive).
If \code{name} is a character string then the function with that
name is found and used.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function is mainly used interactively to print the argument list
of a function.  For programming, consider using \code{\LinkA{formals}{formals}}
instead.
\end{Details}
%
\begin{Value}
For a closure, a closure with identical formal argument list but an
empty (\code{NULL}) body.

For a primitive, a closure with the documented usage and \code{NULL}
body.  Note that in almost all cases primitives do not make use of
named arguments and match by position rather than name.  (\code{rep}
and \code{seq.int} are exceptions.)

\code{NULL} in case of a non-function.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{formals}{formals}},
\code{\LinkA{help}{help}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
args(c)
args(graphics::plot.default)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Arithmetic}{Arithmetic Operators}{Arithmetic}
\aliasA{\%\%}{Arithmetic}{.Rpcent..Rpcent.}
\aliasA{\%/\%}{Arithmetic}{.Rpcent./.Rpcent.}
\aliasA{*}{Arithmetic}{*}
\aliasA{**}{Arithmetic}{**}
\aliasA{+}{Arithmetic}{+}
\aliasA{-}{Arithmetic}{.Rdash.}
\aliasA{/}{Arithmetic}{/}
\aliasA{\textasciicircum{}}{Arithmetic}{.Rcaret.}
\keyword{arith}{Arithmetic}
%
\begin{Description}\relax
These binary operators perform arithmetic on numeric or complex vectors
(or objects which can be coerced to them).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
x + y
x - y
x * y
x / y
x ^ y
x %% y
x %/% y
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] numeric or complex vectors or objects which can be
coerced to such, or other objects for which methods have been written.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The binary arithmetic operators are generic functions: methods can be
written for them individually or via the
\code{\LinkA{Ops}{S3groupGeneric}} group generic function.  (See
\code{\LinkA{Ops}{S3groupGeneric}} for how dispatch is computed.)

If applied to arrays the result will be an array if this is sensible
(for example it will not if the recycling rule has been invoked).

Logical vectors will be coerced to integer or numeric vectors,
\code{FALSE} having value zero and \code{TRUE} having value one.

\code{1 \textasciicircum{} y} and \code{y \textasciicircum{} 0} are \code{1}, \emph{always}.
\code{x \textasciicircum{} y} should also give the proper limit result when
either argument is infinite (i.e., \code{+- \LinkA{Inf}{Inf}}).

Objects such as arrays or time-series can be operated on this
way provided they are conformable.

For real arguments, \code{\%\%} can be subject to catastrophic loss of
accuracy if \code{x} is much larger than \code{y}, and a warning is
given if this is detected.
\end{Details}
%
\begin{Value}
These operators return vectors containing the result of the element
by element operations.  The elements of shorter vectors are recycled
as necessary (with a \code{\LinkA{warning}{warning}} when they are recycled only
\emph{fractionally}).  The operators are \code{+} for addition,
\code{-} for subtraction, \code{*} for multiplication, \code{/} for
division and \code{\textasciicircum{}} for exponentiation.

\code{\%\%} indicates \code{x mod y} and \code{\%/\%} indicates
integer division.  It is guaranteed that \code{x == (x \%\% y) + y * ( x
    \%/\% y )} (up to rounding error) unless \code{y == 0} where the
result is \code{\LinkA{NA\_integer\_}{NA.Rul.integer.Rul.}} or \code{\LinkA{NaN}{NaN}} (depending on
the \code{\LinkA{typeof}{typeof}} of the arguments).  See
\url{http://en.wikipedia.org/wiki/Modulo_operation} for the
rationale.

If either argument is complex the result will be complex, and if one
or both arguments are numeric, the result will be numeric.  If both
arguments are integer, the result of \code{/} and \code{\textasciicircum{}} is numeric
and of the other operators integer (with overflow returned as
\code{NA} with a warning).

The rules for determining the attributes of the result are rather
complicated.  Most attributes are taken from the longer argument, the
first if they are of the same length.  Names will be copied from the
first if it is the same length as the answer, otherwise from the
second if that is.  For time series, these operations are allowed only
if the series are compatible, when the class and \code{\LinkA{tsp}{tsp}}
attribute of whichever is a time series (the same, if both are) are
used.  For arrays (and an array result) the dimensions and dimnames
are taken from first argument if it is an array, otherwise the second.
\end{Value}
%
\begin{Section}{S4 methods}
These operators are members of the S4 \code{\LinkA{Arith}{Arith}} group generic,
and so methods can be written for them individually as well as for the
group generic (or the \code{Ops} group generic), with arguments
\code{c(e1, e2)}.
\end{Section}
%
\begin{Note}\relax
\code{**} is translated in the parser to \code{\textasciicircum{}}, but this was
undocumented for many years.  It appears as an index entry in Becker
\emph{et al} (1988), pointing to the help for \code{Deprecated} but
is not actually mentioned on that page.  Even though it has been
deprecated in S for 20 years, it is still accepted.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{sqrt}{sqrt}} for miscellaneous and \code{\LinkA{Special}{Special}} for special
mathematical functions.

\code{\LinkA{Syntax}{Syntax}} for operator precedence.

\code{\LinkA{\Rpercent{}*\Rpercent{}}{.Rpcent.*.Rpcent.}} for matrix multiplication.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- -1:12
x + 1
2 * x + 3
x %% 2 #-- is periodic
x %/% 5
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{array}{Multi-way Arrays}{array}
\aliasA{as.array}{array}{as.array}
\methaliasA{as.array.default}{array}{as.array.default}
\aliasA{is.array}{array}{is.array}
\keyword{array}{array}
%
\begin{Description}\relax
Creates or tests for arrays.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
array(data = NA, dim = length(data), dimnames = NULL)
as.array(x, ...)
is.array(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{data}] a vector (including a list) giving data to fill the array.
\item[\code{dim}] the dim attribute for the array to be created, that is a
vector of length one or more giving the maximal indices in
each dimension.
\item[\code{dimnames}] either \code{NULL} or the names for the
dimensions. This is a list with one component for each dimension,
either \code{NULL} or a character vector of the length given by
\code{dim} for that dimension.  The list can be named, and the list names
will be used as names for the dimensions.  If the list is shorter
than the number of dimensions, it is extended by \code{NULL}s to the
length required
\item[\code{x}] an \R{} object.
\item[\code{...}] additional arguments to be passed to or from methods.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
\code{array} returns an array with the extents specified in \code{dim}
and naming information in \code{dimnames}.  The values in \code{data} are
taken to be those in the array with the leftmost subscript moving
fastest.  If there are too few elements in \code{data} to fill the array,
then the elements in \code{data} are recycled.  If \code{data} has
length zero, \code{NA} of an appropriate type is used for atomic
vectors (\code{0} for raw vectors) and \code{NULL} for lists.

\code{as.array} is a generic function for coercing to arrays.  The
default method does so by attaching a \code{\LinkA{dim}{dim}} attribute to
it.  It also attaches \code{\LinkA{dimnames}{dimnames}} if \code{x} has
\code{\LinkA{names}{names}}.  The sole purpose of this is to make it possible
to access the \code{dim}[names] attribute at a later time.

\code{is.array} returns \code{TRUE} or \code{FALSE} depending on
whether its argument is an array (i.e., has a \code{dim} attribute of
positive length) or not.  It is generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods}.
\end{Value}
%
\begin{Note}\relax
\code{is.array} is a \LinkA{primitive}{primitive} function so any argument name is
ignored.  
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{aperm}{aperm}}, \code{\LinkA{matrix}{matrix}},
\code{\LinkA{dim}{dim}}, \code{\LinkA{dimnames}{dimnames}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
dim(as.array(letters))
array(1:3, c(2,4)) # recycle 1:3 "2 2/3 times"
#     [,1] [,2] [,3] [,4]
#[1,]    1    3    2    1
#[2,]    2    1    3    2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{as.data.frame}{Coerce to a Data Frame}{as.data.frame}
\methaliasA{as.data.frame.array}{as.data.frame}{as.data.frame.array}
\methaliasA{as.data.frame.AsIs}{as.data.frame}{as.data.frame.AsIs}
\methaliasA{as.data.frame.character}{as.data.frame}{as.data.frame.character}
\methaliasA{as.data.frame.complex}{as.data.frame}{as.data.frame.complex}
\methaliasA{as.data.frame.data.frame}{as.data.frame}{as.data.frame.data.frame}
\methaliasA{as.data.frame.default}{as.data.frame}{as.data.frame.default}
\methaliasA{as.data.frame.difftime}{as.data.frame}{as.data.frame.difftime}
\methaliasA{as.data.frame.factor}{as.data.frame}{as.data.frame.factor}
\methaliasA{as.data.frame.integer}{as.data.frame}{as.data.frame.integer}
\methaliasA{as.data.frame.list}{as.data.frame}{as.data.frame.list}
\methaliasA{as.data.frame.logical}{as.data.frame}{as.data.frame.logical}
\methaliasA{as.data.frame.matrix}{as.data.frame}{as.data.frame.matrix}
\methaliasA{as.data.frame.model.matrix}{as.data.frame}{as.data.frame.model.matrix}
\methaliasA{as.data.frame.numeric}{as.data.frame}{as.data.frame.numeric}
\methaliasA{as.data.frame.ordered}{as.data.frame}{as.data.frame.ordered}
\methaliasA{as.data.frame.raw}{as.data.frame}{as.data.frame.raw}
\methaliasA{as.data.frame.ts}{as.data.frame}{as.data.frame.ts}
\methaliasA{as.data.frame.vector}{as.data.frame}{as.data.frame.vector}
\aliasA{is.data.frame}{as.data.frame}{is.data.frame}
\keyword{classes}{as.data.frame}
\keyword{methods}{as.data.frame}
%
\begin{Description}\relax
Functions to check if an object is a data frame, or coerce it if possible.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.data.frame(x, row.names = NULL, optional = FALSE, ...)

## S3 method for class 'character':
as.data.frame(x, ...,
              stringsAsFactors = default.stringsAsFactors())

## S3 method for class 'matrix':
as.data.frame(x, row.names = NULL, optional = FALSE, ..., 
              stringsAsFactors = default.stringsAsFactors())

is.data.frame(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] any \R{} object.
\item[\code{row.names}] \code{NULL} or a character vector giving the row
names for the data frame.  Missing values are not allowed.
\item[\code{optional}] logical. If \code{TRUE}, setting row names and
converting column names (to syntactic names: see
\code{\LinkA{make.names}{make.names}}) is optional.
\item[\code{...}] additional arguments to be passed to or from methods.
\item[\code{stringsAsFactors}] logical: should the character vector be converted
to a factor?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{as.data.frame} is a generic function with many methods, and
users and packages can supply further methods.

If a list is supplied, each element is converted to a column in the
data frame.  Similarly, each column of a matrix is converted separately.
This can be overridden if the object has a class which has
a method for \code{as.data.frame}: two examples are
matrices of class \code{"\LinkA{model.matrix}{model.matrix}"} (which are
included as a single column) and list objects of class
\code{"\LinkA{POSIXlt}{POSIXlt}"} which are coerced to class
\code{"\LinkA{POSIXct}{POSIXct}"}.

Arrays can be converted to data frames.  One-dimensional arrays are
treated like vectors and two-dimensional arrays like matrices.  Arrays
with more than two dimensions are converted to matrices by
`flattening' all dimensions after the first and creating
suitable column labels.

Character variables are converted to factor columns unless protected
by \code{\LinkA{I}{I}}.

If a data frame is supplied, all classes preceding \code{"data.frame"}
are stripped, and the row names are changed if that argument is supplied.

If \code{row.names = NULL}, row names are constructed from the names
or dimnames of \code{x}, otherwise are the integer sequence
starting at one.  Few of the methods check for duplicated row names.
Names are removed from vector columns unless \code{\LinkA{I}{I}}.
\end{Details}
%
\begin{Value}
\code{as.data.frame} returns a data frame, normally with all row names
\code{""} if \code{optional = TRUE}.

\code{is.data.frame} returns \code{TRUE} if its argument is a data
frame (that is, has \code{"data.frame"} amongst its classes)
and \code{FALSE} otherwise.
\end{Value}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Data for models.}
Chapter 3 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{data.frame}{data.frame}}, \code{\LinkA{as.data.frame.table}{as.data.frame.table}} for the
\code{table} method (which has additional arguments if called directly).
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{as.environment}{Coerce to an Environment Object}{as.environment}
\keyword{data}{as.environment}
\keyword{environment}{as.environment}
%
\begin{Description}\relax
Converts a number or a character string to the corresponding
environment on the search path.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.environment(object)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] the object to convert.  If it is already an
environment, just return it.  If it is a number, return the
environment corresponding to that position on the search list.  If
it is a character string, match the string to the names on the
search list.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
The corresponding environment object.
\end{Value}
%
\begin{Note}\relax
This is a \LinkA{primitive}{primitive} function.
\end{Note}
%
\begin{Author}\relax
 John Chambers 
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{environment}{environment}} for creation and manipulation,
\code{\LinkA{search}{search}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
as.environment(1) ## the global environment
identical(globalenv(), as.environment(1)) ## is TRUE
try(as.environment("package:stats"))      ## stats need not be loaded
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{as.function}{Convert Object to Function}{as.function}
\methaliasA{as.function.default}{as.function}{as.function.default}
\keyword{programming}{as.function}
%
\begin{Description}\relax
\code{as.function} is a generic function which is used to convert
objects to functions.

\code{as.function.default} works on a list \code{x}, which should contain the
concatenation of a formal argument list and an expression or an
object of mode \code{"\LinkA{call}{call}"} which will become the function body.
The function will be defined in a specified environment, by default
that of the caller.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.function(x, ...)

## Default S3 method:
as.function(x, envir = parent.frame(), ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to convert, a list for the default method.
\item[\code{...}] additional arguments, depending on object

\item[\code{envir}] environment in which the function should be defined
\end{ldescription}
\end{Arguments}
%
\begin{Value}
The desired function.
\end{Value}
%
\begin{Note}\relax
For ancient historical reasons, \code{envir = NULL} uses the global
environment rather than the base environment.  
Please use \code{envir = \LinkA{globalenv}{globalenv}()} instead if this is what you want,
as the special handling of \code{NULL} may change in a future release.
\end{Note}
%
\begin{Author}\relax
Peter Dalgaard
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{function}{function}};
\code{\LinkA{alist}{alist}} which is handy for the construction of
argument lists, etc.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
as.function(alist(a=,b=2,a+b))
as.function(alist(a=,b=2,a+b))(3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{as.POSIX*}{Date-time Conversion Functions}{as.POSIX*}
\aliasA{as.double.POSIXlt}{as.POSIX*}{as.double.POSIXlt}
\aliasA{as.POSIXct}{as.POSIX*}{as.POSIXct}
\methaliasA{as.POSIXct.Date}{as.POSIX*}{as.POSIXct.Date}
\methaliasA{as.POSIXct.date}{as.POSIX*}{as.POSIXct.date}
\methaliasA{as.POSIXct.dates}{as.POSIX*}{as.POSIXct.dates}
\methaliasA{as.POSIXct.default}{as.POSIX*}{as.POSIXct.default}
\methaliasA{as.POSIXct.numeric}{as.POSIX*}{as.POSIXct.numeric}
\methaliasA{as.POSIXct.POSIXlt}{as.POSIX*}{as.POSIXct.POSIXlt}
\aliasA{as.POSIXlt}{as.POSIX*}{as.POSIXlt}
\methaliasA{as.POSIXlt.character}{as.POSIX*}{as.POSIXlt.character}
\methaliasA{as.POSIXlt.Date}{as.POSIX*}{as.POSIXlt.Date}
\methaliasA{as.POSIXlt.date}{as.POSIX*}{as.POSIXlt.date}
\methaliasA{as.POSIXlt.dates}{as.POSIX*}{as.POSIXlt.dates}
\methaliasA{as.POSIXlt.default}{as.POSIX*}{as.POSIXlt.default}
\methaliasA{as.POSIXlt.factor}{as.POSIX*}{as.POSIXlt.factor}
\methaliasA{as.POSIXlt.numeric}{as.POSIX*}{as.POSIXlt.numeric}
\methaliasA{as.POSIXlt.POSIXct}{as.POSIX*}{as.POSIXlt.POSIXct}
\keyword{utilities}{as.POSIX*}
\keyword{chron}{as.POSIX*}
%
\begin{Description}\relax
Functions to manipulate objects of classes \code{"POSIXlt"} and
\code{"POSIXct"} representing calendar dates and times.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.POSIXct(x, tz = "", ...)
as.POSIXlt(x, tz = "", ...)

## S3 method for class 'character':
as.POSIXlt(x, tz = "", format, ...)

## S3 method for class 'numeric':
as.POSIXlt(x, tz = "", origin, ...)

## S3 method for class 'POSIXlt':
as.double(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An object to be converted.
\item[\code{tz}] A timezone specification to be used for the conversion,
\emph{if one is required}.  System-specific (see \LinkA{time zones}{time zones}),
but \code{""} is the current timezone, and \code{"GMT"} is UTC
(Universal Time, Coordinated).
\item[\code{...}] further arguments to be passed to or from other methods.
\item[\code{format}] character string giving a date-time format as used
by \code{\LinkA{strptime}{strptime}}.
\item[\code{origin}] a date-time object, or something which can be coerced by
\code{as.POSIXct(tz="GMT")} to such an object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{as.POSIX*} functions convert an object to one of the two
classes used to represent date/times (calendar dates plus time to the
nearest second).  They can convert a wide variety of objects,
including objects of the other class and of classes \code{"Date"},
\code{"date"} (from package \pkg{\LinkA{date}{date}}),
\code{"chron"} and \code{"dates"} (from package
\pkg{\LinkA{chron}{chron}}) to these classes.  Dates without times are
treated as being at midnight UTC.

They can also convert character strings of the formats
\code{"2001-02-03"} and \code{"2001/02/03"} optionally followed by
white space and a time in the format \code{"14:52"} or
\code{"14:52:03"}.  (Formats such as \code{"01/02/03"} are ambiguous
but can be converted via a format specification by
\code{\LinkA{strptime}{strptime}}.)  Fractional seconds are allowed.
Alternatively, \code{format} can be specified for character vectors or
factors: if it is not specified and no standard format works for the
first non-\code{NA} input an error is thrown.

Logical \code{NA}s can be converted to either of the classes, but no
other logical vectors can be.

The \code{as.double} method converts \code{"POSIXlt"} objects to
\code{"POSIXct"}.

If you are given a numeric time as the number of seconds since an
epoch, see the examples.
\end{Details}
%
\begin{Value}
\code{as.POSIXct} and \code{as.POSIXlt} return an object of the
appropriate class.  If \code{tz} was specified, \code{as.POSIXlt}
will give an appropriate \code{"tzone"} attribute.
\end{Value}
%
\begin{Note}\relax
If you want to extract specific aspects of a time (such as the day of
the week) just convert it to class \code{"POSIXlt"} and extract the
relevant component(s) of the list, or if you want a character
representation (such as a named day of the week) use
\code{\LinkA{format.POSIXlt}{format.POSIXlt}} or \code{\LinkA{format.POSIXct}{format.POSIXct}}.

If a timezone is needed and that specified is invalid on your system,
what happens is system-specific but it will probably be ignored.
\end{Note}
%
\begin{SeeAlso}\relax
\LinkA{DateTimeClasses}{DateTimeClasses} for details of the classes;
\code{\LinkA{strptime}{strptime}} for conversion to and from character
representations. \code{\LinkA{Sys.timezone}{Sys.timezone}} for details of the
(system-specific)naming of time zones.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(z <- Sys.time())             # the current datetime, as class "POSIXct"
unclass(z)                    # a large integer
floor(unclass(z)/86400)       # the number of days since 1970-01-01
(z <- as.POSIXlt(Sys.time())) # the current datetime, as class "POSIXlt"
unlist(unclass(z))            # a list shown as a named vector

## suppose we have a time in seconds since 1960-01-01 00:00:00 GMT
z <- 1472562988
# ways to convert this
as.POSIXct(z, origin="1960-01-01")                # local
as.POSIXct(z, origin="1960-01-01", tz="GMT")      # in UTC
as.POSIXct(z, origin=ISOdatetime(1960,1,1,0,0,0)) # local
ISOdatetime(1960,1,1,0,0,0) + z                   # local

## SPSS dates (R-help 2006-02-16)
z <- c(10485849600, 10477641600, 10561104000, 10562745600)
as.Date(as.POSIXct(z, origin="1582-10-14", tz="GMT"))

as.POSIXlt(Sys.time(), "GMT") # the current time in UTC
## Not run: ## These may not be correct names on your system
as.POSIXlt(Sys.time(), "America/New_York")  # in New York
as.POSIXlt(Sys.time(), "EST5EDT")           # alternative.
as.POSIXlt(Sys.time(), "EST" )   # somewhere in Eastern Canada
as.POSIXlt(Sys.time(), "HST")    # in Hawaii
as.POSIXlt(Sys.time(), "Australia/Darwin")

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{AsIs}{Inhibit Interpretation/Conversion of Objects}{AsIs}
\aliasA{I}{AsIs}{I}
\aliasA{print.AsIs}{AsIs}{print.AsIs}
\aliasA{[.AsIs}{AsIs}{[.AsIs}
\keyword{models}{AsIs}
%
\begin{Description}\relax
Change the class of an object to indicate that it should be treated
`as is'.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
I(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Function \code{I} has two main uses.
\begin{itemize}

\item In function \code{\LinkA{data.frame}{data.frame}}.  Protecting an object by
enclosing it in \code{I()} in a call to \code{data.frame} inhibits the
conversion of character vectors to factors and the dropping of
names, and ensures that matrices are inserted as single columns.
\code{I} can also be used to protect objects which are to be
added to a data frame, or converted to a data frame \emph{via}
\code{\LinkA{as.data.frame}{as.data.frame}}.

It achieves this by prepending the class \code{"AsIs"} to the object's
classes.  Class \code{"AsIs"} has a few of its own methods, including
for \code{[}, \code{as.data.frame}, \code{print} and \code{format}.

\item In function \code{\LinkA{formula}{formula}}.  There it is used to
inhibit the interpretation of  operators such as \code{"+"},
\code{"-"}, \code{"*"} and \code{"\textasciicircum{}"} as formula operators, so they
are used as arithmetical operators.  This is interpreted as a symbol
by \code{terms.formula}.

\end{itemize}

\end{Details}
%
\begin{Value}
A copy of the object with class \code{"AsIs"} prepended to the class(es).
\end{Value}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Linear models.}
Chapter 4 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{data.frame}{data.frame}}, \code{\LinkA{formula}{formula}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{assign}{Assign a Value to a Name}{assign}
\keyword{data}{assign}
%
\begin{Description}\relax
Assign a value to a name in an environment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
assign(x, value, pos = -1, envir = as.environment(pos),
       inherits = FALSE, immediate = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a variable name, given as a character string.  No coercion is
done, and the first element of a character vector of length greater
than one will be used, with a warning.
\item[\code{value}] a value to be assigned to \code{x}.
\item[\code{pos}] where to do the assignment.  By default, assigns into the
current environment.  See the details for other possibilities.
\item[\code{envir}] the \code{\LinkA{environment}{environment}} to use. See the details section.
\item[\code{inherits}] should the enclosing frames of the environment be
inspected?
\item[\code{immediate}] an ignored compatibility feature.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
There are no restrictions on \code{name}: it can be a non-syntactic
name (see \code{\LinkA{make.names}{make.names}}).

The \code{pos} argument can specify the  environment in which to assign
the object in any of several ways:
as an integer (the position in the \code{\LinkA{search}{search}} list); as
the character string name of an element in the search list; or as an
\code{\LinkA{environment}{environment}} (including using \code{\LinkA{sys.frame}{sys.frame}} to
access the currently active function calls).
The \code{envir} argument is an alternative way to specify an
environment, but is primarily there for back compatibility.

\code{assign} does not dispatch assignment methods, so it cannot be
used to set elements of vectors, names, attributes, etc.

Note that assignment to an attached list or data frame changes the
attached copy and not the original object: see \code{\LinkA{attach}{attach}}
and \code{\LinkA{with}{with}}.
\end{Details}
%
\begin{Value}
This function is invoked for its side effect, which is assigning
\code{value} to the variable \code{x}.  If no \code{envir} is
specified, then the assignment takes place in the currently active
environment.

If \code{inherits} is \code{TRUE}, enclosing environments of the supplied
environment are searched until the variable \code{x} is encountered.
The value is then assigned in the environment in which the variable is
encountered (provided that the binding is not locked: see
\code{\LinkA{lockBinding}{lockBinding}}: if it is, an error is signaled).  If the
symbol is not encountered then assignment takes place in the user's
workspace (the global environment).

If \code{inherits} is \code{FALSE}, assignment takes place in the
initial frame of \code{envir}, unless an existing binding is locked or
there is no existing binding and the environment is locked.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{<-}{<.Rdash.}},
\code{\LinkA{get}{get}},
\code{\LinkA{exists}{exists}},
\code{\LinkA{environment}{environment}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
for(i in 1:6) { #-- Create objects  'r.1', 'r.2', ... 'r.6' --
 nam <- paste("r",i, sep=".")
 assign(nam, 1:i)
}
ls(pattern = "^r..$")

##-- Global assignment within a function:
myf <- function(x) {
 innerf <- function(x) assign("Global.res", x^2, envir = .GlobalEnv)
 innerf(x+1)
}
myf(3)
Global.res # 16

a <- 1:4
assign("a[1]", 2)
a[1] == 2          #FALSE
get("a[1]") == 2   #TRUE

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{assignOps}{Assignment Operators}{assignOps}
\aliasA{->}{assignOps}{.Rdash.>}
\aliasA{->>}{assignOps}{.Rdash.>>}
\aliasA{<\Rdash}{assignOps}{<.Rdash.}
\aliasA{<<\Rdash}{assignOps}{<<.Rdash.}
\aliasA{=}{assignOps}{=}
\keyword{data}{assignOps}
%
\begin{Description}\relax
Assign a value to a name.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
x <- value
x <<- value
value -> x
value ->> x

x = value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a variable name (possibly quoted).
\item[\code{value}] a value to be assigned to \code{x}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
There are three different assignment operators: two of them
have leftwards and rightwards forms.

The operators \code{<-} and \code{=} assign into the environment in
which they are evaluated.  The  operator \code{<-} can be used
anywhere, whereas the operator \code{=} is only allowed at the top
level (e.g., in the complete expression typed at the command prompt)
or as one of the subexpressions in a braced list of expressions.

The operators \code{<{}<-} and \code{->{}>} cause a search to made through
the environment for an existing definition of the variable being
assigned.  If such a variable is found (and its binding is not locked)
then its value is redefined, otherwise assignment takes place in the
global environment.  Note that their semantics differ from that in the
S language, but are useful in conjunction with the scoping rules of
\R{}.  See `The R Language Definition' manual for further details
and examples.

In all the assignment operator expressions, \code{x} can be a name
or an expression defining a part of an object to be replaced (e.g.,
\code{z[[1]]}).  A syntactic name does not need to be quoted,
though it can be (preferably by \LinkA{backtick}{backtick}s).

The leftwards forms of assignment \code{<- = <{}<-} group right to left,
the other from left to right.
\end{Details}
%
\begin{Value}
\code{value}.  Thus one can use \code{a <- b <- c <- 6}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Chamber, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer (for \code{=}).
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{assign}{assign}},
\code{\LinkA{environment}{environment}}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{attach}{Attach Set of R Objects to Search Path}{attach}
\keyword{data}{attach}
%
\begin{Description}\relax
The database is attached to the \R{} search path.  This means that the
database is searched by \R{} when evaluating a variable, so objects in
the database can be accessed by simply giving their names.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
attach(what, pos = 2, name = deparse(substitute(what)),
       warn.conflicts = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{what}] `database'.  This can be a
\code{data.frame} or a \code{list} or a \R{} data file created with
\code{\LinkA{save}{save}} or \code{NULL} or an environment.  See also
`Details'.
\item[\code{pos}] integer specifying position in \code{\LinkA{search}{search}()} where
to attach.
\item[\code{name}] name to use for the attached database.
\item[\code{warn.conflicts}] logical.  If \code{TRUE}, warnings are
printed about \code{\LinkA{conflicts}{conflicts}} from attaching the database,
unless that database contains an object \code{.conflicts.OK}.  A
conflict is a function masking a function, or a non-function masking
a non-function.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
When evaluating a variable or function name \R{} searches for
that name in the databases listed by \code{\LinkA{search}{search}}.  The first
name of the appropriate type is used.

By attaching a data frame (or list) to the search path it is possible
to refer to the variables in the data frame by their names alone,
rather than as components of the data frame (e.g. in the example below,
\code{height} rather than \code{women\$height}).

By default the database is attached in position 2 in the search path,
immediately after the user's workspace and before all previously
loaded packages and previously attached databases.  This can be altered
to attach later in the search path with the \code{pos} option, but you
cannot attach at \code{pos=1}.

The database is not actually attached.  Rather, a new environment is
created on the search path and the elements of a list (including
columns of a data frame) or objects in a save file or an environment
are \emph{copied} into the new environment.  If you use
\code{\LinkA{<{}<-}{<<.Rdash.}} or \code{\LinkA{assign}{assign}} to assign to an attached
database, you only alter the attached copy, not the original object.
(Normal assignment will place a modified version in the user's
workspace: see the examples.)
For this reason \code{attach} can lead to confusion.

One useful `trick' is to use \code{what = NULL} (or equivalently a
length-zero list) to create a new environment on the search path into
which objects can be assigned by \code{\LinkA{assign}{assign}} or
\code{\LinkA{load}{load}} or \code{\LinkA{sys.source}{sys.source}}.

Names starting \code{"package:"} are reserved for
\code{\LinkA{library}{library}} and should not be used by end users.  The name
given for the attached environment will be used by \code{\LinkA{search}{search}}
and can be used as the argument to \code{\LinkA{as.environment}{as.environment}}.

There are hooks to attach user-defined table objects of class
\code{"UserDefinedDatabase"}, supported by the Omegahat package
\pkg{RObjectTables}.  See \url{http://www.omegahat.org/RObjectTables/}.
\end{Details}
%
\begin{Value}
The \code{\LinkA{environment}{environment}} is returned invisibly with a
\code{"name"} attribute.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{library}{library}}, \code{\LinkA{detach}{detach}}, \code{\LinkA{search}{search}},
\code{\LinkA{objects}{objects}}, \code{\LinkA{environment}{environment}}, \code{\LinkA{with}{with}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(utils)

summary(women$height)   # refers to variable 'height' in the data frame
attach(women)
summary(height)         # The same variable now available by name
height <- height*2.54   # Don't do this. It creates a new variable
                        # in the user's workspace
find("height")
summary(height)         # The new variable in the workspace
rm(height)
summary(height)         # The original variable.
height <<- height*25.4  # Change the copy in the attached environment
find("height")
summary(height)         # The changed copy
detach("women")
summary(women$height)   # unchanged

## Not run: ## create an environment on the search path and populate it
sys.source("myfuns.R", envir=attach(NULL, name="myfuns"))

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{attr}{Object Attributes}{attr}
\aliasA{attr<\Rdash}{attr}{attr<.Rdash.}
\keyword{attribute}{attr}
%
\begin{Description}\relax
Get or set specific attributes of an object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
attr(x, which, exact = FALSE)
attr(x, which) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object whose attributes are to be accessed.
\item[\code{which}] a non-empty character string specifying which attribute
is to be accessed.
\item[\code{exact}] logical: should \code{which} be matched exactly?
\item[\code{value}] an object, the new value of the attribute, or \code{NULL}
to remove the attribute.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These functions provide access to a single attribute of an object.
The replacement form causes the named attribute to take the value
specified (or create a new attribute with the value given).

The extraction function first looks for an exact match to \code{which}
amongst the attributes of \code{x}, then (unless \code{exact = TRUE})
a unique partial match.
(Setting \code{\LinkA{options}{options}(warnPartialMatchAttr=TRUE)} causes
partial matches to give warnings.)

The replacement function only uses exact matches.

Note that some attributes (namely \code{\LinkA{class}{class}},
\code{\LinkA{comment}{comment}}, \code{\LinkA{dim}{dim}}, \code{\LinkA{dimnames}{dimnames}},
\code{\LinkA{names}{names}}, \code{\LinkA{row.names}{row.names}} and
\code{\LinkA{tsp}{tsp}}) are treated specially and have restrictions on
the values which can be set. (Note that this is not true of
\code{\LinkA{levels}{levels}} which should be set for factors via the
\code{levels} replacement function.)

The extractor function allows (and does not match) empty and missing
values of \code{which}: the replacement function does not.

These functions are \LinkA{primitive}{primitive}, so argument names are ignored.  
\end{Details}
%
\begin{Value}
For the extractor, the value of the attribute matched, or \code{NULL}
if no exact match is found and no or more than one partial match is found.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{attributes}{attributes}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# create a 2 by 5 matrix
x <- 1:10
attr(x,"dim") <- c(2, 5)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{attributes}{Object Attribute Lists}{attributes}
\aliasA{attributes<\Rdash}{attributes}{attributes<.Rdash.}
\aliasA{mostattributes<\Rdash}{attributes}{mostattributes<.Rdash.}
\keyword{attribute}{attributes}
%
\begin{Description}\relax
These functions access an object's attributes.
The first form below returns the object's attribute list.
The replacement forms uses the list on the right-hand
side of the assignment as the object's attributes (if appropriate).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
attributes(obj)
attributes(obj) <- value
mostattributes(obj) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{obj}] an object
\item[\code{value}] an appropriate named list of attributes, or \code{NULL}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Unlike \code{\LinkA{attr}{attr}} it is possible to set attributes on a
\code{NULL} object: it will first be coerced to an empty list.

Note that some attributes (namely \code{\LinkA{class}{class}},
\code{\LinkA{comment}{comment}}, \code{\LinkA{dim}{dim}}, \code{\LinkA{dimnames}{dimnames}},
\code{\LinkA{names}{names}}, \code{\LinkA{row.names}{row.names}} and
\code{\LinkA{tsp}{tsp}}) are treated specially and have restrictions on
the values which can be set.  (Note that this is not true of
\code{\LinkA{levels}{levels}} which should be set for factors via the
\code{levels} replacement function.)

Attributes are not stored internally as a list and should be thought
of as a set and not a vector.  They must have unique
names (and \code{NA} is taken as \code{"NA"}, not a missing value).

Assigning attributes first removes all attributes, then sets any
\code{dim} attribute and then the remaining attributes in the order
given: this ensures that setting a \code{dim} attribute always precedes
the \code{dimnames} attribute.

The \code{mostattributes} assignment takes special care for the
\code{\LinkA{dim}{dim}}, \code{\LinkA{names}{names}} and \code{\LinkA{dimnames}{dimnames}}
attributes, and assigns them only when valid whereas an
\code{attributes} assignment would give an error if any are not.

The names of a pairlist are not stored as attributes, but are reported
as if they were (and can be set by the replacement method for attributes).

These functions are \LinkA{primitive}{primitive}, so argument names are ignored.  
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{attr}{attr}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- cbind(a=1:3, pi=pi) # simple matrix w/ dimnames
attributes(x)

## strip an object's attributes:
attributes(x) <- NULL
x # now just a vector of length 6

mostattributes(x) <- list(mycomment = "really special", dim = 3:2,
   dimnames = list(LETTERS[1:3], letters[1:5]), names = paste(1:6))
x # dim(), but not {dim}names
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{autoload}{On-demand Loading of Packages}{autoload}
\aliasA{.Autoloaded}{autoload}{.Autoloaded}
\aliasA{.AutoloadEnv}{autoload}{.AutoloadEnv}
\aliasA{autoloader}{autoload}{autoloader}
\aliasA{Autoloads}{autoload}{Autoloads}
\keyword{data}{autoload}
\keyword{programming}{autoload}
%
\begin{Description}\relax
\code{autoload} creates a promise-to-evaluate \code{autoloader} and
stores it with name \code{name} in \code{.AutoloadEnv} environment.
When \R{} attempts to evaluate \code{name}, \code{autoloader} is run,
the package is loaded and \code{name} is re-evaluated in the new
package's environment.  The result is that \R{} behaves as if
\code{file} was loaded but it does not occupy memory.

\code{.Autoloaded} contains the names of the packages for
which autoloading has been promised.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
autoload(name, package, reset = FALSE, ...)
autoloader(name, package, ...)

.AutoloadEnv
.Autoloaded
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] string giving the name of an object.
\item[\code{package}] string giving the name of a package containing the object.
\item[\code{reset}] logical: for internal use by \code{autoloader}.
\item[\code{...}] other arguments to \code{\LinkA{library}{library}}.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
This function is invoked for its side-effect.  It has no return value.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{delayedAssign}{delayedAssign}}, \code{\LinkA{library}{library}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
autoload("interpSpline", "splines")
search()
ls("Autoloads")
.Autoloaded

x <- sort(stats::rnorm(12))
y <- x^2
is <- interpSpline(x,y)
search() ## now has splines
detach("package:splines")
search()
is2 <- interpSpline(x,y+x)
search() ## and again
detach("package:splines")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{backsolve}{Solve an Upper or Lower Triangular System}{backsolve}
\aliasA{forwardsolve}{backsolve}{forwardsolve}
\keyword{algebra}{backsolve}
\keyword{array}{backsolve}
%
\begin{Description}\relax
Solves a system of linear equations where the coefficient matrix is
upper (or `right', `R') or lower (`left',
`L') triangular.\\{} 

\code{x <- backsolve   (R, b)} solves \eqn{R x = b}{}, and\\{}
\code{x <- forwardsolve(L, b)} solves \eqn{L x = b}{}, respectively.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
   backsolve(r, x, k=ncol(r), upper.tri=TRUE, transpose=FALSE)
forwardsolve(l, x, k=ncol(l), upper.tri=FALSE, transpose=FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{r,l}] an upper (or lower) triangular matrix giving the
coefficients for the system to be solved.  Values below (above)
the diagonal are ignored.
\item[\code{x}] a matrix whose columns give the right-hand sides for
the equations.
\item[\code{k}] The number of columns of \code{r} and rows of \code{x} to use.
\item[\code{upper.tri}] logical; if \code{TRUE} (default), the \emph{upper}
\emph{tri}angular part of \code{r} is used.  Otherwise, the lower one.
\item[\code{transpose}] logical; if \code{TRUE}, solve \eqn{r' * y = x}{} for
\eqn{y}{}, i.e., \code{t(r) \%*\% y == x}.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
The solution of the triangular system.  The result will be a vector if
\code{x} is a vector and a matrix if \code{x} is a matrix.

Note that \code{forwardsolve(L, b)} is just a wrapper for
\code{backsolve(L, b, upper.tri=FALSE)}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Dongarra, J. J., Bunch,J. R.,  Moler, C. B. and  Stewart, G. W. (1978)
\emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{chol}{chol}},
\code{\LinkA{qr}{qr}},
\code{\LinkA{solve}{solve}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## upper triangular matrix 'r':
r <- rbind(c(1,2,3),
           c(0,1,1),
           c(0,0,2))
( y <- backsolve(r, x <- c(8,4,2)) ) # -1 3 1
r %*% y # == x = (8,4,2)
backsolve(r, x, transpose = TRUE) # 8 -12 -5
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{base-deprecated}{Deprecated Functions in Base package}{base.Rdash.deprecated}
\aliasA{Sys.putenv}{base-deprecated}{Sys.putenv}
\keyword{misc}{base-deprecated}
%
\begin{Description}\relax
These functions are provided for compatibility with older versions of
\R{} only, and may be defunct as soon as the next release.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.putenv(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] named arguments with values coercible to a character string.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The original help page for these functions is often
available at \code{help("oldName-deprecated")} (note the quotes).
Functions in packages other than the base package are listed in
\code{help("pkg-deprecated")}.

\code{Sys.putenv} is a deprecated synonym for
\code{\LinkA{Sys.setenv}{Sys.setenv}}.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{Deprecated}{Deprecated}}, \code{\LinkA{base-defunct}{base.Rdash.defunct}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{basename}{Manipulate File Paths}{basename}
\aliasA{dirname}{basename}{dirname}
\keyword{file}{basename}
%
\begin{Description}\relax
\code{basename} removes all of the path up to and including the last
path separator (if any).

\code{dirname} returns the part of the \code{path} up to but
excluding the last path separator, or \code{"."} if there is no path
separator.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
basename(path)
dirname(path)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{path}] character vector, containing path names.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For \code{dirname} tilde expansion is done: see the description of
\code{\LinkA{path.expand}{path.expand}}.

Trailing path separators are removed before dissecting the path,
and for \code{dirname} any trailing file separators are removed
from the result.

On Windows this will accept either \code{\bsl{}} or \code{/} as the path
separator, but \code{dirname} will return a path using \code{/}
(except if a network share, when the leading \code{\bsl{}\bsl{}} will be
preserved).  Only expect these to be able to handle complete
paths, and not for example just a share or a drive.
\end{Details}
%
\begin{Value}
A character vector of the same length as \code{path}.  A zero-length
input will give a zero-length output with no error.

If an element of \code{path} is \code{\LinkA{NA}{NA}}, so is the result.
\end{Value}
%
\begin{Note}\relax
These are not wrappers for the POSIX system functions of the same
names: in particular they do \strong{not} have the special handling of
the path \code{"/"} and of returning \code{"."} for empty strings in
\code{basename}.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.path}{file.path}}, \code{\LinkA{path.expand}{path.expand}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
basename(file.path("","p1","p2","p3", c("file1", "file2")))
dirname(file.path("","p1","p2","p3","filename"))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Bessel}{Bessel Functions}{Bessel}
\aliasA{bessel}{Bessel}{bessel}
\aliasA{besselI}{Bessel}{besselI}
\aliasA{besselJ}{Bessel}{besselJ}
\aliasA{besselK}{Bessel}{besselK}
\aliasA{besselY}{Bessel}{besselY}
\keyword{math}{Bessel}
%
\begin{Description}\relax
Bessel Functions of integer and fractional order, of first
and second kind, \eqn{J_{\nu}}{} and \eqn{Y_{\nu}}{}, and
Modified Bessel functions (of first and third kind),
\eqn{I_{\nu}}{} and \eqn{K_{\nu}}{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
besselI(x, nu, expon.scaled = FALSE)
besselK(x, nu, expon.scaled = FALSE)
besselJ(x, nu)
besselY(x, nu)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] numeric, \eqn{\ge 0}{}.

\item[\code{nu}] numeric; The \emph{order} (maybe fractional!) of the
corresponding Bessel function.

\item[\code{expon.scaled}] logical; if \code{TRUE}, the results are
exponentially scaled in order to avoid overflow
(\eqn{I_{\nu}}{}) or underflow (\eqn{K_{\nu}}{}),
respectively.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{expon.scaled = TRUE}, \eqn{e^{-x} I_{\nu}(x)}{},
or \eqn{e^{x} K_{\nu}(x)}{} are returned.

For \eqn{\nu < 0}{}, formulae 9.1.2 and 9.6.2 from Abramowitz \&
Stegun  are applied (which is probably suboptimal), except for
\code{besselK} which is symmetric in \code{nu}.
\end{Details}
%
\begin{Value}
Numeric vector of the same length of \code{x} with the (scaled, if
\code{expon.scale=TRUE}) values of the corresponding Bessel function.
\end{Value}
%
\begin{Author}\relax
Original Fortran code:
W. J. Cody, Argonne National Laboratory \\{}
Translation to C and adaption to \R{}:
Martin Maechler \email{maechler@stat.math.ethz.ch.}
\end{Author}
%
\begin{Source}\relax
The C code is a translation of Fortran routines from
\url{http://www.netlib.org/specfun/r[ijky]besl}.
\end{Source}
%
\begin{References}\relax
Abramowitz, M. and Stegun, I. A. (1972)
\emph{Handbook of Mathematical Functions.} Dover, New York;
Chapter 9: Bessel Functions of Integer Order.
\end{References}
%
\begin{SeeAlso}\relax
Other special mathematical functions, such as
\code{\LinkA{gamma}{gamma}}, \eqn{\Gamma(x)}{}, and \code{\LinkA{beta}{beta}},
\eqn{B(x)}{}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

nus <- c(0:5, 10, 20)

x <- seq(0, 4, length.out = 501)
plot(x, x, ylim = c(0, 6), ylab = "", type = "n",
     main = "Bessel Functions  I_nu(x)")
for(nu in nus) lines(x, besselI(x, nu=nu), col = nu+2)
legend(0, 6, legend = paste("nu=", nus), col = nus+2, lwd = 1)

x <- seq(0, 40, length.out = 801); yl <- c(-.8, .8)
plot(x, x, ylim = yl, ylab = "", type = "n",
     main = "Bessel Functions  J_nu(x)")
for(nu in nus) lines(x, besselJ(x, nu=nu), col = nu+2)
legend(32,-.18, legend = paste("nu=", nus), col = nus+2, lwd = 1)

## Negative nu's :
xx <- 2:7
nu <- seq(-10, 9, length.out = 2001)
op <- par(lab = c(16, 5, 7))
matplot(nu, t(outer(xx, nu, besselI)), type = "l", ylim = c(-50, 200),
        main = expression(paste("Bessel ", I[nu](x), " for fixed ", x,
                                ",  as ", f(nu))),
        xlab = expression(nu))
abline(v=0, col = "light gray", lty = 3)
legend(5, 200, legend = paste("x=", xx), col=seq(xx), lty=seq(xx))
par(op)

x0 <- 2^(-20:10)
plot(x0, x0^-8, log="xy", ylab="",type="n",
     main = "Bessel Functions  J_nu(x)  near 0\n log - log  scale")
for(nu in sort(c(nus, nus+.5)))
    lines(x0, besselJ(x0, nu=nu), col = nu+2)
legend(3, 1e50, legend = paste("nu=", paste(nus, nus+.5, sep=",")),
       col = nus + 2, lwd = 1)

plot(x0, x0^-8, log="xy", ylab="", type="n",
     main = "Bessel Functions  K_nu(x)  near 0\n log - log  scale")
for(nu in sort(c(nus, nus+.5)))
    lines(x0, besselK(x0, nu=nu), col = nu+2)
legend(3, 1e50, legend = paste("nu=", paste(nus, nus+.5, sep=",")),
       col = nus + 2, lwd = 1)

x <- x[x > 0]
plot(x, x, ylim=c(1e-18, 1e11), log = "y", ylab = "", type = "n",
     main = "Bessel Functions  K_nu(x)")
for(nu in nus) lines(x, besselK(x, nu=nu), col = nu+2)
legend(0, 1e-5, legend=paste("nu=", nus), col = nus+2, lwd = 1)

yl <- c(-1.6, .6)
plot(x, x, ylim = yl, ylab = "", type = "n",
     main = "Bessel Functions  Y_nu(x)")
for(nu in nus){
    xx <- x[x > .6*nu]
    lines(xx, besselY(xx, nu=nu), col = nu+2)
}
legend(25, -.5, legend = paste("nu=", nus), col = nus+2, lwd = 1)

## negative nu in bessel_Y -- was bogus for a long time
curve(besselY(x, -0.1), 0, 10, ylim = c(-3,1), ylab = '')
for(nu in c(seq(-0.2, -2, by = -0.1)))
  curve(besselY(x, nu), add = TRUE)
title(expression(besselY(x, nu) * "   " *
                 {nu == list(-0.1, -0.2, ..., -2)}))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{bindenv}{Binding and Environment Adjustments}{bindenv}
\aliasA{bindingIsActive}{bindenv}{bindingIsActive}
\aliasA{bindingIsLocked}{bindenv}{bindingIsLocked}
\aliasA{environmentIsLocked}{bindenv}{environmentIsLocked}
\aliasA{lockBinding}{bindenv}{lockBinding}
\aliasA{lockEnvironment}{bindenv}{lockEnvironment}
\aliasA{makeActiveBinding}{bindenv}{makeActiveBinding}
\aliasA{unlockBinding}{bindenv}{unlockBinding}
\keyword{utilities}{bindenv}
%
\begin{Description}\relax
These functions represent an experimental interface for adjustments
to environments and bindings within environments.  They allow for
locking environments as well as individual bindings, and for linking
a variable to a function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
lockEnvironment(env, bindings = FALSE)
environmentIsLocked(env)
lockBinding(sym, env)
unlockBinding(sym, env)
bindingIsLocked(sym, env)
makeActiveBinding(sym, fun, env)
bindingIsActive(sym, env)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{env}] an environment.
\item[\code{bindings}] logical specifying whether bindings should be locked.
\item[\code{sym}] a name object or character string
\item[\code{fun}] a function taking zero or one arguments
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The function \code{lockEnvironment} locks its environment argument,
which must be a normal environment (not base).  (Locking the base
environment and name space may be supported later.)  Locking the
environment prevents adding or removing variable bindings from the
environment. Changing the value of a variable is still possible unless
the binding has been locked.  The name space environments of packages
with name spaces are locked when loaded.

\code{lockBinding} locks individual bindings in the specified
environment.  The value of a locked binding cannot be changed. Locked
bindings may be removed from an environment unless the environment is
locked.

\code{makeActiveBinding} installs \code{fun} so that getting the value
of \code{sym} calls \code{fun} with no arguments, and assigning to
\code{sym} calls \code{fun} with one argument, the value to be
assigned.  This allows the implementation of things like C variables
linked to \R{} variables and variables linked to databases.  It may also
be useful for making thread-safe versions of some system globals.
\end{Details}
%
\begin{Value}
The \code{*isLocked} functions return a length-one logical vector.  The
remaining functions return \code{NULL}, invisibly.
\end{Value}
%
\begin{Author}\relax
Luke Tierney
\end{Author}
%
\begin{Examples}
\begin{ExampleCode}
# locking environments
e <- new.env()
assign("x", 1, envir = e)
get("x", envir = e)
lockEnvironment(e)
get("x", envir = e)
assign("x", 2, envir = e)
try(assign("y", 2, envir = e)) # error

# locking bindings
e <- new.env()
assign("x", 1, envir = e)
get("x", envir = e)
lockBinding("x", e)
try(assign("x", 2, envir = e)) # error
unlockBinding("x", e)
assign("x", 2, envir = e)
get("x", envir = e)

# active bindings
f <- local( {
    x <- 1
    function(v) {
       if (missing(v))
           cat("get\n")
       else {
           cat("set\n")
           x <<- v
       }
       x
    }
})
makeActiveBinding("fred", f, .GlobalEnv)
bindingIsActive("fred", .GlobalEnv)
fred
fred <- 2
fred
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{body}{Access to and Manipulation of the Body of a Function}{body}
\aliasA{body<\Rdash}{body}{body<.Rdash.}
\keyword{programming}{body}
%
\begin{Description}\relax
Get or set the body of a function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
body(fun = sys.function(sys.parent()))
body(fun, envir = environment(fun)) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{fun}] a function object, or see `Details'.
\item[\code{envir}] environment in which the function should be defined.
\item[\code{value}] an object, usually a language object: see section
`Value'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For the first form, \code{fun} can be a character string
naming the function to be manipulated, which is searched for from the
parent environment.  If it is not specified, the function calling
\code{body} is used.

The bodies of all but the simplest are braced expressions, that is
calls to \code{\{}: see the `Examples' section for how to
create such a call.
\end{Details}
%
\begin{Value}
\code{body} returns the body of the function specified.  This is
normally a language object, most often a call to \code{\{}, but it can
also be an object (e.g. \code{pi}) to be the return value of the function.

The replacement form sets the body of a function to the
object on the right hand side, and (potentially) resets the
environment of the function.  If \code{value} is of class
\code{"\LinkA{expression}{expression}"} the first element is used as the body:  any
additional elements are ignored, with a warning.
\end{Value}
%
\begin{Note}\relax
Prior to \R{} 2.9.0, list values of \code{value} needed to be supplied
as a single-element list of the list: this was undocumented prior to
\R{} 2.8.1 so is unlikely to actually occur.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{alist}{alist}},
\code{\LinkA{args}{args}},
\code{\LinkA{function}{function}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
body(body)
f <- function(x) x^5
body(f) <- quote(5^x)
## or equivalently  body(f) <- expression(5^x)
f(3) # = 125
body(f)

## creating a multi-expression body
e <- expression(y <- x^2, return(y)) # or a list
body(f) <- as.call(c(as.name("{"), e))
f
f(8)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{bquote}{Partial substitution in expressions}{bquote}
\keyword{programming}{bquote}
\keyword{data}{bquote}
%
\begin{Description}\relax
An analogue of the LISP backquote macro.  \code{bquote} quotes its
argument except that terms wrapped in \code{.()} are evaluated in the
specified \code{where} environment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
bquote(expr, where = parent.frame())
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] A language object.
\item[\code{where}] An environment.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A language object.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{quote}{quote}}, \code{\LinkA{substitute}{substitute}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

a <- 2

bquote(a == a)
quote(a == a)

bquote(a == .(a))
substitute(a == A, list(A = a))

plot(1:10, a*(1:10), main = bquote(a == .(a)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{browser}{Environment Browser}{browser}
\keyword{programming}{browser}
\keyword{environment}{browser}
%
\begin{Description}\relax
Interrupt the execution of an expression and allow the inspection of
the environment where \code{browser} was called from.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
browser(text="", condition=NULL, expr=TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{text}] a text string that can be retrieved once the browser is invoked.
\item[\code{condition}] a condition that can be retrieved once the browser is invoked.
\item[\code{expr}] An expression, which if it evaluates to \code{TRUE} the
debugger will invoked, otherwise control is returned directly.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A call to \code{browser} can be included in the body of a function.
When reached, this causes a pause in the execution of the
current expression and allows access to the \R{} interpreter.

The purpose of the \code{text} and \code{condition} arguments are to
allow helper programs (e.g. external debuggers) to insert specific
values here, so that the specific call to browser (perhaps its location
in a source file) can be identified and special processing can be
achieved.  The values can be retrieved by calling \code{\LinkA{browserText}{browserText}}
and \code{\LinkA{browserCondition}{browserCondition}}.

The purpose of the \code{expr} argument is to allow for the illusion
of conditional debugging. It is an illusion, because execution is
always paused at the call to browser, but control is only passed
to the evaluator described below if \code{expr} evaluates to \code{TRUE}.
In most cases it is going to be more efficient to use an \code{if} 
statement in the calling program, but in some cases using this argument
will be simpler.

At the browser prompt the user can enter commands or \R{} expressions.
The commands are

\begin{description}

\item[\code{c}] (or just return) exit the browser and continue
execution at the next statement.
\item[\code{cont}] synonym for \code{c}.
\item[\code{n}] enter the step-through debugger. This changes the
meaning of \code{c}: see the documentation for \code{\LinkA{debug}{debug}}.
\item[\code{where}] print a stack trace of all active function calls.
\item[\code{Q}] exit the browser and the current evaluation and
return to the top-level prompt.

\end{description}

(Leading and trailing whitespace is ignored, except for return).

Anything else entered at the browser prompt is interpreted as an
\R{} expression to be evaluated in the calling environment: in
particular typing an object name will cause the object to be printed,
and \code{ls()} lists the objects in the calling frame.  (If you want
to look at an object with a name such as \code{n}, print it
explicitly.)

The number of lines printed for the deparsed call can be limited by
setting \code{\LinkA{options}{options}(deparse.max.lines)}.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{debug}{debug}}, and
\code{\LinkA{traceback}{traceback}} for the stack on error.
\code{\LinkA{browserText}{browserText}} for how to retrieve the text and condition.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{browserText}{Functions to retrieve values supplied by calls to browser.}{browserText}
\aliasA{browserCondition}{browserText}{browserCondition}
\aliasA{browserSetDebug}{browserText}{browserSetDebug}
\keyword{debugging}{browserText}
%
\begin{Description}\relax
A call to browser can provide context by supplying either a text
argument or a condition argument.  These functions can be used to
retrieve either of these arguments.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
browserText(n=1)
browserCondition(n=1)
browserSetDebug(n=1)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{n}] The number of contexts to skip over, it must be non-negative.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Each call to \code{browser} can supply either a text string or a condition.
The functions \code{browserText} and \code{browserCondition} provide ways
to retrieve those values. Since there can be multiple browser contexts
active at any time we also support retrieving values from the different
contexts. The innermost (most recently initiated) browser context is 
numbered 1 other contexts are numbered sequentially.

\code{browserSetDebug} provides a mechanism for initiating the browser in
one of the calling functions.  See \code{\LinkA{sys.frame}{sys.frame}} for a more
complete discussion of the calling stack. To use \code{browserSetDebug} 
you select some calling function, determine how far back it is in the call
stack and call \code{browserSetDebug} with \code{n} set to that value. 
Then, by typing \code{c} at the browser prompt you will cause evaluation
to continue, and provided there are no intervening calls to browser or
other interrupts, control will halt again once evaluation has returned to
the closure specified.  This is similar to the up functionality in gdb
or the "step out" functionality in other debuggers.
\end{Details}
%
\begin{Value}
\code{browserText} returns the text, while \code{browserCondition}
returns the condition from the specified browser context.

\code{browserSetDebug} returns NULL, invisibly.
\end{Value}
%
\begin{Note}\relax
It may be of interest to allow for querying further up the set of browser
contexts and this functionality may be added at a later date.
\end{Note}
%
\begin{Author}\relax
R. Gentleman
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{browser}{browser}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{builtins}{Returns the Names of All Built-in Objects}{builtins}
\keyword{utilities}{builtins}
%
\begin{Description}\relax
Return the names of all the built-in objects.  These are fetched
directly from the symbol table of the \R{} interpreter.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
builtins(internal = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{internal}] a logical indicating whether only `internal'
functions (which can be called via \code{\LinkA{.Internal}{.Internal}}) should
be returned.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{builtins()} returns an unsorted list of the objects in the
symbol table, that is all the objects in the base environment.
These are the built-in objects plus any that have been added
subsequently when the base package was loaded.  It is less confusing
to use \code{ls(baseenv(), all=TRUE)}.

\code{builtins(TRUE)} returns an unsorted list of the names of internal
functions, that is those which can be accessed as
\code{.Internal(\var{foo}(args ...))} for \var{foo} in the list.
\end{Details}
%
\begin{Value}
A character vector.
\end{Value}
\inputencoding{latin1}
\HeaderA{by}{Apply a Function to a Data Frame split by Factors}{by}
\methaliasA{by.data.frame}{by}{by.data.frame}
\methaliasA{by.default}{by}{by.default}
\aliasA{print.by}{by}{print.by}
\keyword{iteration}{by}
\keyword{category}{by}
%
\begin{Description}\relax
Function \code{by} is an object-oriented wrapper for
\code{\LinkA{tapply}{tapply}} applied to data frames.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
by(data, INDICES, FUN, ..., simplify = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{data}] an \R{} object, normally a data frame, possibly a matrix.
\item[\code{INDICES}] a factor or a list of factors, each of length
\code{nrow(data)}.
\item[\code{FUN}] a function to be applied to data frame subsets of \code{data}.
\item[\code{...}] further arguments to \code{FUN}.
\item[\code{simplify}] logical: see \code{\LinkA{tapply}{tapply}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A data frame is split by row into data frames
subsetted by the values of one or more factors, and function
\code{FUN} is applied to each subset in turn.

Object \code{data} will be coerced to a data frame by the default
method, \emph{but} if this results in a 1-column data frame, the
objects passed to \code{FUN} are dropped to a subsets of that column.
(This was the long-term behaviour, but only documented since \R{} 2.7.0.)
\end{Details}
%
\begin{Value}
An object of class \code{"by"}, giving the results for each subset.
This is always a list if \code{simplify} is false, otherwise a list or
array (see \code{\LinkA{tapply}{tapply}}).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{tapply}{tapply}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
attach(warpbreaks)
by(warpbreaks[, 1:2], tension, summary)
by(warpbreaks[, 1], list(wool = wool, tension = tension), summary)
by(warpbreaks, tension, function(x) lm(breaks ~ wool, data = x))

## now suppose we want to extract the coefficients by group
tmp <- by(warpbreaks, tension, function(x) lm(breaks ~ wool, data = x))
sapply(tmp, coef)

detach("warpbreaks")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{c}{Combine Values into a Vector or List}{c}
\keyword{manip}{c}
%
\begin{Description}\relax
This is a generic function which combines its arguments.

The default method combines its arguments to form a vector.
All arguments are coerced to a common type which is the type
of the returned value, and all attributes except names are removed.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
c(..., recursive=FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] objects to be concatenated.
\item[\code{recursive}] logical.  If \code{recursive = TRUE}, the function
recursively descends through lists (and pairlists) combining all
their elements into a vector.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The output type is determined from the highest type of the components
in the hierarchy NULL < raw < logical < integer < real < complex < character
< list < expression.  Pairlists are treated as lists, but non-vector
components (such names and calls) are treated as one-element lists
which cannot be unlisted even if \code{recursive = TRUE}.

\code{c} is sometimes used for its side effect of removing attributes
except names, for example to turn an array into a vector.
\code{as.vector} is a more intuitive way to do this, but also drops
names.  Note too that methods other than the default are not required
to do this (and they will almost certainly preserve a class attribute).

This is a \LinkA{primitive}{primitive} function.
\end{Details}
%
\begin{Value}
\code{NULL} or an expression or a vector of an appropriate mode.
(With no arguments the value is \code{NULL}.)  
\end{Value}
%
\begin{Section}{S4 methods}
This function is S4 generic, but with argument list
\code{(x, ..., recursive = FALSE)}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{unlist}{unlist}} and \code{\LinkA{as.vector}{as.vector}} to produce
attribute-free vectors.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
c(1,7:9)
c(1:5, 10.5, "next")

## uses with a single argument to drop attributes
x <- 1:4
names(x) <- letters[1:4]
x
c(x)          # has names
as.vector(x)  # no names
dim(x) <- c(2,2)
x
c(x)
as.vector(x)

## append to a list:
ll <- list(A = 1, c="C")
## do *not* use
c(ll, d = 1:3) # which is == c(ll, as.list(c(d=1:3))
## but rather
c(ll, d = list(1:3))# c() combining two lists

c(list(A=c(B=1)), recursive=TRUE)

c(options(), recursive=TRUE)
c(list(A=c(B=1,C=2), B=c(E=7)), recursive=TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{call}{Function Calls}{call}
\aliasA{as.call}{call}{as.call}
\aliasA{is.call}{call}{is.call}
\keyword{programming}{call}
\keyword{attribute}{call}
%
\begin{Description}\relax
Create or test for objects of mode \code{"call"}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
call(name, ...)
is.call(x)
as.call(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] a non-empty character string naming the function to be called.
\item[\code{...}] arguments to be part of the call.
\item[\code{x}] an arbitrary \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{call} returns an unevaluated function call, that is, an
unevaluated expression which consists of the named function applied to
the given arguments (\code{name} must be a quoted string which gives
the name of a function to be called).  Note that although the call is
unevaluated, the arguments \code{...} are evaluated.

\code{call} is a primitive, so the first argument (named or not) is
taken as \code{name} and the remaining arguments as arguments for the
constructed call: \code{call(x="c", 1,3, name="foo")} is a call to
\code{c} and not to \code{foo}.

\code{is.call} is used to determine whether \code{x} is a call (i.e.,
of mode \code{"call"}).

Objects of mode \code{"list"} can be coerced to mode \code{"call"}.
The first element of the list becomes the function part of the call,
so should be a function or the name of one (as a symbol; a quoted
string will not do).  

All three are \LinkA{primitive}{primitive} functions.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{do.call}{do.call}} for calling a function by name and argument
list;
\code{\LinkA{Recall}{Recall}} for recursive calling of functions;
further
\code{\LinkA{is.language}{is.language}},
\code{\LinkA{expression}{expression}},
\code{\LinkA{function}{function}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
is.call(call) #-> FALSE: Functions are NOT calls

## set up a function call to round with argument 10.5
cl <- call("round", 10.5)
is.call(cl)# TRUE
cl
## such a call can also be evaluated.
eval(cl)# [1] 10

A <- 10.5
call("round", A)        # round(10.5)
call("round", quote(A)) # round(A)
f <- "round"
call(f, quote(A))       # round(A)
## if we want to supply a function we need to use as.call or similar
f <- round
## Not run: call(f, quote(A))  # error: first arg must be character
(g <- as.call(list(f, quote(A))))
eval(g)
## alternatively but less transparently
g <- list(f, quote(A))
mode(g) <- "call"
g
eval(g)
## see also the examples in the help for do.call
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{callCC}{Call With Current Continuation}{callCC}
\keyword{programming}{callCC}
%
\begin{Description}\relax
A downward-only version of Scheme's call with current continuation.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
callCC(fun)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{fun}] function of one argument, the exit procedure.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{callCC} provides a non-local exit mechanism that can be useful
for early termination of a computation.  \code{callCC} calls
\code{fun} with one argument, an \emph{exit function}.  The exit
function takes a single argument, the intended return value.  If the
body of \code{fun} calls the exit function then the call to
\code{callCC} immediately returns, with the value supplied to the exit
function as the value returned by \code{callCC}.
\end{Details}
%
\begin{Author}\relax
Luke Tierney
\end{Author}
%
\begin{Examples}
\begin{ExampleCode}
# The following all return the value 1
callCC(function(k) 1)
callCC(function(k) k(1))
callCC(function(k) {k(1); 2})
callCC(function(k) repeat k(1))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{capabilities}{Report Capabilities of this Build of R}{capabilities}
\keyword{utilities}{capabilities}
%
\begin{Description}\relax
Report on the optional features which have been compiled into this
build of \R{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
capabilities(what = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{what}] character vector or \code{NULL}, specifying
required components.  \code{NULL} implies that all are required.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A named logical vector. Current components are
\begin{ldescription}
\item[\code{jpeg}] Is the \code{\LinkA{jpeg}{jpeg}} function operational?
\item[\code{png}] Is the \code{\LinkA{png}{png}} function operational?
\item[\code{tiff}] Is the \code{\LinkA{tiff}{tiff}} function operational?
\item[\code{tcltk}] Is the \pkg{tcltk} package operational?
Note that to make use of Tk you will almost always need to check
that \code{"X11"} is also available.

\item[\code{X11}] Are the \code{\LinkA{X11}{X11}} graphics device and the
X11-based data editor available?  This loads the X11 module if not
already loaded, and checks that the default display can be
contacted unless a \code{X11} device has already been used.
\item[\code{aqua}] Are the \code{R.app} GUI components and the
\code{\LinkA{quartz}{quartz}} function operational?  Only on some Mac OS X
builds.  Note that this is distinct from
\code{.Platform\$GUI == "AQUA"}, which is true when using the Mac
\code{R.app} console.
\end{ldescription}
\begin{ldescription}
\item[\code{http/ftp}] Are \code{\LinkA{url}{url}} and the internal method for
\code{\LinkA{download.file}{download.file}} available?
\item[\code{sockets}] Are \code{\LinkA{make.socket}{make.socket}} and related functions
available?
\item[\code{libxml}] Is there support for integrating \code{libxml} with
the \R{} event loop?
\item[\code{fifo}] are FIFO connections supported?
\item[\code{cledit}] Is command-line editing available in the current \R{}
session?  This is false in non-interactive sessions.
It will be true for the command-line interface if \code{readline}
support has been compiled in and \option{--no-readline} was
\emph{not} used when \R{} was invoked.

\item[\code{iconv}] is internationalization conversion via
\code{\LinkA{iconv}{iconv}} supported?  Always true as from \R{} 2.10.0.
\item[\code{NLS}] is there Natural Language Support (for message translations)?
\item[\code{profmem}] is there support for memory profiling?
\end{ldescription}
\begin{ldescription}
\item[\code{cairo}] is there support for \code{type="Cairo"} in
\code{\LinkA{X11}{X11}}, \code{\LinkA{png}{png}},\code{\LinkA{jpeg}{jpeg}},
\code{\LinkA{tiff}{tiff}} and \code{\LinkA{bmp}{bmp}}, and
for the \code{\LinkA{svg}{svg}}, \code{\LinkA{cairo\_pdf}{cairo.Rul.pdf}} and
\code{\LinkA{cairo\_ps}{cairo.Rul.ps}} devices?
\end{ldescription}
\end{Value}
%
\begin{Section}{Note to Mac OS X users}
Capabilities \code{"jpeg"}, \code{"png"} and \code{"tiff"} refer to
the X11-based versions of these devices.  If
\code{capabilities("aqua")} is true, then these devices with
\code{type="quartz"} will be available, and out-of-the-box will be the
default type.  Thus for example the \code{\LinkA{tiff}{tiff}} device will be
available if \code{capabilities("aqua") || capabilities("tiff")} if
the defaults are unchanged.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Platform}{.Platform}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
capabilities()

if(!capabilities("http/ftp"))
   warning("internal download.file() is not available")

## See also the examples for 'connections'.
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{cat}{Concatenate and Print}{cat}
\keyword{print}{cat}
\keyword{file}{cat}
\keyword{connection}{cat}
%
\begin{Description}\relax
Outputs the objects, concatenating the representations.  \code{cat}
performs much less conversion than \code{\LinkA{print}{print}}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
cat(... , file = "", sep = " ", fill = FALSE, labels = NULL,
    append = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] \R{} objects (see `Details' for the types of objects allowed).
\item[\code{file}] A connection, or a character string naming the file
to print to.  If \code{""} (the default), \code{cat} prints to the
standard output connection, the console unless redirected by
\code{\LinkA{sink}{sink}}.
If it is \code{"|cmd"}, the output is piped to the command given
by \file{cmd}, by opening a pipe connection.

\item[\code{sep}] a character vector of strings to append after each element.
\item[\code{fill}] a logical or (positive) numeric controlling how the output is
broken into successive lines.  If \code{FALSE} (default), only newlines
created explicitly by \samp{"\bsl{}n"} are printed.  Otherwise, the
output is broken into lines with print width equal to the option
\code{width} if \code{fill} is \code{TRUE}, or the value of
\code{fill} if this is numeric.  Non-positive \code{fill} values are
ignored, with a warning.
\item[\code{labels}] character vector of labels for the lines printed.
Ignored if \code{fill} is \code{FALSE}.
\item[\code{append}] logical. Only used if the argument \code{file} is the
name of file (and not a connection or \code{"|cmd"}).
If \code{TRUE} output will be appended to
\code{file}; otherwise, it will overwrite the contents of
\code{file}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{cat} is useful for producing output in user-defined functions.
It converts its arguments to character vectors, concatenates
them to a single character vector, appends the given \code{sep=}
string(s) to each element and then outputs them.

No linefeeds are output unless explicitly requested by \samp{"\bsl{}n"}
or if generated by filling (if argument \code{fill} is \code{TRUE} or
numeric.)

If \code{file} is a connection and open for writing it is written from
its current position.  If it is not open, it is opened for the
duration of the call in \code{"wt"} mode and then closed again.

Currently only atomic vectors (and so not lists) and \LinkA{name}{name}s
are handled.  Character strings are output `as is' (unlike
\code{\LinkA{print.default}{print.default}} which escapes non-printable characters and
backslash --- use \code{\LinkA{encodeString}{encodeString}} if you want to output
encoded strings using \code{cat}).  Other types of \R{} object should be
converted (e.g. by \code{\LinkA{as.character}{as.character}} or \code{\LinkA{format}{format}})
before being passed to \code{cat}.

\code{cat} converts numeric/complex elements in the same way as
\code{print} (and not in the same way as \code{\LinkA{as.character}{as.character}}
which is used by the S equivalent), so \code{\LinkA{options}{options}}
\code{"digits"} and \code{"scipen"} are relevant.  However, it uses
the minimum field width necessary for each element, rather than the
same field width for all elements.
\end{Details}
%
\begin{Value}
None (invisible \code{NULL}).
\end{Value}
%
\begin{Note}\relax
If any element of \code{sep} contains a newline character, it is
treated as a vector of terminators rather than separators, an element
being output after every vector element \emph{and} a newline after the
last.  Entries are recycled as needed.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{print}{print}}, \code{\LinkA{format}{format}}, and \code{\LinkA{paste}{paste}}
which concatenates into a string.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
iter <- stats::rpois(1, lambda=10)
## print an informative message
cat("iteration = ", iter <- iter + 1, "\n")

## 'fill' and label lines:
cat(paste(letters, 100* 1:26), fill = TRUE,
    labels = paste("{",1:10,"}:",sep=""))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{cbind}{Combine R Objects by Rows or Columns}{cbind}
\aliasA{.\_\_H\_\_.cbind}{cbind}{..Rul..Rul.H.Rul..Rul..cbind}
\aliasA{.\_\_H\_\_.rbind}{cbind}{..Rul..Rul.H.Rul..Rul..rbind}
\methaliasA{cbind.data.frame}{cbind}{cbind.data.frame}
\aliasA{rbind}{cbind}{rbind}
\methaliasA{rbind.data.frame}{cbind}{rbind.data.frame}
\keyword{array}{cbind}
\keyword{manip}{cbind}
%
\begin{Description}\relax
Take a sequence of vector, matrix or data frames arguments and combine
by \emph{c}olumns or \emph{r}ows, respectively.  These are generic
functions with methods for other \R{} classes.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
cbind(..., deparse.level = 1)
rbind(..., deparse.level = 1)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] vectors or matrices.  These can be given as named
arguments.  Other \R{} objects will be coerced as appropriate: see
sections `Details' and `Value'.  (For the
\code{"data.frame"} method of \code{cbind} these can be further
arguments to \code{\LinkA{data.frame}{data.frame}} such as \code{stringsAsFactors}.)
\item[\code{deparse.level}] integer controlling the construction of labels in
the case of non-matrix-like arguments (for the default method):\\{}
\code{deparse.level = 0} constructs no labels; the default,
\code{deparse.level = 1 or 2} constructs labels from the argument
names, see the `Value' section below.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The functions \code{cbind} and \code{rbind} are S3 generic, with
methods for data frames.  The data frame method will be used if at
least one argument is a data frame and the rest are vectors or
matrices.  There can be other methods; in particular, there is one for
time series objects.  See the section on `Dispatch' for how
the method to be used is selected.

In the default method, all the vectors/matrices must be atomic (see
\code{\LinkA{vector}{vector}}) or lists.  Expressions are not allowed.
Language objects (such as formulae and calls) and pairlists will be
coerced to lists: other objects (such as names and external pointers)
will be included as elements in a list result.  Any classes the inputs
might have are discarded (in particular, factors are replaced by their
internal codes).

If there are several matrix arguments, they must all have the same
number of columns (or rows) and this will be the number of columns (or
rows) of the result.  If all the arguments are vectors, the number of
columns (rows) in the result is equal to the length of the longest
vector.  Values in shorter arguments are recycled to achieve this
length (with a \code{\LinkA{warning}{warning}} if they are recycled only
\emph{fractionally}).

When the arguments consist of a mix of matrices and vectors the number
of columns (rows) of the result is determined by the number of columns
(rows) of the matrix arguments.  Any vectors have their values
recycled or subsetted to achieve this length.

For \code{cbind} (\code{rbind}), vectors of zero length (including
\code{NULL}) are ignored unless the result would have zero rows
(columns), for S compatibility.
(Zero-extent matrices do not occur in S3 and are not ignored in \R{}.)
\end{Details}
%
\begin{Value}
For the default method, a matrix combining the \code{...} arguments
column-wise or row-wise.  (Exception: if there are no inputs or all
the inputs are \code{NULL}, the value is \code{NULL}.)

The type of a matrix result determined from the highest type of any of
the inputs in the hierarchy raw < logical < integer < real < complex <
character < list .

For \code{cbind} (\code{rbind}) the column (row) names are taken from
the \code{colnames} (\code{rownames}) of the arguments if these are
matrix-like.  Otherwise from the names of the arguments or where those
are not supplied and \code{deparse.level > 0}, by deparsing the
expressions given, for \code{deparse.level = 1} only if that gives a
sensible name (a `symbol', see \code{\LinkA{is.symbol}{is.symbol}}).

For \code{cbind} row names are taken from the first argument with
appropriate names: rownames for a matrix, or names for a vector of
length the number of rows of the result.

For \code{rbind} column names are taken from the first argument with
appropriate names: colnames for a matrix, or names for a vector of
length the number of columns of the result.
\end{Value}
%
\begin{Section}{Data frame methods}
The \code{cbind} data frame method is just a wrapper for
\code{\LinkA{data.frame}{data.frame}(..., check.names = FALSE)}.  This means that
it will split matrix columns in data frame arguments, and convert
character columns to factors unless \code{stringsAsFactors = FALSE} is
specified.

The \code{rbind} data frame method first drops all zero-column and
zero-row arguments.  (If that leaves none, it returns the first
argument with columns otherwise a zero-column zero-row data frame.)
It then takes the classes of the columns from the
first data frame, and matches columns by name (rather than by
position).  Factors have their levels expanded as necessary (in the
order of the levels of the levelsets of the factors encountered) and
the result is an ordered factor if and only if all the components were
ordered factors.  (The last point differs from S-PLUS.)  Old-style
categories (integer vectors with levels) are promoted to factors.
\end{Section}
%
\begin{Section}{Dispatch}
The method dispatching is \emph{not} done via
\code{\LinkA{UseMethod}{UseMethod}()}, but by C-internal dispatching.
Therefore there is no need for, e.g., \code{rbind.default}.

The dispatch algorithm is described in the source file
(\file{.../src/main/bind.c}) as

\begin{enumerate}

\item For each argument we get the list of possible class
memberships from the class attribute.

\item We inspect each class in turn to see if there is an
applicable method.

\item If we find an applicable method we make sure that it is
identical to any method determined for prior arguments.
If it is identical, we proceed, otherwise we immediately
drop through to the default code.

\end{enumerate}

If you want to combine other objects with data frames, it may be
necessary to coerce them to data frames first.  (Note that this
algorithm can result in calling the data frame method if all the
arguments are either data frames or vectors, and this will result in
the coercion of character vectors to factors.)
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{c}{c}} to combine vectors (and lists) as vectors,
\code{\LinkA{data.frame}{data.frame}} to combine vectors and matrices as a data
frame.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
m <- cbind(1, 1:7) # the '1' (= shorter vector) is recycled
m
m <- cbind(m, 8:14)[, c(1, 3, 2)] # insert a column
m
cbind(1:7, diag(3))# vector is subset -> warning

cbind(0, rbind(1, 1:3))
cbind(I=0, X=rbind(a=1, b=1:3))  # use some names
xx <- data.frame(I=rep(0,2))
cbind(xx, X=rbind(a=1, b=1:3))   # named differently

cbind(0, matrix(1, nrow=0, ncol=4))#> Warning (making sense)
dim(cbind(0, matrix(1, nrow=2, ncol=0)))#-> 2 x 1

## deparse.level
dd <- 10
rbind(1:4, c=2, "a++" = 10, dd, deparse.level=0)# middle 2 rownames
rbind(1:4, c=2, "a++" = 10, dd, deparse.level=1)# 3 rownames (default)
rbind(1:4, c=2, "a++" = 10, dd, deparse.level=2)# 4 rownames
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{char.expand}{Expand a String with Respect to a Target Table}{char.expand}
\keyword{character}{char.expand}
%
\begin{Description}\relax
Seeks a unique match of its first argument among the
elements of its second.  If successful, it returns this element;
otherwise, it performs an action specified by the third argument.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
char.expand(input, target, nomatch = stop("no match"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{input}] a character string to be expanded.
\item[\code{target}] a character vector with the values to be matched
against.
\item[\code{nomatch}] an \R{} expression to be evaluated in case expansion was
not possible.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function is particularly useful when abbreviations are allowed in
function arguments, and need to be uniquely expanded with respect to a
target table of possible values.
\end{Details}
%
\begin{Value}
A length-one character vector, one of the elements of \code{target}
(unless \code{nomatch} is changed to be a non-error, when it can be a
zero-length character string).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{charmatch}{charmatch}} and \code{\LinkA{pmatch}{pmatch}} for performing
partial string matching.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
locPars <- c("mean", "median", "mode")
char.expand("me", locPars, warning("Could not expand!"))
char.expand("mo", locPars)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{character}{Character Vectors}{character}
\aliasA{as.character}{character}{as.character}
\methaliasA{as.character.default}{character}{as.character.default}
\methaliasA{as.character.factor}{character}{as.character.factor}
\aliasA{is.character}{character}{is.character}
\keyword{character}{character}
\keyword{classes}{character}
%
\begin{Description}\relax
Create or test for objects of type \code{"character"}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
character(length = 0)
as.character(x, ...)
is.character(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced or tested.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{as.character} and \code{is.character} are generic: you can
write methods to handle specific classes of objects,
see \LinkA{InternalMethods}{InternalMethods}.  Further, for \code{as.character} the
default method calls \code{\LinkA{as.vector}{as.vector}}, so dispatch is first on
methods for \code{as.character} and then for methods for \code{as.vector}.

\code{as.character} represents real and complex numbers to 15 significant
digits (technically the compiler's setting of the ISO C constant
\code{DBL\_DIG}, which will be 15 on machines supporting IEC60559
arithmetic according to the C99 standard).  This ensures that all the
digits in the result will be reliable (and not the result of
representation error), but does mean that conversion to character and
back to numeric may change the number.  If you want to convert numbers
to character with the maximum possible precision, use
\code{\LinkA{format}{format}}.

\code{as.character} and \code{is.character} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored.  This may not be true of their methods.
\end{Details}
%
\begin{Value}
\code{character} creates a character vector of the specified length.
The elements of the vector are all equal to \code{""}.

\code{as.character} attempts to coerce its argument to character type;
like \code{\LinkA{as.vector}{as.vector}} it strips attributes including names.
For lists it deparses the elements individually, except that it
extracts the first element of length-one character vectors.

\code{is.character} returns \code{TRUE} or \code{FALSE} depending on
whether its argument is of character type or not.
\end{Value}
%
\begin{Note}\relax
\code{as.character} truncates components of language objects to 500
characters (was about 70 before 1.3.1).
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{paste}{paste}}, \code{\LinkA{substr}{substr}} and \code{\LinkA{strsplit}{strsplit}}
for character concatenation and splitting,
\code{\LinkA{chartr}{chartr}} for character translation and casefolding (e.g.,
upper to lower case) and \code{\LinkA{sub}{sub}}, \code{\LinkA{grep}{grep}} etc for
string matching and substitutions.  Note that
\code{help.search(keyword = "character")} gives even more links.

\code{\LinkA{deparse}{deparse}}, which is normally preferable to
\code{as.character} for language objects.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
form <- y ~ a + b + c
as.character(form)  ## length 3
deparse(form)       ## like the input

a0 <- 11/999          # has a repeating decimal representation
(a1 <- as.character(a0))
format(a0, digits=16) # shows one more digit
a2 <- as.numeric(a1)
a2 - a0               # normally around -1e-17
as.character(a2)      # normally different from a1
print(c(a0, a2), digits = 16)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{charmatch}{Partial String Matching}{charmatch}
\keyword{character}{charmatch}
%
\begin{Description}\relax
\code{charmatch} seeks matches for the elements of its first argument
among those of its second.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
charmatch(x, table, nomatch = NA_integer_)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] the values to be matched: converted to a character vector by
\code{\LinkA{as.character}{as.character}}.
\item[\code{table}] the values to be matched against: converted to a character
vector.
\item[\code{nomatch}] the (integer) value to be returned at non-matching
positions.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Exact matches are preferred to partial matches (those where the value
to be matched has an exact match to the initial part of the target,
but the target is longer).

If there is a single exact match or no exact match and a unique
partial match then the index of the matching value is returned; if
multiple exact or multiple partial matches are found then \code{0} is
returned and if no match is found then \code{nomatch} is returned.

\code{NA} values are treated as the string constant \code{"NA"}.
\end{Details}
%
\begin{Value}
An integer vector of the same length as \code{x}, giving the
indices of the elements in \code{table} which matched, or \code{nomatch}.
\end{Value}
%
\begin{Author}\relax
This function is based on a C function written by Terry Therneau.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{pmatch}{pmatch}}, \code{\LinkA{match}{match}}.

\code{\LinkA{grep}{grep}} or \code{\LinkA{regexpr}{regexpr}} for more general (regexp)
matching of strings.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
charmatch("", "")                             # returns 1
charmatch("m",   c("mean", "median", "mode")) # returns 0
charmatch("med", c("mean", "median", "mode")) # returns 2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{chartr}{Character Translation and Casefolding}{chartr}
\aliasA{casefold}{chartr}{casefold}
\aliasA{tolower}{chartr}{tolower}
\aliasA{toupper}{chartr}{toupper}
\keyword{character}{chartr}
%
\begin{Description}\relax
Translate characters in character vectors, in particular from upper to
lower case or vice versa.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
chartr(old, new, x)
tolower(x)
toupper(x)
casefold(x, upper = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character vector, or an object that can be coerced to
character by \code{\LinkA{as.character}{as.character}}.
\item[\code{old}] a character string specifying the characters to be
translated. If a character vector of length 2 or more is supplied,
the first element is used with a warning.
\item[\code{new}] a character string specifying the translations. If a
character vector of length 2 or more is supplied, the first element
is used with a warning.
\item[\code{upper}] logical: translate to upper or lower case?.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{chartr} translates each character in \code{x} that is specified
in \code{old} to the corresponding character specified in \code{new}.
Ranges are supported in the specifications, but character classes and
repeated characters are not.  If \code{old} contains more characters
than new, an error is signaled; if it contains fewer characters, the
extra characters at the end of \code{new} are ignored.

\code{tolower} and \code{toupper} convert upper-case characters in a
character vector to lower-case, or vice versa.  Non-alphabetic
characters are left unchanged.

\code{casefold} is a wrapper for \code{tolower} and \code{toupper}
provided for compatibility with S-PLUS.
\end{Details}
%
\begin{Value}
A character vector of the same length and with the same attributes as
\code{x} (after possible coercion).

Elements of the result will be have the encoding declared as that of
the current locale (see \code{\LinkA{Encoding}{Encoding}} if the corresponding
input had a declared encoding and the current locale is either Latin-1
or UTF-8.  The result will be in the current locale's encoding unless
the corresponding input was in UTF-8, when it will be in UTF-8 when
the system has Unicode wide characters.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{sub}{sub}} and \code{\LinkA{gsub}{gsub}} for other
substitutions in strings.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- "MiXeD cAsE 123"
chartr("iXs", "why", x)
chartr("a-cX", "D-Fw", x)
tolower(x)
toupper(x)

## "Mixed Case" Capitalizing - toupper( every first letter of a word ) :

.simpleCap <- function(x) {
    s <- strsplit(x, " ")[[1]]
    paste(toupper(substring(s, 1,1)), substring(s, 2),
          sep="", collapse=" ")
}
.simpleCap("the quick red fox jumps over the lazy brown dog")
## ->  [1] "The Quick Red Fox Jumps Over The Lazy Brown Dog"

## and the better, more sophisticated version:
capwords <- function(s, strict = FALSE) {
    cap <- function(s) paste(toupper(substring(s,1,1)),
                  {s <- substring(s,2); if(strict) tolower(s) else s},
                             sep = "", collapse = " " )
    sapply(strsplit(s, split = " "), cap, USE.NAMES = !is.null(names(s)))
}
capwords(c("using AIC for model selection"))
## ->  [1] "Using AIC For Model Selection"
capwords(c("using AIC", "for MODEL selection"), strict=TRUE)
## ->  [1] "Using Aic"  "For Model Selection"
##                ^^^        ^^^^^
##               'bad'       'good'

## -- Very simple insecure crypto --
rot <- function(ch, k = 13) {
   p0 <- function(...) paste(c(...), collapse="")
   A <- c(letters, LETTERS, " '")
   I <- seq_len(k); chartr(p0(A), p0(c(A[-I], A[I])), ch)
}

pw <- "my secret pass phrase"
(crypw <- rot(pw, 13)) #-> you can send this off

## now ``decrypt'' :
rot(crypw, 54 - 13)# -> the original:
stopifnot(identical(pw, rot(crypw, 54 - 13)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{chol}{The Choleski Decomposition}{chol}
\methaliasA{chol.default}{chol}{chol.default}
\keyword{algebra}{chol}
\keyword{array}{chol}
%
\begin{Description}\relax
Compute the Choleski factorization of a real symmetric
positive-definite square matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
chol(x, ...)

## Default S3 method:
chol(x, pivot = FALSE,  LINPACK = pivot, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object for which a method exists.  The default method
applies to real symmetric, positive-definite matrices.
\item[\code{...}] arguments to be based to or from methods.
\item[\code{pivot}] Should pivoting be used?
\item[\code{LINPACK}] logical.  Should LINPACK be used in the non-pivoting
case (for compatibility with \R{} < 1.7.0)?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{chol} is generic: the description here applies to the default
method.

This is an interface to the LAPACK routine DPOTRF and the
LINPACK routines DPOFA and DCHDC.

Note that only the upper triangular part of \code{x} is used, so
that \eqn{R'R = x}{} when \code{x} is symmetric.

If \code{pivot = FALSE} and \code{x} is not non-negative definite an
error occurs.  If \code{x} is positive semi-definite (i.e., some zero
eigenvalues) an error will also occur, as a numerical tolerance is used.

If \code{pivot = TRUE}, then the Choleski decomposition of a positive
semi-definite \code{x} can be computed.  The rank of \code{x} is
returned as \code{attr(Q, "rank")}, subject to numerical errors.
The pivot is returned as \code{attr(Q, "pivot")}.  It is no longer
the case that \code{t(Q) \%*\% Q} equals \code{x}.  However, setting
\code{pivot <- attr(Q, "pivot")} and \code{oo <- order(pivot)}, it
is true that \code{t(Q[, oo]) \%*\% Q[, oo]} equals \code{x},
or, alternatively, \code{t(Q) \%*\% Q} equals \code{x[pivot,
  pivot]}.  See the examples.
\end{Details}
%
\begin{Value}
The upper triangular factor of the Choleski decomposition, i.e., the
matrix \eqn{R}{} such that \eqn{R'R = x}{} (see example).

If pivoting is used, then two additional attributes
\code{"pivot"} and \code{"rank"} are also returned.
\end{Value}
%
\begin{Section}{Warning}
The code does not check for symmetry.

If \code{pivot = TRUE} and \code{x} is not non-negative definite then
there will be a warning message but a meaningless result will occur.
So only use \code{pivot = TRUE} when \code{x} is non-negative definite
by construction.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
\emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.

Anderson. E. and ten others (1999)
\emph{LAPACK Users' Guide}. Third Edition. SIAM.\\{}
Available on-line at
\url{http://www.netlib.org/lapack/lug/lapack_lug.html}.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{chol2inv}{chol2inv}} for its \emph{inverse} (without pivoting),
\code{\LinkA{backsolve}{backsolve}} for solving linear systems with upper
triangular left sides.

\code{\LinkA{qr}{qr}}, \code{\LinkA{svd}{svd}} for related matrix factorizations.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
( m <- matrix(c(5,1,1,3),2,2) )
( cm <- chol(m) )
t(cm) %*% cm  #-- = 'm'
crossprod(cm)  #-- = 'm'

# now for something positive semi-definite
x <- matrix(c(1:5, (1:5)^2), 5, 2)
x <- cbind(x, x[, 1] + 3*x[, 2])
m <- crossprod(x)
qr(m)$rank # is 2, as it should be

# chol() may fail, depending on numerical rounding:
# chol() unlike qr() does not use a tolerance.
try(chol(m))

(Q <- chol(m, pivot = TRUE)) # NB wrong rank here - see Warning section.
## we can use this by
pivot <- attr(Q, "pivot")
crossprod(Q[, order(pivot)]) # recover m

## now for a non-positive-definite matrix
( m <- matrix(c(5,-5,-5,3),2,2) )
try(chol(m))  # fails
try(chol(m, LINPACK=TRUE))   # fails
(Q <- chol(m, pivot = TRUE)) # warning
crossprod(Q)  # not equal to m
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{chol2inv}{Inverse from Choleski (or QR) Decomposition}{chol2inv}
\keyword{algebra}{chol2inv}
\keyword{array}{chol2inv}
%
\begin{Description}\relax
Invert a symmetric, positive definite square matrix from its Choleski
decomposition.  Equivalently, compute \eqn{(X'X)^{-1}}{}
from the (\eqn{R}{} part) of the QR decomposition of \eqn{X}{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
chol2inv(x, size = NCOL(x), LINPACK = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix.  The first \code{size} columns of the upper triangle
contain the Choleski decomposition of the matrix to be inverted.
\item[\code{size}] the number of columns of \code{x} containing the
Choleski decomposition.
\item[\code{LINPACK}] logical.  Should LINPACK be used (for compatibility with
\R{} < 1.7.0)?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is an interface to the LAPACK routine DPOTRI and the LINPACK
routine DPODI.
\end{Details}
%
\begin{Value}
The inverse of the matrix whose Choleski decomposition was given.
\end{Value}
%
\begin{References}\relax
Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
\emph{LINPACK Users Guide}.
Philadelphia: SIAM Publications.

Anderson. E. and ten others (1999)
\emph{LAPACK Users' Guide}. Third Edition.
SIAM.
Available on-line at
\url{http://www.netlib.org/lapack/lug/lapack_lug.html}.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{chol}{chol}}, \code{\LinkA{solve}{solve}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
cma <- chol(ma  <- cbind(1, 1:3, c(1,3,7)))
ma %*% chol2inv(cma)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{class}{Object Classes}{class}
\aliasA{class<\Rdash}{class}{class<.Rdash.}
\aliasA{inherits}{class}{inherits}
\aliasA{oldClass}{class}{oldClass}
\aliasA{oldClass<\Rdash}{class}{oldClass<.Rdash.}
\aliasA{unclass}{class}{unclass}
\keyword{methods}{class}
\keyword{classes}{class}
%
\begin{Description}\relax
\R{} possesses a simple generic function mechanism which can be used for
an object-oriented style of programming.  Method dispatch takes place
based on the class of the first argument to the generic function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
class(x)
class(x) <- value
unclass(x)
inherits(x, what, which = FALSE)

oldClass(x)
oldClass(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a \R{} object
\item[\code{what, value}] a character vector naming classes.  \code{value}
can also be \code{NULL}.
\item[\code{which}] logical affecting return value: see `Details'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Many \R{} objects have a \code{class} attribute, a character vector
giving the names of the classes from which the object \emph{inherits}.
If the object does not have a class attribute, it has an implicit
class, \code{"matrix"}, \code{"array"} or the result of
\code{\LinkA{mode}{mode}(x)} (except that integer vectors have implicit class
\code{"integer"}).  (Functions \code{oldClass} and
\code{oldClass<-} get and set the attribute, which can also be done
directly.)

When a generic function \code{fun} is applied to an object with class
attribute \code{c("first", "second")}, the system searches for a
function called \code{fun.first} and, if it finds it, applies it to
the object.  If no such function is found, a function called
\code{fun.second} is tried.  If no class name produces a suitable
function, the function \code{fun.default} is used (if it exists).  If
there is no class attribute, the implicit class is tried, then the
default method.

The function \code{class} prints the vector of names of classes an
object inherits from.  Correspondingly, \code{class<-} sets the
classes an object inherits from.  Assigning a zero-length vector or
\code{NULL} removes the class attribute.

\code{unclass} returns (a copy of) its argument with its class
attribute removed.  (It is not allowed for objects which cannot be
copied, namely environments and external pointers.)

\code{inherits} indicates whether its first argument inherits from any
of the classes specified in the \code{what} argument.  If \code{which}
is \code{TRUE} then an integer vector of the same length as
\code{what} is returned. Each element indicates the position in the
\code{class(x)} matched by the element of \code{what}; zero indicates
no match. If \code{which} is \code{FALSE} then \code{TRUE} is 
returned by \code{inherits} if any of the names in \code{what} match
with any \code{class}.

These functions with the exception of \code{inherits} are
\LinkA{primitive}{primitive}, so argument names are ignored.
\end{Details}
%
\begin{Section}{Formal classes}
An additional mechanism of \emph{formal} classes is available in
packages \pkg{methods} which is attached by default.  For objects
which have a formal class, its name is returned by \code{class}
as a character vector of length one.

The replacement version of the function sets the class to the value
provided.  For classes that have a formal definition, directly
replacing the class this way is strongly deprecated.  The expression
\code{\LinkA{as}{as}(object, value)} is the way to coerce an object to a
particular class.

The analogue of \code{inherits} for formal classes is \code{\LinkA{is}{is}}.
\end{Section}
%
\begin{Note}\relax
Functions \code{oldClass} and \code{oldClass<-} behave in the same way
as functions of those names in S-PLUS 5/6, \emph{but} in \R{}
\code{\LinkA{UseMethod}{UseMethod}} dispatches on the class as returned by
\code{class} (with some interpolated classes: see the link) rather
than \code{oldClass}.  \emph{However}, \LinkA{group generic}{group generic}s dispatch
on the \code{oldClass} for efficiency, and \LinkA{internal generic}{internal generic}s
only dispatch on objects for which \code{\LinkA{is.object}{is.object}} is true.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{UseMethod}{UseMethod}}, \code{\LinkA{NextMethod}{NextMethod}},
`\LinkA{group generic}{group generic}', `\LinkA{internal generic}{internal generic}'
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 10
class(x) # "numeric"
oldClass(x) # NULL
inherits(x, "a") #FALSE
class(x) <- c("a", "b")
inherits(x,"a") #TRUE
inherits(x, "a", TRUE) # 1
inherits(x, c("a", "b", "c"), TRUE) # 1 2 0
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{col}{Column Indexes}{col}
\keyword{array}{col}
%
\begin{Description}\relax
Returns a matrix of integers indicating their column number in a
matrix-like object, or a factor of column labels.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
col(x, as.factor = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix-like object, that is one with a two-dimensional
\code{dim}.
\item[\code{as.factor}] a logical value indicating whether the value should
be returned as a factor of column labels (created if necessary)
rather than as numbers.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
An integer (or factor) matrix with the same dimensions as \code{x} and whose
\code{ij}-th element is equal to \code{j} (or the \code{j}-th column label).
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{row}{row}} to get rows.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# extract an off-diagonal of a matrix
ma <- matrix(1:12, 3, 4)
ma[row(ma) == col(ma) + 1]

# create an identity 5-by-5 matrix
x <- matrix(0, nrow = 5, ncol = 5)
x[row(x) == col(x)] <- 1
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Colon}{Colon Operator}{Colon}
\aliasA{:}{Colon}{:}
\aliasA{colon}{Colon}{colon}
\keyword{manip}{Colon}
%
\begin{Description}\relax
Generate regular sequences.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
from:to
   a:b
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{from}] starting value of sequence.
\item[\code{to}] (maximal) end value of the sequence.
\item[\code{a, b}] \code{\LinkA{factor}{factor}}s of same length.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The binary operator \code{:} has two meanings: for factors \code{a:b} is
equivalent to \code{\LinkA{interaction}{interaction}(a, b)} (but the levels are
ordered and labelled differently).

For numeric arguments \code{from:to} is equivalent to \code{seq(from, to)},
and generates a sequence from \code{from} to \code{to} in steps of \code{1}
or \code{1-}.  Value \code{to} will be included if it differs from
\code{from} by an integer up to a numeric fuzz of about \code{1e-7}.
\end{Details}
%
\begin{Value}
For numeric arguments, a numeric vector.  This will be of type
\code{\LinkA{integer}{integer}} if \code{from} is integer-valued and the result
is representable in the integer type, otherwise of type
\code{"double"} (aka \code{\LinkA{mode}{mode}} \code{"\LinkA{numeric}{numeric}"}).

For factors, an unordered factor with levels labelled as \code{la:lb}
and ordered lexicographically (that is, \code{lb} varies fastest).
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.\\{}
(for numeric arguments: S does not have \code{:} for factors.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{seq}{seq}}.

As an alternative to using \code{:} for factors, \code{\LinkA{interaction}{interaction}}.

For \code{:} used in the formal representation of an interaction, see
\code{\LinkA{formula}{formula}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
1:4
pi:6 # real
6:pi # integer

f1 <- gl(2,3); f1
f2 <- gl(3,2); f2
f1:f2 # a factor, the "cross"  f1 x f2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{colSums}{Form Row and Column Sums and Means}{colSums}
\aliasA{colMeans}{colSums}{colMeans}
\aliasA{rowMeans}{colSums}{rowMeans}
\aliasA{rowSums}{colSums}{rowSums}
\keyword{array}{colSums}
\keyword{algebra}{colSums}
\keyword{arith}{colSums}
%
\begin{Description}\relax
Form row and column sums and means for numeric arrays.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
colSums (x, na.rm = FALSE, dims = 1)
rowSums (x, na.rm = FALSE, dims = 1)
colMeans(x, na.rm = FALSE, dims = 1)
rowMeans(x, na.rm = FALSE, dims = 1)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an array of two or more dimensions, containing numeric,
complex, integer or logical values, or a numeric data frame.
\item[\code{na.rm}] logical. Should missing values (including \code{NaN})
be omitted from the calculations?
\item[\code{dims}] integer: Which dimensions are regarded as `rows' or
`columns' to sum over.  For \code{row*}, the sum or mean is
over dimensions \code{dims+1, ...}; for \code{col*} it is over
dimensions \code{1:dims}.


\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These functions are equivalent to use of \code{\LinkA{apply}{apply}} with
\code{FUN = mean} or \code{FUN = sum} with appropriate margins, but
are a lot faster.  As they are written for speed, they blur over some
of the subtleties of \code{NaN} and \code{NA}.  If \code{na.rm =
    FALSE} and either \code{NaN} or \code{NA} appears in a sum, the
result will be one of \code{NaN} or \code{NA}, but which might be
platform-dependent.
\end{Details}
%
\begin{Value}
A numeric or complex array of suitable size, or a vector if the result is
one-dimensional.  The \code{dimnames} (or \code{names} for a vector
result) are taken from the original array.

If there are no values in a range to be summed over (after removing
missing values with \code{na.rm = TRUE}), that
component of the output is set to \code{0} (\code{*Sums}) or \code{NA}
(\code{*Means}), consistent with \code{\LinkA{sum}{sum}} and
\code{\LinkA{mean}{mean}}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{apply}{apply}}, \code{\LinkA{rowsum}{rowsum}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Compute row and column sums for a matrix:
x <- cbind(x1 = 3, x2 = c(4:1, 2:5))
rowSums(x); colSums(x)
dimnames(x)[[1]] <- letters[1:8]
rowSums(x); colSums(x); rowMeans(x); colMeans(x)
x[] <- as.integer(x)
rowSums(x); colSums(x)
x[] <- x < 3
rowSums(x); colSums(x)
x <- cbind(x1 = 3, x2 = c(4:1, 2:5))
x[3, ] <- NA; x[4, 2] <- NA
rowSums(x); colSums(x); rowMeans(x); colMeans(x)
rowSums(x, na.rm = TRUE); colSums(x, na.rm = TRUE)
rowMeans(x, na.rm = TRUE); colMeans(x, na.rm = TRUE)

## an array
dim(UCBAdmissions)
rowSums(UCBAdmissions); rowSums(UCBAdmissions, dims = 2)
colSums(UCBAdmissions); colSums(UCBAdmissions, dims = 2)

## complex case
x <- cbind(x1 = 3 + 2i, x2 = c(4:1, 2:5) - 5i)
x[3, ] <- NA; x[4, 2] <- NA
rowSums(x); colSums(x); rowMeans(x); colMeans(x)
rowSums(x, na.rm = TRUE); colSums(x, na.rm = TRUE)
rowMeans(x, na.rm = TRUE); colMeans(x, na.rm = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{commandArgs}{Extract Command Line Arguments}{commandArgs}
\keyword{environment}{commandArgs}
\keyword{sysdata}{commandArgs}
\keyword{programming}{commandArgs}
%
\begin{Description}\relax
Provides access to a copy of the command line arguments supplied when
this \R{} session was invoked.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
commandArgs(trailingOnly = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{trailingOnly}] logical.  Should only arguments after
\option{--args} be returned?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These arguments are captured before the standard \R{} command line
processing takes place.  This means that they are the unmodified
values.  This is especially useful with the \option{--args}
command-line flag to \R{}, as all of the command line after that flag
is skipped.
\end{Details}
%
\begin{Value}
A character vector containing the name of the executable and the
user-supplied command line arguments.  The first element is the name
of the executable by which \R{} was invoked.  The exact form of this
element is platform dependent: it may be the fully qualified name, or
simply the last component (or basename) of the application, or for an
embedded \R{} it can be anything the programmer supplied.

If \code{trailingOnly = TRUE}, a character vector of those arguments
(if any) supplied after \option{--args}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{Startup}{Startup}}
\code{\LinkA{BATCH}{BATCH}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
commandArgs()
## Spawn a copy of this application as it was invoked,
## subject to shell quoting issues
## system(paste(commandArgs(), collapse=" "))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{comment}{Query or Set a `Comment' Attribute}{comment}
\aliasA{comment<\Rdash}{comment}{comment<.Rdash.}
\keyword{attribute}{comment}
%
\begin{Description}\relax
These functions set and query a \emph{comment}
attribute for any \R{} objects.  This is typically useful for
\code{\LinkA{data.frame}{data.frame}}s or model fits.

Contrary to other \code{\LinkA{attributes}{attributes}}, the \code{comment} is not
printed (by \code{\LinkA{print}{print}} or \code{\LinkA{print.default}{print.default}}).

Assigning \code{NULL} or a zero-length character vector removes the
comment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
comment(x)
comment(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] any \R{} object
\item[\code{value}] a \code{character} vector, or \code{NULL}.
\end{ldescription}
\end{Arguments}
%
\begin{SeeAlso}\relax
\code{\LinkA{attributes}{attributes}} and \code{\LinkA{attr}{attr}} for other attributes.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- matrix(1:12, 3,4)
comment(x) <- c("This is my very important data from experiment #0234",
                "Jun 5, 1998")
x
comment(x)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Comparison}{Relational Operators}{Comparison}
\aliasA{"!=}{Comparison}{!=}
\aliasA{<}{Comparison}{<}
\aliasA{<=}{Comparison}{<=}
\aliasA{==}{Comparison}{==}
\aliasA{>}{Comparison}{>}
\aliasA{>=}{Comparison}{>=}
\aliasA{collation}{Comparison}{collation}
\keyword{logic}{Comparison}
%
\begin{Description}\relax
Binary operators which allow the comparison of values in atomic vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
x < y
x > y
x <= y
x >= y
x == y
x != y
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] atomic vectors, symbols, calls, or other objects for which
methods have been written.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The binary comparison operators are generic functions: methods can be
written for them individually or via the
\code{\LinkA{Ops}{S3groupGeneric}}) group generic function.  (See
\code{\LinkA{Ops}{S3groupGeneric}} for how dispatch is computed.)

Comparison of strings in character vectors is lexicographic within the
strings using the collating sequence of the locale in use: see
\code{\LinkA{locales}{locales}}.  The collating sequence of locales such as
\samp{en\_US} is normally different from \samp{C} (which should use
ASCII) and can be surprising.  Beware of making \emph{any} assumptions
about the collation order: e.g. in Estonian \code{Z} comes between
\code{S} and \code{T}, and collation is not necessarily
character-by-character -- in Danish \code{aa} sorts as a single
letter, after \code{z}.  In Welsh \code{ng} may or may not be a single
sorting unit: if it is it follows \code{g}.  Some platforms may
not respect the locale and always sort in numerical order of the bytes
in an 8-bit locale, or in Unicode point order for a UTF-8 locale (and
may not sort in the same order for the same language in different
character sets).  Collation of non-letters (spaces, punctuation signs,
hyphens, fractions and so on) is even more problematic. 

At least one of \code{x} and \code{y} must be an atomic vector, but if
the other is a list \R{} attempts to coerce it to the type of the atomic
vector: this will succeed if the list is made up of elements of length
one that can be coerced to the correct type.

If the two arguments are atomic vectors of different types, one is
coerced to the type of the other, the (decreasing) order of precedence
being character, complex, numeric, integer, logical and raw.

Missing values (\code{\LinkA{NA}{NA}}) and \code{\LinkA{NaN}{NaN}} values are
regarded as non-comparable even to themselves, so comparisons
involving them will always result in \code{NA}.  Missing values can
also result when character strings are compared and one is not valid
in the current collation locale. 

Language objects such as symbols and calls are deparsed to
character strings before comparison.
\end{Details}
%
\begin{Value}
A logical vector indicating the result of the element by element
comparison.  The elements of shorter vectors are recycled as
necessary.

Objects such as arrays or time-series can be compared this way
provided they are conformable.
\end{Value}
%
\begin{Section}{S4 methods}
These operators are members of the S4 \code{\LinkA{Compare}{Compare}} group generic,
and so methods can be written for them individually as well as for the
group generic (or the \code{Ops} group generic), with arguments
\code{c(e1, e2)}.
\end{Section}
%
\begin{Note}\relax
Do not use \code{==} and \code{!=} for tests, such as in \code{if}
expressions, where you must get a single \code{TRUE} or
\code{FALSE}.  Unless you are absolutely sure that nothing unusual
can happen, you should use the \code{\LinkA{identical}{identical}} function
instead.

For numerical and complex values, remember \code{==} and \code{!=} do
not allow for the finite representation of fractions, nor for rounding
error.  Using \code{\LinkA{all.equal}{all.equal}} with \code{identical} is almost
always preferable.  See the examples.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Collation of character strings is a complex topic.  For an
introduction see
\url{http://en.wikipedia.org/wiki/Collating_sequence}.  The
\emph{Unicode Collation Algorithm}
(\url{http://unicode.org/reports/tr10/}) is likely to be increasingly
influential.  Where available \R{} makes use of ICU
(\url{http://site.icu-project.org/} for collation.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{factor}{factor}} for the behaviour with factor arguments.

\code{\LinkA{Syntax}{Syntax}} for operator precedence.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- stats::rnorm(20)
x < 1
x[x > 0]

x1 <- 0.5 - 0.3
x2 <- 0.3 - 0.1
x1 == x2                           # FALSE on most machines
identical(all.equal(x1, x2), TRUE) # TRUE everywhere


z <- c(32:126, 160:255) # range of most 8-bit charsets, Latin-1 in Unicode
x <- if(l10n_info()$MBCS) {
    intToUtf8(z, multiple = TRUE)
} else rawToChar(as.raw(z), multiple= TRUE)
## by number
writeLines(strwrap(paste(x, collapse=" "), width = 60))
## by locale collation
writeLines(strwrap(paste(sort(x), collapse=" "), width = 60))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{complex}{Complex Vectors}{complex}
\aliasA{Arg}{complex}{Arg}
\aliasA{as.complex}{complex}{as.complex}
\aliasA{Conj}{complex}{Conj}
\aliasA{Im}{complex}{Im}
\aliasA{is.complex}{complex}{is.complex}
\aliasA{Mod}{complex}{Mod}
\aliasA{Re}{complex}{Re}
\keyword{complex}{complex}
%
\begin{Description}\relax
Basic functions which support complex arithmetic in R.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
complex(length.out = 0, real = numeric(), imaginary = numeric(),
        modulus = 1, argument = 0)
as.complex(x, ...)
is.complex(x)

Re(z)
Im(z)
Mod(z)
Arg(z)
Conj(z)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length.out}] numeric.  Desired length of the output vector,
inputs being recycled as needed.
\item[\code{real}] numeric vector.
\item[\code{imaginary}] numeric vector.
\item[\code{modulus}] numeric vector.
\item[\code{argument}] numeric vector.
\item[\code{x}] an object, probably of mode \code{complex}.
\item[\code{z}] an object of mode \code{complex}, or one of a class for which
a methods has been defined.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Complex vectors can be created with \code{complex}.  The vector can be
specified either by giving its length, its real and imaginary parts, or
modulus and argument.  (Giving just the length generates a vector of
complex zeroes.)

\code{as.complex} attempts to coerce its argument to be of complex
type: like \code{\LinkA{as.vector}{as.vector}} it strips attributes including
names. All forms of \code{NA} and \code{NaN} are coerced to a complex
\code{NA}, for which both the real and imaginary parts are \code{NA}.

Note that \code{is.complex} and \code{is.numeric} are never both
\code{TRUE}.

The functions \code{Re}, \code{Im}, \code{Mod}, \code{Arg} and
\code{Conj} have their usual interpretation as returning the real
part, imaginary part, modulus, argument and complex conjugate for
complex values.  Modulus and argument are also called the \emph{polar
coordinates}.  If \eqn{z = x + i y}{} with real \eqn{x}{} and \eqn{y}{}, for
\eqn{r = Mod(z) = \sqrt{x^2 + y^2}}{}, and \eqn{\phi = Arg(z)}{},
\eqn{x = r*\cos(\phi)}{} and \eqn{y = r*\sin(\phi)}{}.  They are all generic
functions: methods can be defined for them individually or via the
\code{\LinkA{Complex}{S3groupGeneric}} group generic.

In addition, the elementary trigonometric, logarithmic and exponential
functions are available for complex values.

\code{as.complex} and \code{is.complex} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored.  This may not be true of methods for \code{as.complex}.
\end{Details}
%
\begin{Section}{S4 methods}
\code{as.complex} is primitive and can have S4 methods set.

\code{Re}, \code{Im}, \code{Mod}, \code{Arg} and \code{Conj}
constitute the S4 group generic
\code{\LinkA{Complex}{S4groupGeneric}} and so S4 methods can be
set for them individually or via the group generic.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

0i ^ (-3:3)

matrix(1i^ (-6:5), nrow=4) #- all columns are the same
0 ^ 1i # a complex NaN

## create a complex normal vector
z <- complex(real = stats::rnorm(100), imaginary = stats::rnorm(100))
## or also (less efficiently):
z2 <- 1:2 + 1i*(8:9)

## The Arg(.) is an angle:
zz <- (rep(1:4,len=9) + 1i*(9:1))/10
zz.shift <- complex(modulus = Mod(zz), argument= Arg(zz) + pi)
plot(zz, xlim=c(-1,1), ylim=c(-1,1), col="red", asp = 1,
     main = expression(paste("Rotation by "," ", pi == 180^o)))
abline(h=0,v=0, col="blue", lty=3)
points(zz.shift, col="orange")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{conditions}{Condition Handling and Recovery}{conditions}
\aliasA{.handleSimpleError}{conditions}{.handleSimpleError}
\aliasA{.signalSimpleWarning}{conditions}{.signalSimpleWarning}
\aliasA{as.character.condition}{conditions}{as.character.condition}
\aliasA{as.character.error}{conditions}{as.character.error}
\aliasA{computeRestarts}{conditions}{computeRestarts}
\aliasA{condition}{conditions}{condition}
\aliasA{conditionCall}{conditions}{conditionCall}
\methaliasA{conditionCall.condition}{conditions}{conditionCall.condition}
\aliasA{conditionMessage}{conditions}{conditionMessage}
\methaliasA{conditionMessage.condition}{conditions}{conditionMessage.condition}
\aliasA{findRestart}{conditions}{findRestart}
\aliasA{invokeRestart}{conditions}{invokeRestart}
\aliasA{invokeRestartInteractively}{conditions}{invokeRestartInteractively}
\aliasA{isRestart}{conditions}{isRestart}
\aliasA{print.condition}{conditions}{print.condition}
\aliasA{print.restart}{conditions}{print.restart}
\aliasA{restartDescription}{conditions}{restartDescription}
\aliasA{restartFormals}{conditions}{restartFormals}
\aliasA{signalCondition}{conditions}{signalCondition}
\aliasA{simpleCondition}{conditions}{simpleCondition}
\aliasA{simpleError}{conditions}{simpleError}
\aliasA{simpleMessage}{conditions}{simpleMessage}
\aliasA{simpleWarning}{conditions}{simpleWarning}
\aliasA{tryCatch}{conditions}{tryCatch}
\aliasA{withCallingHandlers}{conditions}{withCallingHandlers}
\aliasA{withRestarts}{conditions}{withRestarts}
\keyword{programming}{conditions}
\keyword{error}{conditions}
%
\begin{Description}\relax
These functions provide a mechanism for handling unusual conditions,
including errors and warnings.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
tryCatch(expr, ..., finally)
withCallingHandlers(expr, ...)

signalCondition(cond)

simpleCondition(message, call = NULL)
simpleError    (message, call = NULL)
simpleWarning  (message, call = NULL)
simpleMessage  (message, call = NULL)

## S3 method for class 'condition':
as.character(x, ...)
## S3 method for class 'error':
as.character(x, ...)
## S3 method for class 'condition':
print(x, ...)
## S3 method for class 'restart':
print(x, ...)

conditionCall(c)
## S3 method for class 'condition':
conditionCall(c)
conditionMessage(c)
## S3 method for class 'condition':
conditionMessage(c)

withRestarts(expr, ...)

computeRestarts(cond = NULL)
findRestart(name, cond = NULL)
invokeRestart(r, ...)
invokeRestartInteractively(r)

isRestart(x)
restartDescription(r)
restartFormals(r)

.signalSimpleWarning(msg, call)
.handleSimpleError(h, msg, call)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{c}] a condition object.
\item[\code{call}] call expression.
\item[\code{cond}] a condition object.
\item[\code{expr}] expression to be evaluated.
\item[\code{finally}] expression to be evaluated before returning or exiting.
\item[\code{h}] function.
\item[\code{message}] character string.
\item[\code{msg}] character string.
\item[\code{name}] character string naming a restart.
\item[\code{r}] restart object.
\item[\code{x}] object.
\item[\code{...}] additional arguments; see details below.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax

The condition system provides a mechanism for signaling and
handling unusual conditions, including errors and warnings.
Conditions are represented as objects that contain information
about the condition that occurred, such as a message and the call in
which the condition occurred.  Currently conditions are S3-style
objects, though this may eventually change.

Conditions are objects inheriting from the abstract class
\code{condition}.  Errors and warnings are objects inheriting
from the abstract subclasses \code{error} and \code{warning}.
The class \code{simpleError} is the class used by \code{stop}
and all internal error signals.  Similarly, \code{simpleWarning}
is used by \code{warning}, and \code{simpleMessage} is used by
\code{message}.  The constructors by the same names take a string
describing the condition as argument and an optional call.  The
functions \code{conditionMessage} and \code{conditionCall} are
generic functions that return the message and call of a condition.

Conditions are signaled by \code{signalCondition}.  In addition,
the \code{stop} and \code{warning} functions have been modified to
also accept condition arguments.

The function \code{tryCatch} evaluates its expression argument
in a context where the handlers provided in the \code{...}
argument are available.  The \code{finally} expression is then
evaluated in the context in which \code{tryCatch} was called; that
is, the handlers supplied to the current \code{tryCatch} call are
not active when the \code{finally} expression is evaluated.

Handlers provided in the \code{...} argument to \code{tryCatch}
are established for the duration of the evaluation of \code{expr}.
If no condition is signaled when evaluating \code{expr} then
\code{tryCatch} returns the value of the expression.

If a condition is signaled while evaluating \code{expr} then
established handlers are checked, starting with the most recently
established ones, for one matching the class of the condition.
When several handlers are supplied in a single \code{tryCatch} then
the first one is considered more recent than the second.  If a
handler is found then control is transferred to the
\code{tryCatch} call that established the handler, the handler
found and all more recent handlers are disestablished, the handler
is called with the condition as its argument, and the result
returned by the handler is returned as the value of the
\code{tryCatch} call.

Calling handlers are established by \code{withCallingHandlers}.  If
a condition is signaled and the applicable handler is a calling
handler, then the handler is called by \code{signalCondition} in
the context where the condition was signaled but with the available
handlers restricted to those below the handler called in the
handler stack.  If the handler returns, then the next handler is
tried; once the last handler has been tried, \code{signalCondition}
returns \code{NULL}.

User interrupts signal a condition of class \code{interrupt} that
inherits directly from class \code{condition} before executing the
default interrupt action.

Restarts are used for establishing recovery protocols.  They can be
established using \code{withRestarts}.  One pre-established restart is
an \code{abort} restart that represents a jump to top level.

\code{findRestart} and \code{computeRestarts} find the available
restarts.  \code{findRestart} returns the most recently established
restart of the specified name.  \code{computeRestarts} returns a
list of all restarts.  Both can be given a condition argument and
will then ignore restarts that do not apply to the condition.

\code{invokeRestart} transfers control to the point where the
specified restart was established and calls the restart's handler with the
arguments, if any, given as additional arguments to
\code{invokeRestart}.  The restart argument to \code{invokeRestart}
can be a character string, in which case \code{findRestart} is used
to find the restart.

New restarts for \code{withRestarts} can be specified in several ways.
The simplest is in \code{name=function} form where the function is
the handler to call when the restart is invoked.  Another simple
variant is as \code{name=string} where the string is stored in the
\code{description} field of the restart object returned by
\code{findRestart}; in this case the handler ignores its arguments
and returns \code{NULL}.  The most flexible form of a restart
specification is as a list that can include several fields, including
\code{handler}, \code{description}, and \code{test}.  The
\code{test} field should contain a function of one argument, a
condition, that returns \code{TRUE} if the restart applies to the
condition and \code{FALSE} if it does not; the default function
returns \code{TRUE} for all conditions.

One additional field that can be specified for a restart is
\code{interactive}.  This should be a function of no arguments that
returns a list of arguments to pass to the restart handler.  The list
could be obtained by interacting with the user if necessary.  The
function \code{invokeRestartInteractively} calls this function to
obtain the arguments to use when invoking the restart.  The default
\code{interactive} method queries the user for values for the
formal arguments of the handler function.

\code{.signalSimpleWarning} and \code{.handleSimpleError}
are used internally and should not be called directly.
\end{Details}
%
\begin{References}\relax
The \code{tryCatch} mechanism is similar to Java
error handling.  Calling handlers are based on Common Lisp and
Dylan.  Restarts are based on the Common Lisp restart mechanism.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{stop}{stop}} and \code{\LinkA{warning}{warning}} signal conditions,
and \code{\LinkA{try}{try}} is essentially a simplified version of \code{tryCatch}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
tryCatch(1, finally=print("Hello"))
e <- simpleError("test error")
## Not run: 
 stop(e)
 tryCatch(stop(e), finally=print("Hello"))
 tryCatch(stop("fred"), finally=print("Hello"))

## End(Not run)
tryCatch(stop(e), error = function(e) e, finally=print("Hello"))
tryCatch(stop("fred"),  error = function(e) e, finally=print("Hello"))
withCallingHandlers({ warning("A"); 1+2 }, warning = function(w) {})
## Not run: 
 { withRestarts(stop("A"), abort = function() {}); 1 }

## End(Not run)
withRestarts(invokeRestart("foo", 1, 2), foo = function(x, y) {x + y})
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{conflicts}{Search for Masked Objects on the Search Path}{conflicts}
\keyword{utilities}{conflicts}
%
\begin{Description}\relax
\code{conflicts} reports on objects that exist with the same name in
two or more places on the \code{\LinkA{search}{search}} path, usually because
an object in the user's workspace or a package is masking a system
object of the same name.  This helps discover unintentional masking.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
conflicts(where = search(), detail = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{where}] A subset of the search path, by default the whole search path.
\item[\code{detail}] If \code{TRUE}, give the masked or masking functions for
all members of the search path.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
If \code{detail=FALSE}, a character vector of masked objects.
If \code{detail=TRUE}, a list of character vectors giving the masked or
masking objects in that member of the search path.  Empty vectors are
omitted.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
lm <- 1:3
conflicts(, TRUE)
## gives something like
# $.GlobalEnv
# [1] "lm"
#
# $package:base
# [1] "lm"

## Remove things from your "workspace" that mask others:
remove(list = conflicts(detail=TRUE)$.GlobalEnv)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{connections}{Functions to Manipulate Connections}{connections}
\aliasA{bzfile}{connections}{bzfile}
\aliasA{clipboard}{connections}{clipboard}
\aliasA{close}{connections}{close}
\methaliasA{close.connection}{connections}{close.connection}
\aliasA{connection}{connections}{connection}
\aliasA{fifo}{connections}{fifo}
\aliasA{file}{connections}{file}
\aliasA{flush}{connections}{flush}
\methaliasA{flush.connection}{connections}{flush.connection}
\aliasA{gzfile}{connections}{gzfile}
\aliasA{isIncomplete}{connections}{isIncomplete}
\aliasA{isOpen}{connections}{isOpen}
\aliasA{open}{connections}{open}
\methaliasA{open.connection}{connections}{open.connection}
\aliasA{pipe}{connections}{pipe}
\aliasA{print.connection}{connections}{print.connection}
\aliasA{socketConnection}{connections}{socketConnection}
\aliasA{summary.connection}{connections}{summary.connection}
\aliasA{unz}{connections}{unz}
\aliasA{url}{connections}{url}
\aliasA{xzfile}{connections}{xzfile}
\keyword{file}{connections}
\keyword{connection}{connections}
%
\begin{Description}\relax
Functions to create, open and close connections.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file(description = "", open = "", blocking = TRUE,
     encoding = getOption("encoding"))

url(description, open = "", blocking = TRUE,
    encoding = getOption("encoding"))

gzfile(description, open = "", encoding = getOption("encoding"),
       compression = 6)

bzfile(description, open = "", encoding = getOption("encoding"),
       compression = 9)

xzfile(description, open = "", encoding = getOption("encoding"),
       compression = 6)

unz(description, filename, open = "",
    encoding = getOption("encoding"))

pipe(description, open = "", encoding = getOption("encoding"))

fifo(description, open = "", blocking = FALSE,
     encoding = getOption("encoding"))

socketConnection(host = "localhost", port, server = FALSE,
                 blocking = FALSE, open = "a+",
                 encoding = getOption("encoding"))

open(con, ...)
## S3 method for class 'connection':
open(con, open = "r", blocking = TRUE, ...)

close(con, ...)
## S3 method for class 'connection':
close(con, type = "rw", ...)

flush(con)

isOpen(con, rw = "")
isIncomplete(con)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{description}] character string. A description of the connection:
see `Details'.
\item[\code{open}] character.  A description of how to open the connection
(if it should be opened initially).  See section `Modes' for
possible values.
\item[\code{blocking}] logical.  See the `Blocking' section.
\item[\code{encoding}] The name of the encoding to be used.  See the
`Encoding' section.
\item[\code{compression}] integer in 0--9.  The amount of compression to be
applied when writing, from none to maximal available.  For
\code{xzfile} can also be negative: see the `Compression'
section.
\item[\code{filename}] a filename within a zip file.
\item[\code{host}] character.  Host name for port.
\item[\code{port}] integer.  The TCP port number.
\item[\code{server}] logical.  Should the socket be a client or a server?
\item[\code{con}] a connection.
\item[\code{type}] character. Currently ignored.
\item[\code{rw}] character.  Empty or \code{"read"} or \code{"write"},
partial matches allowed.
\item[\code{...}] arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The first nine functions create connections.  By default the
connection is not opened (except for \code{socketConnection}), but may
be opened by setting a non-empty value of argument \code{open}.

For \code{file} the description is a path to the file to be opened or
a complete URL (when it is the same as calling \code{url}), or
\code{""} (the default) or \code{"clipboard"} (see the
`Clipboard' section).  Use \code{"stdin"} to refer to the
C-level `standard input' of the process (which need not be
connected to anything
in a console or embedded version of \R{}), provided the C99 function
\code{fdopen} is supported on the platform.
(See also \code{\LinkA{stdin}{stdin}} for the subtly different R-level concept
of \code{stdin}.)

For \code{url} the description is a complete URL, including scheme
(such as \samp{http://}, \samp{ftp://} or \samp{file://}).  Proxies
can be specified for HTTP and FTP \code{url} connections: see
\code{\LinkA{download.file}{download.file}}.

For \code{gzfile} the description is the path to a file compressed by
\command{gzip}: it can also open for reading uncompressed files and
(as from \R{} 2.10.0) those compressed by \command{bzip2}, \command{xz}
or \command{lzma}.

For \code{bzfile} the description is the path to a file compressed by
\command{bzip2}.

For \code{xzfile} the description is the path to a file compressed by
\command{xz} (\url{http://en.wikipedia.org/wiki/Xz}) or (for reading
only) \command{lzma} (\url{http://en.wikipedia.org/wiki/LZMA}).

\code{unz} reads (only) single files within zip files, in binary mode.
The description is the full path to the zip file, with \file{.zip}
extension if required.

For \code{pipe} the description is the command line to be piped to or
from.

For \code{fifo} the description is the path of the fifo.

All platforms support \code{file}, \code{gzfile}, \code{bzfile},
\code{xzfile} \code{unz} and \code{url("file://")} connections.  The
other types may be partially implemented or not implemented at all.
(They do work on most Unix platforms, and all but \code{fifo} on
Windows.)

The intention is that \code{file} and \code{gzfile} can be used
generally for text input (from files and URLs) and binary input
respectively.

\code{open}, \code{close} and \code{seek} are generic functions: the
following applies to the methods relevant to connections.

\code{open} opens a connection.  In general functions using
connections will open them if they are not open, but then close them
again, so to leave a connection open call \code{open} explicitly.

\code{close} closes and destroys a connection.  This will happen
automatically in due course (with a warning) if there is no longer an
\R{} object referring to the connection.

A maximum of 128 connections can be allocated (not necessarily open)
at any one time.  Three of these are pre-allocated (see
\code{\LinkA{stdout}{stdout}}).   The OS will impose limits on the numbers of
connections of various types, but these are usually larger than 125.

\code{flush} flushes the output stream of a connection open for
write/append (where implemented).

If for a \code{file} or \code{fifo} connection the description is
\code{""}, the file/fifo is immediately opened (in \code{"w+"} mode
unless \code{open = "w+b"} is specified) and unlinked from the file
system.  This provides a temporary file/fifo to write to and then read
from.
\end{Details}
%
\begin{Value}
\code{file}, \code{pipe}, \code{fifo}, \code{url}, \code{gzfile},
\code{bzfile}, \code{xzfile}, \code{unz} and \code{socketConnection}
return a connection object which inherits from class
\code{"connection"} and has a first more specific class.

\code{isOpen} returns a logical value, whether the connection is
currently open.

\code{isIncomplete} returns a logical value, whether last read attempt
was blocked, or for an output text connection whether there is
unflushed output.
\end{Value}
%
\begin{Section}{URLs}
A note on \samp{file://} URLs.  The most general form (from RFC1738) is
\samp{file://host/path/to/file}, but \R{} only accepts the form with an
empty \code{host} field referring to the local machine.
This is then \samp{file:///path/to/file}, where \samp{path/to/file} is
relative to \file{/}.  So although the third slash is strictly part of
the specification not part of the path, this can be regarded as a way
to specify the file \file{/path/to/file}.  It is not possible to
specify a relative path using a file URL.

No attempt is made to decode an encoded URL: call
\code{\LinkA{URLdecode}{URLdecode}} if necessary.

Note that \samp{https://} connections are
not supported.
\end{Section}
%
\begin{Section}{Modes}
Possible values for the argument \code{open} are
\begin{description}

\item[\code{"r"} or \code{"rt"}] Open for reading in (usually) text mode.
\item[\code{"w"} or \code{"wt"}] Open for writing in (usually) text mode.
\item[\code{"a"} or \code{"at"}] Open for appending in text mode.
\item[\code{"rb"}] Open for reading in binary mode.
\item[\code{"wb"}] Open for writing in binary mode.
\item[\code{"ab"}] Open for appending in binary mode.
\item[\code{"r+"}, \code{"r+b"}] Open for reading and writing.
\item[\code{"w+"}, \code{"w+b"}] Open for reading and writing,
truncating file initially.
\item[\code{"a+"}, \code{"a+b"}] Open for reading and appending.

\end{description}

Not all modes are applicable to all connections: for example URLs can
only be opened for reading.  Only file and socket connections can be
opened for both reading and writing/appending.

If a file or fifo is created on a Unix-alike, its permissions will be
the maximal allowed by the current setting of \code{umask} (see
\code{\LinkA{Sys.umask}{Sys.umask}}).

For many connections there is little or no difference between text and
binary modes. For file-like connections on Windows, translation of
line endings (between LF and CRLF) is done in text mode only (but text
read operations on connectiions such as \code{\LinkA{readLines}{readLines}},
\code{\LinkA{scan}{scan}} and \code{\LinkA{source}{source}} work for any form of line
ending).  Various \R{} operations are possible in only one of the modes:
for example \code{\LinkA{pushBack}{pushBack}} is text-oriented and is only
allowed on connections open for reading in text mode, and binary
operations such as \code{\LinkA{readBin}{readBin}}, \code{\LinkA{load}{load}} and
\code{\LinkA{save}{save}} operations can only be done on binary-mode
connections.

The mode of a connection is determined when actually opened, which is
deferred if \code{open = ""} is given (the default for all but socket
connections).  An explicit call to \code{open} can specify the mode,
but otherwise the mode will be \code{"r"}.  \code{gzfile},
\code{bzfile} and \code{xzfile} connections are exceptions, as the
compressed file always has to be opened in binary mode and no
conversion of line-endings is done even on Windows.  Most operations
that need write access or text-only or binary-only mode will override
the default mode of a non-yet-open connection.
\end{Section}
%
\begin{Section}{Compression}
\R{} has for a long time supported \command{gzip} and \command{bzip2}
compression, and support for \command{xz} compresssion (and read-only
support for its precursor \code{lzma} compression) was added in \R{}
2.10.0.

For reading, the type of compression (if any) can be determined from
the first few bytes of the file, and this is exploited as from \R{}
2.10.0.  Thus for \code{file} connections, if \code{open} is
\code{""}, \code{"r"} or \code{"rt"} the connection can read any of
the compressed file types as well as uncompressed files.  (Using
\code{"rb"} will allow compressed files to be read byte-by-byte.)
Similarly, \code{gzfile} connections can read any of the forms of
compression and uncompressed files in any read mode.

(The type of compression is determined when the connection is created
if \code{open} is unspecifed and a file of that name exists.  If the
intention is to open the connection to write a file with a
\emph{different} form of compression under that name, specify
\code{open = "w"} when the connection is created or
\code{\LinkA{unlink}{unlink}} the file before creating the connection.)

For write-mode connections, \code{compress} specifies now hard the
compressor works to minimize the file size, and higher values need
more CPU time and more working memory (up to ca 800Mb for
\code{xzfile(compress = 9)}).  For \code{xzfile} negative values of
\code{compress} correspond to adding the \command{xz} argument
\option{-e}: this takes more time (double?) to compress but may
achieve (slightly) better compression.  The default (\code{6}) has
good compression and modest (100Mb memory usage): but if you are using
\code{xz} compression you are probably looking for high compression.

Choosing the type of compression involves tradeoffs: \command{gzip},
\command{bzip2} and \command{xz} are successively less widely supported,
need more resources for both compression and decompression, and
achieve more compression (although individual files may buck the
general trend).  Typical experience is that \code{bzip2} compression
is 15\% better on text files than \code{gzip} compression, and
\code{xz} with maximal compression 30\% better.  The experience with
\R{} \code{\LinkA{save}{save}} files is similar, but on some large \file{.rda}
files \code{xz} compression is much better than the other two.  With
current computers decompression times even with \code{compress = 9}
are typically modest and reading compressed files is usually faster
than uncompressed ones because of the reduction in disc activity.
\end{Section}
%
\begin{Section}{Encoding}
The encoding of the input/output stream of a connection can be
specified by name in the same way as it would be given to
\code{\LinkA{iconv}{iconv}}: see that help page for how to find out what
encoding names are recognized on your platform.  Additionally,
\code{""} and \code{"native.enc"} both mean the `native'
encoding, that is the internal encoding of the current locale and
hence no translation is done.

Re-encoding only works for connections in text mode.

The encoding \code{"UCS-2LE"} is treated specially, as it is the
appropriate value for Windows `Unicode' text files.  If the
first two bytes are the Byte Order Mark \code{0xFFFE} then these are
removed as most implementations of \code{\LinkA{iconv}{iconv}} do not accept
BOMs.  Note that some implementations
will handle BOMs using encoding \code{"UCS-2"} but many
will not.

Requesting a conversion that is not supported is an error, reported
when the connection is opened.  Exactly what happens when the
requested translation cannot be done is in general undocumented.  On
output the result is likely to be that up to the error, with a
warning.  On input, it will most likely be all or some of the input up
to the error.
\end{Section}
%
\begin{Section}{Blocking}
Whether or not the connection blocks can be specified for file, url
(default yes) fifo and socket connections (default not).

In blocking mode, functions using the connection do not return to the
\R{} evaluator until the read/write is complete.  In non-blocking mode,
operations return as soon as possible, so on input they will return
with whatever input is available (possibly none) and for output they
will return whether or not the write succeeded.

The function \code{\LinkA{readLines}{readLines}} behaves differently in respect of
incomplete last lines in the two modes: see its help page.

Even when a connection is in blocking mode, attempts are made to
ensure that it does not block the event loop and hence the operation
of GUI parts of \R{}.  These do not always succeed, and the whole \R{}
process will be blocked during a DNS lookup on Unix, for example.

Most blocking operations on HTTP/FTP URLs and on sockets are subject to the
timeout set by \code{options("timeout")}.  Note that this is a timeout
for no response, not for the whole operation.  The timeout is set at
the time the connection is opened (more precisely, when the last
connection of that type -- \samp{http:}, \samp{ftp:} or socket -- was
opened).
\end{Section}
%
\begin{Section}{Fifos}
Fifos default to non-blocking.  That follows S version 4 and is
probably most natural, but it does have some implications.  In
particular, opening a non-blocking fifo connection for writing (only)
will fail unless some other process is reading on the fifo.

Opening a fifo for both reading and writing (in any mode: one can only
append to fifos) connects both sides of the fifo to the \R{} process,
and provides an similar facility to \code{file()}.
\end{Section}
%
\begin{Section}{Clipboard}
\code{file} can be used with \code{description = "clipboard"}
in mode \code{"r"} only.  This reads the X11 primary selection (see
\url{http://standards.freedesktop.org/clipboards-spec/clipboards-latest.txt}),
which can also be specified as \code{"X11\_primary"} and the secondary
selection as \code{"X11\_secondary"}.  On most systems the clipboard
selection (that used by `Copy' from an `Edit' menu) can
be specified as \code{"X11\_clipboard"}.

When a clipboard is opened for reading, the contents are immediately
copied to internal storage in the connection.

Unix users wishing to \emph{write} to one of the selections may be
able to do so via \code{xclip}
(\url{http://sourceforge.net/projects/xclip/}), for example by
\code{pipe("xclip -i", "w")} for the primary selection.

Mac OS X users can use \code{pipe("pbpaste")} and
\code{pipe("pbcopy", "w")} to read from and write to that system's
clipboard.
\end{Section}
%
\begin{Note}\relax
\R{}'s connections are modelled on those in S version 4 (see Chambers,
1998).  However \R{} goes well beyond the S model, for example in output
text connections and URL, compressed and socket connections.

The default open mode in \R{} is \code{"r"} except for socket connections.
This differs from S, where it is the equivalent of \code{"r+"},
known as \code{"*"}.

On (rare) platforms where \code{vsnprintf} does not return the needed length
of output there is a 100,000 character output limit on
the length of line for \code{fifo}, \code{gzfile}, \code{bzfile} and
\code{xzfile} connections: longer lines will be truncated with a
warning.
\end{Note}
%
\begin{References}\relax
Chambers, J. M. (1998)
\emph{Programming with Data.  A Guide to the S Language.} Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{textConnection}{textConnection}}, \code{\LinkA{seek}{seek}},
\code{\LinkA{showConnections}{showConnections}}, \code{\LinkA{pushBack}{pushBack}}.

Functions making direct use of connections are \code{\LinkA{readLines}{readLines}},
\code{\LinkA{readBin}{readBin}}, \code{\LinkA{readChar}{readChar}},
\code{\LinkA{writeLines}{writeLines}}, \code{\LinkA{writeBin}{writeBin}},
\code{\LinkA{writeChar}{writeChar}}, \code{\LinkA{cat}{cat}}, \code{\LinkA{sink}{sink}},
\code{\LinkA{scan}{scan}}, \code{\LinkA{parse}{parse}}, \code{\LinkA{read.dcf}{read.dcf}},
\code{\LinkA{load}{load}}, \code{\LinkA{save}{save}}, \code{\LinkA{dput}{dput}} and
\code{\LinkA{dump}{dump}}.

\code{\LinkA{capabilities}{capabilities}} to see if HTTP/FTP \code{url},
\code{fifo} and \code{socketConnection} are supported by this build of \R{}.

\code{\LinkA{gzcon}{gzcon}} to wrap \command{gzip} (de)compression around a
connection.

\code{\LinkA{memCompress}{memCompress}} for more ways to (de)compress and references
on data compression.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
zz <- file("ex.data", "w")  # open an output file connection
cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file = zz, sep = "\n")
cat("One more line\n", file = zz)
close(zz)
readLines("ex.data")
unlink("ex.data")

zz <- gzfile("ex.gz", "w")  # compressed file
cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file = zz, sep = "\n")
close(zz)
readLines(zz <- gzfile("ex.gz"))
close(zz)
unlink("ex.gz")

zz <- bzfile("ex.bz2", "w")  # bzip2-ed file
cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file = zz, sep = "\n")
close(zz)
print(readLines(zz <- bzfile("ex.bz2")))
close(zz)
unlink("ex.bz2")

## An example of a file open for reading and writing
Tfile <- file("test1", "w+")
c(isOpen(Tfile, "r"), isOpen(Tfile, "w")) # both TRUE
cat("abc\ndef\n", file=Tfile)
readLines(Tfile)
seek(Tfile, 0, rw="r") # reset to beginning
readLines(Tfile)
cat("ghi\n", file=Tfile)
readLines(Tfile)
close(Tfile)
unlink("test1")

## We can do the same thing with an anonymous file.
Tfile <- file()
cat("abc\ndef\n", file=Tfile)
readLines(Tfile)
close(Tfile)

## fifo example -- may fail, e.g. on Cygwin, even with OS support for fifos
if(capabilities("fifo")) {
  zz <- fifo("foo-fifo", "w+")
  writeLines("abc", zz)
  print(readLines(zz))
  close(zz)
  unlink("foo-fifo")
}

## Unix examples of use of pipes

# read listing of current directory
readLines(pipe("ls -1"))

# remove trailing commas. Suppose

## Not run: % cat data2
450, 390, 467, 654,  30, 542, 334, 432, 421,
357, 497, 493, 550, 549, 467, 575, 578, 342,
446, 547, 534, 495, 979, 479
## End(Not run)
# Then read this by
scan(pipe("sed -e s/,$// data2_"), sep=",")


# convert decimal point to comma in output: see also write.table
# both R strings and (probably) the shell need \ doubled
zz <- pipe(paste("sed s/\\\\./,/ >", "outfile"), "w")
cat(format(round(stats::rnorm(48), 4)), fill=70, file = zz)
close(zz)
file.show("outfile", delete.file=TRUE)

## example for a machine running a finger daemon

con <- socketConnection(port = 79, blocking = TRUE)
writeLines(paste(system("whoami", intern=TRUE), "\r", sep=""), con)
gsub(" *$", "", readLines(con))
close(con)


## Not run: 
## two R processes communicating via non-blocking sockets
# R process 1
con1 <- socketConnection(port = 6011, server=TRUE)
writeLines(LETTERS, con1)
close(con1)

# R process 2
con2 <- socketConnection(Sys.info()["nodename"], port = 6011)
# as non-blocking, may need to loop for input
readLines(con2)
while(isIncomplete(con2)) {Sys.sleep(1); readLines(con2)}
close(con2)

## examples of use of encodings
# write a file in UTF-8
cat(x, file = (con <- file("foo", "w", encoding="UTF-8"))); close(con)
# read a 'Windows Unicode' file
A <- read.table(con <- file("students", encoding="UCS-2LE")); close(con)

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Constants}{Built-in Constants}{Constants}
\aliasA{LETTERS}{Constants}{LETTERS}
\aliasA{letters}{Constants}{letters}
\aliasA{month.abb}{Constants}{month.abb}
\aliasA{month.name}{Constants}{month.name}
\aliasA{pi}{Constants}{pi}
\keyword{sysdata}{Constants}
%
\begin{Description}\relax
Constants built into \R{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
LETTERS
letters
month.abb
month.name
pi
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
\R{} has a small number of built-in constants (there is also a rather
larger library of data sets which can be loaded with the function
\code{\LinkA{data}{data}}).

The following constants are available:
\begin{itemize}

\item \code{LETTERS}: the 26 upper-case letters of the Roman
alphabet;
\item \code{letters}: the 26 lower-case letters of the Roman
alphabet;
\item \code{month.abb}: the three-letter abbreviations for the
English month names;
\item \code{month.name}: the English names for the months of the
year;
\item \code{pi}: the ratio of the circumference of a circle to its
diameter.

\end{itemize}


These are implemented as variables in the base name space taking
appropriate values. 
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{data}{data}}, \code{\LinkA{DateTimeClasses}{DateTimeClasses}}.

\code{\LinkA{Quotes}{Quotes}} for the parsing of character constants,
\code{\LinkA{NumericConstants}{NumericConstants}} for numeric constants.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}

## John Machin (ca 1706) computed pi to over 100 decimal places
## using the Taylor series expansion of the second term of
pi - 4*(4*atan(1/5) - atan(1/239))

## months in English
month.name
## months in your current locale
format(ISOdate(2000, 1:12, 1), "%B")
format(ISOdate(2000, 1:12, 1), "%b")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{contributors}{R Project Contributors}{contributors}
\keyword{misc}{contributors}
%
\begin{Description}\relax
The \R{} Who-is-who, describing who made significant contributions to
the development of \R{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
contributors()
\end{verbatim}
\end{Usage}
\inputencoding{latin1}
\HeaderA{Control}{Control Flow}{Control}
\aliasA{break}{Control}{break}
\aliasA{else}{Control}{else}
\aliasA{for}{Control}{for}
\aliasA{if}{Control}{if}
\aliasA{in}{Control}{in}
\aliasA{next}{Control}{next}
\aliasA{repeat}{Control}{repeat}
\aliasA{while}{Control}{while}
\keyword{programming}{Control}
\keyword{iteration}{Control}
\keyword{logic}{Control}
%
\begin{Description}\relax
These are the basic control-flow constructs of the \R{} language.  They
function in much the same way as control statements in any Algol-like
language.  They are all \LinkA{reserved}{reserved} words.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
if(cond) expr
if(cond) cons.expr  else  alt.expr

for(var in seq) expr
while(cond) expr
repeat expr
break
next
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{cond}] A length-one logical vector that is not \code{NA}.
Conditions of length greater than one are accepted with a warning, but
only the first element is used.  Other types are coerced to logical
if possible, ignoring any class.

\item[\code{var}] A syntactical name for a variable.
\item[\code{seq}] An expression evaluating to a vector (including a list and
an \LinkA{expression}{expression}) or to a \LinkA{pairlist}{pairlist} or \code{NULL}.  A
factor value will be coerced to a character vector.
\item[\code{expr, cons.expr, alt.expr}] 
An \emph{expression} in a formal sense.  This is either a
simple expression or a so called \emph{compound expression}, usually
of the form \code{\{ expr1 ; expr2 \}}.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{break} breaks out of a \code{for}, \code{while} or \code{repeat}
loop; control is transferred to the first statement outside the
inner-most loop. \code{next} halts the processing of the current
iteration and advances the looping index.  Both \code{break} and
\code{next} apply only to the innermost of nested loops.

Note that it is a common mistake to forget to put braces (\code{\{ .. \}})
around your statements, e.g., after \code{if(..)} or \code{for(....)}.
In particular, you should not have a newline between \code{\}} and 
\code{else} to avoid a syntax error in entering a \code{if ... else}
construct at the keyboard or via \code{source}.
For that reason, one (somewhat extreme) attitude of defensive programming
is to always use braces, e.g., for \code{if} clauses.

The \code{seq} in a \code{for} loop is evaluated at the start of
the loop; changing it subsequently does not affect the loop. If
\code{seq} has length zero the body of the loop is skipped. Otherwise the
variable \code{var} is assigned in turn the value of each element of
\code{seq}. You can assign to \code{var} within the body of the loop,
but this will not affect the next iteration. When the loop terminates,
\code{var} remains as a variable containing its latest value.

\end{Details}
%
\begin{Value}
\code{if} returns the value of the expression evaluated, or
\code{NULL} if none was (which may happen if there is no \code{else}).

\code{for}, \code{while} and \code{repeat} return \code{NULL} invisibly.
\code{for} sets \code{var} to the last used element of \code{seq},
or to \code{NULL} if it was of length zero.

\code{break} and \code{next} do not return a value as they transfer
control within the loop.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{Syntax}{Syntax}} for the basic \R{} syntax and operators,
\code{\LinkA{Paren}{Paren}} for parentheses and braces; further,
\code{\LinkA{ifelse}{ifelse}}, \code{\LinkA{switch}{switch}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
for(i in 1:5) print(1:i)
for(n in c(2,5,10,20,50)) {
   x <- stats::rnorm(n)
   cat(n,":", sum(x^2),"\n")
}
f = factor(sample(letters[1:5], 10, replace=TRUE))
for( i in unique(f) ) print(i)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{converters}{Management of .C argument conversion list}{converters}
\aliasA{getCConverterDescriptions}{converters}{getCConverterDescriptions}
\aliasA{getCConverterStatus}{converters}{getCConverterStatus}
\aliasA{getNumCConverters}{converters}{getNumCConverters}
\aliasA{removeCConverter}{converters}{removeCConverter}
\aliasA{setCConverterStatus}{converters}{setCConverterStatus}
\keyword{interface}{converters}
\keyword{programming}{converters}
%
\begin{Description}\relax
These functions provide facilities to manage the extensible
list of converters used to translate R objects to C
pointers for use in \code{\LinkA{.C}{.C}} calls.
The number and a description of each element in the list 
can be retrieved. One can also query and set the activity
status of individual elements, temporarily ignoring them.
And one can remove individual elements.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getNumCConverters()
getCConverterDescriptions()
getCConverterStatus()
setCConverterStatus(id, status)
removeCConverter(id)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{id}] either a number or a string identifying the element of interest in the converter
list. A string is matched against the description strings for each element to identify
the element. Integers are specified starting at 1 (rather than 0).

\item[\code{status}] a logical value specifying whether the element is to be considered
active (\code{TRUE}) or not (\code{FALSE}).
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The internal list of converters is potentially used when converting
individual arguments in a \code{\LinkA{.C}{.C}} call.  If an argument has a
non-trivial class attribute, we iterate over the list of converters
looking for the first that matches.  If we find a matching
converter, we have it create the C-level pointer corresponding to the
R object.  When the call to the C routine is complete, we use the same
converter for that argument to reverse the conversion and create an R
object from the current value in the C pointer.  This is done
separately for all the arguments.

The functions documented here provide \R{} user-level capabilities
for investigating and managing the list of converters.
There is currently no mechanism for adding an element to the
converter list within the \R{} language.  This must be done in
C code using the routine \code{R\_addToCConverter()}.
\end{Details}
%
\begin{Value}
\code{getNumCConverters} returns an integer giving the number
of elements in the list, both active and inactive.

\code{getCConverterDescriptions} returns a character vector containing
the description string of each element of the converter list.

\code{getCConverterStatus} returns a logical vector with a value for
each element in the converter list. Each value indicates whether that
converter is active (\code{TRUE}) or inactive (\code{FALSE}).
The names of the elements are the description strings returned
by \code{getCConverterDescriptions}.

\code{setCConverterStatus} returns the logical value indicating the
activity status of the specified element before the call to change it
took effect.  This is \code{TRUE} for active and \code{FALSE} for
inactive.

\code{removeCConverter} returns \code{TRUE} if
an element in the converter list was identified and removed.
In the case that no such element was found, an error occurs.
\end{Value}
%
\begin{Author}\relax
Duncan Temple Lang
\end{Author}
%
\begin{References}\relax
\url{http://developer.R-project.org/CObjectConversion.pdf}
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{.C}{.C}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
getNumCConverters()
getCConverterDescriptions()
getCConverterStatus()
## Not run: 
old <- setCConverterStatus(1, FALSE)

setCConverterStatus(1, old)

## End(Not run)
## Not run: 
removeCConverter(1)
removeCConverter(getCConverterDescriptions()[1])

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{copyright}{Copyrights of Files Used to Build R}{copyright}
\aliasA{copyrights}{copyright}{copyrights}
\keyword{misc}{copyright}
%
\begin{Description}\relax
\R{} is released under the `GNU Public License': see
\code{\LinkA{license}{license}} for details.  The license describes your right
to use \R{}.  Copyright is concerned with ownership of intellectual
rights, and some of the software used has conditions that the
copyright must be explicitly stated: see the `Details' section.  We
are grateful to these people and other contributors (see
\code{\LinkA{contributors}{contributors}}) for the ability to use their work.
\end{Description}
%
\begin{Details}\relax
The file \file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/COPYRIGHTS} lists the copyrights in full
detail.
\end{Details}
\inputencoding{latin1}
\HeaderA{crossprod}{Matrix Crossproduct}{crossprod}
\aliasA{tcrossprod}{crossprod}{tcrossprod}
\keyword{algebra}{crossprod}
\keyword{array}{crossprod}
%
\begin{Description}\relax
Given matrices \code{x} and \code{y} as arguments, return a matrix
cross-product.  This is formally equivalent to (but usually slightly
faster than) the call \code{t(x) \%*\% y} (\code{crossprod}) or
\code{x \%*\% t(y)} (\code{tcrossprod}).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
crossprod(x, y = NULL)

tcrossprod(x, y = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] numeric or complex matrices: \code{y = NULL} is taken to
be the same matrix as \code{x}.  Vectors are promoted to
single-column or single-row matrices, depending on the context.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A double or complex matrix, with appropriate \code{dimnames} taken
from \code{x} and \code{y}.
\end{Value}
%
\begin{Note}\relax
When \code{x} or \code{y} are not matrices, they are treated as column or
row matrices, but their \code{\LinkA{names}{names}} are usually \bold{not}
promoted to \code{\LinkA{dimnames}{dimnames}}.  Hence, currently, the last
example has empty dimnames.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{\Rpercent{}*\Rpercent{}}{.Rpcent.*.Rpcent.}} and outer product \code{\LinkA{\Rpercent{}o\Rpercent{}}{.Rpcent.o.Rpcent.}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(z <- crossprod(1:4))    # = sum(1 + 2^2 + 3^2 + 4^2)
drop(z)                  # scalar
x <- 1:4; names(x) <- letters[1:4]; x
tcrossprod(as.matrix(x)) # is
identical(tcrossprod(as.matrix(x)),
          crossprod(t(x)))
tcrossprod(x)            # no dimnames

m <- matrix(1:6, 2,3) ; v <- 1:3; v2 <- 2:1
stopifnot(identical(tcrossprod(v, m), v %*% t(m)),
          identical(tcrossprod(v, m), crossprod(v, t(m))),
          identical(crossprod(m, v2), t(m) %*% v2))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Cstack\_info}{Report Information on C Stack Size and Usage}{Cstack.Rul.info}
\keyword{utilities}{Cstack\_info}
%
\begin{Description}\relax
Report information on the C stack size and usage (if available).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Cstack_info()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
On most platforms, C stack information is recorded when \R{} is
initialized and used for stack-checking.  If this information is
unavailable, the \code{size} will be returned as \code{NA}, and
stack-checking is not performed.

The information on the stack base address is thought to be accurate on
Windows, Linux and FreeBSD (including Mac OS X), but a heuristic is
used on other platforms.  Because this might be slightly inaccurate,
the current usage could be estimated as negative.  (The heuristic is
not used on embedded uses of \R{} on platforms where the stack base
is not thought to be accurate.)
\end{Details}
%
\begin{Value}
An integer vector.  This has named elements
\begin{ldescription}
\item[\code{size}] The size of the stack (in bytes), or \code{NA} if unknown.
\item[\code{current}] The estimated current usage (in bytes), possibly \code{NA}.
\item[\code{direction}] \code{1} (stack grows down, the usual case) or
\code{-1} (stack grows up).
\item[\code{eval\_depth}] The current evaluation depth (including two calls
for the call to \code{Cstack\_info}).
\end{ldescription}
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
Cstack_info()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{cumsum}{Cumulative Sums, Products, and Extremes}{cumsum}
\aliasA{cummax}{cumsum}{cummax}
\aliasA{cummin}{cumsum}{cummin}
\aliasA{cumprod}{cumsum}{cumprod}
\keyword{arith}{cumsum}
%
\begin{Description}\relax
Returns a vector whose elements are the cumulative sums, products,
minima or maxima of the elements of the argument.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
cumsum(x)
cumprod(x)
cummax(x)
cummin(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric or complex (not \code{cummin} or \code{cummax})
object, or an object that can be coerced to one of these.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These are generic functions: methods can be defined for them
individually or via the \code{\LinkA{Math}{S3groupGeneric}} group generic.
\end{Details}
%
\begin{Value}
A vector of the same length and type as \code{x} (after coercion),
except that \code{cumprod} returns a numeric vector for integer input
(for consistency with \code{*}).  Names are preserved.

An \code{NA} value in \code{x} causes the corresponding and following
elements of the return value to be \code{NA}, as does integer overflow
in \code{cumsum} (with a warning).
\end{Value}
%
\begin{Section}{S4 methods}
\code{cumsum} and \code{cumprod} are S4 generic functions:
methods can be defined for them individually or via the
\code{\LinkA{Math}{S4groupGeneric}} group generic.
\code{cummax} and \code{cummin} are individually S4 generic functions.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (\code{cumsum} only.)
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
cumsum(1:10)
cumprod(1:10)
cummin(c(3:1, 2:0, 4:2))
cummax(c(3:1, 2:0, 4:2))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{cut}{Convert Numeric to Factor}{cut}
\methaliasA{cut.default}{cut}{cut.default}
\keyword{category}{cut}
%
\begin{Description}\relax
\code{cut} divides the range of \code{x} into intervals
and codes the values in \code{x} according to which
interval they fall.  The leftmost interval corresponds to level one,
the next leftmost to level two and so on.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
cut(x, ...)

## Default S3 method:
cut(x, breaks, labels = NULL,
    include.lowest = FALSE, right = TRUE, dig.lab = 3,
    ordered_result = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric vector which is to be converted to a factor by cutting.
\item[\code{breaks}] either a numeric vector of two or more cut points or a
single number (greater than or equal to 2) giving the number of
intervals into which \code{x} is to be cut.
\item[\code{labels}] labels for the levels of the resulting category.  By default,
labels are constructed using \code{"(a,b]"} interval notation. If
\code{labels = FALSE}, simple integer codes are returned instead of
a factor.
\item[\code{include.lowest}] logical, indicating if an `x[i]' equal to
the lowest (or highest, for \code{right = FALSE}) `breaks'
value should be included.
\item[\code{right}] logical, indicating if the intervals should be closed on
the right (and open on the left) or vice versa.
\item[\code{dig.lab}] integer which is used when labels are not given. It
determines the number of digits used in formatting the break numbers.
\item[\code{ordered\_result}] logical: should the result be an ordered factor?
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
When \code{breaks} is specified as a single number, the range of the
data is divided into \code{breaks} pieces of equal length, and then
the outer limits are moved away by 0.1\% of the range to ensure that
the extreme values both fall within the break intervals.  (If \code{x}
is a constant vector, equal-length intervals are created that cover
the single value.)

If a \code{labels} parameter is specified, its values are used
to name the factor levels. If none is specified, the factor
level labels are constructed as \code{"(b1, b2]"}, \code{"(b2, b3]"}
etc. for \code{right = TRUE} and as \code{"[b1, b2)"}, \ldots if
\code{right = FALSE}.
In this case, \code{dig.lab} indicates the minimum number  of digits
should be used in formatting the numbers \code{b1}, \code{b2}, \ldots.
A larger value (up to 12) will be used if needed to distinguish
between any pair of  endpoints: if this fails labels such as
\code{"Range3"} will be used.
\end{Details}
%
\begin{Value}
A \code{\LinkA{factor}{factor}} is returned, unless \code{labels = FALSE} which
results in the mere integer level codes.
\end{Value}
%
\begin{Note}\relax
Instead of \code{table(cut(x, br))}, \code{hist(x, br, plot = FALSE)} is
more efficient and less memory hungry.  Instead of \code{cut(*,
    labels = FALSE)}, \code{\LinkA{findInterval}{findInterval}()} is more efficient.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{split}{split}} for splitting a variable according to a group factor;
\code{\LinkA{factor}{factor}}, \code{\LinkA{tabulate}{tabulate}}, \code{\LinkA{table}{table}},
\code{\LinkA{findInterval}{findInterval}()}.

\code{\LinkA{quantile}{quantile}} for ways of choosing breaks of roughly equal
content (rather than length), \code{\LinkA{cut2}{cut2}} in package
\pkg{Hmisc} for a canned way to form quantile groups.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
Z <- stats::rnorm(10000)
table(cut(Z, breaks = -6:6))
sum(table(cut(Z, breaks = -6:6, labels=FALSE)))
sum(graphics::hist(Z, breaks = -6:6, plot=FALSE)$counts)

cut(rep(1,5),4)#-- dummy
tx0 <- c(9, 4, 6, 5, 3, 10, 5, 3, 5)
x <- rep(0:8, tx0)
stopifnot(table(x) == tx0)

table( cut(x, b = 8))
table( cut(x, breaks = 3*(-2:5)))
table( cut(x, breaks = 3*(-2:5), right = FALSE))

##--- some values OUTSIDE the breaks :
table(cx  <- cut(x, breaks = 2*(0:4)))
table(cxl <- cut(x, breaks = 2*(0:4), right = FALSE))
which(is.na(cx));  x[is.na(cx)]  #-- the first 9  values  0
which(is.na(cxl)); x[is.na(cxl)] #-- the last  5  values  8


## Label construction:
y <- stats::rnorm(100)
table(cut(y, breaks = pi/3*(-3:3)))
table(cut(y, breaks = pi/3*(-3:3), dig.lab=4))

table(cut(y, breaks =  1*(-3:3), dig.lab=4))
# extra digits don't "harm" here
table(cut(y, breaks =  1*(-3:3), right = FALSE))
#- the same, since no exact INT!

## sometimes the default dig.lab is not enough to be avoid confusion:
aaa <- c(1,2,3,4,5,2,3,4,5,6,7)
cut(aaa, 3)
cut(aaa, 3, dig.lab=4, ordered = TRUE)

## one way to extract the breakpoints
labs <- levels(cut(aaa, 3))
cbind(lower = as.numeric( sub("\\((.+),.*", "\\1", labs) ),
      upper = as.numeric( sub("[^,]*,([^]]*)\\]", "\\1", labs) ))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{cut.POSIXt}{Convert a Date or Date-Time Object to a Factor}{cut.POSIXt}
\aliasA{cut.Date}{cut.POSIXt}{cut.Date}
\keyword{manip}{cut.POSIXt}
\keyword{chron}{cut.POSIXt}
%
\begin{Description}\relax
Method for \code{\LinkA{cut}{cut}} applied to date-time objects.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'POSIXt':
cut(x, breaks, labels = NULL, start.on.monday = TRUE,
    right = FALSE, ...)

## S3 method for class 'Date':
cut(x, breaks, labels = NULL, start.on.monday = TRUE,
    right = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object inheriting from class \code{"POSIXt"} or \code{"Date"}.
\item[\code{breaks}] 
a vector of cut points \emph{or} number giving the number of
intervals which \code{x} is to be cut into \emph{or} an
interval specification, one of \code{"sec"}, \code{"min"},
\code{"hour"}, \code{"day"}, \code{"DSTday"}, \code{"week"},
\code{"month"}, \code{"quarter"} or \code{"year"}, optionally
preceded by an integer and a space, or followed by \code{"s"}.
For \code{"Date"} objects only \code{"day"}, \code{"week"},
\code{"month"}, \code{"quarter"} and \code{"year"} are allowed.

\item[\code{labels}] 
labels for the levels of the resulting category.  By default,
labels are constructed from the left-hand end of the intervals
(which are include for the default value of \code{right}).  If
\code{labels = FALSE}, simple integer codes are returned instead
of a factor.

\item[\code{start.on.monday}] logical. If \code{breaks = "weeks"}, should the
week start on Mondays or Sundays?
\item[\code{right, ...}] arguments to be passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Using both \code{right = TRUE} and \code{include.lowest = TRUE}
will include both ends of the range of dates.

Using \code{breaks = "quarter"} will create intervals of 3 calendar
months, with the intervals beginning on January 1, April 1,
July 1 or October 1, based upon \code{min(x)} as appropriate.
\end{Details}
%
\begin{Value}
A factor is returned, unless \code{labels = FALSE} which returns
the integer level codes.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{seq.POSIXt}{seq.POSIXt}}, \code{\LinkA{seq.Date}{seq.Date}}, \code{\LinkA{cut}{cut}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## random dates in a 10-week period
cut(ISOdate(2001, 1, 1) + 70*86400*stats::runif(100), "weeks")
cut(as.Date("2001/1/1") + 70*stats::runif(100), "weeks")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{data.class}{Object Classes}{data.class}
\keyword{classes}{data.class}
\keyword{methods}{data.class}
%
\begin{Description}\relax
Determine the class of an arbitrary \R{} object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
data.class(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
character string giving the \emph{class} of \code{x}.

The class is the (first element) of the \code{\LinkA{class}{class}}
attribute if this is non-\code{NULL}, or inferred from the object's
\code{dim} attribute if this is non-\code{NULL}, or \code{mode(x)}.

Simply speaking, \code{data.class(x)} returns what is typically useful
for method dispatching.  (Or, what the basic creator functions already
and maybe eventually all will attach as a class attribute.)
\end{Value}
%
\begin{Note}\relax
For compatibility reasons, there is one exception to the rule above:
When \code{x} is \code{\LinkA{integer}{integer}}, the result of
\code{data.class(x)} is \code{"numeric"} even when \code{x} is classed.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{class}{class}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- LETTERS
data.class(factor(x))                 # has a class attribute
data.class(matrix(x, ncol = 13))      # has a dim attribute
data.class(list(x))                   # the same as mode(x)
data.class(x)                         # the same as mode(x)

stopifnot(data.class(1:2) == "numeric")# compatibility "rule"
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{data.frame}{Data Frames}{data.frame}
\aliasA{default.stringsAsFactors}{data.frame}{default.stringsAsFactors}
\keyword{classes}{data.frame}
\keyword{methods}{data.frame}
%
\begin{Description}\relax
This function creates data frames, tightly coupled
collections of variables which share many of the properties of
matrices and of lists, used as the fundamental data structure by most
of \R{}'s modeling software.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
data.frame(..., row.names = NULL, check.rows = FALSE,
           check.names = TRUE,
           stringsAsFactors = default.stringsAsFactors())

default.stringsAsFactors()
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] these arguments are of either the form \code{value} or
\code{tag = value}.  Component names are created based on the tag (if
present) or the deparsed argument itself.
\item[\code{row.names}] \code{NULL} or a single integer or character string
specifying a column to be used as row names, or a character or
integer vector giving the row names for the data frame.
\item[\code{check.rows}] if \code{TRUE} then the rows are checked for
consistency of length and names.
\item[\code{check.names}] logical.  If \code{TRUE} then the names of the
variables in the data frame are checked to ensure that they are
syntactically valid variable names and are not duplicated.
If necessary they are adjusted (by \code{\LinkA{make.names}{make.names}})
so that they are.
\item[\code{stringsAsFactors}] logical: should character vectors be converted
to factors?  The `factory-fresh' default is \code{TRUE}, but
this can be changed by setting \code{\LinkA{options}{options}(stringsAsFactors
      = FALSE)}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A data frame is a list of variables of the same number of rows with
unique row names, given class \code{"data.frame"}.  If no variables
are included, the row names determine the number of rows.

The column names should be non-empty, and attempts to use empty names
will have unsupported results.  Duplicate column names are allowed,
but you need to use \code{check.names = FALSE} for \code{data.frame}
to generate such a data frame.  However, not all operations on data
frames will preserve duplicated column names: for example matrix-like
subsetting will force column names in the result to be unique.

\code{data.frame} converts each of its arguments to a data frame by
calling \code{\LinkA{as.data.frame}{as.data.frame}(optional=TRUE)}.  As that is a
generic function, methods can be written to change the behaviour of
arguments according to their classes: \R{} comes with many such methods.
Character variables passed to \code{data.frame} are converted to
factor columns unless protected by \code{\LinkA{I}{I}} or argument
\code{stringsAsFactors} is false.  If a list or data
frame or matrix is passed to \code{data.frame} it is as if each
component or column had been passed as a separate argument (except for
matrices of class \code{"\LinkA{model.matrix}{model.matrix}"} and those protected by
\code{\LinkA{I}{I}}).

Objects passed to \code{data.frame} should have the same number of
rows, but atomic vectors, factors and character vectors protected by
\code{\LinkA{I}{I}} will be recycled a whole number of times if necessary
(including as from \R{} 2.9.0, elements of list arguments).

If row names are not supplied in the call to \code{data.frame}, the
row names are taken from the first component that has suitable names,
for example a named vector or a matrix with rownames or a data frame.
(If that component is subsequently recycled, the names are discarded
with a warning.)  If \code{row.names} was supplied as \code{NULL} or no
suitable component was found the row names are the integer sequence
starting at one (and such row names are considered to be
`automatic', and not preserved by \code{\LinkA{as.matrix}{as.matrix}}).

If row names are supplied of length one and the data frame has a
single row, the \code{row.names} is taken to specify the row names and
not a column (by name or number).

Names are removed from vector inputs not protected by \code{\LinkA{I}{I}}.

\code{default.stringsAsFactors} is a utility that takes
\code{\LinkA{getOption}{getOption}("stringsAsFactors")} and ensures the result is
\code{TRUE} or \code{FALSE} (or throws an error if the value is not
\code{NULL}).
\end{Details}
%
\begin{Value}
A data frame, a matrix-like structure whose columns may be of
differing types (numeric, logical, factor and character and so on).

How the names of the data frame are created is complex, and the rest
of this paragraph is only the basic story.  If the arguments are all
named and simple objects (not lists, matrices of data frames) then the
argument names give the column names.  For an unnamed simple argument,
a deparsed version of the argument is used as the name (with an
enclosing \code{I(...)} removed).  For a named matrix/list/data frame
argument with ore than one named column, the names of the columns are
the name of the argument followed by a dot and the column name inside
the argument: if the argument is unnamed, the argument's column names
are used.  For a named or unnamed matrix/list/data frame argument that
contains a single column, the column name in the result is the column
name in the argument.  Finally, the names are adjusted to be unique
and syntactically valid unless \code{check.names = FALSE}.
\end{Value}
%
\begin{Note}\relax
In versions of \R{} prior to 2.4.0 \code{row.names} had to be
character: to ensure compatibility with such versions of \R{}, supply
a character vector as the \code{row.names} argument.
\end{Note}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Data for models.}
Chapter 3 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{I}{I}},
\code{\LinkA{plot.data.frame}{plot.data.frame}},
\code{\LinkA{print.data.frame}{print.data.frame}},
\code{\LinkA{row.names}{row.names}}, \code{\LinkA{names}{names}} (for the column names),
\code{\LinkA{[.data.frame}{[.data.frame}} for subsetting methods,
\code{\LinkA{Math.data.frame}{Math.data.frame}} etc, about
\emph{Group} methods for \code{data.frame}s;
\code{\LinkA{read.table}{read.table}},
\code{\LinkA{make.names}{make.names}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
L3 <- LETTERS[1:3]
(d <- data.frame(cbind(x=1, y=1:10), fac=sample(L3, 10, replace=TRUE)))

## The same with automatic column names:
data.frame(cbind(  1,   1:10),     sample(L3, 10, replace=TRUE))

is.data.frame(d)

## do not convert to factor, using I() :
(dd <- cbind(d, char = I(letters[1:10])))
rbind(class=sapply(dd, class), mode=sapply(dd, mode))

stopifnot(1:10 == row.names(d))# {coercion}

(d0  <- d[, FALSE]) # NULL data frame with 10 rows
(d.0 <- d[FALSE, ]) # <0 rows> data frame  (3 cols)
(d00 <- d0[FALSE,])  # NULL data frame with 0 rows
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{data.matrix}{Convert a Data Frame to a Numeric Matrix}{data.matrix}
\keyword{array}{data.matrix}
%
\begin{Description}\relax
Return the matrix obtained by converting all the variables in a data
frame to numeric mode and then binding them together as the columns of
a matrix.  Factors and ordered factors are replaced by their internal
codes.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
data.matrix(frame, rownames.force = NA)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{frame}] a data frame whose components are logical vectors,
factors or numeric vectors.
\item[\code{rownames.force}] logical indicating if the resulting matrix
should have character (rather than \code{NULL})
\code{\LinkA{rownames}{rownames}}.  The default, \code{NA}, uses \code{NULL}
rownames if the data frame has `automatic' row.names or for a
zero-row data frame.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Logical and factor columns are converted to integers.  Any other
column which is not numeric (according to \code{\LinkA{is.numeric}{is.numeric}}) is
converted by \code{\LinkA{as.numeric}{as.numeric}} or, for S4 objects,
\code{\LinkA{as}{as}(, "numeric")}.  If all columns are integer (after
conversion) the result is an integer matrix, otherwise a numeric
(double) matrix.
\end{Details}
%
\begin{Value}
If \code{frame} inherits from class \code{"data.frame"}, an integer or
numeric matrix of the same dimensions as \code{frame}, with dimnames
taken from the \code{row.names} (or \code{NULL}, depending on
\code{rownames.force}) and \code{names}.

Otherwise, the result of \code{\LinkA{as.matrix}{as.matrix}}.
\end{Value}
%
\begin{Note}\relax
The default behaviour for data frames differs from \R{} < 2.5.0 which
always gave the result character rownames.
\end{Note}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Data for models.}
Chapter 3 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{as.matrix}{as.matrix}},
\code{\LinkA{data.frame}{data.frame}},
\code{\LinkA{matrix}{matrix}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
DF <- data.frame(a=1:3, b=letters[10:12],
                 c=seq(as.Date("2004-01-01"), by = "week", len = 3),
                 stringsAsFactors = TRUE)
data.matrix(DF[1:2])
data.matrix(DF)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{date}{System Date and Time}{date}
\keyword{utilities}{date}
%
\begin{Description}\relax
Returns a character string of the current system date and time.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
date()
\end{verbatim}
\end{Usage}
%
\begin{Value}
The string has the form \code{"Fri Aug 20 11:11:00 1999"}, i.e.,
length 24, since it relies on POSIX's \code{ctime} ensuring the above
fixed format.  Timezone and Daylight Saving Time are taken account of,
but \emph{not} indicated in the result.

The day and month abbreviations are always in English, irrespective
of locale.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.Date}{Sys.Date}} and \code{\LinkA{Sys.time}{Sys.time}}; \code{\LinkA{Date}{Date}}
and
\code{\LinkA{DateTimeClasses}{DateTimeClasses}} for objects representing date and time.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(d <- date())
nchar(d) == 24

## something similar in the current locale
format(Sys.time(), "%a %b %d %H:%M:%S %Y")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Dates}{Date Class}{Dates}
\aliasA{as.data.frame.Date}{Dates}{as.data.frame.Date}
\aliasA{c.Date}{Dates}{c.Date}
\aliasA{Date}{Dates}{Date}
\aliasA{Math.Date}{Dates}{Math.Date}
\aliasA{mean.Date}{Dates}{mean.Date}
\aliasA{print.Date}{Dates}{print.Date}
\aliasA{split.Date}{Dates}{split.Date}
\aliasA{Summary.Date}{Dates}{Summary.Date}
\aliasA{summary.Date}{Dates}{summary.Date}
\aliasA{[.Date}{Dates}{[.Date}
\aliasA{[<\Rdash.Date}{Dates}{[<.Rdash..Date}
\aliasA{[[.Date}{Dates}{[[.Date}
\keyword{utilities}{Dates}
\keyword{chron}{Dates}
%
\begin{Description}\relax
Description of the class \code{"Date"} representing calendar dates. 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'Date':
summary(object, digits = 12, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] An object summarized.
\item[\code{digits}] Number of significant digits for the computations.
\item[\code{...}] Further arguments to be passed from or to other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Dates are represented as the number of days since 1970-01-01, with
negative values for earlier dates.  They are always printed
following the rules of the current Gregorian calendar, even though
that calendar was not in use long ago (it was adopted in 1752 in
Great Britain and its colonies).

It is intended that the date should be an integer, but this is not
enforced in the internal representation.  Fractional days will be
ignored when printing.  It is possible to produce fractional days via
the \code{mean} method or by adding or subtracting (see
\code{\LinkA{Ops.Date}{Ops.Date}}).
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.Date}{Sys.Date}} for the current date.

\code{\LinkA{Ops.Date}{Ops.Date}} for operators on \code{"Date"} objects.

\code{\LinkA{format.Date}{format.Date}} for conversion to and from character strings.

\code{\LinkA{plot.Date}{plot.Date}} and
\code{\LinkA{hist.Date}{hist.Date}} for plotting.

\code{\LinkA{weekdays}{weekdays}} for convenience extraction functions.

\code{\LinkA{seq.Date}{seq.Date}}, \code{\LinkA{cut.Date}{cut.Date}},
\code{\LinkA{round.Date}{round.Date}} for utility operations.

\code{\LinkA{DateTimeClasses}{DateTimeClasses}} for date-time classes.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(today <- Sys.Date())
format(today, "%d %b %Y")  # with month as a word
(tenweeks <- seq(today, length.out=10, by="1 week")) # next ten weeks
weekdays(today)
months(tenweeks)
as.Date(.leap.seconds)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{DateTimeClasses}{Date-Time Classes}{DateTimeClasses}
\aliasA{+.POSIXt}{DateTimeClasses}{+.POSIXt}
\aliasA{-.POSIXt}{DateTimeClasses}{.Rdash..POSIXt}
\aliasA{.leap.seconds}{DateTimeClasses}{.leap.seconds}
\aliasA{all.equal.POSIXct}{DateTimeClasses}{all.equal.POSIXct}
\aliasA{as.data.frame.POSIXct}{DateTimeClasses}{as.data.frame.POSIXct}
\aliasA{as.data.frame.POSIXlt}{DateTimeClasses}{as.data.frame.POSIXlt}
\aliasA{as.matrix.POSIXlt}{DateTimeClasses}{as.matrix.POSIXlt}
\aliasA{c.POSIXct}{DateTimeClasses}{c.POSIXct}
\aliasA{c.POSIXlt}{DateTimeClasses}{c.POSIXlt}
\aliasA{check\_tzones}{DateTimeClasses}{check.Rul.tzones}
\aliasA{date-time}{DateTimeClasses}{date.Rdash.time}
\aliasA{duplicated.POSIXlt}{DateTimeClasses}{duplicated.POSIXlt}
\aliasA{is.na.POSIXlt}{DateTimeClasses}{is.na.POSIXlt}
\aliasA{Math.POSIXlt}{DateTimeClasses}{Math.POSIXlt}
\aliasA{Math.POSIXt}{DateTimeClasses}{Math.POSIXt}
\aliasA{mean.POSIXct}{DateTimeClasses}{mean.POSIXct}
\aliasA{mean.POSIXlt}{DateTimeClasses}{mean.POSIXlt}
\aliasA{Ops.POSIXt}{DateTimeClasses}{Ops.POSIXt}
\aliasA{POSIXct}{DateTimeClasses}{POSIXct}
\aliasA{POSIXlt}{DateTimeClasses}{POSIXlt}
\aliasA{POSIXt}{DateTimeClasses}{POSIXt}
\aliasA{print.POSIXct}{DateTimeClasses}{print.POSIXct}
\aliasA{print.POSIXlt}{DateTimeClasses}{print.POSIXlt}
\aliasA{split.POSIXct}{DateTimeClasses}{split.POSIXct}
\aliasA{str.POSIXt}{DateTimeClasses}{str.POSIXt}
\aliasA{Summary.POSIXct}{DateTimeClasses}{Summary.POSIXct}
\aliasA{summary.POSIXct}{DateTimeClasses}{summary.POSIXct}
\aliasA{Summary.POSIXlt}{DateTimeClasses}{Summary.POSIXlt}
\aliasA{summary.POSIXlt}{DateTimeClasses}{summary.POSIXlt}
\aliasA{unique.POSIXlt}{DateTimeClasses}{unique.POSIXlt}
\aliasA{[.POSIXct}{DateTimeClasses}{[.POSIXct}
\aliasA{[.POSIXlt}{DateTimeClasses}{[.POSIXlt}
\aliasA{[<\Rdash.POSIXct}{DateTimeClasses}{[<.Rdash..POSIXct}
\aliasA{[<\Rdash.POSIXlt}{DateTimeClasses}{[<.Rdash..POSIXlt}
\aliasA{[[.POSIXct}{DateTimeClasses}{[[.POSIXct}
\keyword{utilities}{DateTimeClasses}
\keyword{chron}{DateTimeClasses}
%
\begin{Description}\relax
Description of the classes \code{"POSIXlt"} and \code{"POSIXct"}
representing calendar dates and times (to the nearest second). 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'POSIXct':
print(x, ...)

## S3 method for class 'POSIXct':
summary(object, digits = 15, ...)

time + z
z + time
time - z
time1 lop time2
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, object}] An object to be printed or summarized from one of the
date-time classes.
\item[\code{digits}] Number of significant digits for the computations:
should be high enough to represent the least important time unit
exactly.
\item[\code{...}] Further arguments to be passed from or to other methods.
\item[\code{time}] date-time objects
\item[\code{time1, time2}] date-time objects or character vectors.  (Character
vectors are converted by \code{\LinkA{as.POSIXct}{as.POSIXct}}.)
\item[\code{z}] a numeric vector (in seconds)
\item[\code{lop}] One of \code{==}, \code{!=}, \code{<}, \code{<=}, \code{>}
or \code{>=}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
There are two basic classes of date/times.  Class \code{"POSIXct"}
represents the (signed) number of seconds since the beginning of 1970
as a numeric vector.  Class \code{"POSIXlt"} is a named list of
vectors representing
\begin{description}

\item[\code{sec}] 0--61: seconds
\item[\code{min}] 0--59: minutes
\item[\code{hour}] 0--23: hours
\item[\code{mday}] 1--31: day of the month
\item[\code{mon}] 0--11: months after the first of the year.
\item[\code{year}] years since 1900.
\item[\code{wday}] 0--6 day of the week, starting on Sunday.
\item[\code{yday}] 0--365: day of the year.
\item[\code{isdst}] Daylight Savings Time flag.  Positive if in
force, zero if not, negative if unknown.

\end{description}

The classes correspond to the POSIX/C99 constructs of `calendar
time' (the \code{time\_t} data type) and `local time' (or
broken-down time, the \code{struct tm} data type), from which they
also inherit their names.  The components of \code{"POSIXlt"} are
integer vectors, except \code{sec}.

\code{"POSIXct"} is more convenient for including in data frames, and
\code{"POSIXlt"} is closer to human-readable forms.
A virtual class \code{"POSIXt"} inherits from both of the classes: it
is used to allow operations such as subtraction to mix the two classes.

Components \code{wday} and \code{yday} of \code{"POSIXlt"} are for
information, and are not used in the conversion to calendar time.
However, \code{isdst} is needed to distinguish times at the end of
DST: typically 1am to 2am occurs twice, first in DST and then in
standard time.  At all other times \code{isdst} can be deduced from
the first six values, but the behaviour if it is set incorrectly is
platform-dependent.



Logical comparisons and limited arithmetic are available for both
classes.  One can add or subtract a number of seconds from a date-time
object, but not add two date-time objects.  Subtraction of two
date-time objects is equivalent to using \code{\LinkA{difftime}{difftime}}.  Be
aware that \code{"POSIXlt"} objects will be interpreted as being in
the current timezone for these operations, unless a timezone has been
specified.

\code{"POSIXlt"} objects will often have an attribute \code{"tzone"},
a character vector of length 3 giving the timezone name from the
\env{TZ} environment variable and the names of the base timezone
and the alternate (daylight-saving) timezone.  Sometimes this may
just be of length one, giving the timezone name.

\code{"POSIXct"} objects may also have an attribute \code{"tzone"}, a
character vector of length one.  If set to a non-empty value, it will
determine how the object is converted to class \code{"POSIXlt"} and in
particular how it is printed.  This is usually desirable, but if you
want to specify an object in a particular timezone but to be printed
in the current timezone you may want to remove the \code{"tzone"}
attribute (e.g. by \code{c(x)}).

Unfortunately, the conversion is complicated by the operation of time
zones and leap seconds (24 days have been 86401 seconds long so far:
the times of the extra seconds are in the object \code{.leap.seconds}).
The details of this are entrusted to the OS services where possible.
This always covers the period 1970--2037, and on most machines
back to 1902 (when time zones were in their infancy).  Outside
the platform limits we use our own C code.  This uses the offset from
GMT in use either for 1902 (when there was no DST) or that predicted
for one of 2030 to 2037 (chosen so that the likely DST transition days
are Sundays), and uses the alternate (daylight-saving) timezone only
if \code{isdst} is positive or (if \code{-1}) if DST was predicted to
be in operation in the 2030s on that day.  (There is no reason to
suppose that the DST rules will remain the same in the future, and
indeed the US legislated in 2005 to change its rules as from 2007,
with a possible future reversion.)

It seems that some rare systems use leap seconds, but most ignore
them (as required by POSIX).  This is detected and corrected for at
build time, so all \code{"POSIXct"} times used by \R{} do not include
leap seconds. (Conceivably this could be wrong if the system has
changed since build time, just possibly by changing locales or the
\file{zoneinfo} database.)

Using \code{\LinkA{c}{c}} on \code{"POSIXlt"} objects converts them to the
current time zone, and on \code{"POSIXct"} objects drops any
\code{"tzone"} attributes (even if they are all marked with the same
time zone).

A few times have specific issues.  First, the leapseconds are ignored,
and real times such as \code{"2005-12-31 23:59:60"} are (probably)
treated as the next second.  However, they will never be generated by
\R{}, and are unlikely to arise as input.  Second, on some OSes there is
a problem in the POSIX/C99 standard with \code{"1969-12-31 23:59:59"},
which is \code{-1} in calendar time and that value is on those OSes
also used as an error code.  Thus \code{as.POSIXct("1969-12-31
  23:59:59", format="\%Y-\%m-\%d \%H:\%M:\%S", tz="UTC")} may give
\code{NA}, and hence \code{as.POSIXct("1969-12-31 23:59:59",
  tz="UTC")} will give \code{"1969-12-31 23:59:50"}.  Other OSes
(including the code used by \R{} on Windows) report errors separately
and so are able to handle that time as valid.
\end{Details}
%
\begin{Section}{Sub-second Accuracy}
Classes \code{"POSIXct"} and  \code{"POSIXlt"} are able to express
fractions of a second.  (Conversion of fractions between the two forms
may not be exact, but will have better than microsecond accuracy.)

Fractional seconds are printed only if
\code{\LinkA{options}{options}("digits.secs")} is set: see \code{\LinkA{strftime}{strftime}}.
\end{Section}
%
\begin{Section}{Warning}
Some Unix-like systems (especially Linux ones) do not have \code{"TZ"}
set, yet have internal code that expects it (as does POSIX).  We have
tried to work around this, but if you get unexpected results try
setting \code{"TZ"}.  See \code{\LinkA{as.POSIXlt}{as.POSIXlt}} for valid settings.
\end{Section}
%
\begin{SeeAlso}\relax
\LinkA{Dates}{Dates} for dates without times.

\code{\LinkA{as.POSIXct}{as.POSIXct}} and \code{\LinkA{as.POSIXlt}{as.POSIXlt}} for conversion
between the classes.

\code{\LinkA{strptime}{strptime}} for conversion to and from character
representations.

\code{\LinkA{Sys.time}{Sys.time}} for clock time as a \code{"POSIXct"} object.

\code{\LinkA{difftime}{difftime}} for time intervals.

\code{\LinkA{cut.POSIXt}{cut.POSIXt}}, \code{\LinkA{seq.POSIXt}{seq.POSIXt}},
\code{\LinkA{round.POSIXt}{round.POSIXt}} and \code{\LinkA{trunc.POSIXt}{trunc.POSIXt}} for methods
for these classes.

\code{\LinkA{weekdays}{weekdays}} for convenience extraction functions.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(z <- Sys.time())             # the current date, as class "POSIXct"

Sys.time() - 3600             # an hour ago

as.POSIXlt(Sys.time(), "GMT") # the current time in GMT
format(.leap.seconds)         # all 24 leapseconds in your timezone
print(.leap.seconds, tz="PST8PDT")  # and in Seattle's
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{dcf}{Read and Write Data in DCF Format}{dcf}
\aliasA{read.dcf}{dcf}{read.dcf}
\aliasA{write.dcf}{dcf}{write.dcf}
\keyword{print}{dcf}
\keyword{file}{dcf}
%
\begin{Description}\relax
Reads or writes an \R{} object from/to a file in Debian Control File
format. 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
read.dcf(file, fields = NULL, all = FALSE)

write.dcf(x, file = "", append = FALSE,
          indent = 0.1 * getOption("width"),
          width = 0.9 * getOption("width"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] either a character string naming a file or a connection.
\code{""} indicates output to the console.  For \code{read.dcf} this
can name a compressed file (see \code{\LinkA{gzfile}{gzfile}}).
\item[\code{fields}] Fields to read from the DCF file.  Default is to read all
fields.
\item[\code{all}] a logical indicating whether in case of multiple
occurrences of a field in a record, all these should be gathered.
If \code{all} is false (default), only the last such occurrence is
used.
\item[\code{x}] the object to be written, typically a data frame.  If not, it
is attempted to coerce \code{x} to a data frame.
\item[\code{append}] logical.  If \code{TRUE}, the output is appended to the
file.  If \code{FALSE}, any existing file of the name is destroyed.
\item[\code{indent}] a positive integer specifying the indentation for
continuation lines in output entries.
\item[\code{width}] a positive integer giving the target column for wrapping
lines in the output.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
DCF is a simple format for storing databases in plain text files that
can easily be directly read and written by humans.  DCF is used in
various places to store \R{} system information, like descriptions and
contents of packages.

The DCF rules as implemented in \R{} are:
\begin{enumerate}

\item A database consists of one or more records, each with one or
more named fields.  Not every record must contain each field.
Fields may appear more than once in a record.
\item Regular lines start with a non-whitespace character.
\item Regular lines are of form \code{tag:value}, i.e., have a name
tag and a value for the field, separated by \code{:} (only the first
\code{:} counts).  The value can be empty (=whitespace only).
\item Lines starting with whitespace are continuation lines (to the
preceding field) if at least one character in the line is
non-whitespace.  Continuation lines where the only non-whitespace
character is a \samp{.} are taken as blank lines (allowing for
multi-paragraph field values).
\item Records are separated by one or more empty (=whitespace only)
lines.

\end{enumerate}


By default, \code{read.dcf} returns a character matrix with one row
per record and one column per field.  Leading and trailing whitespace
of field values is ignored.  If a tag name is specified, but the
corresponding value is empty, then an empty string is returned.  If
the tag name of a field is never used in a record, then \code{NA} is
returned.  If fields are repeated within a record, the last one
encountered is returned.  Malformed lines lead to an error.  If
\code{all} is true, a data frame is returned, again with one row per
record and one column per field, and columns lists of character
vectors for fields with multiple occurrences, and character vectors
otherwise.

Note that \code{read.dcf(all = FALSE)} reads the file byte-by-byte.
This allows a \file{DESCRIPTION} file to be read and only its ASCII
fields used, or its \samp{Encoding} field used to re-encode the
remaining fields.

\code{write.dcf} does not write \code{NA} fields.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{write.table}{write.table}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
## Create a reduced version of the 'CONTENTS' file in package 'splines'
x <- read.dcf(file = system.file("CONTENTS", package = "splines"),
              fields = c("Entry", "Description"))
write.dcf(x)

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{debug}{Debug a Function}{debug}
\aliasA{debugonce}{debug}{debugonce}
\aliasA{isdebugged}{debug}{isdebugged}
\aliasA{undebug}{debug}{undebug}
\keyword{programming}{debug}
\keyword{environment}{debug}
%
\begin{Description}\relax
Set, unset or query the debugging flag on a function.
The \code{text} and \code{condition} arguments are the same as those
that can be supplied via a call to \code{browser}. They can be retrieved
by the user once the browser has been entered, and provide a mechanism to
allow users to identify which breakpoint has been activated.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
debug(fun, text="", condition=NULL)
debugonce(fun, text="", condition=NULL)
undebug(fun)
isdebugged(fun)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{fun}] any interpreted \R{} function.
\item[\code{text}] a text string that can be retrieved when the browser is entered.
\item[\code{condition}] a condition that can be retrieved when the browser is entered.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
When a function flagged for debugging is entered, normal execution
is suspended and the body of function is executed one statement at a
time.  A new browser context is initiated for each step (and the
previous one destroyed).

At the debug prompt the user can enter commands or \R{} expressions.
The commands are

\begin{description}

\item[\code{n}] (or just return).  Advance to the next step.
\item[\code{c}] continue to the end of the current context: e.g. to the
end of the loop if within a loop or to the end of the function.
\item[\code{cont}] synonym for \code{c}.
\item[\code{where}] print a stack trace of all active function calls.
\item[\code{Q}] exit the browser and the current evaluation and
return to the top-level prompt.

\end{description}

(Leading and trailing whitespace is ignored, except for return).

Anything else entered at the debug prompt is interpreted as an
\R{} expression to be evaluated in the calling environment: in
particular typing an object name will cause the object to be printed,
and \code{ls()} lists the objects in the calling frame.  (If you want
to look at an object with a name such as \code{n}, print it explicitly.)

If a function is defined inside a function, single-step though to the
end of its definition, and then call \code{debug} on its name.

Using \code{debug} is persistent, and unless debugging is turned off
the debugger will be entered on every invocation (note that if the
function is removed and replaced the debug state is not preserved).
Use \code{debugonce} to enter the debugger only the next time the
function is invoked.

In order to debug S4 methods (see \code{\LinkA{Methods}{Methods}}), you
need to use \code{\LinkA{trace}{trace}}, typically calling \code{\LinkA{browser}{browser}},
e.g., as \\{}
\code{trace("plot", browser, exit=browser, signature = c("track", "missing"))}
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{browser}{browser}}, \code{\LinkA{trace}{trace}};
\code{\LinkA{traceback}{traceback}} to see the stack after an \code{Error: ...}
message; \code{\LinkA{recover}{recover}} for another debugging approach.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{Defunct}{Marking Objects as Defunct}{Defunct}
\aliasA{.Defunct}{Defunct}{.Defunct}
\keyword{documentation}{Defunct}
\keyword{utilities}{Defunct}
%
\begin{Description}\relax
When a function is removed from \R{} it should be replaced by a function
which calls \code{.Defunct}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Defunct(new, package = NULL, msg)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{new}] 
character string: A suggestion for a replacement function.

\item[\code{package}] 
character string: The package to be used when suggesting where the
defunct function might be listed.

\item[\code{msg}] 
character string: A message to be printed, if missing a default
message is used.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{.Defunct} is called from defunct functions. Functions should be
listed in \code{help("pkg-defunct")} for an appropriate \code{pkg},
including \code{base}.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{Deprecated}{Deprecated}}.

\code{base-defunct} and so on which list the defunct functions
in the packages.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{delayedAssign}{Delay Evaluation}{delayedAssign}
\aliasA{promise}{delayedAssign}{promise}
\aliasA{promises}{delayedAssign}{promises}
\keyword{programming}{delayedAssign}
\keyword{data}{delayedAssign}
%
\begin{Description}\relax
\code{delayedAssign} creates a \emph{promise} to evaluate the given
expression if its value is requested.  This provides direct access
to the \emph{lazy evaluation} mechanism used by \R{} for the evaluation
of (interpreted) functions.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
delayedAssign(x, value, eval.env = parent.frame(1),
              assign.env = parent.frame(1))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a variable name (given as a quoted string in the function call)
\item[\code{value}] an expression to be assigned to \code{x}
\item[\code{eval.env}] an environment in which to evaluate \code{value}
\item[\code{assign.env}] an environment in which to assign \code{x}
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Both \code{eval.env} and \code{assign.env} default to the currently active
environment.

The expression assigned to a promise by \code{delayedAssign} will
not be evaluated until it is eventually `forced'.  This happens when
the variable is first accessed.

When the promise is eventually forced, it is evaluated within the
environment specified by \code{eval.env} (whose contents may have changed in
the meantime).  After that, the value is fixed and the expression will
not be evaluated again.
\end{Details}
%
\begin{Value}
This function is invoked for its side effect, which is assigning
a promise to evaluate \code{value} to the variable \code{x}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{substitute}{substitute}}, to see the expression associated with a promise.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
msg <- "old"
delayedAssign("x", msg)
msg <- "new!"
x #- new!
substitute(x) #- x (was 'msg' ?)

delayedAssign("x", {
    for(i in 1:3)
        cat("yippee!\n")
    10
})

x^2 #- yippee
x^2 #- simple number

e <- (function(x, y = 1, z) environment())(1+2, "y", {cat(" HO! "); pi+2})
(le <- as.list(e)) # evaluates the promises

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{deparse}{Expression Deparsing}{deparse}
\keyword{programming}{deparse}
\keyword{manip}{deparse}
\keyword{data}{deparse}
%
\begin{Description}\relax
Turn unevaluated expressions into character strings.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
deparse(expr, width.cutoff = 60L,
        backtick = mode(expr) %in% c("call", "expression", "(", "function"),
        control = c("keepInteger", "showAttributes", "keepNA"),
        nlines = -1L)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] any \R{} expression.
\item[\code{width.cutoff}] integer in \eqn{[20, 500]}{} determining the cutoff
at which line-breaking is tried.
\item[\code{backtick}] logical indicating whether symbolic names should be
enclosed in backticks if they do not follow the standard syntax.
\item[\code{control}] character vector of deparsing options.  See
\code{\LinkA{.deparseOpts}{.deparseOpts}}.
\item[\code{nlines}] integer: the maximum number of lines to produce.
Negative values indicate no limit.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function turns unevaluated expressions (where `expression'
is taken in a wider sense than the strict concept of a vector of mode
\code{"expression"} used in \code{\LinkA{expression}{expression}}) into character
strings (a kind of inverse to \code{\LinkA{parse}{parse}}).

A typical use of this is to create informative labels for data sets
and plots.  The example shows a simple use of this facility.  It uses
the functions \code{deparse} and \code{substitute} to create labels
for a plot which are character string versions of the actual arguments
to the function \code{myplot}.

The default for the \code{backtick} option is not to quote single
symbols but only composite expressions.  This is a compromise to
avoid breaking existing code.

Using \code{control = "all"} comes closest to making \code{deparse()}
an inverse of \code{parse()}.  However, not all objects are
deparse-able even with this option and a warning will be issued if the
function recognizes that it is being asked to do the impossible.

Numeric and complex vectors are converted using 15 significant digits:
see \code{\LinkA{as.character}{as.character}} for more details.

\code{width.cutoff} is a lower bound for the line lengths: deparsing a
line proceeds until at least \code{width.cutoff} \emph{bytes} have
been output and e.g. \code{arg = value} expressions will not be split
across lines.
\end{Details}
%
\begin{Note}\relax
To avoid the risk of a source attribute out of sync with the actual
function definition, the source attribute of a function will never 
be deparsed as an attribute.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{substitute}{substitute}},
\code{\LinkA{parse}{parse}},
\code{\LinkA{expression}{expression}}.

\code{Quotes} for quoting conventions, including backticks.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats); require(graphics)

deparse(args(lm))
deparse(args(lm), width = 500)
myplot <-
function(x, y) {
    plot(x, y, xlab=deparse(substitute(x)),
        ylab=deparse(substitute(y)))
}
e <- quote(`foo bar`)
deparse(e)
deparse(e, backtick=TRUE)
e <- quote(`foo bar`+1)
deparse(e)
deparse(e, control = "all")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{deparseOpts}{Options for Expression Deparsing}{deparseOpts}
\aliasA{.deparseOpts}{deparseOpts}{.deparseOpts}
\keyword{programming}{deparseOpts}
%
\begin{Description}\relax
Process the deparsing options for \code{deparse}, \code{dput} and
\code{dump}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.deparseOpts(control)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{control}] character vector of deparsing options.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is called by \code{\LinkA{deparse}{deparse}}, \code{\LinkA{dput}{dput}} and
\code{\LinkA{dump}{dump}} to process their \code{control} argument.

The \code{control} argument is a vector containing zero or more of the
following strings.  Partial string matching is used.
\begin{description}

\item[\code{keepInteger}] 
Either surround integer vectors by \code{as.integer()} or use
suffix \code{L}, so they are not converted to type double when
parsed.  This includes making sure that integer \code{NA}s are
preserved (via \code{NA\_integer\_} if there are no non-\code{NA}
values in the vector, unless \code{"S\_compatible"} is set).

\item[\code{quoteExpressions}] 
Surround expressions with \code{quote()}, so they are not
evaluated when re-parsed.

\item[\code{showAttributes}] 
If the object has attributes (other than a \code{source}
attribute), use \code{structure()} to display them as well as the
object value.  This is the default for \code{\LinkA{deparse}{deparse}} and
\code{\LinkA{dput}{dput}}.

\item[\code{useSource}] 
If the object has a \code{source} attribute, display that instead
of deparsing the object.  Currently only applies to function
definitions.

\item[\code{warnIncomplete}] 
Some exotic objects such as \LinkA{environment}{environment}s,
external pointers, etc. can not be deparsed properly.  This option
causes a warning to be issued if the deparser recognizes one of these
situations.

Also, the parser in \R{} < 2.7.0 would only accept strings of up to
8192 bytes, and this option gives a warning for longer strings.

\item[\code{keepNA}] 
Integer, real and character \code{NA}s are surrounded by coercion
where necessary to ensure that they are parsed to the same type.

\item[\code{all}] 
An abbreviated way to specify all of the options
listed above.  This is the default for \code{dump}, and the options
used by \code{\LinkA{edit}{edit}} (which are fixed).

\item[\code{delayPromises}] 
Deparse promises in the form <promise: expression> rather than
evaluating them.  The value and the environment of the promise
will not be shown and the deparsed code cannot be sourced.

\item[\code{S\_compatible}] 
Make deparsing as far as possible compatible with S and \R{} < 2.5.0.
For compatibility with S, integer values of double vectors are
deparsed with a trailing decimal point.  Backticks are not used.


\end{description}

For the most readable (but perhaps incomplete) display, use
\code{control = NULL}. This displays the object's value, but not its
attributes.  The default in \code{\LinkA{deparse}{deparse}} is to display the
attributes as well, but not to use any of the other options to make
the result parseable.  (\code{\LinkA{dput}{dput}} and \code{\LinkA{dump}{dump}} do
use more default options, and printing of functions without sources
uses \code{c("keepInteger", "keepNA")}.)

Using \code{control = "all"} comes closest to making \code{deparse()}
an inverse of \code{parse()}.  However, not all objects are
deparse-able even with this option.  A warning will be issued if the
function recognizes that it is being asked to do the impossible.
\end{Details}
%
\begin{Value}
A numerical value corresponding to the options selected.
\end{Value}
\inputencoding{latin1}
\HeaderA{Deprecated}{Marking Objects as Deprecated}{Deprecated}
\aliasA{.Deprecated}{Deprecated}{.Deprecated}
\keyword{documentation}{Deprecated}
\keyword{utilities}{Deprecated}
%
\begin{Description}\relax
When an object is about removed from \R{} it is first deprecated and
should include a call to \code{.Deprecated}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Deprecated(new, package=NULL, msg)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{new}] 
character string: A suggestion for a replacement function.

\item[\code{package}] 
character string: The package to be used when suggesting where the
deprecated function might be listed.

\item[\code{msg}] 
character string: A message to be printed, if missing a default
message is used.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{.Deprecated("<new name>")} is called from deprecated
functions.  The original help page for these functions is often
available at \code{help("oldName-deprecated")} (note the quotes).
Functions should be listed in \code{help("pkg-deprecated")} for an
appropriate \code{pkg}, including \code{base}. 
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{Defunct}{Defunct}}

\code{\LinkA{base-deprecated}{base.Rdash.deprecated}} and so on which list the deprecated functions
in the packages.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{det}{Calculate the Determinant of a Matrix}{det}
\aliasA{determinant}{det}{determinant}
\methaliasA{determinant.matrix}{det}{determinant.matrix}
\keyword{array}{det}
%
\begin{Description}\relax
\code{det} calculates the determinant of a matrix. \code{determinant}
is a generic function that returns separately the modulus of the determinant,
optionally on the logarithm scale, and the sign of the determinant.

\end{Description}
%
\begin{Usage}
\begin{verbatim}
det(x, ...)
determinant(x, logarithm = TRUE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] numeric matrix.
\item[\code{logarithm}] logical; if \code{TRUE} (default) return the
logarithm of the modulus of the determinant.
\item[\code{...}] Optional arguments.  At present none are used.  Previous
versions of \code{det} allowed an optional \code{method} argument.
This argument will be ignored but will not produce an error.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{determinant} function
uses an LU decomposition and the \code{det} function is simply a
wrapper around a call to \code{determinant}.

Often, computing the determinant is \emph{not} what you should be doing
to solve a given problem.
\end{Details}
%
\begin{Value}
For \code{det}, the determinant of \code{x}.  For \code{determinant}, a
list with components
\begin{ldescription}
\item[\code{modulus}] a numeric value.  The modulus (absolute value) of the
determinant if \code{logarithm} is \code{FALSE}; otherwise the
logarithm of the modulus.
\item[\code{sign}] integer; either \eqn{+1}{} or \eqn{-1}{} according to whether
the determinant is positive or negative.
\end{ldescription}
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
(x <- matrix(1:4, ncol=2))
unlist(determinant(x))
det(x)

det(print(cbind(1,1:3,c(2,0,1))))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{detach}{Detach Objects from the Search Path}{detach}
\keyword{data}{detach}
%
\begin{Description}\relax
Detach a database, i.e., remove it from the \code{\LinkA{search}{search}()}
path of available \R{} objects.  Usually this is either a
\code{\LinkA{data.frame}{data.frame}} which has been \code{\LinkA{attach}{attach}}ed or a
package which was attached by \code{\LinkA{library}{library}}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
detach(name, pos = 2, unload = FALSE, character.only = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] 
The object to detach.  Defaults to \code{search()[pos]}.
This can be an unquoted name or a character string but \emph{not} a
character vector.  If a number is supplied this is taken as \code{pos}.

\item[\code{pos}] 
Index position in \code{\LinkA{search}{search}()} of the database to
detach.  When \code{name} is a number, \code{pos = name}
is used.

\item[\code{unload}] A logical value indicating whether or not to attempt to
unload the namespace when a package is being detached.  If the
package has a namespace and \code{unload} is \code{TRUE}, then
\code{detach} will attempt to unload the namespace \emph{via}
\code{\LinkA{unloadNamespace}{unloadNamespace}}: if the namespace is imported by
another namespace or \code{unload} is \code{FALSE}, no unloading
will occur.

\item[\code{character.only}] a logical indicating whether \code{name}
can be assumed to be character strings.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is most commonly used with a single number argument referring to a
position on the search list, and can also be used with a unquoted or
quoted name of an item on the search list such as \code{package:tools}.

If a package has a namespace, detaching it does not by default unload
the namespace (and may not even with \code{unload=TRUE}), and
detaching will not in general unload any dynamically loaded compiled
code (DLLs).  Further, registered S3 methods from the namespace will not be
removed.  If you use \code{\LinkA{library}{library}} on a package whose name
space is loaded, it attaches the exports of the loaded name space.
So detaching and re-attaching a package may not refresh some
or all components of the package, and is inadvisable.
\end{Details}
%
\begin{Value}
Invisible \code{NULL}.
\end{Value}
%
\begin{Note}\relax
You cannot detach either the workspace (position 1) nor the \pkg{base}
package (the last item in the search list), and attempting to do so
will throw an error.

Unloading some name spaces has undesirable side effects:
e.g. unloading \pkg{grid} closes all graphics devices, and on most
systems \pkg{tcltk} cannot be reloaded once it has been unloaded.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{attach}{attach}}, \code{\LinkA{library}{library}}, \code{\LinkA{search}{search}},
\code{\LinkA{objects}{objects}}, \code{\LinkA{unloadNamespace}{unloadNamespace}},
\code{\LinkA{library.dynam.unload}{library.dynam.unload}} .
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(splines) # package
detach(package:splines)
## or also
library(splines)
pkg <- "package:splines"
detach(pkg, character.only = TRUE)

## careful: do not do this unless 'splines' is not already loaded.
library(splines)
detach(2) # 'pos' used for 'name'

## an example of the name argument to attach
## and of detaching a database named by a character vector
attach_and_detach <- function(db, pos=2)
{
   name <- deparse(substitute(db))
   attach(db, pos=pos, name=name)
   print(search()[pos])
   detach(name, character.only = TRUE)
}
attach_and_detach(women, pos=3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{diag}{Matrix Diagonals}{diag}
\aliasA{diag<\Rdash}{diag}{diag<.Rdash.}
\keyword{array}{diag}
%
\begin{Description}\relax
Extract or replace the diagonal of a matrix,
or construct a diagonal matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
diag(x = 1, nrow, ncol)
diag(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix, vector or 1D array, or missing.
\item[\code{nrow, ncol}] Optional dimensions for the result when \code{x} is
not a matrix.
\item[\code{value}] either a single value or a vector of length equal to that
of the current diagonal.  Should be of a mode which can be coerced
to that of \code{x}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{diag} has four distinct usages:
\begin{enumerate}

\item \code{x} is a matrix, when it extracts the diagonal.
\item \code{x} is missing and \code{nrow} is specified, it returns
an identity matrix.
\item \code{x} is a scalar (length-one vector) and the only
argument, it returns a square identity matrix of size given by the scalar.
\item \code{x} is a vector, either of length at least 2 or there
were further arguments.  This returns a matrix with the given
diagonal and zero off-diagonal entries.

\end{enumerate}

It is an error to specify \code{nrow} or \code{ncol} in the first case.
\end{Details}
%
\begin{Value}
If \code{x} is a matrix then \code{diag(x)} returns the diagonal of
\code{x}.  The resulting vector will have \code{\LinkA{names}{names}} if the
matrix \code{x} has matching column and rownames.

The replacement form sets the diagonal of the matrix \code{x} to the
given value(s).

In all other cases the value is a diagonal matrix with \code{nrow}
rows and \code{ncol} columns (if \code{ncol} is not given the matrix
is square).  Here \code{nrow} is taken from the argument if specified,
otherwise inferred from \code{x}: if that is a vector (or 1D array) of
length two or more, then its length is the number of rows, but if it
is of length one and neither \code{nrow} nor \code{ncol} is specified,
\code{nrow = as.integer(x)}.

When a diagonal matrix is returned, the diagonal elements are one
except in the fourth case, when \code{x} gives the diagonal elements:
it will be recycled or truncated as needed, but fractional recycling
and truncation will give a warning.
\end{Value}
%
\begin{Note}\relax
Using \code{diag(x)} can have unexpected effects if \code{x} is a
vector that could be of length one. Use \code{diag(x, nrow =
    length(x))} for consistent behaviour.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{upper.tri}{upper.tri}}, \code{\LinkA{lower.tri}{lower.tri}}, \code{\LinkA{matrix}{matrix}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
dim(diag(3))
diag(10,3,4) # guess what?
all(diag(1:3) == {m <- matrix(0,3,3); diag(m) <- 1:3; m})

diag(var(M <- cbind(X = 1:5, Y = stats::rnorm(5))))
#-> vector with names "X" and "Y"

rownames(M) <- c(colnames(M),rep("",3));
M; diag(M) #  named as well
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{diff}{Lagged Differences}{diff}
\methaliasA{diff.Date}{diff}{diff.Date}
\methaliasA{diff.default}{diff}{diff.default}
\methaliasA{diff.POSIXt}{diff}{diff.POSIXt}
\keyword{arith}{diff}
%
\begin{Description}\relax
Returns suitably lagged and iterated differences.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
diff(x, ...)

## Default S3 method:
diff(x, lag = 1, differences = 1, ...)

## S3 method for class 'POSIXt':
diff(x, lag = 1, differences = 1, ...)

## S3 method for class 'Date':
diff(x, lag = 1, differences = 1, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric vector or matrix containing the values to be
differenced.
\item[\code{lag}] an integer indicating which lag to use.
\item[\code{differences}] an integer indicating the order of the difference.
\item[\code{...}] further arguments to be passed to or from methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{diff} is a generic function with a default method and ones for
classes \code{"\LinkA{ts}{ts}"}, \code{"\LinkA{POSIXt}{POSIXt}"} and
\code{"\LinkA{Date}{Date}"}.

\code{\LinkA{NA}{NA}}'s propagate.
\end{Details}
%
\begin{Value}
If \code{x} is a vector of length \code{n} and \code{differences=1},
then the computed result is equal to the successive differences
\code{x[(1+lag):n] - x[1:(n-lag)]}.

If \code{difference} is larger than one this algorithm is applied
recursively to \code{x}.
Note that the returned value is a vector which is shorter than
\code{x}.

If \code{x} is a matrix then the difference operations are carried out
on each column separately.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{diff.ts}{diff.ts}}, \code{\LinkA{diffinv}{diffinv}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
diff(1:10, 2)
diff(1:10, 2, 2)
x <- cumsum(cumsum(1:10))
diff(x, lag = 2)
diff(x, differences = 2)

diff(.leap.seconds)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{difftime}{Time Intervals}{difftime}
\aliasA{*.difftime}{difftime}{*.difftime}
\aliasA{/.difftime}{difftime}{/.difftime}
\aliasA{as.difftime}{difftime}{as.difftime}
\aliasA{as.double.difftime}{difftime}{as.double.difftime}
\aliasA{format.difftime}{difftime}{format.difftime}
\aliasA{Math.difftime}{difftime}{Math.difftime}
\aliasA{mean.difftime}{difftime}{mean.difftime}
\aliasA{Ops.difftime}{difftime}{Ops.difftime}
\aliasA{print.difftime}{difftime}{print.difftime}
\aliasA{Summary.difftime}{difftime}{Summary.difftime}
\aliasA{time interval}{difftime}{time interval}
\aliasA{units}{difftime}{units}
\methaliasA{units.difftime}{difftime}{units.difftime}
\aliasA{units<\Rdash}{difftime}{units<.Rdash.}
\methaliasA{units<\Rdash.difftime}{difftime}{units<.Rdash..difftime}
\aliasA{[.difftime}{difftime}{[.difftime}
\keyword{utilities}{difftime}
\keyword{chron}{difftime}
%
\begin{Description}\relax
Time intervals creation, printing, and some arithmetic.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
time1 - time2

difftime(time1, time2, tz = "",
         units = c("auto", "secs", "mins", "hours",
                   "days", "weeks"))

as.difftime(tim, format = "%X", units = "auto")

## S3 method for class 'difftime':
format(x, ...)
## S3 method for class 'difftime':
units(x)
## S3 replacement method for class 'difftime':
units(x) <- value
## S3 method for class 'difftime':
as.double(x, units = "auto", ...)

## Group methods, notably for round(), signif(), floor(), ceiling(),
## trunc(), abs(); called directly, *not* as Math():
## S3 method for class 'difftime':
Math(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{time1, time2}] \LinkA{date-time}{date.Rdash.time} or \LinkA{date}{Dates} objects.
\item[\code{tz}] a timezone specification to be used for the conversion.
System-specific, but \code{""} is the current time zone, and
\code{"GMT"} is UTC.
\item[\code{units}] character.  Units in which the results are desired. Can
be abbreviated.
\item[\code{value}] character.  Like \code{units} above, except that
abbreviations are not allowed.
\item[\code{tim}] character string or numeric value specifying a time interval.
\item[\code{format}] character specifying the format of \code{tim}: see
\code{\LinkA{strptime}{strptime}}.  The default is a locale-specific time format.
\item[\code{x}] an object inheriting from class \code{"difftime"}.
\item[\code{...}] arguments to be passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Function \code{difftime} calculates a difference of two date/time
objects and returns an object of class \code{"difftime"} with an
attribute indicating the units.  The
\code{\LinkA{Math}{S3groupGeneric}} group method provides
\code{\LinkA{round}{round}}, \code{\LinkA{signif}{signif}}, \code{\LinkA{floor}{floor}},
\code{\LinkA{ceiling}{ceiling}}, \code{\LinkA{trunc}{trunc}}, \code{\LinkA{abs}{abs}}, and
\code{\LinkA{sign}{sign}} methods for objects of this class, and there are
methods for the group-generic (see
\code{\LinkA{Ops}{S3groupGeneric}}) logical and arithmetic
operations.

If \code{units = "auto"}, a suitable set of units is chosen, the largest
possible (excluding \code{"weeks"}) in which all the absolute
differences are greater than one.

Subtraction of date-time objects gives an object of this class,
by calling \code{difftime} with \code{units = "auto"}.  Alternatively,
\code{as.difftime()} works on character-coded or numeric time
intervals; in the latter case, units must be specified, and
\code{format} has no effect.

Limited arithmetic is available on \code{"difftime"} objects: they can
be added or subtracted, and multiplied or divided by a numeric vector.
In addition, adding or subtracting a numeric vector by a
\code{"difftime"} object implicitly converts the numeric vector to a
\code{"difftime"} object with the same units as the \code{"difftime"}
object.  There are methods for \code{\LinkA{mean}{mean}} and
\code{\LinkA{sum}{sum}} (via the \code{\LinkA{Summary}{S3groupGeneric}}
group generic).

The units of a \code{"difftime"} object can be extracted by the
\code{units} function, which also has an replacement form.  If the units
are changed, the numerical value is scaled accordingly.

The \code{as.double} method returns the numeric value expressed in
the specified units.  Using  \code{units = "auto"} means the units of the
object.

The \code{format} method simply formats the numeric value and appends
the units as a text string.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{DateTimeClasses}{DateTimeClasses}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(z <- Sys.time() - 3600)
Sys.time() - z                # just over 3600 seconds.

## time interval between releases of R 1.2.2 and 1.2.3.
ISOdate(2001, 4, 26) - ISOdate(2001, 2, 26)

as.difftime(c("0:3:20", "11:23:15"))
as.difftime(c("3:20", "23:15", "2:"), format= "%H:%M")# 3rd gives NA
(z <- as.difftime(c(0,30,60), units="mins"))
as.numeric(z, units="secs")
as.numeric(z, units="hours")
format(z)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{dim}{Dimensions of an Object}{dim}
\methaliasA{dim.data.frame}{dim}{dim.data.frame}
\aliasA{dim<\Rdash}{dim}{dim<.Rdash.}
\keyword{array}{dim}
%
\begin{Description}\relax
Retrieve or set the dimension of an object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
dim(x)
dim(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object, for example a matrix, array or data frame.
\item[\code{value}] For the default method, either \code{NULL} or
a numeric vector, which is coerced to integer (by truncation).
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The functions \code{dim} and \code{dim<-} are generic.

\code{dim} has a method for \code{\LinkA{data.frame}{data.frame}}s, which returns
the lengths of the \code{row.names} attribute of \code{x} and
of \code{x} (as the numbers of rows and columns respectively).

These functions are \LinkA{primitive}{primitive}, so argument names are ignored
(but this might not be true of their methods).
\end{Details}
%
\begin{Value}
For an array (and hence in particular, for a matrix) \code{dim} retrieves
the \code{dim} attribute of the object.  It is \code{NULL} or a vector
of mode \code{\LinkA{integer}{integer}}.

The replacement method changes the \code{"dim"} attribute (provided the
new value is compatible) and removes any \code{"dimnames"} \emph{and}
\code{"names"} attributes.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{ncol}{ncol}}, \code{\LinkA{nrow}{nrow}} and \code{\LinkA{dimnames}{dimnames}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1:12 ; dim(x) <- c(3,4)
x

# simple versions of nrow and ncol could be defined as follows
nrow0 <- function(x) dim(x)[1]
ncol0 <- function(x) dim(x)[2]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{dimnames}{Dimnames of an Object}{dimnames}
\methaliasA{dimnames.data.frame}{dimnames}{dimnames.data.frame}
\aliasA{dimnames<\Rdash}{dimnames}{dimnames<.Rdash.}
\methaliasA{dimnames<\Rdash.data.frame}{dimnames}{dimnames<.Rdash..data.frame}
\keyword{array}{dimnames}
\keyword{manip}{dimnames}
%
\begin{Description}\relax
Retrieve or set the dimnames of an object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
dimnames(x)
dimnames(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object, for example a matrix, array or data frame.
\item[\code{value}] a possible value for \code{dimnames(x)}: see the
`Value' section.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The functions \code{dimnames} and \code{dimnames<-} are generic.

For an \code{\LinkA{array}{array}} (and hence in particular, for a
\code{\LinkA{matrix}{matrix}}), they retrieve or set the \code{dimnames}
attribute (see \LinkA{attributes}{attributes}) of the object.  A list
\code{value} can have names, and these will be used to label the
dimensions of the array where appropriate.

The replacement method for arrays/matrices coerces vector and factor
elements of \code{value} to character, but does not dispatch methods for
\code{as.character}.  It coerces zero-length elements to \code{NULL},
and a zero-length list to \code{NULL}.  If \code{value} is a list
shorter than the number of dimensions, as from \R{} 2.8.0 it is extended
with \code{NULL}s to the needed length.

Both have methods for data frames.  The dimnames of a data frame are
its \code{\LinkA{row.names}{row.names}} and its \code{\LinkA{names}{names}}.  For the
replacement method each component of \code{value} will be coerced by
\code{\LinkA{as.character}{as.character}}.

For a 1D matrix the \code{\LinkA{names}{names}} are the same thing as the
(only) component of the \code{dimnames}.

These functions are \LinkA{primitive}{primitive}, so argument names are ignored
(but this might not be true of their methods).
\end{Details}
%
\begin{Value}
The dimnames of a matrix or array can be \code{NULL} or a list of the
same length as \code{dim(x)}.  If a list, its components are either
\code{NULL} or a character vector with positive length of the
appropriate dimension of \code{x}.  The list can be named.

For the \code{"data.frame"} method both dimnames are character
vectors, and the rownames must contain no duplicates nor missing values.
\end{Value}
%
\begin{Note}\relax
Setting components of the dimnames, e.g.
\code{dimnames(A)[[1]] <- value} is a common paradigm, but note that
it will not work if the value assigned is \code{NULL}.  Use
\code{\LinkA{rownames}{rownames}} instead, or (as it does) manipulate the whole
dimnames list.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{rownames}{rownames}}, \code{\LinkA{colnames}{colnames}};
\code{\LinkA{array}{array}}, \code{\LinkA{matrix}{matrix}}, \code{\LinkA{data.frame}{data.frame}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## simple versions of rownames and colnames
## could be defined as follows
rownames0 <- function(x) dimnames(x)[[1]]
colnames0 <- function(x) dimnames(x)[[2]]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{do.call}{Execute a Function Call}{do.call}
\keyword{programming}{do.call}
%
\begin{Description}\relax
\code{do.call} constructs and executes a function call from a name or
a function and a list of arguments to be passed to it.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
do.call(what, args, quote = FALSE, envir = parent.frame())
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{what}] either a function or a non-empty character string naming the
function to be called.
\item[\code{args}] a \emph{list} of arguments to the function call.  The
\code{names} attribute of \code{args} gives the argument names.
\item[\code{quote}] a logical value indicating whether to quote the
arguments.
\item[\code{envir}] an environment within which to evaluate the call.  This
will be most useful if \code{what} is a character string and
the arguments are symbols or quoted expressions.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{quote} is \code{FALSE}, the default, then the arguments are
evaluated (in the calling environment, not \code{envir}.).  If
\code{quote} is \code{TRUE} then each argument is quoted (see
\code{\LinkA{quote}{quote}}) so that the effect of argument evaluation is to
remove the quotes -- leaving the original arguments unevaluated when the
call is constructed.

The behavior of some functions, such as \code{\LinkA{substitute}{substitute}},
will not be the same for functions evaluated using \code{do.call} as
if they were evaluated from the interpreter.  The precise semantics
are currently undefined and subject to change.
\end{Details}
%
\begin{Value}
The result of the (evaluated) function call.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{call}{call}} which creates an unevaluated call.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
do.call("complex", list(imag = 1:3))

## if we already have a list (e.g. a data frame)
## we need c() to add further arguments
tmp <- expand.grid(letters[1:2], 1:3, c("+", "-"))
do.call("paste", c(tmp, sep=""))

do.call(paste, list(as.name("A"), as.name("B")), quote=TRUE)

## examples of where objects will be found.
A <- 2
f <- function(x) print(x^2)
env <- new.env()
assign("A", 10, envir = env)
assign("f", f, envir = env)
f <- function(x) print(x)
f(A)                                    # 2
do.call("f", list(A))                   # 2
do.call("f", list(A), envir=env)        # 4
do.call(f, list(A), envir=env)          # 2
do.call("f", list(quote(A)), envir=env) # 100
do.call(f, list(quote(A)), envir=env)   # 10
do.call("f", list(as.name("A")), envir=env) # 100

eval(call("f", A))                      # 2
eval(call("f", quote(A)))               # 2
eval(call("f", A), envir=env)           # 4
eval(call("f", quote(A)), envir=env)    # 100
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{double}{Double-Precision Vectors}{double}
\aliasA{as.double}{double}{as.double}
\aliasA{as.single}{double}{as.single}
\methaliasA{as.single.default}{double}{as.single.default}
\aliasA{is.double}{double}{is.double}
\aliasA{single}{double}{single}
\keyword{classes}{double}
%
\begin{Description}\relax
Create, coerce to or test for a double-precision vector.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
double(length = 0)
as.double(x, ...)
is.double(x)

single(length = 0)
as.single(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced or tested.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{double} creates a double-precision vector of the specified
length.  The elements of the vector are all equal to \code{0}.
It is identical to \code{\LinkA{numeric}{numeric}} (and \code{real}).

\code{as.double} is a generic function.  It is identical to
\code{as.numeric} (and \code{as.real}).  Methods should return an
object of base type \code{"double"}.

\code{is.double} is a test of double \LinkA{type}{type}.

\emph{\R{} has no single precision data type.  All real numbers are
stored in double precision format}.  The functions \code{as.single}
and \code{single} are identical to \code{as.double} and \code{double}
except they set the attribute \code{Csingle} that is used in the
\code{\LinkA{.C}{.C}} and \code{\LinkA{.Fortran}{.Fortran}} interface, and they are
intended only to be used in that context.

\code{as.double} and \code{is.double} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored.  This may not be true of methods for \code{as.double}.
\end{Details}
%
\begin{Value}
\code{double} creates a double-precision vector of the specified
length.  The elements of the vector are all equal to \code{0}.

\code{as.double} attempts to coerce its argument to be of double
type: like \code{\LinkA{as.vector}{as.vector}} it strips attributes including
names.  (To ensure that an object is of double type without
stripping attributes, use \code{\LinkA{storage.mode}{storage.mode}}.)
Character strings containing either a decimal representation or a
hexadecimal representation (starting with \code{0x} or \code{0X}) can
be converted. \code{as.double} for factors yields the codes underlying
the factor levels, not the numeric representation of the labels, see
also \code{\LinkA{factor}{factor}}.

\code{is.double} returns \code{TRUE} or \code{FALSE} depending on
whether its argument is of double \LinkA{type}{type} or not.
\end{Value}
%
\begin{Section}{Note on names}
It is a historical anomaly that \R{} has three names for its
floating-point vectors, \code{\LinkA{double}{double}}, \code{\LinkA{numeric}{numeric}}
and \code{\LinkA{real}{real}}.

\code{double} is the name of the \LinkA{type}{type}.
\code{numeric} is the name of the \LinkA{mode}{mode} and also of the implicit
\LinkA{class}{class}.  As an S4 formal class, use \code{"numeric"} (there was
a formal class \code{"double"} prior to \R{} 2.7.0).

\code{real} is deprecated and should not be used in new code.

The potential confusion is that \R{} has used \emph{\LinkA{mode}{mode}}
\code{"numeric"} to mean `double or integer', which conflicts
with the S4 usage.  Thus \code{is.numeric} tests the mode, not the
class, but \code{as.numeric} (which is identical to \code{as.double})
coerces to the class.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{integer}{integer}}, \code{\LinkA{numeric}{numeric}}, \code{\LinkA{storage.mode}{storage.mode}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
is.double(1)
all(double(3) == 0)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{dput}{Write an Object to a File or Recreate it}{dput}
\aliasA{dget}{dput}{dget}
\keyword{file}{dput}
\keyword{programming}{dput}
\keyword{connection}{dput}
%
\begin{Description}\relax
Writes an ASCII text representation of an \R{} object to a file
or connection, or uses one to recreate the object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
dput(x, file = "",
     control = c("keepNA", "keepInteger", "showAttributes"))

dget(file)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object.
\item[\code{file}] either a character string naming a file or a
connection. \code{""} indicates output to the console.
\item[\code{control}] character vector indicating deparsing options.
See \code{\LinkA{.deparseOpts}{.deparseOpts}} for their description.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{dput} opens \code{file} and deparses the object \code{x} into
that file.  The object name is not written (unlike \code{dump}).
If \code{x} is a function the associated environment is stripped.
Hence scoping information can be lost.

Deparsing an object is difficult, and not always possible.  With the
default \code{control}, \code{dput()} attempts to deparse in a way
that is readable, but for more complex or unusual objects (see
\code{\LinkA{dump}{dump}}, not likely
to be parsed as identical to the original.  Use \code{control = "all"}
for the most complete deparsing; use \code{control = NULL} for the
simplest deparsing, not even including attributes.

\code{dput} will warn if fewer characters were written to a file than
expected, which may indicate a full or corrupt file system.

To display saved source rather than deparsing the internal representation 
include \code{"useSource"} in \code{control}.  \R{} currently saves
source only for function definitions.
\end{Details}
%
\begin{Value}
For \code{dput}, the first argument invisibly.

For \code{dget}, the object created.
\end{Value}
%
\begin{Note}\relax
To avoid the risk of a source attribute out of sync with the actual
function definition, the source attribute of a function will never 
be written as an attribute.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{deparse}{deparse}}, \code{\LinkA{dump}{dump}}, \code{\LinkA{write}{write}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Write an ASCII version of mean to the file "foo"
dput(mean, "foo")
## And read it back into 'bar'
bar <- dget("foo")
unlink("foo")
## Create a function with comments
baz <- function(x) {
  # Subtract from one
  1-x
}
## and display it
dput(baz)
## and now display the saved source
dput(baz, control = "useSource")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{drop}{Drop Redundant Extent Information}{drop}
\keyword{array}{drop}
%
\begin{Description}\relax
Delete the dimensions of an array which have only one level.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
drop(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an array (including a matrix).
\end{ldescription}
\end{Arguments}
%
\begin{Value}
If \code{x} is an object with a \code{dim} attribute (e.g., a matrix
or \code{\LinkA{array}{array}}), then \code{drop} returns an object like
\code{x}, but with any extents of length one removed.  Any
accompanying \code{dimnames} attribute is adjusted and returned with
\code{x}: if the result is a vector the \code{names} are taken from
the \code{dimnames} (if any).  If the result is a length-one vector,
the names are taken from the first dimension with a dimname.

Array subsetting (\code{\LinkA{[}{[}}) performs this reduction unless used
with \code{drop = FALSE}, but sometimes it is useful to invoke
\code{drop} directly.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{drop1}{drop1}} which is used for dropping terms in models.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
dim(drop(array(1:12, dim=c(1,3,1,1,2,1,2))))# = 3 2 2
drop(1:3 %*% 2:4)# scalar product
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{dump}{Text Representations of R Objects}{dump}
\keyword{file}{dump}
\keyword{connection}{dump}
%
\begin{Description}\relax
This function takes a vector of names of \R{} objects and produces
text representations of the objects on a file or connection.
A \code{dump} file can usually be \code{\LinkA{source}{source}}d into another
\R{} (or S) session.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
dump(list, file = "dumpdata.R", append = FALSE, 
     control = "all", envir = parent.frame(), evaluate = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{list}] character. The names of one or more \R{} objects to be dumped.

\item[\code{file}] either a character string naming a file or a
connection.  \code{""} indicates output to the console.

\item[\code{append}] if \code{TRUE} and \code{file} is a character string,
output will be appended to \code{file}; otherwise, it will overwrite
the contents of \code{file}.

\item[\code{control}] character vector indicating deparsing options.
See \code{\LinkA{.deparseOpts}{.deparseOpts}} for their description.

\item[\code{envir}] the environment to search for objects.

\item[\code{evaluate}] logical.  Should promises be evaluated?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If some of the objects named do not exist (in scope), they are
omitted, with a warning.  If \code{file} is a file and no objects
exist then no file is created.

\code{source}ing may not produce an identical copy of
\code{dump}ed objects.  A warning is issued if it is likely that
problems will arise, for example when dumping exotic or complex
objects (see the Note).

\code{dump} will also warn if fewer characters were written to a file
than expected, which may indicate a full or corrupt file system.

A \code{dump} file can be \code{\LinkA{source}{source}}d into another \R{} (or
perhaps S) session, but the function \code{\LinkA{save}{save}} is designed to
be used for transporting \R{} data, and will work with \R{} objects that
\code{dump} does not handle.

To produce a more readable representation of an object, use
\code{control = NULL}.  This will skip attributes, and will make other
simplifications that make \code{source} less likely to produce an
identical copy.  See \code{\LinkA{deparse}{deparse}} for details.

To deparse the internal representation of a function rather than
displaying the saved source, use \code{control = c("keepInteger",
    "warnIncomplete", "keepNA")}.  This will lose all formatting and
comments, but may be useful in those cases where the saved source is
no longer correct.

Promises will normally only be encountered by users as a result of
lazy-loading (when the default \code{evaluate = TRUE} is essential)
and after the use of \code{\LinkA{delayedAssign}{delayedAssign}},
when \code{evaluate = FALSE} might be intended.
\end{Details}
%
\begin{Value}
An invisible character vector containing the names of the objects
which were dumped.
\end{Value}
%
\begin{Note}\relax
As \code{dump} is defined in the base name space, the \pkg{base}
package will be searched \emph{before} the global environment unless
\code{dump} is called from the top level prompt or the \code{envir}
argument is given explicitly.

To avoid the risk of a source attribute becoming out of sync with the
actual function definition, the source attribute of a function will
never be dumped as an attribute.

Currently environments, external pointers, weak references and objects
of type \code{S4} are not deparsed in a way that can be
\code{source}d.  In addition, language objects are deparsed in a
simple way whatever the value of \code{control}, and this includes not
dumping their attributes (which will result in a warning).
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{dput}{dput}}, \code{\LinkA{dget}{dget}}, \code{\LinkA{write}{write}}.\\{}
\code{\LinkA{save}{save}} for a more reliable way to save \R{} objects.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1; y <- 1:10
dump(ls(pattern = '^[xyz]'), "xyz.Rdmped")
print(.Last.value)
unlink("xyz.Rdmped")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{duplicated}{Determine Duplicate Elements}{duplicated}
\aliasA{anyDuplicated}{duplicated}{anyDuplicated}
\methaliasA{anyDuplicated.array}{duplicated}{anyDuplicated.array}
\methaliasA{anyDuplicated.data.frame}{duplicated}{anyDuplicated.data.frame}
\methaliasA{anyDuplicated.default}{duplicated}{anyDuplicated.default}
\methaliasA{anyDuplicated.matrix}{duplicated}{anyDuplicated.matrix}
\methaliasA{duplicated.array}{duplicated}{duplicated.array}
\methaliasA{duplicated.data.frame}{duplicated}{duplicated.data.frame}
\methaliasA{duplicated.default}{duplicated}{duplicated.default}
\methaliasA{duplicated.matrix}{duplicated}{duplicated.matrix}
\keyword{logic}{duplicated}
\keyword{manip}{duplicated}
%
\begin{Description}\relax
Determines which elements of a vector or data frame are duplicates
of elements with smaller subscripts, and returns a logical vector
indicating which elements (rows) are duplicates.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
duplicated(x, incomparables = FALSE, ...)

## Default S3 method:
duplicated(x, incomparables = FALSE,
           fromLast = FALSE, ...)

## S3 method for class 'array':
duplicated(x, incomparables = FALSE, MARGIN = 1,
           fromLast = FALSE, ...)

anyDuplicated(x, incomparables = FALSE, ...)
## Default S3 method:
anyDuplicated(x, incomparables = FALSE,
           fromLast = FALSE, ...)
## S3 method for class 'array':
anyDuplicated(x, incomparables = FALSE,
           MARGIN = 1, fromLast = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector or a data frame or an array or \code{NULL}.
\item[\code{incomparables}] a vector of values that cannot be compared.
\code{FALSE} is a special value, meaning that all values can be
compared, and may be the only value accepted for methods other than
the default.  It will be coerced internally to the same type as
\code{x}.
\item[\code{fromLast}] logical indicating if duplication should be considered
from the reverse side, i.e., the last (or rightmost) of identical
elements would correspond to \code{duplicated=FALSE}.
\item[\code{...}] arguments for particular methods.
\item[\code{MARGIN}] the array margin to be held fixed: see
\code{\LinkA{apply}{apply}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These are generic functions with methods for vectors (including
lists), data frames and arrays (including matrices).

For the default methods, and whenever there are equivalent method
definitions for \code{duplicated} and \code{anyDuplicated},
\code{anyDuplicated(x,...)} is a ``generalized'' shortcut for
\code{any(duplicated(x,...))}, in the sense that it returns the
\emph{index} \code{i} of the first duplicated entry \code{x[i]} if
there is one, and \code{0} otherwise.  Their behaviours may be
different when at least one of \code{duplicated} and
\code{anyDuplicated} has a relevant method.

\code{duplicated(x, fromLast=TRUE)} is equivalent to but faster than
\code{rev(duplicated(rev(x)))}.

The data frame method works by pasting together a character
representation of the rows separated by \code{\bsl{}r}, so may be imperfect
if the data frame has characters with embedded carriage returns or
columns which do not reliably map to characters.

The array method calculates for each element of the sub-array
specified by \code{MARGIN} if the remaining dimensions are identical
to those for an earlier (or later, when \code{fromLast=TRUE}) element
(in row-major order).  This would most commonly be used to find
duplicated rows (the default) or columns (with \code{MARGIN = 2}).

Missing values are regarded as equal, but \code{NaN} is not equal to
\code{NA\_real\_}.

Values in \code{incomparables} will never be marked as duplicated.
This is intended to be used for a fairly small set of values and will
not be efficient for a very large set.
\end{Details}
%
\begin{Value}
\code{duplicated()}:
For a vector input, a logical vector of the same length as
\code{x}.  For a data frame, a logical vector with one element for
each row.  For a matrix or array, a logical array with the same
dimensions and dimnames.

\code{anyDuplicated()}: a non-negative integer (of length one).
\end{Value}
%
\begin{Section}{Warning}
Using this for lists is potentially slow, especially if the elements
are not atomic vectors (see \code{\LinkA{vector}{vector}}) or differ only
in their attributes.  In the worst case it is \eqn{O(n^2)}{}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{unique}{unique}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c(9:20, 1:5, 3:7, 0:8)
## extract unique elements
(xu <- x[!duplicated(x)])
## similar, but not the same:
(xu2 <- x[!duplicated(x, fromLast = TRUE)])

## xu == unique(x) but unique(x) is more efficient
stopifnot(identical(xu,  unique(x)),
          identical(xu2, unique(x, fromLast = TRUE)))

duplicated(iris)[140:143]

duplicated(iris3, MARGIN = c(1, 3))
anyDuplicated(iris) ## 143

anyDuplicated(x)
anyDuplicated(x, fromLast = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{dyn.load}{Foreign Function Interface}{dyn.load}
\aliasA{dyn.unload}{dyn.load}{dyn.unload}
\aliasA{is.loaded}{dyn.load}{is.loaded}
\keyword{interface}{dyn.load}
%
\begin{Description}\relax
Load or unload DLLs (also known as shared objects), and test whether a
C function or Fortran subroutine is available.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
dyn.load(x, local = TRUE, now = TRUE, ...)
dyn.unload(x)

is.loaded(symbol, PACKAGE = "", type = "")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character string giving the pathname to a DLL, also known
as a dynamic shared object. (See `Details' for what these
terms mean.)
\item[\code{local}] a logical value controlling whether the symbols in the
DLL are stored in their own local table and not shared
across DLLs, or added to the global symbol table.  Whether this has
any effect is system-dependent.

\item[\code{now}] a logical controlling whether all symbols are resolved (and
relocated) immediately the library is loaded or deferred until they
are used.  This control is useful for developers testing whether a
library is complete and has all the necessary symbols, and for users
to ignore missing symbols. Whether this has any effect is system-dependent.

\item[\code{...}] other arguments for future expansion.

\item[\code{symbol}] a character string giving a symbol name.
\item[\code{PACKAGE}] if supplied, confine the search for the \code{name} to
the DLL given by this argument (plus the conventional extension,
\file{.so}, \file{.sl}, \file{.dll}, \dots).  This is intended to
add safety for packages, which can ensure by using this argument
that no other package can override their external symbols.  Use
\code{PACKAGE="base"} for symbols linked in to \R{}.  This is used in the
same way as in \code{\LinkA{.C}{.C}}, \code{\LinkA{.Call}{.Call}},
\code{\LinkA{.Fortran}{.Fortran}} and \code{\LinkA{.External}{.External}} functions
\item[\code{type}] The type of symbol to look for: can be any (\code{""}, the
default), \code{"Fortran"}, \code{"Call"} or \code{"External"}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The objects \code{dyn.load} loads are called `dynamically
loadable libraries' (abbreviated to `DLL' on all platforms
except Mac OS X, which unfortunately uses the term for a different
sort of sobject.  On Unix-alikes they are also called `dynamic
shared objects' (`DSO'), or `shared objects' for
short.  (The POSIX standards use `executable object file', but
no one else does.)

See `See Also' and the `Writing R Extensions' and
`R Installation and Administration' manuals for how to create
and install a suitable DLL.

Unfortunately a very few platforms (e.g. Compaq Tru64) do not handle
the \code{PACKAGE} argument correctly, and may incorrectly find
symbols linked into \R{}.

The additional arguments to \code{dyn.load} mirror the different
aspects of the mode argument to the \code{dlopen()} routine on POSIX
systems. They are available so that users can exercise greater control
over the loading process for an individual library.  In general, the
default values are appropriate and you should override them only if
there is good reason and you understand the implications.

The \code{local} argument allows one to control whether the symbols in
the DLL being attached are visible to other DLLs.  While maintaining
the symbols in their own name space is good practice, the ability to
share symbols across related `chapters' is useful in many
cases.  Additionally, on certain platforms and versions of an
operating system, certain libraries must have their symbols loaded
globally to successfully resolve all symbols.

One should be careful of the potential side-effect of using lazy
loading via the \code{now} argument as \code{FALSE}.  If a routine is
called that has a missing symbol, the process will terminate
immediately.  The intended use is for library developers to call with
value \code{TRUE} to check that all symbols are actually resolved and
for regular users to call with \code{FALSE} so that missing symbols
can be ignored and the available ones can be called.

The initial motivation for adding these was to avoid such termination
in the \code{\_init()} routines of the Java virtual machine library.
However, symbols loaded locally may not be (read probably) available
to other DLLs.  Those added to the global table are available to all
other elements of the application and so can be shared across two
different DLLs.

Some (very old) systems do not provide (explicit) support for
local/global and lazy/eager symbol resolution.  This can be the source
of subtle bugs.  One can arrange to have warning messages emitted when
unsupported options are used.  This is done by setting either of the
options \code{verbose} or \code{warn} to be non-zero via the
\code{\LinkA{options}{options}} function.

There is a short discussion of these additional arguments with some
example code available at
\url{http://cm.bell-labs.com/stat/duncan/R/dynload}.
\end{Details}
%
\begin{Value}
The function \code{dyn.load} is used for its side effect which links
the specified DLL to the executing \R{} image.  Calls to \code{.C},
\code{.Call}, \code{.Fortran} and \code{.External} can then be used to
execute compiled C functions or Fortran subroutines contained in the
library.  The return value of \code{dyn.load} is an object of class
\code{DLLInfo}.  See \code{\LinkA{getLoadedDLLs}{getLoadedDLLs}} for information about
this class.

The function \code{dyn.unload} unlinks the DLL.  Note that unloading a
DLL and then re-loading a DLL of the same name may or may not work: on
Solaris it uses the first version loaded.

\code{is.loaded} checks if the symbol name is loaded and hence
available for use in \code{.C} or \code{.Fortran} or \code{.Call} or
\code{.External}.  It will succeed if any one of the four calling
functions would succeed in using the entry point unless \code{type} is
specified.  (See \code{\LinkA{.Fortran}{.Fortran}} for how Fortran symbols are
mapped.)
\end{Value}
%
\begin{Section}{Warning}
Do not use \code{dyn.unload} on a DLL loaded by
\code{\LinkA{library.dynam}{library.dynam}}: use \code{\LinkA{library.dynam.unload}{library.dynam.unload}}.
This is needed for system housekeeping.
\end{Section}
%
\begin{Note}\relax
\code{is.loaded} requires the name you would give to \code{.C} etc
and \strong{not} (as in S) that remapped by defunct functions
\code{symbol.C} or \code{symbol.For}.

The creation of DLLs and the runtime linking of them into executing
programs is very platform dependent.  In recent years there has been
some simplification in the process because the C subroutine call
\code{dlopen} has become the POSIX standard for doing this. Under
Unix-alikes \code{dyn.load} uses the \code{dlopen} mechanism and
should work on all platforms which support it.  On Windows it uses the
standard mechanism (\code{LoadLibrary}) for loading DLLs.

The original code for loading DLLs in Unix-alikes was provided by
Heiner Schwarte.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{library.dynam}{library.dynam}} to be used inside a package's
\code{\LinkA{.First.lib}{.First.lib}} initialization.

\code{\LinkA{SHLIB}{SHLIB}} for how to create suitable DLLs.

\code{\LinkA{.C}{.C}},
\code{\LinkA{.Fortran}{.Fortran}},
\code{\LinkA{.External}{.External}},
\code{\LinkA{.Call}{.Call}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
is.loaded("hcass2") #-> probably TRUE, as stats is loaded
is.loaded("supsmu") # Fortran entry point in stats
is.loaded("supsmu", "stats", "Fortran")
is.loaded("PDF", type = "External")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{eapply}{Apply a Function Over Values in an Environment}{eapply}
\keyword{iteration}{eapply}
\keyword{environment}{eapply}
\keyword{list}{eapply}
%
\begin{Description}\relax
\code{eapply} applies \code{FUN} to the named values from an
\code{\LinkA{environment}{environment}} and returns the results as a list.  The user
can request that all named objects are used (normally names that begin with a
dot are not). The output is not sorted and no parent environments are
searched.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
eapply(env, FUN, ..., all.names = FALSE, USE.NAMES = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{env}] environment to be used.
\item[\code{FUN}] the function to be applied, found \emph{via}
\code{\LinkA{match.fun}{match.fun}}.
In the case of functions like \code{+}, \code{\%*\%}, etc., the
function name must be backquoted or quoted.
\item[\code{...}] optional arguments to \code{FUN}.
\item[\code{all.names}] a logical indicating whether to apply the function to
all values.
\item[\code{USE.NAMES}] logical indicating whether the resulting list should
have \code{\LinkA{names}{names}}.  Setting this to \code{FALSE} is faster,
useful however typically only when \code{\LinkA{ls}{ls}(env)} is already
given.
\end{ldescription}
\end{Arguments}
%
\begin{SeeAlso}\relax
\code{\LinkA{environment}{environment}}, \code{\LinkA{lapply}{lapply}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(utils); require(stats)

env <- new.env()
env$a <- 1:10
env$beta <- exp(-3:3)
env$logic <- c(TRUE,FALSE,FALSE,TRUE)
# what have we there?
eapply(env, str)
## note however, that  'ls.str(env)' is slightly nicer ..

# compute the mean for each list element
       eapply(env, mean)
unlist(eapply(env, mean, USE.NAMES = FALSE))

# median and quartiles for each element (making use of "..." passing):
eapply(env, quantile, probs = 1:3/4)
eapply(env, quantile)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{eigen}{Spectral Decomposition of a Matrix}{eigen}
\keyword{algebra}{eigen}
\keyword{array}{eigen}
%
\begin{Description}\relax
Computes eigenvalues and eigenvectors of real (double, integer,
logical) or complex matrices.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
eigen(x, symmetric, only.values = FALSE, EISPACK = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix whose spectral decomposition is to be computed.
\item[\code{symmetric}] if \code{TRUE}, the matrix is assumed to be symmetric
(or Hermitian if complex) and only its lower triangle (diagonal
included) is used.  If \code{symmetric} is not specified, the matrix
is inspected for symmetry.
\item[\code{only.values}] if \code{TRUE}, only the eigenvalues are computed
and returned, otherwise both eigenvalues and eigenvectors are
returned.
\item[\code{EISPACK}] logical. Should EISPACK be used (for compatibility with
\R{} < 1.7.0)?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
By default \code{eigen} uses the LAPACK routines DSYEVR,
DGEEV, ZHEEV and ZGEEV whereas \code{eigen(EISPACK = TRUE)} provides an
interface to the EISPACK routines \code{RS}, \code{RG}, \code{CH}
and \code{CG}.

If \code{symmetric} is unspecified, the code attempts to
determine if the matrix is symmetric up to plausible numerical
inaccuracies.  It is faster and surer to set the value yourself.

\code{eigen} is preferred to \code{eigen(EISPACK = TRUE)}
for new projects, but its eigenvectors may differ in sign and
(in the asymmetric case) in normalization. (They may also differ
between methods and between platforms.)

Computing the eigenvectors is the slow part for large matrices.

Computing the eigendecomposition of a matrix is subject to errors on a
real-world computer: the definitive analysis is Wilkinson (1965).  All
you can hope for is a solution to a problem suitably close to
\code{x}.  So even though a real asymmetric \code{x} may have an
algebraic solution with repeated real eigenvalues, the computed
solution may be of a similar matrix with complex conjugate pairs of
eigenvalues.
\end{Details}
%
\begin{Value}
The spectral decomposition of \code{x} is returned as components of a
list with components

\begin{ldescription}
\item[\code{values}] a vector containing the \eqn{p}{} eigenvalues of \code{x},
sorted in \emph{decreasing} order, according to \code{Mod(values)}
in the asymmetric case when they might be complex (even for real
matrices).  For real asymmetric matrices the vector will be
complex only if complex conjugate pairs of eigenvalues are detected.

\item[\code{vectors}] either a \eqn{p\times p}{} matrix whose columns
contain the eigenvectors of \code{x}, or \code{NULL} if
\code{only.values} is \code{TRUE}.

For \code{eigen(, symmetric = FALSE, EISPACK =TRUE)} the choice of
length of the eigenvectors is not defined by EISPACK.  In all other
cases the vectors are normalized to unit length.

Recall that the eigenvectors are only defined up to a constant: even
when the length is specified they are still only defined up to a
scalar of modulus one (the sign for real matrices).

\end{ldescription}
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Smith, B. T, Boyle, J. M., Dongarra, J. J., Garbow, B. S., Ikebe,Y.,
Klema, V., and  Moler, C. B. (1976).
\emph{Matrix Eigensystems Routines -- EISPACK Guide}.
Springer-Verlag Lecture Notes in Computer Science \bold{6}.

Anderson. E. and ten others (1999)
\emph{LAPACK Users' Guide}. Third Edition. SIAM.\\{}
Available on-line at
\url{http://www.netlib.org/lapack/lug/lapack_lug.html}.

Wilkinson, J. H. (1965) \emph{The Algebraic Eigenvalue Problem.}
Clarendon Press, Oxford.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{svd}{svd}}, a generalization of \code{eigen}; \code{\LinkA{qr}{qr}}, and
\code{\LinkA{chol}{chol}} for related decompositions.

To compute the determinant of a matrix, the \code{\LinkA{qr}{qr}}
decomposition is much more efficient: \code{\LinkA{det}{det}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
eigen(cbind(c(1,-1),c(-1,1)))
eigen(cbind(c(1,-1),c(-1,1)), symmetric = FALSE)
# same (different algorithm).

eigen(cbind(1,c(1,-1)), only.values = TRUE)
eigen(cbind(-1,2:1)) # complex values
eigen(print(cbind(c(0,1i), c(-1i,0))))# Hermite ==> real Eigen values
## 3 x 3:
eigen(cbind( 1,3:1,1:3))
eigen(cbind(-1,c(1:2,0),0:2)) # complex values

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{encodeString}{Encode Character Vector as for Printing}{encodeString}
\keyword{utilities}{encodeString}
%
\begin{Description}\relax
\code{encodeString} escapes the strings in a character vector in the
same way \code{print.default} does, and optionally fits the encoded
strings within a field width.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
encodeString(x, width = 0, quote = "", na.encode = TRUE,
             justify = c("left", "right", "centre", "none"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] A character vector, or an object that can be coerced to one
by \code{\LinkA{as.character}{as.character}}.
\item[\code{width}] integer: the minimum field width.  If \code{NULL} or
\code{NA}, this is taken to be the largest field width needed for
any element of \code{x}.
\item[\code{quote}] character: quoting character, if any.
\item[\code{na.encode}] logical: should \code{NA} strings be encoded?
\item[\code{justify}] character: partial matches are allowed.  If padding to
the minimum field width is needed, how should spaces be inserted?
\code{justify == "none"} is equivalent to \code{width = 0}, for
consistency with \code{format.default}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This escapes backslash and the control characters \samp{\bsl{}a} (bell),
\samp{\bsl{}b} (backspace), \samp{\bsl{}f} (formfeed), \samp{\bsl{}n} (line feed),
\samp{\bsl{}r} (carriage return), \samp{\bsl{}t} (tab) and \samp{\bsl{}v} (vertical tab)
as well as any non-printable characters in a
single-byte locale, which are printed in octal notation
(\samp{\bsl{}xyz} with leading zeroes).
(Which characters are non-printable depends on the current locale.)
See \code{\LinkA{print.default}{print.default}} for how non-printable characters are
handled in multi-byte locales.

If \code{quote} is a single or double quote any embedded quote of the
same type is escaped.  Note that justification is of the quoted
string, hence spaces are added outside the quotes.
\end{Details}
%
\begin{Value}
A character vector of the same length as \code{x}, with the same
attributes (including names and dimensions) but with no class set.
\end{Value}
%
\begin{Note}\relax
The default for \code{width} is different from \code{format.default},
which does similar things for character vectors but without encoding
using escapes.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{print.default}{print.default}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- "ab\bc\ndef"
print(x)
cat(x) # interprets escapes
cat(encodeString(x), "\n", sep="") # similar to print()

factor(x) # makes use of this to print the levels

x <- c("a", "ab", "abcde")
encodeString(x, width = NA) # left justification
encodeString(x, width = NA, justify = "c")
encodeString(x, width = NA, justify = "r")
encodeString(x, width = NA, quote = "'", justify = "r")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Encoding}{Read or Set the Declared Encodings for a Character Vector}{Encoding}
\aliasA{Encoding<\Rdash}{Encoding}{Encoding<.Rdash.}
\keyword{utilities}{Encoding}
\keyword{character}{Encoding}
%
\begin{Description}\relax
Read or set the declared encodings for a character vector.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Encoding(x)

Encoding(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] A character vector.
\item[\code{value}] A character vector of positive length.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Character strings in \R{} can be declared to be in \code{"latin1"} or
\code{"UTF-8"}.  These declarations can be read by \code{Encoding},
which will return a character vector of values \code{"latin1"},
\code{"UTF-8"} or \code{"unknown"}, or set, when \code{value} is
recycled as needed and other values are silently treated as
\code{"unknown"}.  ASCII strings will never be marked with a declared
encoding, since their representation is the same in all encodings.

There are other ways for character strings to acquire a declared
encoding apart from explicitly setting it (and these have changed as
\R{} has evolved).  Functions \code{\LinkA{scan}{scan}},
\code{\LinkA{read.table}{read.table}}, \code{\LinkA{readLines}{readLines}}, and
\code{\LinkA{parse}{parse}} have an \code{encoding} argument that is used to
declare encodings, \code{\LinkA{iconv}{iconv}} declares encodings from its
\code{from} argument, and console input in suitable locales is also
declared.  \code{\LinkA{intToUtf8}{intToUtf8}} declares its output as
\code{"UTF-8"}, and output text connections are marked if running in a
suitable locale.  Under some circumstances (see its help page)
\code{\LinkA{source}{source}(encoding=)} will mark encodings of character
strings it outputs.

Most character manipulation functions will set the encoding on output
strings if it was declared on the corresponding input.  These include
\code{\LinkA{chartr}{chartr}}, \code{\LinkA{strsplit}{strsplit}(useBytes = FALSE)},
\code{\LinkA{tolower}{tolower}} and \code{\LinkA{toupper}{toupper}} as well as
\code{\LinkA{sub}{sub}(useBytes = FALSE)} and \code{\LinkA{gsub}{gsub}(useBytes =
  FALSE)}.  Note that such functions do not \emph{preserve} the
encoding, but if they know the input encoding and that the string has
been successfully re-encoded (to the current encoding or UTF-8), they
mark the output.

\code{\LinkA{substr}{substr}} does preserve the encoding, and
\code{\LinkA{chartr}{chartr}}, \code{\LinkA{tolower}{tolower}} and \code{\LinkA{toupper}{toupper}}
preserve UTF-8 encoding on systems with Unicode wide characters.  With
their \code{fixed} and \code{perl} options, \code{\LinkA{strsplit}{strsplit}},
\code{\LinkA{sub}{sub}} and \code{gsub} will give a marked UTF-8 result if
any of the inputs are UTF-8.

\code{\LinkA{paste}{paste}} and \code{\LinkA{sprintf}{sprintf}} return a UTF-8 marked
element if any of the inputs to that element is marked as UTF-8.

\code{\LinkA{match}{match}}, \code{\LinkA{pmatch}{pmatch}}, \code{\LinkA{charmatch}{charmatch}},
\code{\LinkA{duplicated}{duplicated}} and \code{\LinkA{unique}{unique}} all match in UTF-8
if any of the elements are marked as UTF-8.
\end{Details}
%
\begin{Value}
A character vector.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
## x is intended to be in latin1
x <- "fa\xE7ile"
Encoding(x)
Encoding(x) <- "latin1"
x
xx <- iconv(x, "latin1", "UTF-8")
Encoding(c(x, xx))
c(x, xx)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{environment}{Environment Access}{environment}
\aliasA{.BaseNamespaceEnv}{environment}{.BaseNamespaceEnv}
\aliasA{.GlobalEnv}{environment}{.GlobalEnv}
\aliasA{baseenv}{environment}{baseenv}
\aliasA{emptyenv}{environment}{emptyenv}
\aliasA{env.profile}{environment}{env.profile}
\aliasA{environment<\Rdash}{environment}{environment<.Rdash.}
\aliasA{environmentName}{environment}{environmentName}
\aliasA{globalenv}{environment}{globalenv}
\aliasA{is.environment}{environment}{is.environment}
\aliasA{new.env}{environment}{new.env}
\aliasA{parent.env}{environment}{parent.env}
\aliasA{parent.env<\Rdash}{environment}{parent.env<.Rdash.}
\keyword{data}{environment}
\keyword{programming}{environment}
%
\begin{Description}\relax
Get, set, test for and create environments.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
environment(fun = NULL)
environment(fun) <- value

is.environment(x)

.GlobalEnv
globalenv()
.BaseNamespaceEnv

emptyenv()
baseenv()

new.env(hash = FALSE, parent = parent.frame(), size = 29L)

parent.env(env)
parent.env(env) <- value

environmentName(env)

env.profile(env)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{fun}] a \code{\LinkA{function}{function}}, a \code{\LinkA{formula}{formula}}, or
\code{NULL}, which is the default.
\item[\code{value}] an environment to associate with the function
\item[\code{x}] an arbitrary \R{} object.
\item[\code{hash}] a logical, if \code{TRUE} the environment will be hashed
\item[\code{parent}] an environment to be used as the enclosure of the
environment created.
\item[\code{env}] an environment
\item[\code{size}] an integer specifying the initial size for a hashed
environment.  An internal default value will be used if
\code{size} is \code{NA} or zero.  This argument is ignored if
\code{hash} is \code{FALSE}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Environments consist of a \emph{frame}, or collection of named
objects, and a pointer to an \emph{enclosing environment}.  The most
common example is the frame of variables local to a function call;
its enclosure is the environment where the function was
defined.  The enclosing environment is distinguished from the
\emph{parent frame}:  the latter (returned by
\code{\LinkA{parent.frame}{parent.frame}}) refers to the environment of the caller
of a function.

When \code{\LinkA{get}{get}} or \code{\LinkA{exists}{exists}} search an environment
with the default \code{inherits = TRUE}, they look for the variable
in the frame, then in the enclosing frame, and so on.

The global environment \code{.GlobalEnv}, more often known as the
user's workspace, is the first item on the search path.  It can also
be accessed by \code{globalenv()}.  On the search path, each item's
enclosure is the next item.

The object \code{.BaseNamespaceEnv} is the name space environment for
the base package.  The environment of the base package itself is
available as \code{baseenv()}.  The ultimate enclosure of any environment
is the empty environment \code{emptyenv()}, to which nothing may
be assigned.
If one follows the \code{parent.env()} chain of enclosures back far
enough from any environment, eventually one reaches the empty
environment.

The replacement function \code{parent.env<-} is extremely dangerous as
it can be used to destructively change environments in ways that
violate assumptions made by the internal C code.  It may be removed
in the near future.

The replacement form of \code{environment}, \code{is.environment},
\code{baseenv}, \code{emptyenv} and \code{globalenv} are
\LinkA{primitive}{primitive} functions.
\end{Details}
%
\begin{Value}
If \code{fun} is a function or a formula then \code{environment(fun)}
returns the environment associated with that function or formula.
If \code{fun} is \code{NULL} then the current evaluation environment is
returned.

The replacement form sets the environment of the function or formula
\code{fun} to the \code{value} given.

\code{is.environment(obj)} returns \code{TRUE} if and only if
\code{obj} is an \code{environment}.

\code{new.env} returns a new (empty) environment enclosed in the
parent's environment, by default.

\code{parent.env} returns the parent environment of its argument.

\code{parent.env<-} sets the enclosing environment of its first
argument.

\code{environmentName} returns a character string, that given when
the environment is printed or \code{""} if it is not a named environment.

\code{env.profile} returns a list with the following components:
\code{size} the number of chains that can be stored in the hash table,
\code{nchains} the
number of non-empty chains in the table (as reported by HASHPRI),
and \code{counts} an integer vector giving the length of each chain
(zero for empty chains).  This function is intended to assess the
performance of hashed environments.  When \code{env} is a non-hashed
environment, \code{NULL} is returned.
\end{Value}
%
\begin{SeeAlso}\relax
The \code{envir} argument of \code{\LinkA{eval}{eval}}, \code{\LinkA{get}{get}},
and \code{\LinkA{exists}{exists}}.

\code{\LinkA{ls}{ls}} may be used to view the objects in an environment,
and hence \code{\LinkA{ls.str}{ls.str}} may be useful for an overview.

\code{\LinkA{sys.source}{sys.source}} can be used to populate an environment.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
f <- function() "top level function"

##-- all three give the same:
environment()
environment(f)
.GlobalEnv

ls(envir=environment(stats::approxfun(1:2,1:2, method="const")))

is.environment(.GlobalEnv) # TRUE

e1 <- new.env(parent = baseenv())  # this one has enclosure package:base.
e2 <- new.env(parent = e1)
assign("a", 3, envir=e1)
ls(e1)
ls(e2)
exists("a", envir=e2)   # this succeeds by inheritance
exists("a", envir=e2, inherits = FALSE)
exists("+", envir=e2)   # this succeeds by inheritance

eh <- new.env(hash = TRUE, size = NA)
with(env.profile(eh), stopifnot(size == length(counts)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{EnvVar}{Environment Variables}{EnvVar}
\aliasA{DISPLAY}{EnvVar}{DISPLAY}
\aliasA{EDITOR}{EnvVar}{EDITOR}
\aliasA{environment variables}{EnvVar}{environment variables}
\aliasA{HOME}{EnvVar}{HOME}
\aliasA{LANGUAGE}{EnvVar}{LANGUAGE}
\aliasA{PAGER}{EnvVar}{PAGER}
\aliasA{R\_BATCH}{EnvVar}{R.Rul.BATCH}
\aliasA{R\_BROWSER}{EnvVar}{R.Rul.BROWSER}
\aliasA{R\_COMPLETION}{EnvVar}{R.Rul.COMPLETION}
\aliasA{R\_DOC\_DIR}{EnvVar}{R.Rul.DOC.Rul.DIR}
\aliasA{R\_DVIPSCMD}{EnvVar}{R.Rul.DVIPSCMD}
\aliasA{R\_GSCMD}{EnvVar}{R.Rul.GSCMD}
\aliasA{R\_HISTFILE}{EnvVar}{R.Rul.HISTFILE}
\aliasA{R\_HISTSIZE}{EnvVar}{R.Rul.HISTSIZE}
\aliasA{R\_INCLUDE\_DIR}{EnvVar}{R.Rul.INCLUDE.Rul.DIR}
\aliasA{R\_LATEXCMD}{EnvVar}{R.Rul.LATEXCMD}
\aliasA{R\_MAKEINDEXCMD}{EnvVar}{R.Rul.MAKEINDEXCMD}
\aliasA{R\_PAPERSIZE}{EnvVar}{R.Rul.PAPERSIZE}
\aliasA{R\_PDFLATEXCMD}{EnvVar}{R.Rul.PDFLATEXCMD}
\aliasA{R\_PDFVIEWER}{EnvVar}{R.Rul.PDFVIEWER}
\aliasA{R\_PLATFORM}{EnvVar}{R.Rul.PLATFORM}
\aliasA{R\_PRINTCMD}{EnvVar}{R.Rul.PRINTCMD}
\aliasA{R\_RD4DVI}{EnvVar}{R.Rul.RD4DVI}
\aliasA{R\_RD4PDF}{EnvVar}{R.Rul.RD4PDF}
\aliasA{R\_SHARE\_DIR}{EnvVar}{R.Rul.SHARE.Rul.DIR}
\aliasA{R\_TEXI2DVICMD}{EnvVar}{R.Rul.TEXI2DVICMD}
\aliasA{R\_UNZIPCMD}{EnvVar}{R.Rul.UNZIPCMD}
\aliasA{R\_ZIPCMD}{EnvVar}{R.Rul.ZIPCMD}
\keyword{utilities}{EnvVar}
%
\begin{Description}\relax
Details of some of the environment variables which affect an \R{} session.
\end{Description}
%
\begin{Details}\relax
It is impossible to list all the environment variables which can
affect an \R{} session: some affect the OS system functions which \R{}
uses, and others will affect add-on packages.  But here are notes on
some of the more important ones.  Those that set the defaults for
options are consulted only at startup (as are some of the others).
\begin{description}

\item[\env{HOME}:] The user's `home' directory.
\item[\env{LANGUAGE}:] Optional.  The language(s) to be used for
message translations.  This is consulted when needed.
\item[\env{LC\_ALL}:] (etc) Optional.  Use to set various aspects of
the locale -- see \code{\LinkA{Sys.getlocale}{Sys.getlocale}}.  Consulted at startup.
\item[\env{R\_BATCH}:] Optional -- set in a batch session.
\item[\env{R\_BROWSER}:] The path to the default browser.  Used to
set the default value of \code{\LinkA{options}{options}("browser")}.
\item[\env{R\_COMPLETION}:] Optional.  If set to \code{FALSE},
command-line completion is not used.  (Not used by Mac OS GUI.)
\item[\env{R\_DEFAULT\_PACKAGES}:] A comma-separated list of packages
which are to be loaded in every session.  See \code{\LinkA{options}{options}}.
\item[\env{R\_DOC\_DIR}:] The location of the \R{} \file{doc}
directory.  Set by \R{}.
\item[\env{R\_DVIPSCMD}:] The path to \command{dvips}.  Defaults to
the value of \env{DVIPS}, and if that is unset to a value
determined when \R{} was built.
Used by \command{R CMD Rd2dvi}, and at startup to set the default for
\code{\LinkA{options}{options}("latexcmd")}, used by
\code{\LinkA{help}{help}(help\_type="ps")}.

\item[\env{R\_ENVIRON}:] Optional.  The path to the site environment
file: see \LinkA{Startup}{Startup}.  Consulted at startup.
\item[\env{R\_GSCMD}:] Optional.  The path to GhostScript, used by
\code{\LinkA{dev2bitmap}{dev2bitmap}}, \code{\LinkA{bitmap}{bitmap}} and
\code{\LinkA{embedFonts}{embedFonts}}.  Consulted when those functions are invoked.
\item[\env{R\_HISTFILE}:] Optional.  The path of the history file:
see \LinkA{Startup}{Startup}.  Consulted at startup and when the history is
saved.
\item[\env{R\_HISTSIZE}:] Optional.  The maximum size of the history
file, in lines.  Exactly how this is used depends on the
interface.
For the \code{readline} command-line interface it takes effect
when the history is saved (by \code{\LinkA{savehistory}{savehistory}} or at the
end of a session).

\item[\env{R\_HOME}:] The top-level directory of the \R{}
installation: see \code{\LinkA{R.home}{R.home}}.  Set by \R{}.
\item[\env{R\_INCLUDE\_DIR}:] The location of the \R{} \file{include}
directory.  Set by \R{}.
\item[\env{R\_LATEXCMD}:] The path to \code{latex}. Defaults to
the value of \env{LATEX}, and if that is unset to a value
determined when \R{} was built.
Used by \command{R CMD Rd2dvi}.

\item[\env{R\_LIBS}:] Optional.  Used for initial setting of
\code{\LinkA{.libPaths}{.libPaths}}.
\item[\env{R\_LIBS\_SITE}:] Optional.  Used for initial setting of
\code{\LinkA{.libPaths}{.libPaths}}.
\item[\env{R\_LIBS\_USER}:] Optional.  Used for initial setting of
\code{\LinkA{.libPaths}{.libPaths}}.
\item[\env{R\_MAKEINDEXCMD}:] The path to \command{makeindex}.
Defaults at startup to the value of \env{MAKEINDEX}, and if that
is unset to a value determined when \R{} was built.
Used by \command{R CMD Rd2dvi}.
\item[\env{R\_PAPERSIZE}:] Optional.  Used to set the default for
\code{\LinkA{options}{options}("papersize")}, e.g. used by
\code{\LinkA{pdf}{pdf}} and \code{\LinkA{postscript}{postscript}}.
\item[\env{R\_PDFLATEXCMD}:] The path to \command{pdflatex}.
Defaults at startup to the value of \code{PDFLATEX}, and if that
is unset to a value determined when \R{} was built.
Used by \command{R CMD Rd2dvi}.
\item[\env{R\_PDFVIEWER}:] The path to the default PDF viewer.  Used
by \command{R CMD Rd2dvi}.
\item[\env{R\_PLATFORM}:] The platform -- a string of the form
\code{\var{cpu}-\var{vendor}-\var{os}}, see \code{\LinkA{R.Version}{R.Version}}.
\item[\env{R\_PROFILE}:] Optional.  The path to the site profile
file: see \LinkA{Startup}{Startup}.  Consulted at startup.
\item[\env{R\_RD4DVI}:] Options for \command{latex} processing of
\code{Rd} files. Used by \command{R CMD Rd2dvi}.
\item[\env{R\_RD4PDF}:] Options for \command{pdflatex} processing of
\code{Rd} files.
Used by \command{R CMD Rd2dvi}.
\item[\env{R\_SHARE\_DIR}:] The location of the \R{} \file{share}
directory.  Set by \R{}.
\item[\env{R\_TEXI2DVICMD}:] The path to \command{texi2dvi}.
Defaults to the value of \env{TEXI2DVI}, and if that is unset to a
value determined when \R{} was built.
Consulted at startup to set the default for
\code{\LinkA{options}{options}("texi2dvi")}, used by
\code{\LinkA{texi2dvi}{texi2dvi}} in package \pkg{tools}.

\item[\env{R\_UNZIPCMD}:] The path to \command{unzip}.  Sets the
iniital value for \code{\LinkA{options}{options}("unzip")} on a Unix-alike
when package \pkg{utils} is loaded.
\item[\env{R\_ZIPCMD}:] The path to \command{zip}.  Only used in \R{}
itself by \command{R CMD INSTALL --build} on Windows.
\item[\env{TMPDIR}, \env{TMP}, \env{TEMP}:] Consulted (in that
order) when setting the temporary directory for the session: see
\code{\LinkA{tempdir}{tempdir}}.  \env{TMPDIR} is also used by some of the
utilities see the help for \code{\LinkA{build}{build}}.
\item[\env{TZ}:] Optional. The current timezone.  See
\code{\LinkA{Sys.timezone}{Sys.timezone}} for the system-specific
formats.  Consulted as needed.
\item[\env{no\_proxy}, \env{http\_proxy}, \env{ftp\_proxy}:] 
(and more).  Optional.  Settings for \code{\LinkA{download.file}{download.file}}:
see its help for further details.

\end{description}

\end{Details}
%
\begin{Section}{Unix-specific}
Some variables set on Unix-alikes, and not (in general) on Windows.
\begin{description}

\item[\env{DISPLAY}:] Optional: used by \code{\LinkA{X11}{X11}}, Tk (in
package \pkg{tcltk}), the data editor and various packages.
\item[\env{EDITOR}:] The path to the default editor: sets the
default for \code{\LinkA{options}{options}("editor")} when package
\pkg{utils} is loaded.
\item[\env{PAGER}:] The path to the pager with the default setting of
\code{\LinkA{options}{options}("pager")}. The default value is chosen at
configuration, usually as the path to \command{less}.
\item[\env{R\_PRINTCMD}:] Sets the default for
\code{\LinkA{options}{options}("printcmd")}, which sets the default print
command to be used by \code{\LinkA{postscript}{postscript}}.

\end{description}

\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.getenv}{Sys.getenv}} and \code{\LinkA{Sys.setenv}{Sys.setenv}} to read and set
environmental variables in an \R{} session.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{eval}{Evaluate an (Unevaluated) Expression}{eval}
\methaliasA{eval.parent}{eval}{eval.parent}
\aliasA{evalq}{eval}{evalq}
\aliasA{local}{eval}{local}
\keyword{data}{eval}
\keyword{programming}{eval}
%
\begin{Description}\relax
Evaluate an \R{} expression in a specified environment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
eval(expr, envir = parent.frame(),
           enclos = if(is.list(envir) || is.pairlist(envir))
                       parent.frame() else baseenv())
evalq(expr, envir, enclos)
eval.parent(expr, n = 1)
local(expr, envir = new.env())
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] an object to be evaluated.  See `Details'.
\item[\code{envir}] the \code{\LinkA{environment}{environment}} in which \code{expr} is to
be evaluated.  May also be \code{NULL}, a list, a data frame,
a pairlist or an integer as specified to \code{\LinkA{sys.call}{sys.call}}.
\item[\code{enclos}] Relevant when \code{envir} is a (pair)list or a data frame.
Specifies the enclosure, i.e., where \R{} looks for objects not found
in \code{envir}.  This can be \code{NULL} (interpreted as the base
package environment) or an environment.
\item[\code{n}] number of parent generations to go back
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{eval} evaluates the \code{expr} argument in the
environment specified by \code{envir} and returns the computed value.
If \code{envir} is not specified, then the default is
\code{\LinkA{parent.frame}{parent.frame}()} (the environment where the call to
\code{eval} was made).

Objects to be evaluated can be of types \code{\LinkA{call}{call}} or
\code{\LinkA{expression}{expression}} or \LinkA{name}{name} (when the name is looked
up in the current scope and its binding is evaluated), a \LinkA{promise}{promise}
or any of the basic types such as vectors, functions and environments
(which are returned unchanged).

The \code{evalq} form is equivalent to \code{eval(quote(expr), ...)}.
\code{eval} evaluates its first argument in the current scope
before passing it to the evaluator: \code{evalq} avoids this.

\code{eval.parent(expr, n)} is a shorthand for
\code{eval(expr, parent.frame(n))}.

If \code{envir} is a list (such as a data frame) or pairlist, it is
copied into a temporary environment (with enclosure \code{enclos}),
and the temporary environment is used for evaluation.  So if
\code{expr} changes any of the components named in the (pair)list, the
changes are lost.

If \code{envir} is \code{NULL} it is interpreted as an empty list so
no values could be found in \code{envir} and look-up goes directly to
\code{enclos}.

\code{local} evaluates an expression in a local environment.  It is
equivalent to \code{evalq} except that its default argument creates a
new, empty environment.  This is useful to create anonymous recursive
functions and as a kind of limited name space feature since variables
defined in the environment are not visible from the outside.
\end{Details}
%
\begin{Value}
The result of evaluating the object: for an expression vector this it
the result of evaluating the last elements.
\end{Value}
%
\begin{Note}\relax
Due to the difference in scoping rules, there are some differences
between \R{} and S in this area.  In particular, the default enclosure
in S is the global environment.

When evaluating expressions in data frames that has been passed as
argument to a function, the relevant enclosure is often the caller's
environment, i.e., one needs
\code{eval(x, data, parent.frame())}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (\code{eval} only.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{expression}{expression}}, \code{\LinkA{quote}{quote}}, \code{\LinkA{sys.frame}{sys.frame}},
\code{\LinkA{parent.frame}{parent.frame}}, \code{\LinkA{environment}{environment}}.

Further, \code{\LinkA{force}{force}} to \emph{force} evaluation, typically of
function arguments.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
eval(2 ^ 2 ^ 3)
mEx <- expression(2^2^3); mEx; 1 + eval(mEx)
eval({ xx <- pi; xx^2}) ; xx

a <- 3 ; aa <- 4 ; evalq(evalq(a+b+aa, list(a=1)), list(b=5)) # == 10
a <- 3 ; aa <- 4 ; evalq(evalq(a+b+aa, -1), list(b=5))        # == 12

ev <- function() {
   e1 <- parent.frame()
   ## Evaluate a in e1
   aa <- eval(expression(a),e1)
   ## evaluate the expression bound to a in e1
   a <- expression(x+y)
   list(aa = aa, eval = eval(a, e1))
}
tst.ev <- function(a = 7) { x <- pi; y <- 1; ev() }
tst.ev()#-> aa : 7,  eval : 4.14

a <- list(a=3, b=4)
with(a, a <- 5) # alters the copy of a from the list, discarded.

##
## Example of evalq()
##

N <- 3
env <- new.env()
assign("N", 27, envir=env)
## this version changes the visible copy of N only, since the argument
## passed to eval is '4'.
eval(N <- 4, env)
N
get("N", envir=env)
## this version does the assignment in env, and changes N only there.
evalq(N <- 5, env)
N
get("N", envir=env)


##
## Uses of local()
##

# Mutually recursive.
# gg gets value of last assignment, an anonymous version of f.

gg <- local({
    k <- function(y)f(y)
    f <- function(x) if(x) x*k(x-1) else 1
})
gg(10)
sapply(1:5, gg)

# Nesting locals. a is private storage accessible to k
gg <- local({
    k <- local({
        a <- 1
        function(y){print(a <<- a+1);f(y)}
    })
    f <- function(x) if(x) x*k(x-1) else 1
})
sapply(1:5, gg)

ls(envir=environment(gg))
ls(envir=environment(get("k", envir=environment(gg))))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{exists}{Is an Object Defined?}{exists}
\keyword{data}{exists}
%
\begin{Description}\relax
Look for an \R{} object of the given name.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
exists(x, where = -1, envir = , frame, mode = "any",
       inherits = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a variable name (given as a character string).
\item[\code{where}] where to look for the object (see the details section); if
omitted, the function will search as if the name of the object
appeared unquoted in an expression.
\item[\code{envir}] an alternative way to specify an environment to look in,
but it is usually simpler to just use the \code{where} argument.
\item[\code{frame}] a frame in the calling list.  Equivalent to giving
\code{where} as \code{sys.frame(frame)}.
\item[\code{mode}] the mode or type of object sought: see the
`Details' section.
\item[\code{inherits}] should the enclosing frames of the environment be
searched?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{where} argument can specify the environment in which to look
for the object in any of several ways: as an integer (the position in
the \code{\LinkA{search}{search}} list); as the character string name of an
element in the search list; or as an \code{\LinkA{environment}{environment}}
(including using \code{\LinkA{sys.frame}{sys.frame}} to access the currently active
function calls).  The \code{envir} argument is an alternative way to
specify an environment, but is primarily there for back compatibility.

This function looks to see if the name \code{x} has a value bound to
it in the specified environment. If \code{inherits} is \code{TRUE} and
a value is not found for \code{x} in the specified environment, the
enclosing frames of the environment are searched until the name \code{x}
is encountered.  See \code{\LinkA{environment}{environment}} and the `R
Language Definition' manual for details about the structure of
environments and their enclosures.

\bold{Warning:}
\code{inherits = TRUE} is the default behaviour for \R{} but not for S.

If \code{mode} is specified then only objects of that type are sought.
The \code{mode} may specify one of the collections \code{"numeric"} and
\code{"function"} (see \code{\LinkA{mode}{mode}}): any member of the
collection will suffice.  (This is true even if a member of a
collection is specified, so for example \code{mode="special"} will
seek any type of function.)
\end{Details}
%
\begin{Value}
Logical, true if and only if an object of the correct name and mode is
found.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{get}{get}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
##  Define a substitute function if necessary:
if(!exists("some.fun", mode="function"))
  some.fun <- function(x) { cat("some.fun(x)\n"); x }
search()
exists("ls", 2) # true even though ls is in pos=3
exists("ls", 2, inherits = FALSE) # false
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{expand.grid}{Create a Data Frame from All Combinations of Factors}{expand.grid}
\keyword{models}{expand.grid}
\keyword{array}{expand.grid}
%
\begin{Description}\relax
Create a data frame from all combinations of the supplied vectors or
factors.  See the description of the return value for precise details of
the way this is done.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
expand.grid(..., KEEP.OUT.ATTRS = TRUE, stringsAsFactors = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] vectors, factors or a list containing these. 
\item[\code{KEEP.OUT.ATTRS}] a logical indicating the \code{"out.attrs"}
attribute (see below) should be computed and returned.
\item[\code{stringsAsFactors}] logical specifying if character vectors are
converted to factors.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A data frame containing one row for each combination of the supplied
factors.  The first factors vary fastest.  The columns are labelled by
the factors if these are supplied as named arguments or named
components of a list.  The row names are `automatic'.

Attribute \code{"out.attrs"} is a list which gives the dimension and
dimnames for use by \code{\LinkA{predict}{predict}} methods.
\end{Value}
%
\begin{Note}\relax
Character vectors have always been converted to factors: this because
optional in \R{} 2.9.1.  Conversion is done with levels in the order
they occur in the character vectors (and not alphabetically, as is
most common when converting to factors).
\end{Note}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S.}
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{combn}{combn}} (package \code{utils}) for the generation
of all combinations of n elements, taken m at a time.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(utils)

expand.grid(height = seq(60, 80, 5), weight = seq(100, 300, 50),
            sex = c("Male","Female"))

x <- seq(0,10, length.out=100)
y <- seq(-1,1, length.out=20)
d1 <- expand.grid(x=x, y=y)
d2 <- expand.grid(x=x, y=y, KEEP.OUT.ATTRS = FALSE)
object.size(d1) - object.size(d2)
##-> 5992 or 8832 (on 32- / 64-bit platform)

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{expression}{Unevaluated Expressions}{expression}
\aliasA{as.expression}{expression}{as.expression}
\methaliasA{as.expression.default}{expression}{as.expression.default}
\aliasA{is.expression}{expression}{is.expression}
\keyword{programming}{expression}
\keyword{dplot}{expression}
%
\begin{Description}\relax
Creates or tests for objects of mode \code{"expression"}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
expression(...)

is.expression(x)
as.expression(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] \code{expression}: \R{} objects, typically calls, symbols
or constants.\\{}
\code{as.expression}: arguments to be passed to methods.
\item[\code{x}] an arbitrary \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
`Expression' here is not being used in its colloquial sense,
that of mathematical expressions.  Those are calls (see
\code{\LinkA{call}{call}}) in \R{}, and an \R{} expression vector is a list of
calls, symbols etc, typically as returned by \code{\LinkA{parse}{parse}}.

As an object of mode \code{"expression"} is a list, it can be
subsetted by both \code{[} and by \code{[[}, the latter extracting
individual calls etc.

\code{expression} and \code{is.expression} are \LinkA{primitive}{primitive} functions.
\end{Details}
%
\begin{Value}
\code{expression} returns a vector of type \code{"expression"}
containing its arguments (unevaluated).

\code{is.expression} returns \code{TRUE} if \code{expr} is an
expression object and \code{FALSE} otherwise.

\code{as.expression} attempts to coerce its argument into an
expression object.  It is generic, and only the default method is
described here.  \code{NULL}, calls, symbols (see
\code{\LinkA{as.symbol}{as.symbol}}) and pairlists are returned as the element of
a length-one expression vector.  Vectors (including lists) are placed
element-by-element into an expression vector.  Other types are not
currently supported.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{call}{call}},
\code{\LinkA{eval}{eval}},
\code{\LinkA{function}{function}}.
Further,
\code{\LinkA{text}{text}} and
\code{\LinkA{legend}{legend}}
for plotting mathematical expressions.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
length(ex1 <- expression(1+ 0:9))# 1
ex1
eval(ex1)# 1:10

length(ex3 <- expression(u,v, 1+ 0:9))# 3
mode(ex3 [3]) # expression
mode(ex3[[3]])# call
rm(ex3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Extract}{Extract or Replace Parts of an Object}{Extract}
\aliasA{\$}{Extract}{.Rdol.}
\aliasA{\$<\Rdash}{Extract}{.Rdol.<.Rdash.}
\aliasA{Subscript}{Extract}{Subscript}
\aliasA{[}{Extract}{[}
\methaliasA{[.listof}{Extract}{[.listof}
\methaliasA{[.simple.list}{Extract}{[.simple.list}
\aliasA{[<\Rdash}{Extract}{[<.Rdash.}
\aliasA{[[}{Extract}{[[}
\aliasA{[[<\Rdash}{Extract}{[[<.Rdash.}
\keyword{array}{Extract}
\keyword{list}{Extract}
%
\begin{Description}\relax
Operators acting on vectors, matrices, arrays and lists to extract or
replace parts.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
x[i]
x[i, j, ... , drop = TRUE]
x[[i, exact = TRUE]]
x[[i, j, ..., exact = TRUE]]
x$name
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] 
object from which to extract element(s) or in which to replace element(s).

\item[\code{i, j, ...}] 
indices specifying elements to extract or replace.  Indices are
\code{numeric} or \code{character} vectors or empty (missing) or
\code{NULL}.  Numeric values are coerced to integer as by
\code{\LinkA{as.integer}{as.integer}} (and hence truncated towards zero).
Character vectors will be matched to the \code{\LinkA{names}{names}} of the
object (or for matrices/arrays, the \code{\LinkA{dimnames}{dimnames}}):
see `Character indices' below for further details.

For \code{[}-indexing only: \code{i}, \code{j}, \code{...} can be
logical vectors, indicating elements/slices to select.  Such vectors
are recycled if necessary to match the corresponding extent.
\code{i}, \code{j}, \code{...} can also be negative integers,
indicating elements/slices to leave out of the selection.

When indexing arrays by \code{[} a single argument \code{i} can be a
matrix with as many columns as there are dimensions of \code{x}; the
result is then a vector with elements corresponding to the sets of
indices in each row of \code{i}.

An index value of \code{NULL} is treated as if it were \code{integer(0)}.

\item[\code{name}] 
A literal character string or a \LinkA{name}{name} (possibly \LinkA{backtick}{backtick}
quoted).  For extraction, this is normally (see under
`Environments') partially matched to the \code{\LinkA{names}{names}}
of the object.

\item[\code{drop}] For matrices and arrays.  If \code{TRUE} the result is
coerced to the lowest possible dimension (see the examples).  This
only works for extracting elements, not for the replacement.  See
\code{\LinkA{drop}{drop}} for further details.

\item[\code{exact}] Controls possible partial matching of \code{[[} when
extracting by a character vector (for most objects, but see under
`Environments').  The default is no partial matching.  Value
\code{NA} allows partial matching but issues a warning when it
occurs.  Value \code{FALSE} allows partial matching without any
warning.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These operators are generic.  You can write methods to handle indexing
of specific classes of objects, see \LinkA{InternalMethods}{InternalMethods} as well as
\code{\LinkA{[.data.frame}{[.data.frame}} and \code{\LinkA{[.factor}{[.factor}}.  The
descriptions here apply only to the default methods.  Note that
separate methods are required for the replacement functions
\code{[<-}, \code{[[<-} and \code{\$<-} for use when indexing occurs on
the assignment side of an expression.

The most important distinction between \code{[}, \code{[[} and
\code{\$} is that the \code{[} can select more than one element whereas
the other two select a single element.

The default methods work somewhat differently for atomic vectors,
matrices/arrays and for recursive (list-like, see
\code{\LinkA{is.recursive}{is.recursive}}) objects.  \code{\$} is only valid for
recursive objects, and is only discussed in the section below on
recursive objects.  Its use on non-recursive objects was deprecated in
\R{} 2.5.0 and removed in \R{} 2.7.0.

Subsetting (except by an empty index) will drop all attributes except
\code{names}, \code{dim} and \code{dimnames}.

Indexing can occur on the right-hand-side of an expression for
extraction, or on the left-hand-side for replacement.  When an index
expression appears on the left side of an assignment (known as
\emph{subassignment}) then that part of \code{x} is set to the value
of the right hand side of the assignment.  In this case no partial
matching of character indices is done, and the left-hand-side is
coerced as needed to accept the values.  Attributes are preserved
(although \code{names}, \code{dim} and \code{dimnames} will be
adjusted suitably).  Subassignment is done sequentially, so if an
index is specified more than once the latest assigned value for an
index will result.

It is an error to apply any of these operators to an object which is
not subsettable (e.g. a function).
\end{Details}
%
\begin{Section}{Atomic vectors}
The usual form of indexing is \code{"["}.  \code{"[["} can be used to
select a single element, but \code{"["} can also do so.

The index object \code{i} can be numeric, logical, character or empty.
Indexing by factors is allowed and is equivalent to indexing by the
numeric codes (see \code{\LinkA{factor}{factor}}) and not by the character
values which are printed (for which use \code{[as.character(i)]}).

An empty index selects all values: this is most often used to replace
all the entries but keep the \code{\LinkA{attributes}{attributes}}.
\end{Section}
%
\begin{Section}{Matrices and arrays}
Matrices and arrays are vectors with a dimension attribute and so all
the vector forms of indexing can be used with a single index.  The
result will be an unnamed vector unless \code{x} is one-dimensional
when it will be a one-dimensional array.

The most common form of indexing a \eqn{k}{}-dimensional array is to
specify \eqn{k}{} indices to \code{[}.  As for vector indexing, the
indices can be numeric, logical, character, empty or even factor.
An empty index (a comma separated blank) indicates that all entries in
that dimension are selected.
The argument \code{drop} applies to this form of indexing.

A third form of indexing is via a numeric matrix with the one column
for each dimension: each row of the index matrix then selects a single
element of the array, and the result is a vector.  Negative indices are
not allowed in the index matrix.  \code{NA} and zero values are allowed:
rows of an index matrix containing a zero are ignored, whereas rows
containing an \code{NA} produce an \code{NA} in the result.

A vector obtained by matrix indexing will be unnamed unless \code{x}
is one-dimensional when the row names (if any) will be indexed to
provide names for the result.
\end{Section}
%
\begin{Section}{Recursive (list-like) objects}
Indexing by \code{[} is similar to atomic vectors and selects a list
of the specified element(s).

Both \code{[[} and \code{\$} select a single element of the list.  The
main difference is that \code{\$} does not allow computed indices,
whereas \code{[[} does.  \code{x\$name} is equivalent to
\code{x[["name", exact = FALSE]]}.  Also, the partial matching
behavior of \code{[[} can be controlled using the \code{exact} argument.

\code{[} and \code{[[} are sometimes applied to other recursive
objects such as \LinkA{call}{call}s and \LinkA{expression}{expression}s.  Pairlists are
coerced to lists for extraction by \code{[}, but all three operators
can be used for replacement.

\code{[[} can be applied recursively to lists, so that if the single
index \code{i} is a vector of length \code{p}, \code{alist[[i]]} is
equivalent to \code{alist[[i1]]...[[ip]]} providing all but the
final indexing results in a list.

When either \code{[[} or \code{\$} is used for replacement, a value of
\code{NULL} deletes the corresponding item of the list.

When \code{\$<-} is applied to a \code{NULL} \code{x}, it first coerces
\code{x} to \code{list()}.  This is what also happens with \code{[[<-}
if the replacement value \code{value} is of length greater than one:
if \code{value} has length 1 or 0, \code{x} is first coerced to a
zero-length vector of the type of \code{value}.
\end{Section}
%
\begin{Section}{Environments}
Both \code{\$} and \code{[[} can be applied to environments.  Only
character indices are allowed and no partial matching is done. The
semantics of these operations are those of \code{get(i, env=x,
    inherits=FALSE)}.  If no match is found then \code{NULL} is
returned.  The replacement versions, \code{\$<-} and \code{[[<-}, can
also be used.  Again, only character arguments are allowed.  The
semantics in this case are those of \code{assign(i, value, env=x,
    inherits=FALSE)}.  Such an assignment will either create a new
binding or change the existing binding in \code{x}.
\end{Section}
%
\begin{Section}{NAs in indexing}
When extracting, a numerical, logical or character \code{NA} index picks
an unknown element and so returns \code{NA} in the corresponding
element of a logical, integer, numeric, complex or character result,
and \code{NULL} for a list.  (It returns \code{00} for a raw result.]

When replacing (that is using indexing on the lhs of an
assignment) \code{NA} does not select any element to be replaced.  As
there is ambiguity as to whether an element of the rhs should
be used or not, this is only allowed if the rhs value is of length one
(so the two interpretations would have the same outcome).
\end{Section}
%
\begin{Section}{Argument matching}
Note that these operations do not match their index arguments in the
standard way: argument names are ignored and positional matching only is
used.  So \code{m[j=2,i=1]} is equivalent to \code{m[2,1]} and
\strong{not} to \code{m[1,2]}.

This may not be true for methods defined for them; for example it is
not true for the \code{data.frame} methods described in
\code{\LinkA{[.data.frame}{[.data.frame}} which warn if \code{i} or \code{j}
is named and have undocumented behaviour in that case.

To avoid confusion, do not name index arguments (but \code{drop} and
\code{exact} must be named).
\end{Section}
%
\begin{Section}{S4 methods}
These operators are also S4 generic, but as primitives, S4 methods
will be dispatched only on S4 objects.

S4 methods for \code{\$} will be passed \code{name} as a character
vector: despite the message given by \code{getGeneric("\$")} you cannot
usefully write methods based on the class of \code{name}.
\end{Section}
%
\begin{Section}{Character indices}
Character indices can in some circumstances be partially matched (see
\code{\LinkA{pmatch}{pmatch}}) to the names or dimnames of the object being
subsetted (but never for subassignment).  Unlike S (Becker \emph{et
al} p. 358)), \R{} has never used partial matching when extracting by
\code{[}, and as from \R{} 2.7.0 partial matching is not by default used
by \code{[[} (see argument \code{exact}).

Thus the default behaviour is to use partial matching only when
extracting from recursive objects (except environments) by \code{\$}.
Even in that case, warnings can be switched on by
\code{\LinkA{options}{options}(warnPartialMatchAttr = TRUE)}.

Neither empty (\code{""}) nor \code{NA} indices match any names, not
even empty nor missing names.  If any object has no names or
appropriate dimnames, they are taken as all \code{""} and so match
nothing.
\end{Section}
%
\begin{Note}\relax
The documented behaviour of S is that an \code{NA} replacement index
`goes nowhere' but uses up an element of \code{value}
(Becker \emph{et al} p. 359).  However, that has not been true of
other implementations.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{names}{names}} for details of matching to names, and
\code{\LinkA{pmatch}{pmatch}} for partial matching.

\code{\LinkA{list}{list}}, \code{\LinkA{array}{array}}, \code{\LinkA{matrix}{matrix}}.

\code{\LinkA{[.data.frame}{[.data.frame}} and \code{\LinkA{[.factor}{[.factor}} for the
behaviour when applied to data.frame and factors.

\code{\LinkA{Syntax}{Syntax}} for operator precedence, and the
\emph{R Language} reference manual about indexing details.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1:12; m <- matrix(1:6, nrow=2); li <- list(pi=pi, e = exp(1))
x[10]                 # the tenth element of x
x <- x[-1]            # delete the 1st element of x
m[1,]                 # the first row of matrix m
m[1, , drop = FALSE]  # is a 1-row matrix
m[,c(TRUE,FALSE,TRUE)]# logical indexing
m[cbind(c(1,2,1),3:1)]# matrix index
m <- m[,-1]           # delete the first column of m
li[[1]]               # the first element of list li
y <- list(1,2,a=4,5)
y[c(3,4)]             # a list containing elements 3 and 4 of y
y$a                   # the element of y named a

## non-integer indices are truncated:
(i <- 3.999999999) # "4" is printed
(1:5)[i]  # 3

## recursive indexing into lists
z <- list( a=list( b=9, c='hello'), d=1:5)
unlist(z)
z[[c(1, 2)]]
z[[c(1, 2, 1)]]  # both "hello"
z[[c("a", "b")]] <- "new"
unlist(z)

## check $ and [[ for environments
e1 <- new.env()
e1$a <- 10
e1[["a"]]
e1[["b"]] <- 20
e1$b
ls(e1)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Extract.data.frame}{Extract or Replace Parts of a Data Frame}{Extract.data.frame}
\aliasA{\$<\Rdash.data.frame}{Extract.data.frame}{.Rdol.<.Rdash..data.frame}
\aliasA{[.data.frame}{Extract.data.frame}{[.data.frame}
\aliasA{[<\Rdash.data.frame}{Extract.data.frame}{[<.Rdash..data.frame}
\aliasA{[[.data.frame}{Extract.data.frame}{[[.data.frame}
\aliasA{[[<\Rdash.data.frame}{Extract.data.frame}{[[<.Rdash..data.frame}
\keyword{array}{Extract.data.frame}
%
\begin{Description}\relax
Extract or replace subsets of data frames.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'data.frame':
x[i, j, drop = ]
## S3 replacement method for class 'data.frame':
x[i, j] <- value
## S3 method for class 'data.frame':
x[[..., exact = TRUE]]
## S3 replacement method for class 'data.frame':
x[[i, j]] <- value
## S3 replacement method for class 'data.frame':
x$name <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] data frame.

\item[\code{i, j, ...}] elements to extract or replace.  For \code{[} and
\code{[[}, these are \code{numeric} or \code{character} or, for
\code{[} only, empty.  Numeric values are coerced to integer as if
by \code{\LinkA{as.integer}{as.integer}}.  For replacement by \code{[}, a logical
matrix is allowed.

\item[\code{name}] 
A literal character string or a \LinkA{name}{name} (possibly \LinkA{backtick}{backtick}
quoted).

\item[\code{drop}] logical.  If \code{TRUE} the result is coerced to the
lowest possible dimension.  The default is to drop if only one
column is left, but \bold{not} to drop if only one row is left.

\item[\code{value}] A suitable replacement value: it will be repeated a whole
number of times if necessary and it may be coerced: see the
Coercion section.  If \code{NULL}, deletes the column if a single
column is selected.

\item[\code{exact}] logical: see \code{\LinkA{[}{[}}, and applies to column names.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Data frames can be indexed in several modes.  When \code{[} and
\code{[[} are used with a single index (\code{x[i]} or \code{x[[i]]}),
they index the data frame as if it were a list.  In this usage a
\code{drop} argument is ignored, with a warning.

Note that there is no \code{data.frame} method for \code{\$}, so
\code{x\$name} uses the default method which treats \code{x} as a
list.  There is a method for replacement which checks \code{value} for
the corrupt number of row, and replicates it if necessary.

When \code{[} and \code{[[} are used with two indices (\code{x[i, j]}
and \code{x[[i, j]]}) they act like indexing a matrix:  \code{[[} can
only be used to select one element.

If \code{[} returns a data frame it will have unique (and non-missing)
row names, if necessary transforming the row names using
\code{\LinkA{make.unique}{make.unique}}.  Similarly, if columns are selected column
names will be transformed to be unique if necessary (e.g. if columns
are selected more than once, or if more than one column of a given
name is selected if the data frame has duplicate columns).

When \code{drop = TRUE}, this is applied to the subsetting of any
matrices contained in the data frame as well as to the data frame itself.

The replacement methods can be used to add whole column(s) by specifying
non-existent column(s), in which case the column(s) are added at the
right-hand edge of the data frame and numerical indices must be
contiguous to existing indices.  On the other hand, rows can be added
at any row after the current last row, and the columns will be
in-filled with missing values.  Missing values in the indices are not
allowed for replacement.

For \code{[} the replacement value can be a list: each element of the
list is used to replace (part of) one column, recycling the list as
necessary.  If columns specified by number are created, the names
(if any) of the corresponding list elements are used to name the
columns.  If the replacement is not selecting rows, list values can
contain \code{NULL} elements which will cause the corresponding
columns to be deleted.  (See the Examples.)

Matrix indexing using \code{[} is not recommended, and barely
supported.  For extraction, \code{x} is first coerced to a matrix.
For replacement a logical matrix (only) can be used to select the
elements to be replaced in the same way as for a matrix.

Both \code{[} and \code{[[} extraction methods partially match row
names.  By default neither partially match column names, but
\code{[[} will unless \code{exact=TRUE}.  If you want to do exact
matching on row names use \code{\LinkA{match}{match}} as in the examples.
\end{Details}
%
\begin{Value}
For \code{[} a data frame, list or a single column (the latter two
only when dimensions have been dropped).  If matrix indexing is used for
extraction a matrix results.  If the result would be a data frame an
error results if undefined columns are selected (as there is no general
concept of a 'missing' column in a data frame).  Otherwise if a single
column is selected and this is undefined the result is \code{NULL}.

For \code{[[} a column of the data frame or \code{NULL}
(extraction with one index)
or a length-one vector (extraction with two indices).

For \code{\$}, a column of the data frame (or \code{NULL}).

For \code{[<-}, \code{[[<-} and \code{\$<-}, a data frame.
\end{Value}
%
\begin{Section}{Coercion}
The story over when replacement values are coerced is a complicated
one, and one that has changed during \R{}'s development.  This section
is a guide only.

When \code{[} and \code{[[} are used to add or replace a whole column,
no coercion takes place but \code{value} will be
replicated (by calling the generic function \code{\LinkA{rep}{rep}}) to the
right length if an exact number of repeats can be used.

When \code{[} is used with a logical matrix, each value is coerced to
the type of the column into which it is to be placed.

When  \code{[} and \code{[[} are used with two indices, the
column will be coerced as necessary to accommodate the value.

Note that when the replacement value is an array (including a matrix)
it is \emph{not} treated as a series of columns (as
\code{\LinkA{data.frame}{data.frame}} and \code{\LinkA{as.data.frame}{as.data.frame}} do) but
inserted as a single column.
\end{Section}
%
\begin{Section}{Warning}
The default behaviour when only one \emph{row} is left is equivalent to
specifying \code{drop = FALSE}.  To drop from a data frame to a list,
\code{drop = TRUE} has to be specified explicitly.

Arguments other than \code{drop} and \code{exact} should not be named:
there is a warning if they are and the behaviour differs from the
description here. 
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{subset}{subset}} which is often easier for extraction,
\code{\LinkA{data.frame}{data.frame}}, \code{\LinkA{Extract}{Extract}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
sw <- swiss[1:5, 1:4]  # select a manageable subset

sw[1:3]      # select columns
sw[, 1:3]    # same
sw[4:5, 1:3] # select rows and columns
sw[1]        # a one-column data frame
sw[, 1, drop = FALSE]  # the same
sw[, 1]      # a (unnamed) vector
sw[[1]]      # the same

sw[1,]       # a one-row data frame
sw[1,, drop=TRUE]  # a list

sw["C", ] # partially matches
sw[match("C", row.names(sw)), ] # no exact match



swiss[ c(1, 1:2), ]   # duplicate row, unique row names are created

sw[sw <= 6] <- 6  # logical matrix indexing
sw

## adding a column
sw["new1"] <- LETTERS[1:5]   # adds a character column
sw[["new2"]] <- letters[1:5] # ditto
sw[, "new3"] <- LETTERS[1:5] # ditto
sw$new4 <- 1:5
sapply(sw, class)
sw$new4 <- NULL              # delete the column
sw
sw[6:8] <- list(letters[10:14], NULL, aa=1:5)
# delete col7, update 6, append
sw

## matrices in a data frame
A <- data.frame(x=1:3, y=I(matrix(4:6)), z=I(matrix(letters[1:9],3,3)))
A[1:3, "y"] # a matrix
A[1:3, "z"] # a matrix
A[, "y"]    # a matrix
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Extract.factor}{Extract or Replace Parts of a Factor}{Extract.factor}
\aliasA{[.factor}{Extract.factor}{[.factor}
\aliasA{[<\Rdash.factor}{Extract.factor}{[<.Rdash..factor}
\aliasA{[[.factor}{Extract.factor}{[[.factor}
\keyword{category}{Extract.factor}
%
\begin{Description}\relax
Extract or replace subsets of factors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'factor':
x[..., drop = FALSE]
## S3 method for class 'factor':
x[[...]]
## S3 replacement method for class 'factor':
x[...] <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a factor
\item[\code{...}] a specification of indices -- see \code{\LinkA{Extract}{Extract}}.
\item[\code{drop}] logical.  If true, unused levels are dropped.
\item[\code{value}] character: a set of levels.  Factor values are coerced to
character.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
When unused levels are dropped the ordering of the remaining levels is
preserved.

If \code{value} is not in \code{levels(x)}, a missing value is
assigned with a warning.

Any \code{\LinkA{contrasts}{contrasts}} assigned to the factor are preserved
unless \code{drop=TRUE}.

The \code{[[} method supports argument \code{exact}.
\end{Details}
%
\begin{Value}
A factor with the same set of levels as \code{x} unless \code{drop=TRUE}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{factor}{factor}}, \code{\LinkA{Extract}{Extract}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## following example(factor)
(ff <- factor(substring("statistics", 1:10, 1:10), levels=letters))
ff[, drop=TRUE]
factor(letters[7:10])[2:3, drop = TRUE]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Extremes}{Maxima and Minima}{Extremes}
\aliasA{max}{Extremes}{max}
\aliasA{min}{Extremes}{min}
\aliasA{pmax}{Extremes}{pmax}
\methaliasA{pmax.int}{Extremes}{pmax.int}
\aliasA{pmin}{Extremes}{pmin}
\methaliasA{pmin.int}{Extremes}{pmin.int}
\keyword{univar}{Extremes}
\keyword{arith}{Extremes}
%
\begin{Description}\relax
Returns the (parallel) maxima and minima of the input values.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
max(..., na.rm = FALSE)
min(..., na.rm = FALSE)

pmax(..., na.rm = FALSE)
pmin(..., na.rm = FALSE)

pmax.int(..., na.rm = FALSE)
pmin.int(..., na.rm = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] numeric or character arguments (see Note).
\item[\code{na.rm}] a logical indicating whether missing values should be
removed.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{max} and \code{min} return the maximum or minimum of \emph{all}
the  values present in their arguments, as \code{\LinkA{integer}{integer}} if
all are \code{logical} or \code{integer}, as \code{\LinkA{double}{double}} if
all are numeric, and character otherwise.

If \code{na.rm} is \code{FALSE} an \code{NA} value in any of the
arguments will cause a value of \code{NA} to be returned, otherwise
\code{NA} values are ignored.

The minimum and maximum of a numeric empty set are \code{+Inf} and
\code{-Inf} (in this order!) which ensures \emph{transitivity}, e.g.,
\code{min(x1, min(x2)) == min(x1, x2)}.  For numeric \code{x}
\code{max(x) == -Inf} and \code{min(x) == +Inf}
whenever \code{length(x) == 0} (after removing missing values if
requested).  However, \code{pmax} and \code{pmin} return
\code{NA} if all the parallel elements are \code{NA} even for
\code{na.rm = TRUE}.

\code{pmax} and \code{pmin} take one or more vectors (or matrices) as
arguments and return a single vector giving the `parallel'
maxima (or minima) of the vectors.  The first element of the result is
the maximum (minimum) of the first elements of all the arguments, the
second element of the result is the maximum (minimum) of the second
elements of all the arguments and so on.  Shorter inputs are recycled
if necessary.  \code{\LinkA{attributes}{attributes}} (such as \code{\LinkA{names}{names}} or
\code{\LinkA{dim}{dim}}) are transferred from the first argument (if
applicable).

\code{pmax.int} and \code{pmin.int} are faster internal versions only
used when all arguments are atomic vectors and there are no classes:
they drop all attributes.  (Note that all versions fail for raw and
complex vectors since these have no ordering.)

\code{max} and \code{min} are generic functions: methods can be
defined for them individually or via the
\code{\LinkA{Summary}{S3groupGeneric}} group generic.  For this to
work properly, the arguments \code{...} should be unnamed, and
dispatch is on the first argument.

By definition the min/max of a numeric vector containing an \code{NaN}
is \code{NaN}, except that the min/max of any vector containing an
\code{NA} is \code{NA} even if it also contains an \code{NaN}.  Note
that \code{max(NA, Inf) == NA} even though the maximum would be
\code{Inf} whatever the missing value actually is.

Character versions are sorted lexicographically, and this depends on
the collating sequence of the locale in use: the help for
`\LinkA{Comparison}{Comparison}' gives details.  The max/min of an empty
character vector is defined to be a character \code{NA}.  (One could
argue that as \code{""} is the smallest character element, the maximum
should be \code{""}, but there is no obvious candidate for the
minimum.)
\end{Details}
%
\begin{Value}
For \code{min} or \code{max}, a length-one vector.  For \code{pmin} or
\code{pmax}, a vector of length the longest of the input vectors.

The type of the result will be that of the highest of the inputs in
the hierarchy integer < real < character.

For \code{min} and \code{max} if there are only numeric inputs and all
are empty (after possible removal of \code{NA}s), the result is double
(\code{Inf} or \code{-Inf}).
\end{Value}
%
\begin{Section}{S4 methods}
\code{max} and \code{min} are part of the S4
\code{\LinkA{Summary}{S4groupGeneric}} group generic.  Methods
for them must use the signature \code{x, ..., na.rm}.
\end{Section}
%
\begin{Note}\relax
`Numeric' arguments are vectors of type integer and numeric,
and logical (coerced to integer).  For historical reasons, \code{NULL}
is accepted as equivalent to \code{integer(0)}.

\code{pmax} and \code{pmin} will also work on classed objects with
appropriate methods for comparison, \code{is.na} and \code{rep} (if
recycling of arguments is needed).
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{range}{range}} (\emph{both} min and max) and
\code{\LinkA{which.min}{which.min}} (\code{which.max}) for the \emph{arg min},
i.e., the location where an extreme value occurs.

`\LinkA{plotmath}{plotmath}' for the use of \code{min} in plot annotation.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats); require(graphics)
 min(5:1, pi) #-> one number
pmin(5:1, pi) #->  5  numbers

x <- sort(rnorm(100));  cH <- 1.35
pmin(cH, quantile(x)) # no names
pmin(quantile(x), cH) # has names
plot(x, pmin(cH, pmax(-cH, x)), type='b', main= "Huber's function")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{factor}{Factors}{factor}
\aliasA{addNA}{factor}{addNA}
\aliasA{as.factor}{factor}{as.factor}
\aliasA{as.ordered}{factor}{as.ordered}
\aliasA{is.factor}{factor}{is.factor}
\aliasA{is.na<\Rdash.factor}{factor}{is.na<.Rdash..factor}
\aliasA{is.ordered}{factor}{is.ordered}
\aliasA{Math.factor}{factor}{Math.factor}
\aliasA{Ops.factor}{factor}{Ops.factor}
\aliasA{Ops.ordered}{factor}{Ops.ordered}
\aliasA{ordered}{factor}{ordered}
\aliasA{Summary.factor}{factor}{Summary.factor}
\keyword{category}{factor}
\keyword{NA}{factor}
%
\begin{Description}\relax
The function \code{factor} is used to encode a vector as a factor (the
terms `category' and `enumerated type' are also used for
factors).  If \code{ordered} is \code{TRUE}, the factor levels are
assumed to be ordered.
For compatibility with S there is also a function \code{ordered}.

\code{is.factor}, \code{is.ordered}, \code{as.factor} and \code{as.ordered}
are the membership and coercion functions for these classes.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
factor(x = character(), levels, labels = levels,
       exclude = NA, ordered = is.ordered(x))

ordered(x, ...)

is.factor(x)
is.ordered(x)

as.factor(x)
as.ordered(x)

addNA(x, ifany=FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector of data, usually taking a small number of distinct
values.
\item[\code{levels}] an optional vector of the values that \code{x} might
have taken.  The default is the unique set of values taken by
\code{\LinkA{as.character}{as.character}(x)}, sorted into increasing order \emph{of
\code{x}}.  Note that this set can be smaller than
\code{sort(unique(x))}.
\item[\code{labels}] \emph{either} an optional vector of labels for the
levels (in the same order as \code{levels} after removing those in
\code{exclude}), \emph{or} a character string of length 1.
\item[\code{exclude}] a vector of values to be excluded when forming the
set of levels.  This should be of the same type as \code{x}, and
will be coerced if necessary.
\item[\code{ordered}] logical flag to determine if the levels should be regarded
as ordered (in the order given).
\item[\code{...}] (in \code{ordered(.)}): any of the above, apart from
\code{ordered} itself.
\item[\code{ifany}] (in \code{addNA}): Only add an \code{NA} level if it is
used, i.e. if \code{any(is.na(x))}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The type of the vector \code{x} is not restricted; it only must have
an \code{\LinkA{as.character}{as.character}} method and be sortable (by
\code{\LinkA{sort.list}{sort.list}}).

Ordered factors differ from factors only in their class, but methods
and the model-fitting functions treat the two classes quite differently.

The encoding of the vector happens as follows. First all the values
in \code{exclude} are removed from \code{levels}. If \code{x[i]} equals
\code{levels[j]}, then the \code{i}-th element of the result is
\code{j}.  If no match is found for \code{x[i]} in \code{levels},
then the \code{i}-th element of the result is set to \code{\LinkA{NA}{NA}}.

Normally the `levels' used as an attribute of the result are
the reduced set of levels after removing those in \code{exclude}, but
this can be altered by supplying \code{labels}.  This should either
be a set of new labels for the levels, or a character string, in
which case the levels are that character string with a sequence
number appended.

\code{factor(x, exclude=NULL)} applied to a factor is a no-operation
unless there are unused levels: in that case, a factor with the
reduced level set is returned.  If \code{exclude} is used it should
also be a factor with the same level set as \code{x} or a set of codes
for the levels to be excluded.

The codes of a factor may contain \code{\LinkA{NA}{NA}}.  For a numeric
\code{x}, set \code{exclude=NULL} to make \code{\LinkA{NA}{NA}} an extra
level (prints as \code{<NA>}); by default, this is the last level.

If \code{NA} is a level, the way to set a code to be missing (as
opposed to the code of the missing level) is to
use \code{\LinkA{is.na}{is.na}} on the left-hand-side of an assignment (as in
\code{is.na(f)[i] <- TRUE}; indexing inside \code{is.na} does not work).
Under those circumstances missing values are currently printed as
\code{<NA>}, i.e., identical to entries of level \code{NA}.

\code{is.factor} is generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods}.
\end{Details}
%
\begin{Value}
\code{factor} returns an object of class \code{"factor"} which has a
set of integer codes the length of \code{x} with a \code{"levels"}
attribute of mode \code{\LinkA{character}{character}} and unique
(\code{!\LinkA{anyDuplicated}{anyDuplicated}(.)}) entries.  If \code{ordered} is true
(or \code{ordered} is used) the result has class
\code{c("ordered", "factor")}.

Applying \code{factor} to an ordered or unordered factor returns a
factor (of the same type) with just the levels which occur: see also
\code{\LinkA{[.factor}{[.factor}} for a more transparent way to achieve this.

\code{is.factor} returns \code{TRUE} or \code{FALSE} depending on
whether its argument is of type factor or not.  Correspondingly,
\code{is.ordered} returns \code{TRUE} when its
argument is ordered and \code{FALSE} otherwise.

\code{as.factor} coerces its argument to a factor.
It is an abbreviated form of \code{factor}.

\code{as.ordered(x)} returns \code{x} if this is ordered, and
\code{ordered(x)} otherwise.

\code{addNA} modifies a factor by turning \code{NA} into an extra
level (so that \code{NA} values are counted in tables, for instance).
\end{Value}
%
\begin{Section}{Warning}
The interpretation of a factor depends on both the codes and the
\code{"levels"} attribute.  Be careful only to compare factors with
the same set of levels (in the same order).  In particular,
\code{as.numeric} applied to a factor is meaningless, and may
happen by implicit coercion.  To transform a factor \code{f} to
approximately its original numeric values,
\code{as.numeric(levels(f))[f]} is recommended and slightly more
efficient than \code{as.numeric(as.character(f))}.

The levels of a factor are by default sorted, but the sort order
may well depend on the locale at the time of creation, and should
not be assumed to be ASCII.

There are some anomalies associated with factors that have
\code{NA} as a level.  It is suggested to use them sparingly, e.g.,
only for tabulation purposes.
\end{Section}
%
\begin{Section}{Comparison operators and group generic methods}
There are \code{"factor"} and \code{"ordered"} methods for the
\LinkA{group generic}{group generic} \code{\LinkA{Ops}{S3groupGeneric}}, which
provide methods for the \LinkA{Comparison}{Comparison} operators.  (The rest of the
group and the \code{\LinkA{Math}{S3groupGeneric}} and
\code{\LinkA{Summary}{S3groupGeneric}} groups generate an error as
they are not meaningful for factors.)

Only \code{==} and \code{!=} can be used for factors: a factor can
only be compared to another factor with an identical set of levels
(not necessarily in the same ordering) or to a character vector.
Ordered factors are compared in the same way, but the general dispatch
mechanism precludes comparing ordered and unordered factors.

All the comparison operators are available for ordered factors.
Sorting is done by the levels of the operands: if both operands are
ordered factors they must have the same level set.
\end{Section}
%
\begin{Note}\relax
In earlier versions of \R{}, storing character data as a factor was more
space efficient if there is even a small proportion of
repeats.  Since \R{} 2.6.0 identical character strings share storage, so
the difference is now small in most cases.  (Integer values are stored
in 4 bytes whereas each reference to a character string needs a
pointer of 4 or 8 bytes.)
\end{Note}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{[.factor}{[.factor}} for subsetting of factors.

\code{\LinkA{gl}{gl}} for construction of balanced factors and
\code{\LinkA{C}{C}} for factors with specified contrasts.
\code{\LinkA{levels}{levels}} and \code{\LinkA{nlevels}{nlevels}} for accessing the
levels, and \code{\LinkA{unclass}{unclass}} to get integer codes.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(ff <- factor(substring("statistics", 1:10, 1:10), levels=letters))
as.integer(ff)  # the internal codes
factor(ff)      # drops the levels that do not occur
ff[, drop=TRUE] # the same, more transparently

factor(letters[1:20], labels="letter")

class(ordered(4:1)) # "ordered", inheriting from "factor"

## suppose you want "NA" as a level, and to allow missing values.
(x <- factor(c(1, 2, NA), exclude = NULL))
is.na(x)[2] <- TRUE
x  # [1] 1    <NA> <NA>
is.na(x)
# [1] FALSE  TRUE FALSE

## Using addNA()
Month <- airquality$Month
table(addNA(Month))
table(addNA(Month, ifany=TRUE))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{file.access}{Ascertain File Accessibility}{file.access}
\keyword{file}{file.access}
%
\begin{Description}\relax
Utility function to access information about files on the user's
file systems.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file.access(names, mode = 0)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{names}] character vector containing file names.
\item[\code{mode}] integer specifying access mode required.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Tilde-expansion is done on \code{names}: see \code{\LinkA{path.expand}{path.expand}}.

The \code{mode} value can be the exclusive or of the following values
\begin{description}

\item[0] test for existence.
\item[1] test for execute permission.
\item[2] test for write permission.
\item[4] test for read permission.

\end{description}

Permission will be computed for real user ID and real group ID (rather
than the effective IDs).

Please note that it is not good to use this function to test before
trying to open a file.  On a multi-tasking system, it is possible that
the accessibility of a file will change between the time you call
\code{file.access()} and the time you try to open the file.  It is
better to wrap file open attempts in \code{\LinkA{try}{try}}.
\end{Details}
%
\begin{Value}
An integer vector with values \code{0} for success and \code{-1} for failure.
\end{Value}
%
\begin{Note}\relax
This is intended as a replacement for the S-PLUS function
\code{access}, a wrapper for the C function of the same name, which
explains the return value encoding.  Note that
the return value is \bold{false} for \bold{success}.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.info}{file.info}} for more details on permissions,
\code{\LinkA{Sys.chmod}{Sys.chmod}} to change permissions, and
\code{\LinkA{try}{try}} for a `test it and see' approach.

\code{\LinkA{file\_test}{file.Rul.test}} for shell-style file tests.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
fa <- file.access(dir("."))
table(fa) # count successes & failures
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{file.choose}{Choose a File Interactively}{file.choose}
\keyword{file}{file.choose}
%
\begin{Description}\relax
Choose a file interactively.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file.choose(new = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{new}] Logical: choose the style of dialog box
presented to the user: at present only new = FALSE is used.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character vector of length one giving the file path.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{list.files}{list.files}} for non-interactive selection.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{file.info}{Extract File Information}{file.info}
\keyword{file}{file.info}
%
\begin{Description}\relax
Utility function to extract information about files on the user's
file systems.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file.info(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] character vectors containing file paths.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The file paths are tilde-expanded: see \code{\LinkA{path.expand}{path.expand}}.

The file `mode' follows POSIX conventions, giving three octal
digits summarizing the permissions for the file owner, the owner's
group and for anyone respectively.  Each digit is the logical
\emph{or} of read (4), write (2) and execute/search (1) permissions.

On most systems symbolic links are followed, so information is given
about the file to which the link points rather than about the link.
\end{Details}
%
\begin{Value}
A data frame with row names the file names and columns
\begin{ldescription}
\item[\code{size}] double: File size in bytes.
\item[\code{isdir}] logical: Is the file a directory?
\item[\code{mode}] integer of class \code{"octmode"}.  The file permissions,
printed in octal, for example \code{644}.
\item[\code{mtime, ctime, atime}] integer of class \code{"POSIXct"}:
file modification, `last status change' and last access times.
\item[\code{uid}] integer: the user ID of the file's owner.
\item[\code{gid}] integer: the group ID of the file's group.
\item[\code{uname}] character: \code{uid} interpreted as a user name.
\item[\code{grname}] character: \code{gid} interpreted as a group name.
\end{ldescription}
Unknown user and group names will be \code{NA}.

Entries for non-existent or non-readable files will be \code{NA}.
The \code{uid}, \code{gid}, \code{uname} and \code{grname} columns
may not be supplied on a non-POSIX Unix-alike system.

What is meant by the three file times depends on the OS and file
system.  On Windows native file systems \code{ctime} is the file
creation time.  What is meant by `file access' and hence the
`last access time' is system-dependent.
\end{Value}
%
\begin{Note}\relax
Some systems allow files of more than 2Gb to be created but
not accessed by the \code{stat} system call.  Such files will show up
as non-readable (and very likely not be readable by any of \R{}'s input
functions) -- fortunately such file systems are becoming rare.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.readlink}{Sys.readlink}} to find out about symbolic links,
\code{\LinkA{files}{files}}, \code{\LinkA{file.access}{file.access}},
\code{\LinkA{list.files}{list.files}},
and \code{\LinkA{DateTimeClasses}{DateTimeClasses}} for the date formats.

\code{\LinkA{Sys.chmod}{Sys.chmod}} to change permissions.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
ncol(finf <- file.info(dir()))# at least six
## Not run: finf # the whole list
## Those that are more than 100 days old :
finf[difftime(Sys.time(), finf[,"mtime"], units="days") > 100 , 1:4]

file.info("no-such-file-exists")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{file.path}{Construct Path to File}{file.path}
\keyword{file}{file.path}
%
\begin{Description}\relax
Construct the path to a file from components in a platform-independent
way.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file.path(..., fsep = .Platform$file.sep)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] character vectors.
\item[\code{fsep}] the path separator to use.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character vector of the arguments concatenated term-by-term and
separated by \code{fsep} if all arguments have positive length;
otherwise, an empty character vector.
\end{Value}
\inputencoding{latin1}
\HeaderA{file.show}{Display One or More Files}{file.show}
\keyword{file}{file.show}
%
\begin{Description}\relax
Display one or more files.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file.show(..., header = rep("", nfiles),
          title = "R Information",
          delete.file = FALSE, pager = getOption("pager"),
          encoding = "")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] one or more character vectors containing the names of the
files to be displayed.  These will be tilde-expanded: see
\code{\LinkA{path.expand}{path.expand}}.
\item[\code{header}] character vector (of the same length as the number of files
specified in \code{...}) giving a header for each file being
displayed.  Defaults to empty strings.
\item[\code{title}] an overall title for the display.  If a single separate
window is used for the display, \code{title} will be used as the window
title. If multiple windows are used, their titles should combine the title
and the file-specific header.
\item[\code{delete.file}] should the files be deleted after display?  Used
for temporary files.
\item[\code{pager}] the pager to be used: not used on all platforms
\item[\code{encoding}] character string giving the encoding to be assumed for
the file(s).
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function provides the core of the R help system, but it can be
used for other purposes as well, such as \code{\LinkA{page}{page}}.

How the pager is implemented is highly system-dependent.

The basic Unix version concatenates the files (using the headers) to a
temporary file, and displays it in the pager selected by the
\code{pager} argument, which is a character vector specifying a system
command to run on the set of files.  The `factory-fresh'
default is to use \file{R\_HOME/bin/pager}, which is a shell script
running the command specified by the environment variable \env{PAGER}
whose default is set at configuration, usually to \command{less}.  On a
Unix-alike \command{more} is used if \code{pager} is empty.

Most GUI systems will use a separate pager window for each file, and
let the user leave it up while \R{} continues running.  The selection of
such pagers could either be done using special pager names being
intercepted by lower-level code (such as \code{"internal"} and
\code{"console"} on Windows), or by letting \code{pager} be an R
function which will be called with the same first four arguments as
\code{file.show} and take care of interfacing to the GUI.

The \command{R.app} Mac OS X GUI uses its internal pager irrespective
of the setting of \code{pager}.

Not all implementations will honour \code{delete.file}.  In
particular, using an external pager on Windows does not, as there is
no way to know when the external application has finished with the
file.
\end{Details}
%
\begin{Author}\relax
Ross Ihaka, Brian Ripley.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{files}{files}},
\code{\LinkA{list.files}{list.files}},
\code{\LinkA{help}{help}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
file.show(file.path(R.home("doc"), "COPYRIGHTS"))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{files}{File Manipulation}{files}
\aliasA{file.append}{files}{file.append}
\aliasA{file.copy}{files}{file.copy}
\aliasA{file.create}{files}{file.create}
\aliasA{file.exists}{files}{file.exists}
\aliasA{file.rcopy}{files}{file.rcopy}
\aliasA{file.remove}{files}{file.remove}
\aliasA{file.rename}{files}{file.rename}
\aliasA{file.symlink}{files}{file.symlink}
\keyword{file}{files}
%
\begin{Description}\relax
These functions provide a low-level interface to the computer's
file system.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
file.create(..., showWarnings = TRUE)
file.exists(...)
file.remove(...)
file.rename(from, to)
file.append(file1, file2)
file.copy(from, to, overwrite = recursive, recursive = FALSE)
file.symlink(from, to)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{..., file1, file2, from, to}] character vectors,
containing file names or paths.
\item[\code{overwrite}] logical; should the destination files be overwritten?
\item[\code{showWarnings}] logical; should the warnings on failure be shown?
\item[\code{recursive}] logical. If \code{to} is a directory, should
directories in \code{from} be copied (and their contents).
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{...} arguments are concatenated to form one character
string: you can specify the files separately or as one vector.
All of these functions expand path names: see \code{\LinkA{path.expand}{path.expand}}.

\code{file.create} creates files with the given names if they do not
already exist and truncates them if they do.  They are created with the
maximal permissions allowed by the \code{umask} setting.

\code{file.exists} returns a logical vector indicating whether
the files named by its argument exist.  (Here `exists' is in the
sense of the system's \code{stat} call: a file will be reported as
existing only if you have the permissions needed by \code{stat}.
Existence can also be checked by \code{\LinkA{file.access}{file.access}}, which
might use different permissions and so obtain a different result.
Note that the existence of a file does not imply that it is readable:
for that use \code{\LinkA{file.access}{file.access}}.)
Note that if the file is a symbolic link, the result indicates if the
link points to an actual file, not just if the link exists.

\code{file.remove} attempts to remove the files named in its argument.
On most Unix platforms `file' includes \emph{empty}
directories, symbolic links, fifos and sockets.  On Windows,
`file' means a regular file and not, say, an empty directory.


\code{file.rename} attempts to rename a single file.  Where file
permissions allow this will first remove an existing file \code{to}.
This is subject to the limitations of the OS's corresponding system
call: in particular in the interpretation of `file': also most
platforms will not rename files across file systems.

\code{file.append} attempts to append the files named by its
second argument to those named by its first.  The \R{} subscript
recycling rule is used to align names given in vectors
of different lengths.

\code{file.copy} works in a similar way to \code{file.append} but with
the arguments in the natural order for copying.  Copying to existing
destination files is skipped unless \code{overwrite = TRUE}.
The \code{to} argument can specify a single existing directory.

\code{file.symlink} makes symbolic links on those Unix-like platforms
which support them.  The \code{to} argument can specify a single
existing directory.
\end{Details}
%
\begin{Value}
\code{file.rename} returns a logical value, true for success.

The remaining functions return a logical vector indicating which
operation succeeded for each of the files attempted.  Using a missing
value for a file or path name will always be regarded as a failure.

If \code{showWarnings = TRUE}, \code{file.create} will give a warning
for an unexpected failure.
\end{Value}
%
\begin{Author}\relax
Ross Ihaka, Brian Ripley
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.info}{file.info}}, \code{\LinkA{file.access}{file.access}}, \code{\LinkA{file.path}{file.path}},
\code{\LinkA{file.show}{file.show}}, \code{\LinkA{list.files}{list.files}},
\code{\LinkA{unlink}{unlink}}, \code{\LinkA{basename}{basename}},
\code{\LinkA{path.expand}{path.expand}}.

\code{\LinkA{dir.create}{dir.create}}.

\code{\LinkA{Sys.glob}{Sys.glob}} to expand wildcards in file specifications.

\code{\LinkA{file\_test}{file.Rul.test}}, \code{\LinkA{Sys.readlink}{Sys.readlink}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
cat("file A\n", file="A")
cat("file B\n", file="B")
file.append("A", "B")
file.create("A")
file.append("A", rep("B", 10))
if(interactive()) file.show("A")
file.copy("A", "C")
dir.create("tmp")
file.copy(c("A", "B"), "tmp")
list.files("tmp")
setwd("tmp")
file.remove("B")
file.symlink(file.path("..", c("A", "B")), ".")
setwd("..")
unlink("tmp", recursive=TRUE)
file.remove("A", "B", "C")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{files2}{Manipulaton of Directories and file Permissions}{files2}
\aliasA{dir.create}{files2}{dir.create}
\aliasA{Sys.chmod}{files2}{Sys.chmod}
\aliasA{Sys.umask}{files2}{Sys.umask}
\keyword{file}{files2}
%
\begin{Description}\relax
These functions provide a low-level interface to the computer's
file system.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
dir.create(path, showWarnings = TRUE, recursive = FALSE, mode = "0777")
Sys.chmod(paths, mode = "0777")
Sys.umask(mode = "0000")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{path}] a character vector containing a single path name.
\item[\code{paths}] character vectors containing file or directory paths.
\item[\code{showWarnings}] logical; should the warnings on failure be shown?
\item[\code{recursive}] logical. Should elements of the path other than the
last be created?  If true, like Unix's \command{mkdir -p}.
\item[\code{mode}] the file mode to be used on Unix-alikes: it will be
coerced by \code{\LinkA{as.octmode}{as.octmode}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{dir.create} creates the last element of the path, unless
\code{recursive = TRUE}.  Trailing path separators are removed.
The mode will be modified by the \code{umask} setting in the same way
as for the system function \code{mkdir}.  What modes can be set is
OS-dependent, and it is unsafe to assume that more than three octal
digits will be used.  For more details see your OS's documentation on the
system call \code{mkdir} (and not that on the command-line utility of
that name). 

\code{Sys.chmod} sets the file permissions of one or more files.
It may not be supported (when a warning is issued).
See the comments for \code{dir.create} for how modes are interpreted.
Changing mode on a symbolic link is unlikely to work (nor be
necessary).  For more details see your OS's documentation on the
system call \code{chmod} (and not that on the command-line utility of
that name). 

\code{Sys.umask} sets the \code{umask}.
It may not be supported (when a warning is issued and \code{"0000"}
returned).  For more details see your OS's documentation on the
system call \code{umask}. 
\end{Details}
%
\begin{Value}
\code{dir.create} and \code{Sys.chmod} return invisibly a logical vector
indicating if the operation succeeded for each of the files attempted.
Using a missing value for a path name will always be regarded as a
failure.  \code{dir.create} indicates failure if the directory already
exists.  If \code{showWarnings = TRUE}, \code{dir.create} will give a
warning for an unexpected failure (e.g. not for a missing value nor
for an already existing component for \code{recursive = TRUE}).

\code{Sys.umask} returns the previous value of the \code{umask},
invisibly, as a length-one object of class \code{"\LinkA{octmode}{octmode}"}.
\end{Value}
%
\begin{Author}\relax
Ross Ihaka, Brian Ripley
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.info}{file.info}}, \code{\LinkA{file.exists}{file.exists}}, \code{\LinkA{file.path}{file.path}},
\code{\LinkA{list.files}{list.files}}, \code{\LinkA{unlink}{unlink}},
\code{\LinkA{basename}{basename}}, \code{\LinkA{path.expand}{path.expand}}.

\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{findInterval}{Find Interval Numbers or Indices}{findInterval}
\keyword{arith}{findInterval}
\keyword{utilities}{findInterval}
%
\begin{Description}\relax
Find the indices of \code{x} in \code{vec}, where \code{vec} must be
sorted (non-decreasingly); i.e., if \code{i <- findInterval(x,v)},
we have \eqn{v_{i_j} \le x_j < v_{i_j + 1}}{}
where \eqn{v_0 := -\infty}{},
\eqn{v_{N+1} := +\infty}{}, and \code{N <- length(vec)}.
At the two boundaries, the returned index may differ by 1, depending
on the optional arguments \code{rightmost.closed} and \code{all.inside}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
findInterval(x, vec, rightmost.closed = FALSE, all.inside = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] numeric.
\item[\code{vec}] numeric, sorted (weakly) increasingly, of length \code{N},
say.
\item[\code{rightmost.closed}] logical; if true, the rightmost interval,
\code{vec[N-1] .. vec[N]} is treated as \emph{closed}, see below.
\item[\code{all.inside}] logical; if true, the returned indices are coerced
into \eqn{\{1,\dots,N-1\}}{}, i.e., 0 is mapped to 1 and \eqn{N}{} to
\eqn{N-1}{}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The function \code{findInterval} finds the index of one vector \code{x} in
another, \code{vec}, where the latter must be non-decreasing.  Where
this is trivial, equivalent to \code{apply( outer(x, vec, ">="), 1, sum)},
as a matter of fact, the internal algorithm uses interval search
ensuring \eqn{O(n \log N)}{} complexity where
\code{n <- length(x)} (and \code{N <- length(vec)}).  For (almost)
sorted \code{x}, it will be even faster, basically \eqn{O(n)}{}.

This is the same computation as for the empirical distribution
function, and indeed, \code{findInterval(t, sort(X))} is
\emph{identical} to \eqn{n F_n(t; X_1,\dots,X_n)}{} where \eqn{F_n}{} is the empirical distribution
function of \eqn{X_1,\dots,X_n}{}.

When \code{rightmost.closed = TRUE}, the result
for \code{x[j] = vec[N]} (\eqn{ = \max(vec)}{}), is \code{N - 1} as for
all other values in the last interval.
\end{Details}
%
\begin{Value}
vector of length \code{length(x)} with values in \code{0:N} (and
\code{NA}) where \code{N <- length(vec)}, or values coerced to
\code{1:(N-1)} if and only if \code{all.inside = TRUE} (equivalently coercing all
x values \emph{inside} the intervals).  Note that \code{\LinkA{NA}{NA}}s are
propagated from \code{x}, and \code{\LinkA{Inf}{Inf}} values are allowed in
both \code{x} and \code{vec}.
\end{Value}
%
\begin{Author}\relax
Martin Maechler
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{approx}{approx}(*, method = "constant")} which is a
generalization of \code{findInterval()}, \code{\LinkA{ecdf}{ecdf}} for
computing the empirical distribution function which is (up to a factor
of \eqn{n}{}) also basically the same as findInterval(.).
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
N <- 100
X <- sort(round(stats::rt(N, df=2), 2))
tt <- c(-100, seq(-2,2, len=201), +100)
it <- findInterval(tt, X)
tt[it < 1 | it >= N] # only first and last are outside range(X)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{force}{Force Evaluation of an Argument}{force}
\keyword{data}{force}
\keyword{programming}{force}
%
\begin{Description}\relax
Forces the evaluation of a function argument.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
force(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a formal argument of the enclosing function.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{force} forces the evaluation of a formal argument.  This can
be useful if the argument will be captured in a closure by the lexical
scoping rules and will later be altered by an explicit assignment or
an implicit assignment in a loop or an apply function.
\end{Details}
%
\begin{Note}\relax
This is semantic sugar: just evaluating the symbol will do the
same thing (see the examples).

\code{force} does not force the evaluation of other
\LinkA{promises}{promises}.  (It works by forcing the promise that
is created when the actual arguments of a call are matched to the
formal arguments of a closure, the mechanism which implements
\emph{lazy evaluation}.)
\end{Note}
%
\begin{Examples}
\begin{ExampleCode}
f <- function(y) function() y
lf <- vector("list", 5)
for (i in seq_along(lf)) lf[[i]] <- f(i)
lf[[1]]()  # returns 5

g <- function(y) { force(y); function() y }
lg <- vector("list", 5)
for (i in seq_along(lg)) lg[[i]] <- g(i)
lg[[1]]()  # returns 1

## This is identical to
g <- function(y) { y; function() y }
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Foreign}{Foreign Function Interface}{Foreign}
\aliasA{.C}{Foreign}{.C}
\aliasA{.Call}{Foreign}{.Call}
\methaliasA{.Call.graphics}{Foreign}{.Call.graphics}
\aliasA{.External}{Foreign}{.External}
\methaliasA{.External.graphics}{Foreign}{.External.graphics}
\aliasA{.Fortran}{Foreign}{.Fortran}
\keyword{programming}{Foreign}
%
\begin{Description}\relax
Functions to make calls to compiled code that has been loaded into \R{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
       .C(name, ..., NAOK = FALSE, DUP = TRUE, PACKAGE, ENCODING)
 .Fortran(name, ..., NAOK = FALSE, DUP = TRUE, PACKAGE, ENCODING)
.External(name, ..., PACKAGE)
    .Call(name, ..., PACKAGE)

.External.graphics(name, ..., PACKAGE)
    .Call.graphics(name, ..., PACKAGE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] a character string giving the name of a C function or
Fortran subroutine, or an object of class
\code{"\LinkA{NativeSymbolInfo}{NativeSymbolInfo}"}, \code{"\LinkA{RegisteredNativeSymbol}{RegisteredNativeSymbol}"}
or \code{"\LinkA{NativeSymbol}{NativeSymbol}"} referring to such a name.
\item[\code{...}] arguments to be passed to the foreign function.
\item[\code{NAOK}] if \code{TRUE} then any \code{\LinkA{NA}{NA}} or
\code{\LinkA{NaN}{NaN}} or \code{\LinkA{Inf}{Inf}} values in the arguments are
passed on to the foreign function.  If \code{FALSE}, the presence of
\code{NA} or \code{NaN} or \code{Inf} values is regarded as an error.
\item[\code{DUP}] if \code{TRUE} then arguments are duplicated before
their address is passed to C or Fortran.
\item[\code{PACKAGE}] if supplied, confine the search for the \code{name} to
the DLL given by this argument (plus the conventional extension,
\file{.so}, \file{.sl}, \file{.dll}, \dots).  This is intended to
add safety for packages, which can ensure by using this argument
that no other package can override their external symbols.  Use
\code{PACKAGE="base"} for symbols linked in to \R{}.
\item[\code{ENCODING}] optional name for an encoding to be assumed for
character vectors.  See `Details'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The functions \code{.C} and \code{.Fortran} can be used to make calls
to compiled C and Fortran code.

\code{.External} and \code{.External.graphics} can be used to call
compiled code that uses \R{} objects in the same way as internal
\R{} functions.

\code{.Call} and \code{.Call.graphics} can be used to call compiled code
which makes use of internal \R{} objects.  The arguments are passed to
the C code as a sequence of \R{} objects.  It is included to provide
compatibility with S version 4.

Specifying \code{ENCODING} overrides any declared encodings (see
\code{\LinkA{Encoding}{Encoding}}) which are otherwise used to translate to the
current locale before passing the strings to the compiled code.

For details about how to write code to use with \code{.Call} and
\code{.External}, see the chapter on ``System and foreign language
interfaces'' in the ``Writing \R{} Extensions'' manual.
\end{Details}
%
\begin{Value}
The functions \code{.C} and \code{.Fortran} return a list similar to
the \code{...} list of arguments passed in, but reflecting any
changes made by the C or Fortran code.

\code{.External}, \code{.Call}, \code{.External.graphics},
and \code{.Call.graphics} return an \R{} object.

These calls are typically made in conjunction with
\code{\LinkA{dyn.load}{dyn.load}} which links DLLs to \R{}.

The \code{.graphics} versions of \code{.Call} and \code{.External}
are used when calling code which makes low-level graphics calls.
They take additional steps to ensure that the device driver display
lists are updated correctly.
\end{Value}
%
\begin{Section}{Argument types}
The mapping of the types of \R{} arguments to C or Fortran arguments
in \code{.C} or \code{.Fortran} is


\Tabular{lll}{
\R{} &     C &     Fortran\\{}
integer & int * & integer\\{}
numeric & double * & double precision\\{}
-- or -- & float * & real\\{}
complex & Rcomplex * & double complex\\{}
logical & int * & integer \\{}
character & char ** & [see below]\\{}
raw & unsigned char * & not allowed\\{}
list & SEXP *& not allowed\\{}
other & SEXP& not allowed\\{}
}

Numeric vectors in \R{} will be passed as type \code{double *} to C (and
as \code{double precision} to Fortran) unless (i) \code{.C} or
\code{.Fortran} is used, (ii) \code{DUP} is true and (iii) the
argument has attribute \code{Csingle} set to \code{TRUE} (use
\code{\LinkA{as.single}{as.single}} or \code{\LinkA{single}{single}}).  This mechanism is
only intended to be used to facilitate the interfacing of existing C
and Fortran code.

The C type \code{Rcomplex} is defined in \file{Complex.h} as a
\code{typedef struct \{double r; double i;\}}.  Fortran type
\code{double complex} is an extension to the Fortran standard, and the
availability of a mapping of \code{complex} to Fortran may be compiler
dependent.

\emph{Note:} The C types corresponding to \code{integer} and
\code{logical} are \code{int}, not \code{long} as in S.  This
difference matters on 64-bit platforms.

The first character string of a character vector is passed as a C
character array to Fortran: that string may be usable as
\code{character*255} if its true length is passed separately.  Only up
to 255 characters of the string are passed back.  (How well this works,
or even if it works at all, depends on the C and Fortran compilers
and the platform.)

Missing (\code{NA}) string values are passed to \code{.C} as the string
"NA". As the C \code{char} type can represent all possible bit patterns
there appears to be no way to distinguish missing strings from the
string \code{"NA"}. If this distinction is important use \code{.Call}.

Functions, expressions, environments and other language elements are
passed as the internal \R{} pointer type \code{SEXP}.  This type is
defined in \file{Rinternals.h} or the arguments can be declared as
generic pointers, \code{void *}. Lists are passed as C arrays of
\code{SEXP} and can be declared as \code{void *} or \code{SEXP *}.
Note that you cannot assign values to the elements of the list within
the C routine. Assigning values to elements of the array corresponding
to the list bypasses R's memory management/garbage collection and will
cause problems.  Essentially, the array corresponding to the list is
read-only. If you need to return S objects created within the C
routine,  use the \code{.Call} interface.


\R{} functions can be invoked using \code{call\_S} or \code{call\_R} and
can be passed lists or the simple types as arguments.
\end{Section}
%
\begin{Section}{Warning}
\emph{\code{DUP=FALSE} is dangerous.}

There are two dangers with using \code{DUP=FALSE}.

The first is that if you pass a local variable to
\code{.C}/\code{.Fortran} with \code{DUP=FALSE}, your compiled code
can alter the local variable and not just the copy in the return list.
Worse, if you pass a local variable that is a formal parameter of
the calling function, you may be able to change not only the local
variable but the variable one level up.  This will be very hard to trace.

The second is that lists are passed as a single \R{} \code{SEXP} with
\code{DUP=FALSE}, not as an array of \code{SEXP}. This means the
accessor macros in \file{Rinternals.h} are needed to get at the list
elements and the lists cannot be passed to
\code{call\_S}/\code{call\_R}.  New code using \R{} objects should be
written using \code{.Call} or \code{.External}, so this is now only a
minor issue.

In addition, character vectors and lists cannot be used with
\code{DUP=FALSE}.

It is safe and useful to set \code{DUP=FALSE} if you do not change any
of the variables that might be affected, e.g.,

\code{.C("Cfunction", input=x, output=numeric(10))}.

In this case the output variable did not exist before the call so it
cannot cause trouble. If the input variable is not changed in the C
code of \code{Cfunction} you are safe.

Neither \code{.Call} nor \code{.External} copy their arguments.  You
should treat arguments you receive through these interfaces as
read-only.
\end{Section}
%
\begin{Section}{Fortran symbol names}
All compilers that can be used with \R{} map symbol names to lower case,
and so does \code{.Fortran}.

Symbol names containing underscores are not valid Fortran 77 (although
they are valid in Fortran 9x).  Many Fortran 77 compilers (including
\code{g77}) will allow them but translate them in a different way to
names not containing underscores.  Such names will work with
\code{.Fortran}, but portable code should not use Fortran names
containing underscores.

Use \code{.Fortran} with care for compiled Fortran 9x code: it may not
work if the Fortran 9x compiler used differs from the Fortran compiler
used when configuring \R{}, especially if the subroutine name is not
lower-case or includes an underscore.
\end{Section}
%
\begin{Section}{Header files for external code}
Writing code for use with \code{.External} and \code{.Call} will need to
use internal \R{} structures.  If possible use just those defined in
\file{Rinternals.h} and/or the macros in \file{Rdefines.h},
as other header files are not installed and are even more
likely to be changed.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (\code{.C} and \code{.Fortran}.)

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer. (\code{.Call}.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{dyn.load}{dyn.load}}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{formals}{Access to and Manipulation of the Formal Arguments}{formals}
\aliasA{formals<\Rdash}{formals}{formals<.Rdash.}
\keyword{programming}{formals}
%
\begin{Description}\relax
Get or set the formal arguments of a function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
formals(fun = sys.function(sys.parent()))
formals(fun, envir = environment(fun)) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{fun}] a function object, or see `Details'.
\item[\code{envir}] environment in which the function should be defined.
\item[\code{value}] a list (or pairlist) of \R{} expressions.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For the first form, \code{fun} can also be a character string
naming the function to be manipulated, which is searched for from the
parent environment.
If it is not specified, the function calling \code{formals} is used.

Only \emph{closures} have formals, not primitive functions.
\end{Details}
%
\begin{Value}
\code{formals} returns the formal argument list of the function
specified, as a \code{\LinkA{pairlist}{pairlist}}, or \code{NULL} for a
non-function or primitive.

The replacement form sets the formals of a function to the
list/pairlist on the right hand side, and (potentially) resets the
environment of the function.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{args}{args}} for a human-readable version,
\code{\LinkA{alist}{alist}},
\code{\LinkA{body}{body}},
\code{\LinkA{function}{function}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats); require(graphics)
length(formals(lm))      # the number of formal arguments
names(formals(boxplot))  # formal arguments names

f <- function(x) a+b
formals(f) <- alist(a=,b=3) # function(a,b=3)a+b
f(2) # result = 5
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{format}{Encode in a Common Format}{format}
\methaliasA{format.AsIs}{format}{format.AsIs}
\methaliasA{format.data.frame}{format}{format.data.frame}
\methaliasA{format.default}{format}{format.default}
\methaliasA{format.factor}{format}{format.factor}
\keyword{character}{format}
\keyword{print}{format}
%
\begin{Description}\relax
Format an \R{} object for pretty printing.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
format(x, ...)

## Default S3 method:
format(x, trim = FALSE, digits = NULL, nsmall = 0L,
       justify = c("left", "right", "centre", "none"),
       width = NULL, na.encode = TRUE, scientific = NA,
       big.mark = "",   big.interval = 3L,
     small.mark = "", small.interval = 5L,
   decimal.mark = ".", zero.print = NULL, drop0trailing = FALSE, ...)

## S3 method for class 'data.frame':
format(x, ..., justify = "none")

## S3 method for class 'factor':
format(x, ...)

## S3 method for class 'AsIs':
format(x, width = 12, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] any \R{} object (conceptually); typically numeric.
\item[\code{trim}] logical; if \code{FALSE}, logical, numeric and complex
values are right-justified to a common width: if \code{TRUE} the
leading blanks for justification are suppressed.
\item[\code{digits}] how many significant digits are to be used for
numeric and complex \code{x}.  The default, \code{NULL}, uses
\code{\LinkA{getOption}{getOption}(digits)}.  This is a suggestion: enough decimal
places will be used so that the smallest (in magnitude) number has
this many significant digits, and also to satisfy \code{nsmall}.
(For the interpretation for complex numbers see \code{\LinkA{signif}{signif}}.)
\item[\code{nsmall}] the minimum number of digits to the right of the decimal
point in formatting real/complex numbers in non-scientific formats.
Allowed values are \code{0 <= nsmall <= 20}.
\item[\code{justify}] should a \emph{character} vector be left-justified (the
default), right-justified, centred or left alone.
\item[\code{width}] \code{default} method: the \emph{minimum} field width or
\code{NULL} or \code{0} for no restriction.

\code{AsIs} method: the \emph{maximum} field width for non-character
objects.  \code{NULL} corresponds to the default 12.

\item[\code{na.encode}] logical: should \code{NA} strings be encoded?  Note
this only applies to elements of character vectors, not to numerical
or logical \code{NA}s, which are always encoded as \code{"NA"}.

\item[\code{scientific}] Either a logical specifying whether
elements of a real or complex vector should be encoded in scientific
format, or an integer penalty (see \code{\LinkA{options}{options}("scipen")}).
Missing values correspond to the current default penalty.
\item[\code{...}] further arguments passed to or from other methods.

\item[\code{big.mark, big.interval, small.mark,
small.interval, decimal.mark, zero.print, drop0trailing}] 
used for prettying (longish) decimal sequences, passed to
\code{\LinkA{prettyNum}{prettyNum}}: that help page explains the details.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{format} is a generic function.  Apart from the methods described
here there are methods for dates (see \code{\LinkA{format.Date}{format.Date}}),
date-times (see \code{\LinkA{format.POSIXct}{format.POSIXct}})) and for other classes such
as \code{format.octmode} and \code{format.dist}.

\code{format.data.frame} formats the data frame column by column,
applying the appropriate method of \code{format} for each column.
Methods for columns are often similar to \code{as.character} but offer
more control.  Matrix and data-frame columns will be converted to
separate columns in the result, and character columns (normally all)
will be given class \code{"\LinkA{AsIs}{AsIs}"}.

\code{format.factor} converts the factor to a character vector and
then calls the default method (and so \code{justify} applies).

\code{format.AsIs} deals with columns of complicated objects that
have been extracted from a data frame.  Character objects are passed
to the default method (and so \code{width} does not apply).
Otherwise it calls \code{\LinkA{toString}{toString}} to convert the object
to character (if a vector or list, element by element) and then
right-justifies the result.

Justification for character vectors (and objects converted to
character vectors by their methods) is done on display width (see
\code{\LinkA{nchar}{nchar}}), taking double-width characters and the rendering
of special characters (as escape sequences, including escaping
backslash: see \code{\LinkA{print.default}{print.default}}) into account.  Character
strings are padded with blanks to the display width of the widest.
(If \code{na.encode = FALSE} missing character strings are not
included in the width computations and are not encoded.)

Numeric vectors are encoded with the minimum number of decimal places
needed to display all the elements to at least the \code{digit}
significant digits.  However, if all the elements then have trailing
zeroes, the number of decimal places is reduced until at least one
element has a non-zero final digit; see also the argument
documentation for \code{big.*}, \code{small.*} etc, above.

Raw vectors are converted to their 2-digit hexadecimal representation
by \code{\LinkA{as.character}{as.character}}.
\end{Details}
%
\begin{Value}
An object of similar structure to \code{x} containing character
representations of the elements of the first argument \code{x}
in a common format, and in the current locale's encoding.

For character, numeric, complex or factor \code{x}, dims and dimnames
are preserved on matrices/arrays and names on vectors: no other
attributes are copied.

If \code{x} is a list, the result is a character vector obtained by
applying \code{format.default(x, ...)} to each element of the list
(after \code{\LinkA{unlist}{unlist}}ing elements which are themselves lists),
and then collapsing the result for each element with
\code{paste(collapse = ", ")}.  The defaults in this case are
\code{trim = TRUE, justify = "none"} since one does not usually want
alignment in the collapsed strings.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{format.info}{format.info}} indicates how an atomic vector would be
formatted.

\code{\LinkA{formatC}{formatC}}, \code{\LinkA{paste}{paste}}, \code{\LinkA{as.character}{as.character}},
\code{\LinkA{sprintf}{sprintf}}, \code{\LinkA{print}{print}}, \code{\LinkA{prettyNum}{prettyNum}},
\code{\LinkA{toString}{toString}}, \code{\LinkA{encodeString}{encodeString}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
format(1:10)
format(1:10, trim = TRUE)

zz <- data.frame("(row names)"= c("aaaaa", "b"), check.names=FALSE)
format(zz)
format(zz, justify = "left")

## use of nsmall
format(13.7)
format(13.7, nsmall = 3)
format(c(6.0, 13.1), digits = 2)
format(c(6.0, 13.1), digits = 2, nsmall = 1)

## use of scientific
format(2^31-1)
format(2^31-1, scientific = TRUE)

## a list
z <- list(a=letters[1:3], b=(-pi+0i)^((-2:2)/2), c=c(1,10,100,1000),
          d=c("a", "longer", "character", "string"))
format(z, digits = 2)
format(z, digits = 2, justify = "left", trim = FALSE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{format.Date}{Date Conversion Functions to and from Character}{format.Date}
\aliasA{as.character.Date}{format.Date}{as.character.Date}
\aliasA{as.Date}{format.Date}{as.Date}
\methaliasA{as.Date.character}{format.Date}{as.Date.character}
\methaliasA{as.Date.date}{format.Date}{as.Date.date}
\methaliasA{as.Date.dates}{format.Date}{as.Date.dates}
\methaliasA{as.Date.default}{format.Date}{as.Date.default}
\methaliasA{as.Date.factor}{format.Date}{as.Date.factor}
\methaliasA{as.Date.numeric}{format.Date}{as.Date.numeric}
\methaliasA{as.Date.POSIXct}{format.Date}{as.Date.POSIXct}
\methaliasA{as.Date.POSIXlt}{format.Date}{as.Date.POSIXlt}
\keyword{utilities}{format.Date}
\keyword{chron}{format.Date}
%
\begin{Description}\relax
Functions to convert between character representations and objects of
class \code{"Date"} representing calendar dates.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.Date(x, ...)
## S3 method for class 'character':
as.Date(x, format = "", ...)
## S3 method for class 'numeric':
as.Date(x, origin, ...)

## S3 method for class 'Date':
format(x, ...)

## S3 method for class 'Date':
as.character(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An object to be converted.
\item[\code{format}] A character string.  If not specified, it will try
\code{"\%Y-\%m-\%d"} then \code{"\%Y/\%m/\%d"} on the first
non-\code{NA} element, and give an error if neither works.
\item[\code{origin}] a Date object, or something which can be coerced by
\code{as.Date(origin, ...)} to such an object.
\item[\code{...}] Further arguments to be passed from or to other methods,
including \code{format} for \code{as.character} and \code{as.Date}
methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The usual vector re-cycling rules are applied to \code{x} and
\code{format} so the answer will be of length that of the longer of the
vectors.

Locale-specific conversions to and from character strings are used
where appropriate and available.  This affects the names of the days
and months.

The \code{as.Date} methods accept character strings, factors, logical
\code{NA} and objects of classes \code{"\LinkA{POSIXlt}{POSIXlt}"} and
\code{"\LinkA{POSIXct}{POSIXct}"}.  (The last are converted to days by
ignoring the time after midnight in the
representation of the time in UTC.)  Also objects of class
\code{"date"} (from package \pkg{\LinkA{date}{date}}) and
\code{"dates"} (from package \pkg{\LinkA{chron}{chron}}).  Character
strings are processed as far as necessary for the format specified: any
trailing characters are ignored.

\code{as.Date} will accept numeric data (the number of days since an
epoch), but \emph{only} if \code{origin} is supplied.

The \code{format} and \code{as.character} methods ignore any
fractional part of the date.
\end{Details}
%
\begin{Value}
The \code{format} and \code{as.character} methods return a character vector
representing the date.  \code{NA} dates are returned as \code{NA\_character\_}.

The \code{as.Date} methods return an object of class \code{"\LinkA{Date}{Date}"}.
\end{Value}
%
\begin{Note}\relax
The default formats follow the rules of the ISO 8601 international
standard which expresses a day as \code{"2001-02-03"}.

If the date string does not specify the date completely, the returned
answer may be system-specific.  The most common behaviour is to assume
that a missing
year, month or day is the current one.  If it specifies a date
incorrectly, reliable implementations will give an error and the date
is reported as \code{NA}.  Unfortunately some common implementations
(such as \samp{glibc}) are unreliable and guess at the intended meaning.

Years before 1CE (aka 1AD) will probably not be handled correctly.
\end{Note}
%
\begin{References}\relax
International Organization for Standardization (2004, 1988, 1997,
\dots)
\emph{ISO 8601. Data elements and interchange formats --
Information interchange -- Representation of dates and times.}
For links to versions available on-line see (at the time of writing)
\url{http://www.qsl.net/g1smd/isopdf.htm}; for information on the
current official version, see
\url{http://www.iso.org/iso/en/prods-services/popstds/datesandtime.html}.
\end{References}
%
\begin{SeeAlso}\relax
\LinkA{Date}{Date} for details of the date class;
\code{\LinkA{locales}{locales}} to query or set a locale.

Your system's help pages on \code{strftime} and \code{strptime} to
see how to specify their formats.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## locale-specific version of the date
format(Sys.Date(), "%a %b %d")

## read in date info in format 'ddmmmyyyy'
## This will give NA(s) in some locales; setting the C locale
## as in the commented lines will overcome this on most systems.
## lct <- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
z <- as.Date(x, "%d%b%Y")
## Sys.setlocale("LC_TIME", lct)
z

## read in date/time info in format 'm/d/y'
dates <- c("02/27/92", "02/27/92", "01/14/92", "02/28/92", "02/01/92")
as.Date(dates, "%m/%d/%y")

## date given as number of days since 1900-01-01 (a date in 1989)
as.Date(32768, origin="1900-01-01")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{format.info}{format(.) Information}{format.info}
\keyword{character}{format.info}
\keyword{print}{format.info}
\keyword{programming}{format.info}
%
\begin{Description}\relax
Information is returned on how \code{\LinkA{format}{format}(x, digits, nsmall)}
would be formatted.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
format.info(x, digits = NULL, nsmall = 0)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an atomic vector; a potential argument of
\code{\LinkA{format}{format}(x, ...)}.
\item[\code{digits}] how many significant digits are to be used for
numeric and complex \code{x}.  The default, \code{NULL}, uses
\code{\LinkA{getOption}{getOption}(digits)}.
\item[\code{nsmall}]  (see \code{\LinkA{format}{format}(..., nsmall)}).
\end{ldescription}
\end{Arguments}
%
\begin{Value}
An \code{\LinkA{integer}{integer}} \code{\LinkA{vector}{vector}} of length 1, 3 or 6, say
\code{r}.

For logical, integer and character vectors a single element,
the width which would be used by \code{format} if \code{width = NULL}.

For numeric vectors:
\begin{ldescription}
\item[\code{r[1]}] width (in characters) used by \code{format(x)}
\item[\code{r[2]}] number of digits after decimal point.
\item[\code{r[3]}] in \code{0:2}; if \eqn{\ge}{}\code{1}, \emph{exponential}
representation would be used, with exponent length of \code{r[3]+1}.

\end{ldescription}
For a complex vector the first three elements refer to the real parts,
and there are three further elements corresponding to the imaginary
parts.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{format}{format}}, \code{\LinkA{formatC}{formatC}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
dd <- options("digits") ; options(digits = 7) #-- for the following
format.info(123)   # 3 0 0
format.info(pi)    # 8 6 0
format.info(1e8)   # 5 0 1 - exponential "1e+08"
format.info(1e222) # 6 0 2 - exponential "1e+222"

x <- pi*10^c(-10,-2,0:2,8,20)
names(x) <- formatC(x, width=1, digits=3, format="g")
cbind(sapply(x,format))
t(sapply(x, format.info))

## using at least 8 digits right of "."
t(sapply(x, format.info, nsmall = 8))

# Reset old options:
options(dd)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{format.pval}{Format P Values}{format.pval}
\keyword{print}{format.pval}
%
\begin{Description}\relax
\code{format.pval} is intended for formatting p-values.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
format.pval(pv, digits = max(1, getOption("digits") - 2),
            eps = .Machine$double.eps, na.form = "NA")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{pv}] a numeric vector.
\item[\code{digits}] how many significant digits are to be used.
\item[\code{eps}] a numerical tolerance: see `Details'.
\item[\code{na.form}] character representation of \code{NA}s.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{format.pval} is mainly an auxiliary function for
\code{\LinkA{print.summary.lm}{print.summary.lm}} etc., and does separate formatting for
fixed, floating point and very small values; those less than
\code{eps} are formatted as \code{"< [eps]"} (where `[eps]'
stands for \code{format(eps, digits)}).
\end{Details}
%
\begin{Value}
A character vector.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
format.pval(c(stats::runif(5), pi^-100, NA))
format.pval(c(0.1, 0.0001, 1e-27))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{formatC}{Formatting Using C-style Formats}{formatC}
\aliasA{prettyNum}{formatC}{prettyNum}
\keyword{character}{formatC}
\keyword{print}{formatC}
%
\begin{Description}\relax
Formatting numbers individually and flexibly, using \code{C} style
format specifications.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
formatC(x, digits = NULL, width = NULL,
        format = NULL, flag = "", mode = NULL,
        big.mark = "", big.interval = 3L,
      small.mark = "", small.interval = 5L,
    decimal.mark = ".", preserve.width = "individual",
        zero.print = NULL, drop0trailing = FALSE)

prettyNum(x, big.mark = "",   big.interval = 3L,
          small.mark = "", small.interval = 5L,
          decimal.mark = ".",
          preserve.width = c("common", "individual", "none"),
          zero.print = NULL, drop0trailing = FALSE, is.cmplx = NA, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an atomic numerical or character object, possibly
\code{\LinkA{complex}{complex}} only for \code{prettyNum()}, typically a
vector of real numbers.

\item[\code{digits}] the desired number of digits after the decimal
point (\code{format = "f"}) or \emph{significant} digits
(\code{format = "g"}, \code{= "e"} or \code{= "fg"}).

Default: 2 for integer, 4 for real numbers.  If less than 0,
the C default of 6 digits is used.  If specified as more than 50, 50
will be used with a warning unless \code{format = "f"} where it is
limited to typically 324. (Not more than 15--21 digits need be
accurate, depending on the OS and compiler used.  This limit is
just a precaution against segfaults in the underlying C runtime.)


\item[\code{width}] the total field width; if both \code{digits} and
\code{width} are unspecified, \code{width} defaults to 1,
otherwise to \code{digits + 1}.  \code{width = 0} will use
\code{width = digits}, \code{width < 0} means left
justify the number in this field (equivalent to \code{flag ="-"}).
If necessary, the result will have more characters than
\code{width}.  For character data this is interpreted in characters
(not bytes nor display width).


\item[\code{format}] equal to \code{"d"}  (for integers), \code{"f"},
\code{"e"}, \code{"E"}, \code{"g"}, \code{"G"}, \code{"fg"} (for
reals), or \code{"s"} (for strings).  Default is \code{"d"} for
integers, \code{"g"} for reals.

\code{"f"} gives numbers in the usual
\code{xxx.xxx} format;  \code{"e"} and \code{"E"} give \code{n.ddde+nn} or
\code{n.dddE+nn} (scientific format); \code{"g"} and \code{"G"} put
\code{x[i]} into scientific format only if it saves space to do so.

\code{"fg"} uses fixed format as \code{"f"}, but \code{digits} as
the minimum number of \emph{significant} digits.  This can lead
to quite long result strings, see examples below.  Note that unlike
\code{\LinkA{signif}{signif}} this prints large numbers with
more significant digits than \code{digits}.  Trailing zeros are
\emph{dropped} in this format, unless \code{flag} contains
\code{"\#"}.

\item[\code{flag}] For \code{formatC}, a character string giving a
format modifier as in Kernighan and Ritchie (1988, page 243).
\code{"0"}  pads leading zeros; \code{"-"} does left adjustment,
others are \code{"+"}, \code{" "}, and \code{"\#"}.  There can be
more than one of these, in any order.


\item[\code{mode}] \code{"double"} (or \code{"real"}), \code{"integer"} or
\code{"character"}.
Default: Determined from the storage mode of \code{x}.

\item[\code{big.mark}] character; if not empty used as mark between every
\code{big.interval} decimals \emph{before} (hence \code{big}) the
decimal point.
\item[\code{big.interval}] see \code{big.mark} above; defaults to 3.
\item[\code{small.mark}] character; if not empty used as mark between every
\code{small.interval} decimals \emph{after} (hence \code{small}) the
decimal point.
\item[\code{small.interval}] see \code{small.mark} above; defaults to 5.
\item[\code{decimal.mark}] the character to be used to indicate the numeric
decimal point.
\item[\code{preserve.width}] string specifying if the string widths should
be preserved where possible in those cases where marks
(\code{big.mark} or \code{small.mark}) are added.  \code{"common"},
the default, corresponds to \code{\LinkA{format}{format}}-like behavior
whereas \code{"individual"} is the default in
\code{formatC()}.
\item[\code{zero.print}] logical, character string or \code{NULL} specifying
if and how \emph{zeros} should be formatted specially.  Useful for
pretty printing `sparse' objects.
\item[\code{drop0trailing}] logical, indicating if trailing zeros,
i.e., \code{"0"} \emph{after} the decimal mark, should be removed;
also drops \code{"e+00"} in exponential formats.
\item[\code{is.cmplx}] optional logical, to be used when \code{x} is
\code{"\LinkA{character}{character}"} to indicate if it stems from
\code{\LinkA{complex}{complex}} vector or not.  By default (\code{NA}),
\code{x} is checked to `look like' complex.
\item[\code{...}] arguments passed to \code{format}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If you set \code{format} it overrides the setting of \code{mode}, so
\code{formatC(123.45, mode="double", format="d")} gives \code{123}.

The rendering of scientific format is platform-dependent: some systems
use \code{n.ddde+nnn} or \code{n.dddenn} rather than \code{n.ddde+nn}.

\code{formatC} does not necessarily align the numbers on the decimal
point, so \code{formatC(c(6.11, 13.1), digits=2, format="fg")} gives
\code{c("6.1", " 13")}.  If you want common formatting for several
numbers, use \code{\LinkA{format}{format}}.

\code{prettyNum} is the utility function for prettifying \code{x}.
\code{x} can be complex (or \code{\LinkA{format}{format}(<complex>)}, here.  If
\code{x} is not a character, \code{format(x[i], ...)} is applied to
each element, and then it is left unchanged if all the other arguments
are at their defaults.  Note that \code{prettyNum(x)} may behave
unexpectedly if \code{x} is a \code{character} vector not resulting from
something like \code{format(<number>)}: in particular it assumes that
a period is a decimal mark.
\end{Details}
%
\begin{Value}
A character object of same size and attributes as \code{x}, in the
current locale's encoding.
Unlike \code{\LinkA{format}{format}}, each number is formatted individually.
Looping over each element of \code{x}, the C function
\code{sprintf(...)} is called for numeric inputs (inside the C
function \code{str\_signif}).

\code{formatC}: for character \code{x}, do simple (left or right)
padding with white space.
\end{Value}
%
\begin{Author}\relax
\code{formatC} was originally written by Bill Dunlap, later much
improved by Martin Maechler.
It was first adapted for \R{} by Friedrich Leisch.
\end{Author}
%
\begin{References}\relax
Kernighan, B. W. and Ritchie, D. M. (1988)
\emph{The C Programming Language.}  Second edition. Prentice Hall.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{format}{format}}.

\code{\LinkA{sprintf}{sprintf}} for more general C like formatting.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
xx  <- pi * 10^(-5:4)
cbind(format(xx, digits=4), formatC(xx))
cbind(formatC(xx, width = 9, flag = "-"))
cbind(formatC(xx, digits = 5, width = 8, format = "f", flag = "0"))
cbind(format(xx, digits=4), formatC(xx, digits = 4, format = "fg"))

formatC(    c("a", "Abc", "no way"), width = -7)  # <=> flag = "-"
formatC(c((-1:1)/0,c(1,100)*pi), width=8, digits=1)

xx <- c(1e-12,-3.98765e-10,1.45645e-69,1e-70,pi*1e37,3.44e4)
##       1        2             3        4      5       6
formatC(xx)
formatC(xx, format="fg")       # special "fixed" format.
formatC(xx[1:4], format="f", digits=75) #>> even longer strings

formatC(c(3.24, 2.3e-6), format="f", digits=11, drop0trailing=TRUE)

r <- c("76491283764.97430", "29.12345678901", "-7.1234", "-100.1","1123")
## American:
prettyNum(r, big.mark = ",")
## Some Europeans:
prettyNum(r, big.mark = "'", decimal.mark = ",")

(dd <- sapply(1:10, function(i)paste((9:0)[1:i],collapse="")))
prettyNum(dd, big.mark="'")

## examples of 'small.mark'
pN <- stats::pnorm(1:7, lower.tail = FALSE)
cbind(format (pN, small.mark = " ", digits = 15))
cbind(formatC(pN, small.mark = " ", digits = 17, format = "f"))

cbind(ff <- format(1.2345 + 10^(0:5), width = 11, big.mark = "'"))
## all with same width (one more than the specified minimum)

## individual formatting to common width:
fc <- formatC(1.234 + 10^(0:8), format="fg", width=11, big.mark = "'")
cbind(fc)

## complex numbers:
r <- 10.0000001; rv <- (r/10)^(1:10)
(zv <- (rv + 1i*rv))
op <- options(digits=7) ## (system default)
(pnv <- prettyNum(zv))
stopifnot(pnv == "1+1i", pnv == format(zv),
          pnv == prettyNum(zv, drop0trailing=TRUE))
## more digits change the picture:
options(digits=8)
head(fv <- format(zv), 3)
prettyNum(fv)
prettyNum(fv, drop0trailing=TRUE) # a bit nicer
options(op)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{formatDL}{Format Description Lists}{formatDL}
\keyword{print}{formatDL}
%
\begin{Description}\relax
Format vectors of items and their descriptions as 2-column
tables or LaTeX-style description lists.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
formatDL(x, y, style = c("table", "list"),
         width = 0.9 * getOption("width"), indent = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector giving the items to be described, or a list of
length 2 or a matrix with 2 columns giving both items and
descriptions.
\item[\code{y}] a vector of the same length as \code{x} with the
corresponding descriptions.  Only used if \code{x} does not already
give the descriptions.
\item[\code{style}] a character string specifying the rendering style of the
description information.  If \code{"table"}, a two-column table with
items and descriptions as columns is produced (similar to Texinfo's
\AsIs{@table} environment.  If \code{"list"}, a LaTeX-style tagged
description list is obtained. 
\item[\code{width}] a positive integer giving the target column for wrapping
lines in the output.
\item[\code{indent}] a positive integer specifying the indentation of the
second column in table style, and the indentation of continuation
lines in list style.  Must not be greater than \code{width/2}, and
defaults to \code{width/3} for table style and \code{width/9} for
list style.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
After extracting the vectors of items and corresponding descriptions
from the arguments, both are coerced to character vectors.

In table style, items with more than \code{indent - 3} characters are
displayed on a line of their own.
\end{Details}
%
\begin{Value}
a character vector with the formatted entries.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
## Use R to create the 'INDEX' for package 'splines' from its 'CONTENTS'
x <- read.dcf(file = system.file("CONTENTS", package = "splines"),
               fields = c("Entry", "Description"))
x <- as.data.frame(x)
writeLines(formatDL(x$Entry, x$Description))
## or equivalently: writeLines(formatDL(x))
## Same information in tagged description list style:
writeLines(formatDL(x$Entry, x$Description, style = "list"))
## or equivalently: writeLines(formatDL(x, style = "list"))

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{function}{Function Definition}{function}
\aliasA{return}{function}{return}
\keyword{programming}{function}
%
\begin{Description}\relax
These functions provide the base mechanisms for defining
new functions in the \R{} language.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
function( arglist ) expr
return(value)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{arglist}] Empty or one or more name or name=expression terms.
\item[\code{value}] An expression.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The names in an argument list can be back-quoted non-standard names
(see `\LinkA{backquote}{backquote}').

If \code{value} is missing, \code{NULL} is returned.  If it is a
single expression, the value of the evaluated expression is returned.
(The expression is evaluated as soon as \code{return} is called, in
the evaluation frame of the function and before any
\code{\LinkA{on.exit}{on.exit}} expression is evaluated.)

If the end of a function is reached without calling \code{return}, the
value of the last evaluated expression is returned.
\end{Details}
%
\begin{Section}{Warning}
Prior to \R{} 1.8.0, \code{value} could be a series of non-empty
expressions separated by commas.  In that case the value
returned is a list of the evaluated expressions, with names set to
the expressions where these are the names of \R{} objects.  That is,
\code{a=foo()} names the list component \code{a} and gives it the value
which results from evaluating \code{foo()}.

This has been deprecated (and a warning is given), as it was never
documented in S, and whether or not the list is named differs by S
versions.  Supply a (named) list \code{value} instead.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{args}{args}} and \code{\LinkA{body}{body}} for accessing the arguments
and body of a function.

\code{\LinkA{debug}{debug}} for debugging; using \code{\LinkA{invisible}{invisible}} inside
\code{return(.)} for returning \emph{invisibly}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
norm <- function(x) sqrt(x%*%x)
norm(1:4)

## An anonymous function:
(function(x,y){ z <- x^2 + y^2; x+y+z })(0:7, 1)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{funprog}{Common Higher-Order Functions in Functional Programming Languages}{funprog}
\aliasA{Filter}{funprog}{Filter}
\aliasA{Find}{funprog}{Find}
\aliasA{Map}{funprog}{Map}
\aliasA{Negate}{funprog}{Negate}
\aliasA{Position}{funprog}{Position}
\aliasA{Reduce}{funprog}{Reduce}
\keyword{programming}{funprog}
%
\begin{Description}\relax
\code{Reduce} uses a binary function to successively combine the
elements of a given vector and a possibly given initial value.
\code{Filter} extracts the elements of a vector for which a predicate
(logical) function gives true.  \code{Find} and \code{Position} give
the first or last such element and its position in the vector,
respectively.  \code{Map} applies a function to the corresponding
elements of given vectors.  \code{Negate} creates the negation of a
given function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Reduce(f, x, init, right = FALSE, accumulate = FALSE)
Filter(f, x)
Find(f, x, right = FALSE, nomatch = NULL)
Map(f, ...)
Negate(f)
Position(f, x, right = FALSE, nomatch = NA_integer_)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{f}] a function of the appropriate arity (binary for
\code{Reduce}, unary for \code{Filter}, \code{Find} and
\code{Position}, \eqn{k}{}-ary for \code{Map} if this is called with
\eqn{k}{} arguments).  An arbitrary predicate function for
\code{Negate}.
\item[\code{x}] a vector.
\item[\code{init}] an \R{} object of the same kind as the elements of
\code{x}.
\item[\code{right}] a logical indicating whether to proceed from left to
right (default) or from right to left.
\item[\code{accumulate}] a logical indicating whether the successive reduce
combinations should be accumulated.  By default, only the final
combination is used.
\item[\code{nomatch}] the value to be returned in the case when
``no match'' (no element satisfying the predicate) is found.
\item[\code{...}] vectors.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{init} is given, \code{Reduce} logically adds it to the start
(when proceeding left to right) or the end of \code{x}, respectively.
If this possibly augmented vector \eqn{v}{} has \eqn{n > 1}{} elements,
\code{Reduce} successively applies \eqn{f}{} to the elements of \eqn{v}{}
from left to right or right to left, respectively.  I.e., a left
reduce computes \eqn{l_1 = f(v_1, v_2)}{}, \eqn{l_2 = f(l_1, v_3)}{}, etc.,
and returns \eqn{l_{n-1} = f(l_{n-2}, v_n)}{}, and a right reduce does
\eqn{r_{n-1} = f(v_{n-1}, v_n)}{}, \eqn{r_{n-2} = f(v_{n-2}, r_{n-1})}{}
and returns \eqn{r_1 = f(v_1, r_2)}{}.  (E.g., if \eqn{v}{} is the
sequence (2, 3, 4) and \eqn{f}{} is division, left and right reduce give
\eqn{(2 / 3) / 4 = 1/6}{} and \eqn{2 / (3 / 4) = 8/3}{}, respectively.)
If \eqn{v}{} has only a single element, this is returned; if there are
no elements, \code{NULL} is returned.  Thus, it is ensured that
\code{f} is always called with 2 arguments.

The current implementation is non-recursive to ensure stability and
scalability.

\code{Reduce} is patterned after Common Lisp's \code{reduce}.  A
reduce is also known as a fold (e.g., in Haskell) or an accumulate
(e.g., in the C++ Standard Template Library).  The accumulative
version corresponds to Haskell's scan functions.

\code{Filter} applies the unary predicate function \code{f} to each
element of \code{x}, coercing to logical if necessary, and returns the
subset of \code{x} for which this gives true.  Note that possible
\code{NA} values are currently always taken as false; control over
\code{NA} handling may be added in the future.  \code{Filter}
corresponds to \code{filter} in Haskell or \code{remove-if-not} in
Common Lisp.

\code{Find} and \code{Position} are patterned after Common Lisp's
\code{find-if} and \code{position-if}, respectively.  If there is an
element for which the predicate function gives true, then the first or
last such element or its position is returned depending on whether
\code{right} is false (default) or true, respectively.  If there is no
such element, the value specified by \code{nomatch} is returned.  The
current implementation is not optimized for performance.

\code{Map} is a simple wrapper to \code{\LinkA{mapply}{mapply}} which does not
attempt to simplify the result, similar to Common Lisp's \code{mapcar}
(with arguments being recycled, however).  Future versions may allow
some control of the result type.

\code{Negate} corresponds to Common Lisp's \code{complement}.  Given a
(predicate) function \code{f}, it creates a function which returns the
logical negation of what \code{f} returns.
\end{Details}
%
\begin{Examples}
\begin{ExampleCode}
## A general-purpose adder:
add <- function(x) Reduce("+", x)
add(list(1, 2, 3))
## Like sum(), but can also used for adding matrices etc., as it will
## use the appropriate '+' method in each reduction step.
## More generally, many generics meant to work on arbitrarily many
## arguments can be defined via reduction:
FOO <- function(...) Reduce(FOO2, list(...))
FOO2 <- function(x, y) UseMethod("FOO2")
## FOO() methods can then be provided via FOO2() methods.

## A general-purpose cumulative adder:
cadd <- function(x) Reduce("+", x, accumulate = TRUE)
cadd(seq_len(7))

## A simple function to compute continued fractions:
cfrac <- function(x) Reduce(function(u, v) u + 1 / v, x, right = TRUE)
## Continued fraction approximation for pi:
cfrac(c(3, 7, 15, 1, 292))
## Continued fraction approximation for Euler's number (e):
cfrac(c(2, 1, 2, 1, 1, 4, 1, 1, 6, 1, 1, 8))

## Iterative function application:
Funcall <- function(f, ...) f(...)
## Compute log(exp(acos(cos(0))
Reduce(Funcall, list(log, exp, acos, cos), 0, right = TRUE)
## n-fold iterate of a function, functional style:
Iterate <- function(f, n = 1)
    function(x) Reduce(Funcall, rep.int(list(f), n), x, right = TRUE)
## Continued fraction approximation to the golden ratio:
Iterate(function(x) 1 + 1 / x, 30)(1)
## which is the same as
cfrac(rep.int(1, 31))
## Computing square root approximations for x as fixed points of the
## function t |-> (t + x / t) / 2, as a function of the initial value:
asqrt <- function(x, n) Iterate(function(t) (t + x / t) / 2, n)
asqrt(2, 30)(10) # Starting from a positive value => +sqrt(2)
asqrt(2, 30)(-1) # Starting from a negative value => -sqrt(2)

## A list of all functions in the base environment:
funs <- Filter(is.function, sapply(ls(baseenv()), get, baseenv()))
## Functions in base with more than 10 arguments:
names(Filter(function(f) length(formals(args(f))) > 10, funs))
## Number of functions in base with a '...' argument:
length(Filter(function(f)
              any(names(formals(args(f))) %in% "..."),
              funs))

## Find all objects in the base environment which are *not* functions:
Filter(Negate(is.function),  sapply(ls(baseenv()), get, baseenv()))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{gc}{Garbage Collection}{gc}
\aliasA{gcinfo}{gc}{gcinfo}
\keyword{environment}{gc}
%
\begin{Description}\relax
A call of \code{gc} causes a garbage collection to take place.
\code{gcinfo} sets a flag so that
automatic collection is either silent (\code{verbose=FALSE}) or
prints memory usage statistics (\code{verbose=TRUE}).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
gc(verbose = getOption("verbose"), reset=FALSE)
gcinfo(verbose)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{verbose}] logical; if \code{TRUE}, the garbage collection prints
statistics about cons cells and the space allocated for vectors.
\item[\code{reset}] logical; if \code{TRUE} the values for maximum space used
are reset to the current values.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A call of \code{gc} causes a garbage collection to take place.
This will also take place automatically without user intervention, and the
primary purpose of calling \code{gc} is for the report on memory usage.

However, it can be useful to call \code{gc} after a large object
has been removed, as this may prompt \R{} to return memory to the
operating system.

\R{} allocates space for vectors in multiples of 8 bytes: hence the
report of \code{"Vcells"}, a relict of an earlier allocator (that used
a vector heap).

When \code{gcinfo(TRUE)} is in force, messages are sent to the message
connection at each garbage collection of the form
\begin{alltt}
    Garbage collection 12 = 10+0+2 (level 0) ...
    6.4 Mbytes of cons cells used (58%)
    2.0 Mbytes of vectors used (32%)
  \end{alltt}

Here the last two lines give the current memory usage rounded up to
the next 0.1Mb and as a percentage of the current trigger value.
The first line gives a breakdown of the number of garbage collections
at various levels (for an explanation see the `R Internals' manual).
\end{Details}
%
\begin{Value}
\code{gc} returns a matrix with rows \code{"Ncells"} (\emph{cons
cells}), usually 28 bytes each on 32-bit systems and 56 bytes on
64-bit systems, and \code{"Vcells"} (\emph{vector cells}, 8 bytes
each), and columns \code{"used"} and \code{"gc trigger"},
each also interpreted in megabytes (rounded up to the next 0.1Mb).

If maxima have been set for either \code{"Ncells"} or \code{"Vcells"},
a fifth column is printed giving the current limits in Mb (with
\code{NA} denoting no limit).

The final two columns show the maximum space used since the last call
to \code{gc(reset=TRUE)} (or since \R{} started).

\code{gcinfo} returns the previous value of the flag.
\end{Value}
%
\begin{SeeAlso}\relax
The `R Internals' manual.

\code{\LinkA{Memory}{Memory}} on \R{}'s memory management,
and \code{\LinkA{gctorture}{gctorture}} if you are an \R{} developer.

\code{\LinkA{reg.finalizer}{reg.finalizer}} for actions to happen at garbage
collection.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
gc() #- do it now
gcinfo(TRUE) #-- in the future, show when R does it
x <- integer(100000); for(i in 1:18) x <- c(x,i)
gcinfo(verbose = FALSE)#-- don't show it anymore

gc(TRUE)

gc(reset=TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{gc.time}{Report Time Spent in Garbage Collection}{gc.time}
\keyword{utilities}{gc.time}
%
\begin{Description}\relax
This function reports the time spent in garbage collection so far in
the \R{} session while GC timing was enabled.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
gc.time(on = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{on}] logical; if \code{TRUE}, GC timing is enabled.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A numerical vector of length 5 giving the user CPU time, the system
CPU time, the elapsed time and children's user and system CPU times
(normally both zero), of time spent doing garbage collection whilst
GC timing was enabled.
\end{Value}
%
\begin{Section}{Warnings}
This is experimental functionality, likely to be removed as soon as
the next release.

The timings are rounded up by the sampling interval for timing
processes, and so are likely to be over-estimates.

It is a \LinkA{primitive}{primitive} and so ignores any argument name.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{gc}{gc}},
\code{\LinkA{proc.time}{proc.time}} for the timings for the session.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
gc.time()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{gctorture}{Torture Garbage Collector}{gctorture}
\keyword{environment}{gctorture}
%
\begin{Description}\relax
Provokes garbage collection on (nearly) every memory allocation.
Intended to ferret out memory protection bugs.  Also makes \R{} run
\emph{very} slowly, unfortunately.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
gctorture(on = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{on}] logical; turning it on/off.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
Previous value.
\end{Value}
%
\begin{Author}\relax
Peter Dalgaard
\end{Author}
\inputencoding{latin1}
\HeaderA{get}{Return the Value of a Named Object}{get}
\aliasA{mget}{get}{mget}
\keyword{data}{get}
%
\begin{Description}\relax
Search for an \R{} object with a given name and return it.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
get(x, pos = -1, envir = as.environment(pos), mode = "any",
    inherits = TRUE)

mget(x, envir, mode = "any",
     ifnotfound = list(function(x)
         stop(paste("value for '", x, "' not found", sep = ""),
              call. = FALSE)),
     inherits = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a variable name (given as a character string).
\item[\code{pos}] where to look for the object (see the details section); if
omitted, the function will search as if the name of the object
appeared unquoted in an expression.
\item[\code{envir}] an alternative way to specify an environment to look in;
see the `Details' section.
\item[\code{mode}] the mode or type of object sought: see the
`Details' section.
\item[\code{inherits}] should the enclosing frames of the environment be
searched?
\item[\code{ifnotfound}] A \code{\LinkA{list}{list}} of values to be used if the item is
not found: it will be coerced to list if necessary.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{pos} argument can specify the environment in which to look
for the object in any of several ways: as an integer (the position in
the \code{\LinkA{search}{search}} list); as the character string name of an
element in the search list; or as an \code{\LinkA{environment}{environment}}
(including using \code{\LinkA{sys.frame}{sys.frame}} to access the currently active
function calls).  The \code{envir} argument is an alternative way to
specify an environment, but is primarily there for back compatibility.

This function looks to see if the name \code{x} has a value bound to
it in the specified environment. If \code{inherits} is \code{TRUE} and
a value is not found for \code{x} in the specified environment, the
enclosing frames of the environment are searched until the name \code{x}
is encountered.  See \code{\LinkA{environment}{environment}} and the `R
Language Definition' manual for details about the structure of
environments and their enclosures.

\bold{Warning:}
\code{inherits = TRUE} is the default behaviour for \R{} but not for S.

If \code{mode} is specified then only objects of that type are sought.
The \code{mode} may specify one of the collections \code{"numeric"} and
\code{"function"} (see \code{\LinkA{mode}{mode}}): any member of the
collection will suffice.

Using a \code{NULL} environment is equivalent to using the current
environment.

For \code{mget} multiple values are returned in a named
\code{list}.  This is true even if only one value is requested. The
value in \code{mode} and \code{ifnotfound} can be either the same length
as the number of requested items or of length 1.  The argument
\code{ifnotfound} must be a list containing either the value to use if
the requested item is not found or a function of one argument which
will be called if the item is not found, with argument the name of
the item being requested.  The default value for \code{inherits} is
\code{FALSE}, in contrast to the default behavior for \code{get}.

\code{mode} here is a mixture of the meanings of \code{\LinkA{typeof}{typeof}}
and \code{\LinkA{mode}{mode}}:  \code{"function"} covers primitive functions
and operators, \code{"numeric"}, \code{"integer"}, \code{"real"}
and \code{"double"} all refer to any numeric type, \code{"symbol"} and
\code{"name"} are equivalent \emph{but} \code{"language"} must be used.
\end{Details}
%
\begin{Value}
The object found.  (If no object is found an error results.)
\end{Value}
%
\begin{Note}\relax
The reverse of \code{a <- get(nam)} is \code{\LinkA{assign}{assign}(nam, a)}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{exists}{exists}}, \code{\LinkA{assign}{assign}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
get("%o%")

##test mget
e1 <- new.env()
mget(letters, e1, ifnotfound = as.list(LETTERS))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{getDLLRegisteredRoutines}{Reflectance Information for C/Fortran routines in a DLL}{getDLLRegisteredRoutines}
\methaliasA{getDLLRegisteredRoutines.character}{getDLLRegisteredRoutines}{getDLLRegisteredRoutines.character}
\methaliasA{getDLLRegisteredRoutines.DLLInfo}{getDLLRegisteredRoutines}{getDLLRegisteredRoutines.DLLInfo}
\aliasA{print.DLLRegisteredRoutines}{getDLLRegisteredRoutines}{print.DLLRegisteredRoutines}
\aliasA{print.NativeRoutineList}{getDLLRegisteredRoutines}{print.NativeRoutineList}
\keyword{interface}{getDLLRegisteredRoutines}
%
\begin{Description}\relax
This function allows us to query the set of routines
in a DLL that are registered with R to enhance
dynamic lookup, error handling when calling native routines,
and potentially security in the future.
This function provides a description of each of the
registered routines in the DLL for the different interfaces,
i.e. \code{\LinkA{.C}{.C}}, \code{\LinkA{.Call}{.Call}}, \code{\LinkA{.Fortran}{.Fortran}}
and \code{\LinkA{.External}{.External}}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getDLLRegisteredRoutines(dll, addNames = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{dll}] a character string or \code{DLLInfo} object.
The character string specifies the file name of the DLL
of interest, and is given without the file name extension (e.g., the
\file{.dll} or \file{.so}) and with no directory/path information.
So a file \file{MyPackage/libs/MyPackage.so} would be specified as
\samp{MyPackage}.

The \code{DLLInfo} objects can be obtained directly
in calls to \code{\LinkA{dyn.load}{dyn.load}} and  \code{\LinkA{library.dynam}{library.dynam}},
or can be found after the DLL has been loaded using
\code{\LinkA{getLoadedDLLs}{getLoadedDLLs}}, which returns a list of
\code{DLLInfo} objects (index-able by DLL file name).

The \code{DLLInfo} approach avoids any ambiguities related to two
DLLs having the same name but corresponding to files in different
directories.

\item[\code{addNames}] a logical value. If this is \code{TRUE}, the elements
of the returned lists are named using the names of the routines (as
seen by R via registration or raw name).  If \code{FALSE},
these names are not computed and assigned to the lists.  As a
result, the call should be quicker.  The name information is also
available in the \code{NativeSymbolInfo} objects in the lists.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This takes the registration information after it has been registered
and processed by the R internals. In other words, it uses the extended
information
\end{Details}
%
\begin{Value}
A list with four elements corresponding to the routines
registered for the .C, .Call, .Fortran and .External interfaces.
Each element is a list with as many elements as there were
routines registered for that interface.
Each element identifies a routine and is an object
of class \code{NativeSymbolInfo}.
An object of this class has the following fields:
\begin{ldescription}
\item[\code{name}] the registered name of the routine (not necessarily the
name in the C code).
\item[\code{address}] the memory address of the routine as resolved in the
loaded DLL. This may be \code{NULL} if the symbol has not yet been
resolved.
\item[\code{dll}] an object of class \code{DLLInfo} describing the DLL.
This is same for all elements returned.
\item[\code{numParameters}] the number of arguments the native routine is to
be called with. In the future, we will provide information about
the types of the parameters also.

\end{ldescription}
\end{Value}
%
\begin{Author}\relax
Duncan Temple Lang \email{duncan@wald.ucdavis.edu}
\end{Author}
%
\begin{References}\relax
"Writing R Extensions Manual" for symbol registration.
R News, Volume 1/3, September 2001.   "In search of C/C++ \& Fortran Symbols"
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{getLoadedDLLs}{getLoadedDLLs}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
dlls <- getLoadedDLLs()
getDLLRegisteredRoutines(dlls[["base"]])

getDLLRegisteredRoutines("stats")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{getLoadedDLLs}{Get DLLs Loaded in Current Session}{getLoadedDLLs}
\aliasA{\$.DLLInfo}{getLoadedDLLs}{.Rdol..DLLInfo}
\aliasA{print.DLLInfo}{getLoadedDLLs}{print.DLLInfo}
\aliasA{print.DLLInfoList}{getLoadedDLLs}{print.DLLInfoList}
\keyword{interface}{getLoadedDLLs}
%
\begin{Description}\relax
This function provides a way to get a list of all the DLLs (see
\code{\LinkA{dyn.load}{dyn.load}}) that are currently loaded in the \R{} session.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getLoadedDLLs()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
This queries the internal table that manages the DLLs.
\end{Details}
%
\begin{Value}
An object of class \code{"DLLInfoList"} which is a list with an
element corresponding to each DLL that is currently loaded in the
session.  Each element is an object of class \code{"DLLInfo"} which
has the following entries.

\begin{ldescription}
\item[\code{name}] the abbreviated name.
\item[\code{path}] the fully qualified name of the loaded DLL.
\item[\code{dynamicLookup}] a logical value indicating whether R uses only
the registration information to resolve symbols or whether it
searches the entire symbol table of the DLL.
\item[\code{handle}] a reference to the C-level data structure that
provides access to the contents of the DLL.
This is an object of class \code{"DLLHandle"}.

\end{ldescription}
Note that the class \code{DLLInfo} has an overloaded method for
\code{\$} which can be used to resolve native symbols within that
DLL.  Therefore, one must access the R-level elements described
above using \code{[[}, e.g. \code{x[["name"]]} or \code{x[["handle"]]}.
\end{Value}
%
\begin{Note}\relax
We are starting to use the \code{handle} elements in the DLL object to
resolve symbols more directly in \R{}.
\end{Note}
%
\begin{Author}\relax
Duncan Temple Lang \email{duncan@wald.ucdavis.edu}.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{getDLLRegisteredRoutines}{getDLLRegisteredRoutines}},
\code{\LinkA{getNativeSymbolInfo}{getNativeSymbolInfo}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
getLoadedDLLs()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{getNativeSymbolInfo}{Obtain a Description of one or more Native (C/Fortran) Symbols}{getNativeSymbolInfo}
\aliasA{NativeSymbol}{getNativeSymbolInfo}{NativeSymbol}
\aliasA{NativeSymbolInfo}{getNativeSymbolInfo}{NativeSymbolInfo}
\aliasA{RegisteredNativeSymbol}{getNativeSymbolInfo}{RegisteredNativeSymbol}
\keyword{interface}{getNativeSymbolInfo}
%
\begin{Description}\relax
This finds and returns as comprehensive a description of one or more
dynamically loaded or `exported' built-in native symbols.  For
each name, it returns information about the name of the symbol, the
library in which it is located and, if available, the number of
arguments it expects and by which interface it should be called (i.e
\code{\LinkA{.Call}{.Call}}, \code{\LinkA{.C}{.C}}, \code{\LinkA{.Fortran}{.Fortran}}, or
\code{\LinkA{.External}{.External}}). Additionally, it returns the address of the
symbol and this can be passed to other C routines which can
invoke. Specifically, this provides a way to explicitly share symbols
between different dynamically loaded package libraries. Also, it
provides a way to query where symbols were resolved, and aids
diagnosing strange behavior associated with dynamic resolution.

This is vectorized in the \code{name} argument so can process
multiple symbols in a single call.  The result is a list that can be
indexed by the given symbol names.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getNativeSymbolInfo(name, PACKAGE, unlist = TRUE,
                    withRegistrationInfo = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] the name(s) of the native symbol(s) as used in a call
to \code{\LinkA{is.loaded}{is.loaded}}, etc.  Note that Fortran symbols should be
supplied as-is, not wrapped in \code{symbol.For}.

\item[\code{PACKAGE}] an optional argument that specifies to which
DLL we restrict the search for this symbol.  If this is
\code{"base"}, we search in the \R{} executable itself.
\item[\code{unlist}] a logical value which controls how the result is
returned if the function is called with the name of a single symbol.
If \code{unlist} is \code{TRUE} and the number of symbol names in
\code{name} is one, then the \code{NativeSymbolInfo} object
is returned.  If it is \code{FALSE}, then a list
of \code{NativeSymbolInfo} objects is returned.
This is ignored if the number of symbols passed in \code{name} is
more than one. 
To be compatible with earlier versions of this function, this
defaults to \code{TRUE}.

\item[\code{withRegistrationInfo}] a logical value indicating whether, if
\code{TRUE}, to return information that was registered with \R{} about
the symbol and its parameter types if such information is available,
or if \code{FALSE} to return the address of the symbol.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This uses the same mechanism for resolving symbols as is used
in all the native interfaces (\code{\LinkA{.Call}{.Call}}, etc.).
If the symbol has been explicitly registered by the DLL
in which it is contained, information about the number of arguments
and the interface by which it should be called will be returned.
Otherwise, a generic native symbol object is returned.
\end{Details}
%
\begin{Value}
Generally, a list of \code{NativeSymbolInfo} elements whose elements
can be indexed by the elements of \code{name}  in the call.  Each
\code{NativeSymbolInfo} object is a list containing the following
elements:
\begin{ldescription}
\item[\code{name}] the name of the symbol, as given by the
\code{name} argument.
\item[\code{address}] if \code{withRegistrationInfo} is \code{FALSE},
this is the native memory address of the symbol which can
be used to invoke the routine, and also to
compare with other symbol addresses.  This is an external pointer
object and of class \code{NativeSymbol}.
If \code{withRegistrationInfo} is \code{TRUE} and registration
information is available for the symbol, then this is
an object of class \code{RegisteredNativeSymbol} and is a reference
to an internal data type that has access to the routine pointer and
registration information. This too can be used in calls to
\code{\LinkA{.Call}{.Call}}, \code{\LinkA{.C}{.C}}, \code{\LinkA{.Fortran}{.Fortran}} and
\code{\LinkA{.External}{.External}}.

\item[\code{package}] a list containing 3 elements:
\begin{description}

\item[name] the short form of the library name which can be used
as the value of the \code{PACKAGE} argument in
the different native interface functions.
\item[path] the fully qualified name of the DLL.
\item[dynamicLookup] a logical value indicating whether dynamic
resolution is used when looking for symbols in this library,
or only registered routines can be located.

\end{description}
    

\end{ldescription}
If the routine was explicitly registered by the dynamically loaded
library, the list contains a fourth field
\begin{ldescription}
\item[\code{numParameters}] the number of arguments that should be passed in
a call to this routine.
\end{ldescription}
Additionally, the list will have an additional class,
being \code{CRoutine}, \code{CallRoutine}, \code{FortranRoutine} or
\code{ExternalRoutine} corresponding to the R interface by which it
should be invoked.

If any of the symbols is not found, an error is immediately raised.

If \code{name} contains only one symbol name and \code{unlist} is
\code{TRUE}, then the single \code{NativeSymbolInfo} is returned
rather than the list containing that one element.
\end{Value}
%
\begin{Note}\relax
One motivation for accessing this reflectance information is to be
able to pass native routines to C routines as function pointers in C.
This allows us to treat native routines and \R{} functions in a similar
manner, such as when passing an \R{} function to C code that makes
callbacks to that function at different points in its computation
(e.g., \code{\LinkA{nls}{nls}}).  Additionally, we can resolve the symbol
just once and avoid resolving it repeatedly or using the internal
cache.  In the future, one may be able to treat \code{NativeSymbol}
objects directly as callback objects.
\end{Note}
%
\begin{Author}\relax
Duncan Temple Lang
\end{Author}
%
\begin{References}\relax
For information about registering native routines,
see ``In Search of C/C++ \& FORTRAN Routines'',
R-News, volume 1, number 3, 2001, p20--23
(\url{http://CRAN.R-project.org/doc/Rnews/}).  
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{getDLLRegisteredRoutines}{getDLLRegisteredRoutines}},
\code{\LinkA{is.loaded}{is.loaded}},
\code{\LinkA{.C}{.C}},
\code{\LinkA{.Fortran}{.Fortran}},
\code{\LinkA{.External}{.External}},
\code{\LinkA{.Call}{.Call}},
\code{\LinkA{dyn.load}{dyn.load}}.  
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
library(stats) # normally loaded
getNativeSymbolInfo("dansari")

getNativeSymbolInfo("hcass2")  # a Fortran symbol
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{gettext}{Translate Text Messages}{gettext}
\aliasA{bindtextdomain}{gettext}{bindtextdomain}
\aliasA{ngettext}{gettext}{ngettext}
\keyword{utilities}{gettext}
\keyword{character}{gettext}
%
\begin{Description}\relax
If Native Language Support was enabled in this build of \R{}, attempt to
translate character vectors or set where the translations are to be found.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
gettext(..., domain = NULL)

ngettext(n, msg1, msg2, domain = NULL)

bindtextdomain(domain, dirname = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] One or more character vectors.
\item[\code{domain}] The `domain' for the translation.
\item[\code{n}] a non-negative integer.
\item[\code{msg1}] the message to be used in English for \code{n = 1}.
\item[\code{msg2}] the message to be used in English for \code{n = 0, 2, 3,...}.
\item[\code{dirname}] The directory in which to find translated message
catalogs for the domain.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{domain} is \code{NULL} or \code{""}, a domain is searched for
based on the name space which contains the function calling
\code{gettext} or \code{ngettext}.  If a suitable domain can be found,
each character string is offered for translation, and replaced by its
translation into the current language if one is found.

Conventionally the domain for \R{} warning/error messages in package
\pkg{pkg} is \code{"R-pkg"}, and that for C-level messages is \code{"pkg"}.

For \code{gettext}, leading and trailing whitespace is ignored when
looking for the translation.

\code{ngettext} is used where the message needs to vary by a single
integer.  Translating such messages is subject to very specific rules
for different languages: see the GNU Gettext Manual.  The string
will often contain a single instance of \code{\%d} to be used in
\code{\LinkA{sprintf}{sprintf}}.  If English is used, \code{msg1} is returned if
\code{n == 1} and \code{msg2} in all other cases.
\end{Details}
%
\begin{Value}
For \code{gettext}, a character vector, one element per string in
\code{...}.  If translation is not enabled or no domain is found or
no translation is found in that domain, the original strings are
returned.

For \code{ngettext}, a character string.

For \code{bindtextdomain}, a character string giving the current base
directory, or \code{NULL} if setting it failed.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{stop}{stop}} and \code{\LinkA{warning}{warning}} make use of \code{gettext} to
translate messages.

\code{\LinkA{xgettext}{xgettext}} for extracting translatable strings from \R{}
source files. 
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
bindtextdomain("R")  # non-null if and only if NLS is enabled

for(n in 0:3)
    print(sprintf(ngettext(n, "%d variable has missing values",
                              "%d variables have missing values"),
                  n))

## Not run: ## for translation, those strings should appear in R-pkg.pot as
msgid        "%d variable has missing values"
msgid_plural "%d variables have missing values"
msgstr[0] ""
msgstr[1] ""

## End(Not run)

miss <- c("one", "or", "another")
cat(ngettext(length(miss), "variable", "variables"),
    paste(sQuote(miss), collapse=", "),
    ngettext(length(miss), "contains", "contain"), "missing values\n")

## better for translators would be to use
cat(sprintf(ngettext(length(miss),
                     "variable %s contains missing values\n",
                     "variables %s contain missing values\n"),
            paste(sQuote(miss), collapse=", ")))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{getwd}{Get or Set Working Directory}{getwd}
\aliasA{setwd}{getwd}{setwd}
\keyword{utilities}{getwd}
%
\begin{Description}\relax
\code{getwd} returns an absolute filename representing the current
working directory of the \R{} process; \code{setwd(dir)} is used to set
the working directory to \code{dir}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getwd()
setwd(dir)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{dir}] A character string.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
\code{getwd} returns a character vector, or \code{NULL} if the working
directory is not available.  On Windows the path returned will use
\code{/} as the path separator.  The path will not have a trailing
\code{/} unless it is the root directory (of a drive or share on
Windows).

\code{setwd} returns the current directory before the change,
invisibly.  It will give an error if it does not succeed.
\end{Value}
%
\begin{Note}\relax
These functions are not implemented on all platforms.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{list.files}{list.files}} for the \emph{contents} of a directory.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(WD <- getwd())
if (!is.null(WD)) setwd(WD)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{gl}{Generate Factor Levels}{gl}
\keyword{category}{gl}
\keyword{arith}{gl}
%
\begin{Description}\relax
Generate factors by specifying the pattern of their levels.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
gl(n, k, length = n*k, labels = 1:n, ordered = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{n}] an integer giving the number of levels.
\item[\code{k}] an integer giving the number of replications.
\item[\code{length}] an integer giving the length of the result.
\item[\code{labels}] an optional vector of labels for the resulting factor
levels.
\item[\code{ordered}] a logical indicating whether the result should be
ordered or not.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
The result has levels from \code{1} to \code{n} with each value
replicated in groups of length \code{k} out to a total length of
\code{length}.

\code{gl} is modelled on the \emph{GLIM} function of the same name.
\end{Value}
%
\begin{SeeAlso}\relax
The underlying \code{\LinkA{factor}{factor}()}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## First control, then treatment:
gl(2, 8, labels = c("Control", "Treat"))
## 20 alternating 1s and 2s
gl(2, 1, 20)
## alternating pairs of 1s and 2s
gl(2, 2, 20)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{grep}{Pattern Matching and Replacement}{grep}
\aliasA{gregexpr}{grep}{gregexpr}
\aliasA{grepl}{grep}{grepl}
\aliasA{gsub}{grep}{gsub}
\aliasA{regexpr}{grep}{regexpr}
\aliasA{sub}{grep}{sub}
\keyword{character}{grep}
\keyword{utilities}{grep}
%
\begin{Description}\relax
\code{grep}, \code{grepl}, \code{regexpr} and \code{gregexpr} search
for matches to argument \code{pattern} within a character vector: they
differ in the format of and amount of detail in the results.

\code{sub} and \code{gsub} perform replacement of the first and all
matches respectively.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
grep(pattern, x, ignore.case = FALSE, extended = TRUE,
     perl = FALSE, value = FALSE, fixed = FALSE, useBytes = FALSE,
     invert = FALSE)

grepl(pattern, x, ignore.case = FALSE, extended = TRUE,
     perl = FALSE, fixed = FALSE, useBytes = FALSE)

sub(pattern, replacement, x,
    ignore.case = FALSE, extended = TRUE, perl = FALSE,
    fixed = FALSE, useBytes = FALSE)

gsub(pattern, replacement, x,
     ignore.case = FALSE, extended = TRUE, perl = FALSE,
     fixed = FALSE, useBytes = FALSE)

regexpr(pattern, text, ignore.case = FALSE, extended = TRUE,
        perl = FALSE, fixed = FALSE, useBytes = FALSE)

gregexpr(pattern, text, ignore.case = FALSE, extended = TRUE,
         perl = FALSE, fixed = FALSE, useBytes = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{pattern}] character string containing a \LinkA{regular expression}{regular expression}
(or character string for \code{fixed = TRUE}) to be matched
in the given character vector.  Coerced by
\code{\LinkA{as.character}{as.character}} to a character string if possible.  If a
character vector of length 2 or more is supplied, the first element
is used with a warning.  Missing values are allowed except for
\code{regexpr} and \code{gregexpr}.
\item[\code{x, text}] a character vector where matches are sought, or an
object which can be coerced by \code{as.character} to a character vector.
\item[\code{ignore.case}] if \code{FALSE}, the pattern matching is \emph{case
sensitive} and if \code{TRUE}, case is ignored during matching.
\item[\code{extended}] if \code{TRUE}, extended regular expression matching
is used, and if \code{FALSE} basic regular expressions are used: the
latter are deprecated.
\item[\code{perl}] logical. Should perl-compatible regexps be used?
Has priority over \code{extended}.
\item[\code{value}] if \code{FALSE}, a vector containing the (\code{integer})
indices of the matches determined by \code{grep} is returned, and if
\code{TRUE}, a vector containing the matching elements themselves is
returned.
\item[\code{fixed}] logical.  If \code{TRUE}, \code{pattern} is a string to be
matched as is.  Overrides all conflicting arguments.
\item[\code{useBytes}] logical.  If \code{TRUE} the matching is done
byte-by-byte rather than character-by-character.  See
`Details'.
\item[\code{invert}] logical.  If \code{TRUE} return indices or values for
elements that do \emph{not} match.
\item[\code{replacement}] a replacement for matched pattern in \code{sub} and
\code{gsub}.  Coerced to character if possible.  For \code{fixed =
      FALSE} this can include backreferences \code{"\bsl{}1"} to
\code{"\bsl{}9"} to parenthesized subexpressions of \code{pattern}.  For
\code{perl = TRUE} only, it can also contain \code{"\bsl{}U"} or
\code{"\bsl{}L"} to convert the rest of the replacement to upper or
lower case and \code{"\bsl{}E"} to end case conversion.  If a
character vector of length 2 or more is supplied, the first element
is used with a warning.  If \code{NA}, all elements in the result
corresponding to matches will be set to \code{NA}.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Arguments which should be character strings or character vectors are
coerced to character if possible.

Each of these functions operates in one of four modes:
\begin{enumerate}

\item \code{fixed = TRUE}: use exact matching.
\item \code{perl = TRUE}: use Perl-style regular expressions.
\item \code{extended = FALSE}: use POSIX 1003.2 basic regular
expressions (this mode is deprecated).
\item Defaults for the above three arguments: use POSIX 1003.2
extended regular expressions.

\end{enumerate}

See the help pages on \LinkA{regular expression}{regular expression} for details of the
different types of regular expressions.

The two \code{*sub} functions differ only in that \code{sub} replaces
only the first occurrence of a \code{pattern} whereas \code{gsub}
replaces all occurrences.

For \code{regexpr} and \code{gregexpr} it is an error for
\code{pattern} to be \code{NA}, otherwise \code{NA} is permitted and
gives an \code{NA} match.

The main effect of \code{useBytes} is to avoid errors/warnings about
invalid inputs and spurious matches in multibyte locales, but for
\code{regexpr} it changes the interpretation of the output.  As from
\R{} 2.10.0 it inhibits the conversion of inputs with marked encodings.

Caseless matching does not make much sense for bytes in a multibyte
locale, and you should expect it only to work for ASCII characters if
\code{useBytes = TRUE}.
\end{Details}
%
\begin{Value}
\code{grep(value = FALSE)} returns an integer vector of the indices
of the elements of \code{x} that yielded a match (or not, for
\code{invert = TRUE}.

\code{grep(value = TRUE)} returns a character vector containing the
selected elements of \code{x} (after coercion, preserving names but no
other attributes).

\code{grepl} returns a logical vector (match or not for each element of
\code{x}).

For \code{sub} and \code{gsub} return a character vector of the same
length and with the same attributes as \code{x} (after possible
coercion).  Elements of character vectors \code{x} which are not
substituted will be return unchanged (including any declared
encoding).  If \code{useBytes = FALSE} a non-ASCII result will often
be in UTF-8 with a marked encoding (e.g. if there is a UTF-8 input, in
a multibyte locale if \code{perl = TRUE}, and always for non-Perl regexps).

\code{regexpr} returns an integer vector of the same length as
\code{text} giving the starting position of the first match or
\eqn{-1}{} if there is none, with attribute \code{"match.length"}, an
integer vector giving the length of the matched text (or \eqn{-1}{} for
no match).  The match positions and lengths are in characters unless
\code{useBytes = TRUE} is used, when they are in bytes.

\code{gregexpr} returns a list of the same length as \code{text} each
element of which is of the same form as the return value for \code{regexpr},
except that the starting positions of every (disjoint) match are
given.
\end{Value}
%
\begin{Section}{Warning}
The basic and extended modes of \code{gsub} and \code{gregexpr} do not
work correctly with repeated word-boundaries (e.g. \code{pattern =
  "\bsl{}b"}).  Use \code{perl = TRUE} for such matches (but that may not
work as expected with non-ASCII inputs, as the meaning of
`word' is system-dependent).
\end{Section}
%
\begin{Section}{Performance considerations}
If you are doing a lot of regular expression matching, including on
very long strings, you will want to consider the options used.
Generally PCRE will be faster than the default regular expression
engine, and \code{fixed = TRUE} faster still (especially when each
pattern is matched only a few times).

If you are working in a single-byte locale and have marked UTF-8
strings that are representable in that locale, convert them first as
just one UTF-8 string will force all the matching to be done in
Unicode, which attracts a penalty of around \eqn{3\times{}}{} for
the default POSIX 1003.2 mode.

If you can make use of \code{useBytes = TRUE}, the strings will not be
checked before matching, and the actual matching will be faster.
Often byte-based matching suffices in a UTF-8 locale since byte
patterns of one character never match part of another.
\end{Section}
%
\begin{Source}\relax
The C code for POSIX-style regular expression matching has changed
over the years. As from \R{} 2.10.0 the TRE library of Ville Laurikari
(\url{http://laurikari.net/tre/}) is used.  From 2005 to \R{} 2.9.2,
code based on \code{glibc} was used (and before that, code from GNU
\command{grep}).  The POSIX standard does give some room for
interpretation, especially in the handling of invalid regular
expressions and the collation of character ranges, so the results will
have changed slightly.

For Perl-style matching PCRE (\url{http://www.pcre.org}) is used.
\end{Source}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole (\code{grep})
\end{References}
%
\begin{SeeAlso}\relax
\LinkA{regular expression}{regular expression} (aka \code{\LinkA{regexp}{regexp}}) for the details
of the pattern specification.

\code{\LinkA{glob2rx}{glob2rx}} to turn wildcard matches into regular expressions.

\code{\LinkA{agrep}{agrep}} for approximate matching.

\code{\LinkA{tolower}{tolower}}, \code{\LinkA{toupper}{toupper}} and \code{\LinkA{chartr}{chartr}}
for character translations.
\code{\LinkA{charmatch}{charmatch}}, \code{\LinkA{pmatch}{pmatch}}, \code{\LinkA{match}{match}}.
\code{\LinkA{apropos}{apropos}} uses regexps and has more examples.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
grep("[a-z]", letters)

txt <- c("arm","foot","lefroo", "bafoobar")
if(length(i <- grep("foo",txt)))
   cat("'foo' appears at least once in\n\t",txt,"\n")
i # 2 and 4
txt[i]

## Double all 'a' or 'b's;  "\" must be escaped, i.e., 'doubled'
gsub("([ab])", "\\1_\\1_", "abc and ABC")

txt <- c("The", "licenses", "for", "most", "software", "are",
  "designed", "to", "take", "away", "your", "freedom",
  "to", "share", "and", "change", "it.",
   "", "By", "contrast,", "the", "GNU", "General", "Public", "License",
   "is", "intended", "to", "guarantee", "your", "freedom", "to",
   "share", "and", "change", "free", "software", "--",
   "to", "make", "sure", "the", "software", "is",
   "free", "for", "all", "its", "users")
( i <- grep("[gu]", txt) ) # indices
stopifnot( txt[i] == grep("[gu]", txt, value = TRUE) )

## Note that in locales such as en_US this includes B as the
## collation order is aAbBcCdEe ...
(ot <- sub("[b-e]",".", txt))
txt[ot != gsub("[b-e]",".", txt)]#- gsub does "global" substitution

txt[gsub("g","#", txt) !=
    gsub("g","#", txt, ignore.case = TRUE)] # the "G" words

regexpr("en", txt)

gregexpr("e", txt)

## trim trailing white space
str <- 'Now is the time      '
sub(' +$', '', str)  ## spaces only
sub('[[:space:]]+$', '', str) ## white space, POSIX-style
sub('\\s+$', '', str, perl = TRUE) ## Perl-style white space

## capitalizing
txt <- "a test of capitalizing"
gsub("(\\w)(\\w*)", "\\U\\1\\L\\2", txt, perl=TRUE)
gsub("\\b(\\w)",    "\\U\\1",       txt, perl=TRUE)

txt2 <- "useRs may fly into JFK or laGuardia"
gsub("(\\w)(\\w*)(\\w)", "\\U\\1\\E\\2\\U\\3", txt2, perl=TRUE)
 sub("(\\w)(\\w*)(\\w)", "\\U\\1\\E\\2\\U\\3", txt2, perl=TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{groupGeneric}{S3 Group Generic Functions}{groupGeneric}
\aliasA{.Group}{groupGeneric}{.Group}
\aliasA{Complex}{groupGeneric}{Complex}
\aliasA{group generic}{groupGeneric}{group generic}
\aliasA{Math}{groupGeneric}{Math}
\methaliasA{Math.data.frame}{groupGeneric}{Math.data.frame}
\aliasA{Ops}{groupGeneric}{Ops}
\methaliasA{Ops.data.frame}{groupGeneric}{Ops.data.frame}
\aliasA{S3groupGeneric}{groupGeneric}{S3groupGeneric}
\aliasA{Summary}{groupGeneric}{Summary}
\methaliasA{Summary.data.frame}{groupGeneric}{Summary.data.frame}
\keyword{methods}{groupGeneric}
%
\begin{Description}\relax
Group generic methods can be defined for four pre-specified groups of
functions, \code{Math}, \code{Ops}, \code{Summary} and \code{Complex}.
(There are no objects of these names in base \R{}, but there are in the
\pkg{methods} package.)

A method defined for an individual member of the group takes
precedence over a method defined for the group as a whole.
\end{Description}
%
\begin{Usage}
\begin{verbatim}

## S3 methods for group generics have prototypes:
Math(x, ...)
Ops(e1, e2)
Complex(z)
Summary(..., na.rm = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, z, e1, e2}] objects.
\item[\code{...}] further arguments passed to methods.
\item[\code{na.rm}] logical: should missing values be removed?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax


There are four \emph{groups} for which S3 methods can be written,
namely the \code{"Math"}, \code{"Ops"}, \code{"Summary"} and
\code{"Complex"} groups.  These are not \R{} objects, but methods can be
supplied for them and base \R{} contains \code{\LinkA{factor}{factor}},
\code{\LinkA{data.frame}{data.frame}} and \code{\LinkA{difftime}{difftime}} methods for
the first three groups.  (There is also a \code{\LinkA{ordered}{ordered}}
method for \code{Ops}, \code{\LinkA{POSIXt}{POSIXt}} and \code{\LinkA{Date}{Date}}
methods for \code{Math} and \code{Ops}, \code{\LinkA{package\_version}{package.Rul.version}}
methods for \code{Ops} and \code{Summary}, as well as a
\code{\LinkA{ts}{ts}} method for \code{Ops} in package \pkg{stats}.)

\begin{enumerate}

\item Group \code{"Math"}:
\begin{itemize}

\item 
\code{abs}, \code{sign}, \code{sqrt},\\{}
\code{floor}, \code{ceiling}, \code{trunc},\\{}
\code{round}, \code{signif}

\item 
\code{exp}, \code{log},  \code{expm1}, \code{log1p},\\{}
\code{cos}, \code{sin}, \code{tan},\\{}
\code{acos}, \code{asin}, \code{atan}

\code{cosh}, \code{sinh}, \code{tanh},\\{}
\code{acosh}, \code{asinh}, \code{atanh}

\item 
\code{lgamma}, \code{gamma}, \code{digamma}, \code{trigamma}









\item \code{cumsum}, \code{cumprod}, \code{cummax}, \code{cummin}


\end{itemize}

Members of this group dispatch on \code{x}.  Most members accept
only one argument, but members \code{log}, \code{round} and
\code{signif} accept one or two arguments, and \code{trunc} accepts
one or more.

\item Group \code{"Ops"}:
\begin{itemize}

\item 
\code{"+"}, \code{"-"}, \code{"*"}, \code{"/"},
\code{"\textasciicircum{}"}, \code{"\%\%"}, \code{"\%/\%"}


\item \code{"\&"}, \code{"|"}, \code{"!"}


\item \code{"=="}, \code{"!="},
\code{"<"}, \code{"<="}, \code{">="}, \code{">"}


\end{itemize}

This group contains both binary and unary operators (\code{+},
\code{-} and \code{!}): when a unary operator is encountered the
\code{Ops} method is called with one argument and \code{e2} is
missing.

The classes of both arguments are considered in dispatching any
member of this group.  For each argument its vector of classes is
examined to see if there is a matching specific (preferred) or
\code{Ops} method.  If a method is found for just one argument or
the same method is found for both, it is used.
If different methods are found, there is a warning about
`incompatible methods': in that case or if no method is found
for either argument the internal method is used.

If the members of this group are called as functions, any argument
names are removed to ensure that positional matching is always used.

\item Group \code{"Summary"}:
\begin{itemize}

\item \code{all}, \code{any}

\item \code{sum}, \code{prod}

\item \code{min}, \code{max}

\item \code{range}

\end{itemize}

Members of this group dispatch on the first argument supplied.

\item Group \code{"Complex"}:
\begin{itemize}

\item \code{Arg}, \code{Conj}, \code{Im}, \code{Mod}, \code{Re}


\end{itemize}

Members of this group dispatch on \code{z}.

\end{enumerate}


Note that a method will used for either one of these groups or one of
its members \emph{only} if it corresponds to a \code{"class"}
attribute, as the internal code dispatches on \code{\LinkA{oldClass}{oldClass}}
and not on \code{\LinkA{class}{class}}.  This is for efficiency: having to
dispatch on, say, \code{Ops.integer} would be too slow.

The number of arguments supplied for primitive members of the
\code{"Math"} group generic methods is not checked prior to dispatch.

There is no lazy evaluation of arguments for group-generic functions.
\end{Details}
%
\begin{Section}{Technical Details}
These functions are all primitive and \LinkA{internal generic}{internal generic}.

The details of method dispatch and variables such as \code{.Generic}
are discussed in the help for \code{\LinkA{UseMethod}{UseMethod}}.  There are a
few small differences:
\begin{itemize}

\item For the operators of group \code{Ops}, the object
\code{.Method} is a length-two character vector with elements the
methods selected for the left and right arguments respectively.  (If
no method was selected, the corresponding element is \code{""}.)
\item Object \code{.Group} records the group used for dispatch (if
a specific method is used this is \code{""}).

\end{itemize}

\end{Section}
%
\begin{References}\relax
Appendix A, \emph{Classes and Methods} of\\{}
Chambers, J. M.  and Hastie, T. J. eds (1992)
\emph{Statistical Models in S.}
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{methods}{methods}} for methods of non-internal generic functions.

\LinkA{S4groupGeneric}{S4groupGeneric} for group generics for S4 methods.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(utils)

d.fr <- data.frame(x=1:9, y=stats::rnorm(9))
class(1 + d.fr) == "data.frame" ##-- add to d.f. ...

methods("Math")
methods("Ops")
methods("Summary")
methods("Complex")  # none in base R
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{gzcon}{(De)compress I/O Through Connections}{gzcon}
\keyword{file}{gzcon}
\keyword{connection}{gzcon}
%
\begin{Description}\relax
\code{gzcon} provides a modified connection that wraps an existing
connection, and decompresses reads or compresses writes through that
connection.  Standard \code{gzip} headers are assumed.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
gzcon(con, level = 6, allowNonCompressed = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{con}] a connection.
\item[\code{level}] integer between 0 and 9, the compression level when writing.
\item[\code{allowNonCompressed}] logical.  When reading, should
non-compressed input be allowed?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{con} is open then the modified connection is opened.  Closing
the wrapper connection will also close the underlying connection.

Reading from a connection which does not supply a \code{gzip} magic
header is equivalent to reading from the original connection if
\code{allowNonCompressed} is true, otherwise an error.

The original connection becomes unusable: any object pointing to it will
now refer to the modified connection.
\end{Details}
%
\begin{Value}
An object inheriting from class \code{"connection"}.  This is the same
connection \emph{number} as supplied, but with a modified internal
structure. It has binary mode.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{gzfile}{gzfile}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Uncompress a data file from a URL
z <- gzcon(url("http://www.stats.ox.ac.uk/pub/datasets/csb/ch12.dat.gz"))
# read.table can only read from a text-mode connection.
raw <- textConnection(readLines(z))
close(z)
dat <- read.table(raw)
close(raw)
dat[1:4, ]


## gzfile and gzcon can inter-work.
## Of course here one would used gzfile, but file() can be replaced by
## any other connection generator.
zz <- gzfile("ex.gz", "w")
cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file = zz, sep = "\n")
close(zz)
readLines(zz <- gzcon(file("ex.gz", "rb")))
close(zz)
unlink("ex.gz")

zz <- gzcon(file("ex2.gz", "wb"))
cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file = zz, sep = "\n")
close(zz)
readLines(zz <- gzfile("ex2.gz"))
close(zz)
unlink("ex2.gz")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{hexmode}{Display Numbers in Hexadecimal}{hexmode}
\aliasA{as.character.hexmode}{hexmode}{as.character.hexmode}
\aliasA{as.hexmode}{hexmode}{as.hexmode}
\aliasA{format.hexmode}{hexmode}{format.hexmode}
\aliasA{print.hexmode}{hexmode}{print.hexmode}
\aliasA{[.hexmode}{hexmode}{[.hexmode}
\keyword{print}{hexmode}
%
\begin{Description}\relax
Convert or print integers in hexadecimal format, with as many digits
as are needed to display the largest, using leading zeroes as
necessary. 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.hexmode(x)

## S3 method for class 'hexmode':
as.character(x, upper.case = FALSE, ...)

## S3 method for class 'hexmode':
format(x, upper.case = FALSE, ...)

## S3 method for class 'hexmode':
print(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An object, for the methods inheriting from class
\code{"hexmode"}.
\item[\code{upper.case}] a logical indicating whether to use upper-case
letters or lower-case letters (default).
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Class \code{"hexmode"} consists of integer vectors with that class
attribute, used merely to ensure that they are printed in hex.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{octmode}{octmode}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{Hyperbolic}{Hyperbolic Functions}{Hyperbolic}
\aliasA{acosh}{Hyperbolic}{acosh}
\aliasA{asinh}{Hyperbolic}{asinh}
\aliasA{atanh}{Hyperbolic}{atanh}
\aliasA{cosh}{Hyperbolic}{cosh}
\aliasA{sinh}{Hyperbolic}{sinh}
\aliasA{tanh}{Hyperbolic}{tanh}
\keyword{math}{Hyperbolic}
%
\begin{Description}\relax
These functions give the obvious hyperbolic functions.  They
respectively compute the hyperbolic cosine, sine, tangent, and their
inverses, arc-cosine, arc-sine, arc-tangent (or `\emph{area cosine}',
etc).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
cosh(x)
sinh(x)
tanh(x)
acosh(x)
asinh(x)
atanh(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric or complex vector
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These are generic functions: methods can be defined for them
individually or via the \code{\LinkA{Math}{S3groupGeneric}} group generic.

Branch cuts are consistent with the inverse trigonometric functions
\code{asin()} et seq, and agree with those defined in Abramowitz and
Stegun, figure 4.7, page 86.

\end{Details}
%
\begin{Section}{S4 methods}
All are S4 generic functions: methods can be defined
for them individually or via the
\code{\LinkA{Math}{S4groupGeneric}} group generic.
\end{Section}
%
\begin{References}\relax
Abramowitz, M. and Stegun, I. A. (1972)
\emph{Handbook of Mathematical Functions.} New York: Dover.\\{}
Chapter 4. Elementary Transcendental Functions: Logarithmic,
Exponential, Circular and Hyperbolic Functions
\end{References}
%
\begin{SeeAlso}\relax
The trigonometric functions, \code{\LinkA{cos}{cos}}, \code{\LinkA{sin}{sin}},
\code{\LinkA{tan}{tan}}, and their inverses
\code{\LinkA{acos}{acos}}, \code{\LinkA{asin}{asin}}, \code{\LinkA{atan}{atan}}.

The logistic distribution function \code{\LinkA{plogis}{plogis}} is a shifted
version of \code{tanh()} for numeric \code{x}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{iconv}{Convert Character Vector between Encodings}{iconv}
\aliasA{iconvlist}{iconv}{iconvlist}
\keyword{character}{iconv}
\keyword{utilities}{iconv}
%
\begin{Description}\relax
This uses system facilities to convert a character vector between
encodings: the `i' stands for `internationalization'.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
iconv(x, from ="", to = "", sub = NA, mark = TRUE)

iconvlist()
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] A character vector, or an object to be converted to a character
vector by \code{\LinkA{as.character}{as.character}}.
\item[\code{from}] A character string describing the current encoding.
\item[\code{to}] A character string describing the target encoding.
\item[\code{sub}] character string.  If not \code{NA} it is used to replace
any non-convertible bytes in the input.  (This would normally be a
single character, but can be more.)  If \code{"byte"}, the indication is
\code{"<xx>"} with the hex code of the byte.
\item[\code{mark}] logical, for expert use.  Should encodings be marked?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The names of encodings and which ones are available are
platform-dependent.  All \R{} platforms support \code{""} (for the
encoding of the current locale), \code{"latin1"} and \code{"UTF-8"}.
Generally case is ignored when specifying an encoding.

On many platforms \code{iconvlist} provides an alphabetical list of
the supported encodings.  On others, the information is on the man
page for \code{iconv(5)} or elsewhere in the man pages (but beware
that the system command \code{iconv} may not support the same set of
encodings as the C functions \R{} calls).  Unfortunately, the names are
rarely common across platforms.

Elements of \code{x} which cannot be converted (perhaps because they
are invalid or because they cannot be represented in the target
encoding) will be returned as \code{NA} unless \code{sub} is specified.

Most versions of \code{iconv} will allow transliteration by appending
\samp{//TRANSLIT} to the \code{to} encoding: see the examples.

Any encoding bits (see \code{\LinkA{Encoding}{Encoding}}) on elements of \code{x}
are ignored: they will always be translated as if from \code{from}
even if declared otherwise.

\code{"UTF8"} will be accepted as meaning the (more correct) \code{"UTF-8"}.
\end{Details}
%
\begin{Value}
A character vector of the same length and the same attributes as
\code{x} (after conversion).

If \code{mark = TRUE} (the default) the elements of the result have a
declared encoding if \code{from} is \code{"latin1"} or \code{"UTF-8"},
or if \code{from = ""} and the current locale's encoding is detected
as Latin-1 or UTF-8.
\end{Value}
%
\begin{Section}{Implementation Details}
\code{iconv} was optional before \R{} 2.10.0, but it absence was
deprecated in \R{} 2.5.0.

There are three main implementations of \code{iconv} in use.
\samp{glibc} (as used on Linux) contains one.  Several platforms
supply GNU \samp{libiconv}, including Mac OS X and Cygwin.  On Windows
we use a version of Yukihiro Nakadaira's \samp{win\_iconv}, which is
based on Windows' codepages (but \samp{libiconv} can be used by
swapping a DLL).  All three have \code{iconvlist}, ignore case in
encoding names and support \samp{//TRANSLIT} (but with different
results).

Most commercial Unixes contain an implemetation of \code{iconv} but
none we have encountered have supported the encoding names we need:
the ``R Installation and Administration Manual'' recommends
installing \samp{libiconv} on Solaris and AIX, for example.

There are other implementations, e.g. NetBSD uses one from the Citrus
project (which does not support \samp{//TRANSLIT}) and there is an
older FreeBSD port (\samp{libiconv} is usually used there): it has not
been reported whether or not these work with \R{}.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{localeToCharset}{localeToCharset}}, \code{\LinkA{file}{file}}. 
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## not all systems have iconvlist
try(utils::head(iconvlist(), n = 50))

## Not run: 
## convert from Latin-2 to UTF-8: two of the glibc iconv variants.
iconv(x, "ISO_8859-2", "UTF-8")
iconv(x, "LATIN2", "UTF-8")

## End(Not run)

## Both x below are in latin1 and will only display correctly in a
## locale that can represent and display latin1.
x <- "fa\xE7ile"
Encoding(x) <- "latin1"
x
charToRaw(xx <- iconv(x, "latin1", "UTF-8"))
xx

iconv(x, "latin1", "ASCII")          #   NA
iconv(x, "latin1", "ASCII", "?")     # "fa?ile"
iconv(x, "latin1", "ASCII", "")      # "faile"
iconv(x, "latin1", "ASCII", "byte")  # "fa<e7>ile"

# Extracts from R help files
x <- c("Ekstr\xf8m", "J\xf6reskog", "bi\xdfchen Z\xfcrcher")
Encoding(x) <- "latin1"
x
try(iconv(x, "latin1", "ASCII//TRANSLIT"))  # platform-dependent
iconv(x, "latin1", "ASCII", sub="byte")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{icuSetCollate}{Setup Collation by ICU}{icuSetCollate}
\keyword{utilities}{icuSetCollate}
%
\begin{Description}\relax
Controls the way collation is done by ICU (an optional part of the \R{}
build).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
icuSetCollate(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] Named arguments, see `Details'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Optionally, \R{} can be built to collate character strings by ICU
(\url{http://www.icu-project.org}).  For such systems,
\code{icuSetCollate} can be used to tune the way collation is done.
On other builds calling this function does nothing, with a warning.

Possible arguments are
\begin{description}

\item[\code{locale}:] A character string such as \code{"da\_DK"} giving the
country whose collation rules are to be used.  If present, this
should be the first argument.
\item[\code{case\_first}:] \code{"upper"}, \code{"lower"} or
\code{"default"}, asking for upper- or lower-case characters to be
sorted first.  The default is usually lower-case first, but not in
all languages (see the Danish example).
\item[\code{alternate\_handling}:] Controls the handling of
`variable' characters (mainly punctuation and symbols).
Possible values are \code{"non\_ignorable"} (primary strength) and
\code{"shifted"} (quaternary strength).
\item[\code{strength}:] Which components should be used?  Possible
values \code{"primary"}, \code{"secondary"}, \code{"tertiary"}
(default), \code{"quaternary"} and \code{"identical"}. 
\item[\code{french\_collation}:] In a French locale the way accents
affect collation is from right to left, whereas in most other locales
it is from left to right.  Possible values \code{"on"}, \code{"off"}
and \code{"default"}.
\item[\code{normalization}:] Should strings be normalized? Possible values
\code{"on"} and \code{"off"} (default). This affects the
collation of composite characters.
\item[\code{case\_level}:] An additional level between secondary and
tertiary, used to distinguish large and small Japanese Kana
characters. Possible values \code{"on"} and \code{"off"} (default).
\item[\code{hiragana\_quaternary}:] Possible values \code{"on"} (sort
Hiragana first at quaternary level) and \code{"off"}.

\end{description}

Only the first three are likely to be of interest except to those with a 
detailed understanding of collation and specialized requirements.

Some examples are \code{case\_level="on", strength="primary"} to ignore
accent differences, \code{alternate\_handling="shifted"} to ignore
space and punctuation characters.
\end{Details}
%
\begin{SeeAlso}\relax
\LinkA{Comparison}{Comparison}, \code{\LinkA{sort}{sort}}

The ICU user guide chapter on collation
(\url{http://www.icu-project.org/userguide/Collate_Intro.html}).
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}

x <- c("Aarhus", "aarhus", "safe", "test", "Zoo")
sort(x)
icuSetCollate(case_first="upper"); sort(x)
icuSetCollate(case_first="lower"); sort(x)

icuSetCollate(locale="da_DK", case_first="default"); sort(x)
icuSetCollate(locale="et_EE"); sort(x)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{identical}{Test Objects for Exact Equality}{identical}
\keyword{programming}{identical}
\keyword{logic}{identical}
\keyword{iteration}{identical}
%
\begin{Description}\relax
The safe and reliable way to test two objects for being
\emph{exactly} equal.  It returns \code{TRUE} in this case,
\code{FALSE} in every other case.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
identical(x, y, num.eq = TRUE, single.NA = TRUE, attrib.as.set = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] any \R{} objects.
\item[\code{num.eq}] logical indicating if (\code{\LinkA{double}{double}} and
\code{\LinkA{complex}{complex}} non-\code{\LinkA{NA}{NA}}) numbers should be
compared using \code{\LinkA{==}{==}} (`equal'), or by bitwise
comparison. The latter (non-default) differentiates between
\code{-0} and \code{+0}.
\item[\code{single.NA}] logical indicating if there is conceptually just one numeric
\code{\LinkA{NA}{NA}} and one \code{\LinkA{NaN}{NaN}};  \code{single.NA = FALSE}
differentiates bit patterns.
\item[\code{attrib.as.set}] logical indicating if \code{\LinkA{attributes}{attributes}} of
\code{x} and \code{y} should be treated as \emph{unordered} tagged
pairlists (``sets''); this currently also applies to
\code{\LinkA{slot}{slot}}s of S4 objects.  It may well be too strict to set
\code{attrib.as.set = FALSE}.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A call to \code{identical} is the way to test exact equality in
\code{if} and \code{while} statements, as well as in logical
expressions that use \code{\&\&} or \code{||}.  In all these
applications you need to be assured of getting a single logical
value.

Users often use the comparison operators, such as \code{==} or
\code{!=}, in these situations.  It looks natural, but it is not what
these operators are designed to do in R.  They return an object like
the arguments.  If you expected \code{x} and \code{y} to be of length
1, but it happened that one of them wasn't, you will \emph{not} get a
single \code{FALSE}.  Similarly, if one of the arguments is \code{NA},
the result is also \code{NA}.  In either case, the expression
\code{if(x == y)....} won't work as expected.

The function \code{all.equal} is also sometimes used to test equality
this way, but was intended for something different:  it allows for
small differences in numeric results.

The computations in \code{identical} are also reliable and usually
fast.  There should never be an error.  The only known way to kill
\code{identical} is by having an invalid pointer at the C level,
generating a memory fault.  It will usually find inequality quickly.
Checking equality for two large, complicated objects can take longer
if the objects are identical or nearly so, but represent completely
independent copies.  For most applications, however, the computational cost
should be negligible.

If \code{single.NA} is true, as by default, \code{identical} sees
\code{\LinkA{NaN}{NaN}} as different from \code{\LinkA{NA\_real\_}{NA.Rul.real.Rul.}}, but all
\code{NaN}s are equal (and all \code{NA} of the same type are equal).

If \code{attrib.as.set} is true, as by default, comparison of
attributes view them as a set (and not a vector, so order is not
tested).

Note that \code{identical(x,y, FALSE,FALSE,FALSE)} pickily tests for
very exact equality.
\end{Details}
%
\begin{Value}
A single logical value, \code{TRUE} or \code{FALSE}, never \code{NA}
and never anything other than a single value.
\end{Value}
%
\begin{Author}\relax
John Chambers and R Core
\end{Author}
%
\begin{References}\relax
Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{all.equal}{all.equal}} for descriptions of how two objects differ;
\LinkA{Comparison}{Comparison} for operators that generate elementwise comparisons.
\code{\LinkA{isTRUE}{isTRUE}} is a simple wrapper based on \code{identical}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
identical(1, NULL) ## FALSE -- don't try this with ==
identical(1, 1.)   ## TRUE in R (both are stored as doubles)
identical(1, as.integer(1)) ## FALSE, stored as different types

x <- 1.0; y <- 0.99999999999
## how to test for object equality allowing for numeric fuzz :
(E <- all.equal(x,y))
isTRUE(E) # which is simply defined to just use
identical(TRUE, E)
## If all.equal thinks the objects are different, it returns a
## character string, and the above expression evaluates to FALSE

## even for unusual R objects :
identical(.GlobalEnv, environment())

### ------- Pickyness Flags : -----------------------------

## the infamous example:
identical(0., -0.) # TRUE, i.e. not differentiated
identical(0., -0., num.eq = FALSE)
## similar:
identical(NaN, -NaN) # TRUE
identical(NaN, -NaN, single.NA=FALSE) # differ on bit-level

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{identity}{Identity function}{identity}
\keyword{programming}{identity}
%
\begin{Description}\relax
A trivial identity function returning its argument.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
identity(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object.
\end{ldescription}
\end{Arguments}
\inputencoding{latin1}
\HeaderA{ifelse}{Conditional Element Selection}{ifelse}
\keyword{logic}{ifelse}
\keyword{programming}{ifelse}
%
\begin{Description}\relax
\code{ifelse} returns a value with the same shape as
\code{test} which is filled with elements selected
from either \code{yes} or \code{no}
depending on whether the element of \code{test}
is \code{TRUE} or \code{FALSE}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
ifelse(test, yes, no)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{test}] an object which can be coerced to logical mode.
\item[\code{yes}] return values for true elements of \code{test}.
\item[\code{no}] return values for false elements of \code{test}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{yes} or \code{no} are too short, their elements are recycled.
\code{yes} will be evaluated if and only if any element of \code{test}
is true, and analogously for \code{no}.

Missing values in \code{test} give missing values in the result.
\end{Details}
%
\begin{Value}
A vector of the same length and attributes (including
class) as \code{test} and data values from the values of
\code{yes} or \code{no}.  The mode of the answer will be coerced from
logical to accommodate first any values taken from \code{yes} and then
any values taken from \code{no}.
\end{Value}
%
\begin{Section}{Warning}
The mode of the result may depend on the value of \code{test}, and the
class attribute of the result is taken from \code{test} and may be
inappropriate for the values selected from \code{yes} and \code{no}.

Sometimes it is better to use a construction such as
\code{(tmp <- yes; tmp[!test] <- no[!test]; tmp)}, possibly extended
to handle missing values in \code{test}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{if}{if}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c(6:-4)
sqrt(x)#- gives warning
sqrt(ifelse(x >= 0, x, NA))# no warning

## Note: the following also gives the warning !
ifelse(x >= 0, sqrt(x), NA)

## example of different return modes:
yes <- 1:3
no <- pi^(0:3)
typeof(ifelse(NA, yes, no))   # logical
typeof(ifelse(TRUE, yes, no)) # integer
typeof(ifelse(FALSE, yes, no))# double
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{integer}{Integer Vectors}{integer}
\aliasA{as.integer}{integer}{as.integer}
\aliasA{is.integer}{integer}{is.integer}
\keyword{classes}{integer}
%
\begin{Description}\relax
Creates or tests for objects of type \code{"integer"}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
integer(length = 0)
as.integer(x, ...)
is.integer(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced or tested.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Integer vectors exist so that data can be passed to C or Fortran code
which expects them, and so that small integer data can be represented
exactly and compactly.

Note that on almost all implementations of \R{} the range of
representable integers is restricted to about
\eqn{\pm 2 \times 10^9}{}: \code{\LinkA{double}{double}}s can hold
much larger integers exactly.

\code{as.integer} and \code{is.integer} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored.  This may not be true of their methods.  
\end{Details}
%
\begin{Value}
\code{integer} creates a integer vector of the specified length.
Each element of the vector is equal to \code{0}.

\code{as.integer} attempts to coerce its argument to be of integer
type. The answer will be \code{NA} unless the coercion succeeds.
Real values larger in modulus than the largest integer are coerced to
\code{NA} (unlike S which gives the most extreme integer of the same sign).
Non-integral numeric values are truncated towards zero (i.e.,
\code{as.integer(x)} equals \code{\LinkA{trunc}{trunc}(x)} there), and
imaginary parts of complex numbers are discarded (with a warning).
Character strings containing either a decimal representation or a
hexadecimal representation (starting with \code{0x} or \code{0X}) can
be converted, as well as any allowed by the platform for real numbers.
Like \code{\LinkA{as.vector}{as.vector}} it strips attributes including names.
(To ensure that an object is of integer type without stripping
attributes, use \code{\LinkA{storage.mode}{storage.mode}}.)

\code{is.integer} returns \code{TRUE} or \code{FALSE} depending on
whether its argument is of integer \LinkA{type}{type} or not, unless it is a
factor when it returns \code{FALSE}.
\end{Value}
%
\begin{Note}\relax
\code{is.integer(x)} does \bold{not} test if \code{x} contains integer
numbers!  For that, use \code{\LinkA{round}{round}}, as in the function
\code{is.wholenumber(x)} in the examples.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{numeric}{numeric}}, \code{\LinkA{storage.mode}{storage.mode}}.

\code{\LinkA{round}{round}} (and \code{ceiling} and \code{floor} on that help
page) to convert to integral values.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## as.integer() truncates:
x <- pi * c(-1:1,10)
as.integer(x)

is.integer(1) # is FALSE !

is.wholenumber <-
    function(x, tol = .Machine$double.eps^0.5)  abs(x - round(x)) < tol
is.wholenumber(1) # is TRUE
(x <- seq(1,5, by=0.5) )
is.wholenumber( x ) #-->  TRUE FALSE TRUE ...
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{interaction}{Compute Factor Interactions}{interaction}
\keyword{category}{interaction}
%
\begin{Description}\relax
\code{interaction} computes a factor which represents the interaction
of the given factors.  The result of \code{interaction} is always unordered.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
interaction(..., drop = FALSE, sep = ".", lex.order = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] the factors for which interaction is to be computed, or a
single list giving those factors.
\item[\code{drop}] if \code{drop} is \code{TRUE}, unused factor levels
are dropped from the result.  The default is to retain all
factor levels.
\item[\code{sep}] string to construct the new level labels by joining the
constituent ones.
\item[\code{lex.order}] logical indicating if the order of factor concatenation
should be lexically ordered.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A factor which represents the interaction of the given factors.
The levels are labelled as the levels of the individual factors joined
by \code{sep} which is \code{.} by default.

By default, when \code{lex.order = FALSE}, the levels are ordered so
the level of the first factor varies fastest, then the second and so
on.  This is the reverse of lexicographic ordering (which you can get
by  \code{lex.order = TRUE}), and differs from
\code{\LinkA{:}{:}}.  (It is done this way for compatibility with S.)
\end{Value}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{factor}{factor}};
\code{\LinkA{:}{:}} where \code{f:g} is similar to
\code{interaction(f, g, sep=":")} when \code{f} and  \code{g} are factors.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
a <- gl(2, 4, 8)
b <- gl(2, 2, 8, labels = c("ctrl", "treat"))
s <- gl(2, 1, 8, labels = c("M", "F"))
interaction(a, b)
interaction(a, b, s, sep = ":")
stopifnot(identical(a:s,
                    interaction(a, s, sep = ":", lex.order = TRUE)),
          identical(a:s:b,
                    interaction(a, s, b, sep = ":", lex.order = TRUE)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{interactive}{Is R Running Interactively?}{interactive}
\keyword{environment}{interactive}
\keyword{programming}{interactive}
%
\begin{Description}\relax
 
Return \code{TRUE} when \R{} is being used interactively and
\code{FALSE} otherwise.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
interactive()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
An interactive \R{} session is one in which it is assumed that there is
a human operator to interact with, so for example \R{} can prompt for
corrections to incorrect input or ask what to do next or if it is OK
to move to the next plot.

GUI consoles will arrange to start \R{} in an interactive session.  When
\R{} is run in a terminal (via \command{Rterm.exe} on Windows), it
assumes that it is interactive if \file{stdin} is connected to a
(pseudo-)terminal and not if \file{stdin} is redirected to a file or
pipe.  Command-line options \option{--interactive} (Unix) and
\option{--ess} (Windows, \command{Rterm.exe}) override the default
assumption.
(On a Unix-alike, whether the \code{readline} comamnd-line editor is
used is \strong{not} overridden by \option{--interactive}.)

Embedded uses of \R{} can set a session to be interactive or not.

Internally, whether a session is interactive determines
\begin{itemize}

\item how some errors are handled and reported, e.g. see
\code{\LinkA{stop}{stop}} and \code{\LinkA{options}{options}("showWarnCalls")}.

\item  whether one of \option{--save}, \option{--no-save} or
\option{--vanilla} is required, and if \R{} ever asks whether to save the
workspace.

\item the choice of default graphics device launched when needed and
by \code{\LinkA{dev.new}{dev.new}}: see \code{\LinkA{options}{options}("device")}

\item whether graphics devices ever ask for confirmation of a new
page.

\end{itemize}

In addition, \R{}'s own \R{} code makes use of \code{interactive()}: for
example \code{\LinkA{help}{help}}, \code{\LinkA{debugger}{debugger}} and
\code{\LinkA{install.packages}{install.packages}} do.
\end{Details}
%
\begin{Note}\relax
This is a \LinkA{primitive}{primitive} function.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{source}{source}},
\code{\LinkA{.First}{.First}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
 .First <- function() if(interactive()) x11()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Internal}{Call an Internal Function}{Internal}
\aliasA{.Internal}{Internal}{.Internal}
\keyword{interface}{Internal}
%
\begin{Description}\relax
\code{.Internal} performs a call to an internal code
which is built in to the \R{} interpreter.

Only true \R{} wizards should even consider using this function, and only
\R{} developers can add to the list of internal functions.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
 .Internal(call)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{call}] a call expression
\end{ldescription}
\end{Arguments}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Primitive}{.Primitive}}, \code{\LinkA{.External}{.External}} (the nearest
equivalent available to  users).
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{InternalMethods}{Internal Generic Functions}{InternalMethods}
\aliasA{.S3PrimitiveGenerics}{InternalMethods}{.S3PrimitiveGenerics}
\aliasA{internal generic}{InternalMethods}{internal generic}
\aliasA{InternalGenerics}{InternalMethods}{InternalGenerics}
\keyword{methods}{InternalMethods}
%
\begin{Description}\relax
Many \R{}-internal functions are \emph{generic} and allow
methods to be written for.
\end{Description}
%
\begin{Details}\relax
The following primitive and internal functions are \emph{generic},
i.e., you can write \code{\LinkA{methods}{methods}} for them:

\code{\LinkA{[}{[}},
\code{\LinkA{[[}{[[}},
\code{\LinkA{\$}{.Rdol.}},
\code{\LinkA{[<-}{[<.Rdash.}},
\code{\LinkA{[[<-}{[[<.Rdash.}},
\code{\LinkA{\$<-}{.Rdol.<.Rdash.}},

\code{\LinkA{length}{length}},
\code{\LinkA{length<-}{length<.Rdash.}},
\code{\LinkA{dimnames}{dimnames}},
\code{\LinkA{dimnames<-}{dimnames<.Rdash.}},
\code{\LinkA{dim}{dim}},
\code{\LinkA{dim<-}{dim<.Rdash.}},
\code{\LinkA{names}{names}},
\code{\LinkA{names<-}{names<.Rdash.}},
\code{\LinkA{levels<-}{levels<.Rdash.}},

\code{\LinkA{c}{c}},
\code{\LinkA{unlist}{unlist}},
\code{\LinkA{cbind}{cbind}},
\code{\LinkA{rbind}{rbind}},

\code{\LinkA{as.character}{as.character}},
\code{\LinkA{as.complex}{as.complex}},
\code{\LinkA{as.double}{as.double}},
\code{\LinkA{as.integer}{as.integer}},
\code{\LinkA{as.logical}{as.logical}},
\code{\LinkA{as.raw}{as.raw}},
\code{\LinkA{as.vector}{as.vector}},
\code{\LinkA{is.array}{is.array}},
\code{\LinkA{is.matrix}{is.matrix}},
\code{\LinkA{is.na}{is.na}},
\code{\LinkA{is.nan}{is.nan}},
\code{\LinkA{is.numeric}{is.numeric}},
\code{\LinkA{rep}{rep}} and
\code{\LinkA{seq.int}{seq.int}}
(which dispatches methods for \code{"seq"}).

In addition, \code{is.name} is a synonym for \code{is.symbol} and
dispatches methods for the latter.

Note that all of the \LinkA{group generic}{group generic} functions are also
internal/primitive and allow methods to be written for them.

\code{.S3PrimitiveGenerics} is a character vector listing the
primitives which are internal generic and not \LinkA{group generic}{group generic}.
Currently \code{\LinkA{as.vector}{as.vector}}, \code{\LinkA{cbind}{cbind}},
\code{\LinkA{rbind}{rbind}} and \code{\LinkA{unlist}{unlist}} are the internal
non-primitive functions which are internally generic.

For efficiency, internal dispatch only occurs on \emph{objects}, that
is those for which \code{\LinkA{is.object}{is.object}} returns true.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{methods}{methods}} for the methods which are available.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{invisible}{Change the Print Mode to Invisible}{invisible}
\keyword{programming}{invisible}
%
\begin{Description}\relax
Return a (temporarily) invisible copy of an object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
invisible(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an arbitrary \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function can be useful when it is desired to have functions
return values which can be assigned, but which do not print when they
are not assigned.

This is a \LinkA{primitive}{primitive} function.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{withVisible}{withVisible}},
\code{\LinkA{return}{return}},
\code{\LinkA{function}{function}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# These functions both return their argument
f1 <- function(x) x
f2 <- function(x) invisible(x)
f1(1)# prints
f2(1)# does not
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.finite}{Finite, Infinite and NaN Numbers}{is.finite}
\aliasA{finite}{is.finite}{finite}
\aliasA{Inf}{is.finite}{Inf}
\aliasA{is.infinite}{is.finite}{is.infinite}
\aliasA{is.nan}{is.finite}{is.nan}
\aliasA{NaN}{is.finite}{NaN}
\keyword{programming}{is.finite}
\keyword{math}{is.finite}
%
\begin{Description}\relax
\code{is.finite} and \code{is.infinite} return a vector of the same
length as \code{x}, indicating which elements are finite (not infinite
and not missing).

\code{Inf} and \code{-Inf} are positive and negative infinity
whereas \code{NaN} means `Not a Number'.  (These apply to numeric
values and real and imaginary parts of complex values but not to
values of integer vectors.)  All are \LinkA{reserved}{reserved} words in the \R{}
language.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.finite(x)
is.infinite(x)
Inf
NaN
is.nan(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] (numerical) object to be tested.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{is.finite} returns a vector of the same length as \code{x} the
jth element of which is \code{TRUE} if \code{x[j]} is finite (i.e., it
is not one of the values \code{NA}, \code{NaN}, \code{Inf} or
\code{-Inf}).  All elements of types other than logical, integer,
numeric and complex vectors are false.  Complex numbers are finite if
both the real and imaginary parts are.

\code{is.infinite} returns a vector of the same length as \code{x}
the jth element of which is \code{TRUE} if \code{x[j]} is
infinite (i.e., equal to one of \code{Inf} or \code{-Inf}). This will
be false unless \code{x} is numeric or complex.  Complex numbers are
infinite if either the real and imaginary part is.

\code{is.nan} tests if a numeric value is \code{NaN}.  Do not test
equality to \code{NaN}, or even use \code{\LinkA{identical}{identical}}, since
systems typically have many different NaN values.  One of these is used
for the numeric missing value \code{NA}, and \code{is.nan} is false
for that value.  A complex number is regarded
as \code{NaN} if either the real or imaginary part is \code{NaN} but
not \code{NA}.

All three functions are generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods}.  The
default methods handle real and complex vectors.  They are
\LinkA{primitive}{primitive}, so any argument names are ignored..
\end{Details}
%
\begin{Note}\relax
In \R{}, basically all mathematical functions (including basic
\code{\LinkA{Arithmetic}{Arithmetic}}), are supposed to work properly with
\code{+/- Inf} and \code{NaN} as input or output.

The basic rule should be that calls and relations with \code{Inf}s
really are statements with a proper mathematical \emph{limit}.
\end{Note}
%
\begin{References}\relax
The IEC 60559 standard, also known as the
ANSI/IEEE 754 Floating-Point Standard.

D. Goldberg (1991) \emph{What Every Computer Scientist Should Know
about Floating-Point Arithmetic}  ACM Computing Surveys, \bold{23(1)}.\\{}
Postscript version available at
\url{http://www.validlab.com/goldberg/paper.ps}
Extended PDF version at \url{http://www.validlab.com/goldberg/paper.pdf}

\url{http://grouper.ieee.org/groups/754/} for accessible information.

The C99 function \code{isfinite} is used for \code{is.finite} if available.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{NA}{NA}}, `\emph{Not Available}' which is not a number
as well, however usually used for missing values and applies to many
modes, not just numeric.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
pi / 0 ## = Inf a non-zero number divided by zero creates infinity
0 / 0  ## =  NaN

1/0 + 1/0# Inf
1/0 - 1/0# NaN

stopifnot(
    1/0 == Inf,
    1/Inf == 0
)
sin(Inf)
cos(Inf)
tan(Inf)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.function}{Is an Object of Type (Primitive) Function?}{is.function}
\aliasA{is.primitive}{is.function}{is.primitive}
\keyword{programming}{is.function}
%
\begin{Description}\relax
Checks whether its argument is a (primitive) function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.function(x)
is.primitive(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{is.primitive(x)} tests if \code{x} is a primitive function
(either a \code{"builtin"} or \code{"special"} as described for
\code{\LinkA{typeof}{typeof}})?  It is a \LinkA{primitive}{primitive} function.
\end{Details}
%
\begin{Value}
\code{TRUE} if \code{x} is a (primitive) function, and \code{FALSE}
otherwise.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
is.function(1) # FALSE
is.function(is.primitive)  # TRUE: it is a function, but ..
is.primitive(is.primitive) # FALSE:it's not a primitive one, whereas
is.primitive(is.function)  # TRUE: that one *is*
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.language}{Is an Object a Language Object?}{is.language}
\keyword{programming}{is.language}
%
\begin{Description}\relax
\code{is.language} returns \code{TRUE} if \code{x} is a
variable \code{\LinkA{name}{name}}, a \code{\LinkA{call}{call}}, or an
\code{\LinkA{expression}{expression}}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.language(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be tested.
\end{ldescription}
\end{Arguments}
%
\begin{Note}\relax
This is a \LinkA{primitive}{primitive} function.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
ll <- list(a = expression(x^2 - 2*x + 1), b = as.name("Jim"),
           c = as.expression(exp(1)), d = call("sin", pi))
sapply(ll, typeof)
sapply(ll, mode)
stopifnot(sapply(ll, is.language))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.object}{Is an Object ``internally classed''?}{is.object}
\keyword{methods}{is.object}
\keyword{classes}{is.object}
%
\begin{Description}\relax
A function rather for internal use.  It returns \code{TRUE} if the
object \code{x} has the \R{} internal \code{OBJECT} bit set, and
\code{FALSE} otherwise.  The \code{OBJECT} bit is set when a
\code{"class"} attribute is added and removed when that attribute is
removed, so this is a very efficient way to check if an object has a
class attribute.  (S4 objects always should.)
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.object(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be tested.
\end{ldescription}
\end{Arguments}
%
\begin{Note}\relax
This is a \LinkA{primitive}{primitive} function.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{class}{class}}, and \code{\LinkA{methods}{methods}}.

\code{\LinkA{isS4}{isS4}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
is.object(1) # FALSE
is.object(as.factor(1:3)) # TRUE
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.R}{Are we using R, rather than S?}{is.R}
\keyword{environment}{is.R}
\keyword{utilities}{is.R}
%
\begin{Description}\relax
Test if running under \R{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.R()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
The function has been written such as to correctly run in all versions
of \R{}, S and S-PLUS.
In order for code to be runnable in both \R{} and S dialects previous to
S-PLUS 8.0, your code must either define \code{is.R} or use it as

\code{if (exists("is.R") \&\& is.function(is.R) \&\& is.R()) \{}\\{}
\code{    }\emph{\#\# R-specific code}\\{}
\code{\} else \{}\\{}
\code{    }\emph{\#\# S-version of code}\\{}
\code{\}}
\end{Details}
%
\begin{Value}
\code{is.R} returns \code{TRUE} if we are using \R{} and \code{FALSE}
otherwise.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{R.version}{R.version}}, \code{\LinkA{system}{system}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- stats::runif(20); small <- x < 0.4
## In the early years of R, 'which()' only existed in R:
if(is.R()) which(small) else seq(along=small)[small]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.recursive}{Is an Object Atomic or Recursive?}{is.recursive}
\aliasA{is.atomic}{is.recursive}{is.atomic}
\keyword{programming}{is.recursive}
\keyword{classes}{is.recursive}
%
\begin{Description}\relax
\code{is.atomic} returns \code{TRUE} if \code{x} is an atomic vector
(or \code{NULL}) and \code{FALSE} otherwise.

\code{is.recursive} returns \code{TRUE} if \code{x} has a recursive
(list-like) structure and \code{FALSE} otherwise.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.atomic(x)
is.recursive(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be tested.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{is.atomic} is true for the atomic vector types
(\code{"logical"}, \code{"integer"}, \code{"numeric"},
\code{"complex"}, \code{"character"} and \code{"raw"}) and \code{NULL}.

Most types of objects are regarded as recursive, except for
atomic vector types, \code{NULL} and symbols (as given by
\code{\LinkA{as.name}{as.name}}).

These are \LinkA{primitive}{primitive} functions.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{is.list}{is.list}},
\code{\LinkA{is.language}{is.language}}, etc,
and the \code{demo("is.things")}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

is.a.r <- function(x) c(is.atomic(x), is.recursive(x))

is.a.r(c(a=1,b=3))      # TRUE FALSE
is.a.r(list())          # FALSE TRUE - a list is a list
is.a.r(list(2))         # FALSE TRUE
is.a.r(lm)              # FALSE TRUE
is.a.r(y ~ x)           # FALSE TRUE
is.a.r(expression(x+1)) # FALSE TRUE (nowadays)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{is.single}{Is an Object of Single Precision Type?}{is.single}
\keyword{classes}{is.single}
%
\begin{Description}\relax
\code{is.single} reports an error. There are no single precision
values in R.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.single(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be tested.
\end{ldescription}
\end{Arguments}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
\inputencoding{latin1}
\HeaderA{is.unsorted}{Test if an Object is Not Sorted}{is.unsorted}
\keyword{univar}{is.unsorted}
%
\begin{Description}\relax
Test if an object is not sorted, without the cost of sorting it.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
is.unsorted(x, na.rm = FALSE, strictly = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object with a class or a numeric, complex, character or
logical vector.
\item[\code{na.rm}] logical.  Should missing values be removed before checking?
\item[\code{strictly}] logical indicating if the check should be for
\emph{strictly} increasing values.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A length-one logical value.  All objects of length 0 or 1 are sorted:
the result will be \code{NA} for objects of length 2 or more except for
atomic vectors and objects with a class (where the \code{>=} or \code{>}
method is used).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{sort}{sort}}, \code{\LinkA{order}{order}}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{isS4}{Test for an S4 object}{isS4}
\aliasA{asS4}{isS4}{asS4}
\aliasA{S4}{isS4}{S4}
\keyword{programming}{isS4}
%
\begin{Description}\relax
Tests whether the object is an instance of an S4 class.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
isS4(object)

asS4(object, flag = TRUE, complete = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}]  Any R object. 

\item[\code{flag}] A single logical value; not \code{NA}, whether to turn
the S4 object flag on or off.
\item[\code{complete}] How to complete the transformation to/from S4.  Only
currently used when \code{flag} is \code{FALSE}.  If \code{1}, the object
must convert to a valid S3 object, or an error results.  If \code{2}, a
non-valid S3 object is left alone, silently.  If \code{0}, no conversion
is made other than setting the internal bit (used internally but not recommended, since it can result
in an invalid object).

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Note that \code{isS4} does not rely on the \pkg{methods}
package, so in particular it can be used to detect the need to
\code{\LinkA{require}{require}} that package.  (But \code{asS4} does depend on
\pkg{methods}.)

Note that the S4 methods for primitive functions do not apply to S3
classes and that the methods for basic classes, such as the vector
types, are sealed.  To apply S4 methods reliably to an S3 object,
define an S4 class that extends the S3 class (see
\code{\LinkA{setOldClass}{setOldClass}}).

When \code{asS4} is called with \code{flag == FALSE}, the value of
\code{complete} controls whether an attempt is made to transform
\code{object} into a valid object of the implied S3 class.  If so,
then an object from an S4 class extending an S3 class will be
transformed into an S3 object with the corresponding S3 class (see
\code{\LinkA{S3Part}{S3Part}}).  This includes classes extending the
pseudo-classes \code{array} and \code{matrix}: such objects will have
their class attribute set to \code{NULL}.
\end{Details}
%
\begin{Value}
\code{isS4} always returns \code{TRUE} or \code{FALSE} according to
whether the internal flag marking an S4 object has been turned on for
this object.

\code{asS4} will turn this flag on or off, according to argument
\code{flag}, and in the latter case complete the conversion as
described under argument \code{complete}. Note that with \code{flag
    FALSE}, an S4 object will \emph{not} but turned into an S3 object
unless there is a valid conversion; that is, an object of type other
than \code{"S4"} for which the S4 object is an extension, unless
argument \code{complete} is \code{0}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{is.object}{is.object}} for a more general test; \LinkA{Methods}{Methods}
for general information on S4.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}

isS4(pi) # FALSE
isS4(getClass("MethodDefinition")) # TRUE

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{isSymmetric}{Test if a Matrix or other Object is Symmetric}{isSymmetric}
\methaliasA{isSymmetric.matrix}{isSymmetric}{isSymmetric.matrix}
\keyword{array}{isSymmetric}
\keyword{utilities}{isSymmetric}
%
\begin{Description}\relax
Generic function to test if \code{object} is symmetric or not.
Currently only a matrix method is implemented.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
isSymmetric(object, ...)
## S3 method for class 'matrix':
isSymmetric(object, tol = 100 * .Machine$double.eps, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] any \R{} object; a \code{\LinkA{matrix}{matrix}} for the matrix method.
\item[\code{tol}] numeric scalar >= 0.  Smaller differences are not
considered, see \code{\LinkA{all.equal.numeric}{all.equal.numeric}}.
\item[\code{...}] further arguments passed to methods; the matrix method
passes these to \code{\LinkA{all.equal}{all.equal}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{\LinkA{matrix}{matrix}} method is used inside \code{\LinkA{eigen}{eigen}} by
default to test symmetry of matrices \emph{up to rounding error}, using
\code{\LinkA{all.equal}{all.equal}}.  It might not be appropriate in all
situations.

Note that a matrix is only symmetric if its \code{rownames} and
\code{colnames} are identical.
\end{Details}
%
\begin{Value}
logical indicating if \code{object} is symmetric or not.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{eigen}{eigen}} which calls \code{isSymmetric} when its
\code{symmetric} argument is missing.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
isSymmetric(D3 <- diag(3)) # -> TRUE

D3[2,1] <- 1e-100
D3
isSymmetric(D3) # TRUE
isSymmetric(D3, tol = 0) # FALSE for zero-tolerance
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{jitter}{Add `Jitter' (Noise) to Numbers}{jitter}
\keyword{dplot}{jitter}
\keyword{utilities}{jitter}
%
\begin{Description}\relax
Add a small amount of noise to a numeric vector.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
jitter(x, factor=1, amount = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] numeric vector to which \emph{jitter} should be added.
\item[\code{factor}] numeric 
\item[\code{amount}] numeric; if positive, used as \emph{amount} (see below),
otherwise, if \code{= 0} the default is \code{factor * z/50}.

Default (\code{NULL}): \code{factor * d/5} where \code{d} is about
the smallest difference between \code{x} values.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The result, say \code{r}, is \code{r <- x + runif(n, -a, a)}
where \code{n <- length(x)} and \code{a} is the \code{amount}
argument (if specified).

Let \code{z <- max(x) - min(x)} (assuming the usual case).
The amount \code{a} to be added is either provided as \emph{positive}
argument \code{amount} or otherwise computed from \code{z}, as
follows:

If \code{amount == 0}, we set \code{a <- factor * z/50} (same as S).

If \code{amount} is \code{NULL} (\emph{default}), we set
\code{a <- factor * d/5} where \emph{d} is the smallest
difference between adjacent unique (apart from fuzz) \code{x} values.
\end{Details}
%
\begin{Value}
\code{jitter(x,...)} returns a numeric of the same length as
\code{x}, but with an \code{amount} of noise added in order to break
ties. 
\end{Value}
%
\begin{Author}\relax
Werner Stahel and Martin Maechler, ETH Zurich
\end{Author}
%
\begin{References}\relax
Chambers, J. M., Cleveland, W. S., Kleiner, B. and Tukey, P.A. (1983)
\emph{Graphical Methods for Data Analysis.} Wadsworth; figures 2.8,
4.22, 5.4.

Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S.}
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{rug}{rug}} which you may want to combine with \code{jitter}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
round(jitter(c(rep(1,3),  rep(1.2, 4), rep(3,3))), 3)
## These two 'fail' with S-plus 3.x:
jitter(rep(0, 7))
jitter(rep(10000,5))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{kappa}{Compute or Estimate the Condition Number of a Matrix}{kappa}
\methaliasA{kappa.default}{kappa}{kappa.default}
\methaliasA{kappa.lm}{kappa}{kappa.lm}
\methaliasA{kappa.qr}{kappa}{kappa.qr}
\methaliasA{kappa.tri}{kappa}{kappa.tri}
\aliasA{rcond}{kappa}{rcond}
\keyword{math}{kappa}
%
\begin{Description}\relax
The condition number of a regular (square) matrix is the product of
the \emph{norm} of the matrix and the norm of its inverse (or
pseudo-inverse), and hence depends on the kind of matrix-norm.

\code{kappa()} computes by default (an estimate of) the 2-norm
condition number of a matrix or of the \eqn{R}{} matrix of a \eqn{QR}{}
decomposition, perhaps of a linear fit.  The 2-norm condition number
can be shown to be the ratio of the largest to the smallest
\emph{non-zero} singular value of the matrix.

\code{rcond()} computes an approximation of the \bold{r}eciprocal
\bold{cond}ition number, see the details.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
kappa(z, ...)
## Default S3 method:
kappa(z, exact = FALSE,
      norm = NULL, method = c("qr", "direct"), ...)
## S3 method for class 'lm':
kappa(z, ...)
## S3 method for class 'qr':
kappa(z, ...)

kappa.tri(z, exact = FALSE, LINPACK = TRUE, norm=NULL, ...)

rcond(x, norm = c("O","I","1"), triangular = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{z,x}] A matrix or a the result of \code{\LinkA{qr}{qr}} or a fit from a class
inheriting from \code{"lm"}.
\item[\code{exact}] logical. Should the result be exact?
\item[\code{norm}] character string, specifying the matrix norm with respect to which
the condition number is to be computed.  \code{"O"}, the default,
means the \bold{O}ne- or 1-norm.  The (currently only) other
possible value is \code{"I"} for the infinity norm.
\item[\code{method}] character string, specifying the method to be used;
\code{"qr"} is default for back-compatibility, mainly.
\item[\code{triangular}] logical.  If true, the matrix used is just the lower
triangular part of \code{z}.
\item[\code{LINPACK}] logical.  If true and \code{z} is not complex, the
Linpack routine \code{dtrco()} is called; otherwise the relevant
Lapack routine is.
\item[\code{...}] further arguments passed to or from other methods;
for \code{kappa.*()}, notably \code{LINPACK} when \code{norm} is not
\code{"2"}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For \code{kappa()}, if \code{exact = FALSE} (the default) the
2-norm condition number is estimated by a cheap approximation.
Following S, by default, this uses the LINPACK routine \code{dtrco()}.
However, in \R{} (or S) the exact calculation (via \code{\LinkA{svd}{svd}}) is
also likely to be quick enough.

Note that the 1- and Inf-norm condition numbers are much faster to
calculate, and \code{rcond()} computes these \emph{\bold{r}eciprocal}
condition numbers, also for complex matrices, using standard Lapack
routines.

\code{kappa} and \code{rcond} are different interfaces to
\emph{partly} identical functionality.

\code{kappa.tri} is an internal function called by \code{kappa.qr}.
\end{Details}
%
\begin{Value}
The condition number, \eqn{kappa}{}, or an approximation if
\code{exact = FALSE}.
\end{Value}
%
\begin{Author}\relax
The design was inspired by (but differs considerably from)
the S function of the same name described in Chambers (1992).
\end{Author}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Linear models.}
Chapter 4 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{svd}{svd}} for the singular value decomposition and
\code{\LinkA{qr}{qr}} for the \eqn{QR}{} one.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
kappa(x1 <- cbind(1,1:10))# 15.71
kappa(x1, exact = TRUE)        # 13.68
kappa(x2 <- cbind(x1,2:11))# high! [x2 is singular!]

hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
sv9 <- svd(h9 <- hilbert(9))$ d
kappa(h9)# pretty high!
kappa(h9, exact = TRUE) == max(sv9) / min(sv9)
kappa(h9, exact = TRUE) / kappa(h9) # .677 (i.e., rel.error = 32%)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{kronecker}{Kronecker products on arrays}{kronecker}
\aliasA{\%x\%}{kronecker}{.Rpcent.x.Rpcent.}
\keyword{array}{kronecker}
%
\begin{Description}\relax
Computes the generalised kronecker product of two arrays,
\code{X} and \code{Y}.  \code{kronecker(X, Y)} returns an array
\code{A} with dimensions \code{dim(X) * dim(Y)}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
kronecker(X, Y, FUN = "*", make.dimnames = FALSE, ...)
X %x% Y
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{X}] A vector or array.
\item[\code{Y}] A vector or array.
\item[\code{FUN}] a function; it may be a quoted string.
\item[\code{make.dimnames}] Provide dimnames that are the product of the
dimnames of \code{X} and \code{Y}.
\item[\code{...}] optional arguments to be passed to \code{FUN}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{X} and \code{Y} do not have the same number of
dimensions, the smaller array is padded with dimensions of size
one.  The returned array comprises submatrices constructed by
taking \code{X} one term at a time and expanding that term as
\code{FUN(x, Y, ...)}.

\code{\%x\%} is an alias for \code{kronecker} (where
\code{FUN} is hardwired to \code{"*"}).
\end{Details}
%
\begin{Author}\relax
Jonathan Rougier, \email{J.C.Rougier@durham.ac.uk}
\end{Author}
%
\begin{References}\relax
Shayle R. Searle (1982)
\emph{Matrix Algebra Useful for Statistics.} John Wiley and Sons.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{outer}{outer}}, on which \code{kronecker} is built
and \code{\LinkA{\Rpercent{}*\Rpercent{}}{.Rpcent.*.Rpcent.}} for usual matrix multiplication.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# simple scalar multiplication
( M <- matrix(1:6, ncol=2) )
kronecker(4, M)
# Block diagonal matrix:
kronecker(diag(1, 3), M)

# ask for dimnames

fred <- matrix(1:12, 3, 4, dimnames=list(LETTERS[1:3], LETTERS[4:7]))
bill <- c("happy" = 100, "sad" = 1000)
kronecker(fred, bill, make.dimnames = TRUE)

bill <- outer(bill, c("cat"=3, "dog"=4))
kronecker(fred, bill, make.dimnames = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{l10n\_info}{Localization Information}{l10n.Rul.info}
\keyword{utilities}{l10n\_info}
%
\begin{Description}\relax
Report on localization information.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
l10n_info()
\end{verbatim}
\end{Usage}
%
\begin{Value}
A list with three logical components:
\begin{ldescription}
\item[\code{MBCS}] If a multi-byte character set in use?
\item[\code{UTF-8}] Is this a UTF-8 locale?
\item[\code{Latin-1}] Is this a Latin-1 locale?
\end{ldescription}
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.getlocale}{Sys.getlocale}}, \code{\LinkA{localeconv}{localeconv}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
l10n_info()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{labels}{Find Labels from Object}{labels}
\methaliasA{labels.default}{labels}{labels.default}
\keyword{print}{labels}
\keyword{models}{labels}
%
\begin{Description}\relax
Find a suitable set of labels from an object for use in printing or
plotting, for example.  A generic function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
labels(object, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] Any \R{} object: the function is generic.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character vector or list of such vectors. For a vector the results
is the names or \code{seq(along=x)} and  for a data frame or array it is
the dimnames (with \code{NULL} expanded to \code{seq(len=d[i])}.
\end{Value}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S.}
Wadsworth \& Brooks/Cole.
\end{References}
\inputencoding{latin1}
\HeaderA{lapply}{Apply a Function over a List or Vector}{lapply}
\aliasA{replicate}{lapply}{replicate}
\aliasA{sapply}{lapply}{sapply}
\keyword{iteration}{lapply}
\keyword{list}{lapply}
%
\begin{Description}\relax
\code{lapply} returns a list of the same length as \code{X}, each
element of which is the result of applying \code{FUN} to the
corresponding element of \code{X}.

\code{sapply} is a user-friendly version of \code{lapply}
by default returning a vector or matrix if appropriate.

\code{replicate} is a wrapper for the common use of \code{sapply} for
repeated evaluation of an expression (which will usually involve
random number generation).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
lapply(X, FUN, ...)

sapply(X, FUN, ..., simplify = TRUE, USE.NAMES = TRUE)

replicate(n, expr, simplify = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{X}] a vector (atomic or list) or an expressions vector.  Other
objects (including classed objects) will be coerced by
\code{\LinkA{as.list}{as.list}}.
\item[\code{FUN}] the function to be applied to each element of \code{X}:
see `Details'.  In the case of functions like
\code{+}, \code{\%*\%}, etc.,
the function name must be backquoted or quoted.
\item[\code{...}] optional arguments to \code{FUN}.
\item[\code{simplify}] logical; should the result be simplified to a vector
or matrix if possible?
\item[\code{USE.NAMES}] logical; if \code{TRUE} and if \code{X} is character,
use \code{X} as \code{\LinkA{names}{names}} for the result unless it had names
already.
\item[\code{n}] number of replications.
\item[\code{expr}] expression (language object, usually a call)
to evaluate repeatedly.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{FUN} is found by a call to \code{\LinkA{match.fun}{match.fun}} and typically
is specified as a function or a symbol (e.g. a backquoted name) or a
character string specifying a function to be searched for from the
environment of the call to \code{lapply}.

Function \code{FUN} must be able to accept as input any of the
elements of \code{X}.  If the latter is an atomic vector, \code{FUN}
will always be passed a length-one vector of the same type as \code{X}.

Simplification in \code{sapply} is only attempted if \code{X} has
length greater than zero and if the return values from all elements
of \code{X} are all of the same (positive) length.  If the common
length is one the result is a vector, and if greater than one is a
matrix with a column corresponding to each element of \code{X}.

Users of S4 classes should pass a list to \code{lapply}: the internal
coercion is done by the system \code{as.list} in the base namespace
and not one defined by a user (e.g. by setting S4 methods on the
system function).
\end{Details}
%
\begin{Value}
For \code{lapply} and \code{sapply(simplify=FALSE)}, a list.

For \code{sapply(simplify=TRUE)} and \code{replicate}: if \code{X} has
length zero or \code{n = 0}, an empty list.  Otherwise an atomic
vector or matrix or list of the same length as \code{X} (of length
\code{n} for \code{replicate}).  If simplification occurs, the output
type is determined from the highest type of the return values in the
hierarchy NULL < raw < logical < integer < real < complex < character
< list < expression, after coercion of pairlists to lists.
\end{Value}
%
\begin{Note}\relax
\code{sapply(*, simplify = FALSE, USE.NAMES = FALSE)} is
equivalent to \code{lapply(*)}.

For historical reasons, the calls created by \code{lapply} are
unevaluated, and code has been written (e.g. \code{bquote}) that
relies on this.  This means that the recorded call is always of the
form \code{FUN(X[[0L]], ...)}, with \code{0L} replaced by the current
integer index.  This not normally a problem, but it can be if
\code{FUN} uses \code{\LinkA{sys.call}{sys.call}} or \code{\LinkA{match.call}{match.call}} or
if it is a primitive function that makes use of the call.  This means
that it is often safer to call primitive functions with a wrapper, so
that e.g. \code{lapply(ll, function(x) is.numeric(x))} is required in
\R{} 2.7.1 to ensure that method dispatch for \code{is.numeric} occurs
correctly.

If \code{expr} is a function call, be aware of assumptions about where
it is evaluated, and in particular what \code{...} might refer to.
You can pass additional named arguments to a function call as
additional named arguments to \code{replicate}: see `Examples'.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{apply}{apply}}, \code{\LinkA{tapply}{tapply}},
\code{\LinkA{mapply}{mapply}} for applying a function to \bold{m}ultiple
arguments, and \code{\LinkA{rapply}{rapply}} for a \bold{r}ecursive version of
\code{lapply()}, \code{\LinkA{eapply}{eapply}} for applying a function to each
entry in an \code{\LinkA{environment}{environment}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats); require(graphics)

x <- list(a = 1:10, beta = exp(-3:3), logic = c(TRUE,FALSE,FALSE,TRUE))
# compute the list mean for each list element
lapply(x,mean)
# median and quartiles for each list element
lapply(x, quantile, probs = 1:3/4)
sapply(x, quantile)
i39 <- sapply(3:9, seq) # list of vectors
sapply(i39, fivenum)

hist(replicate(100, mean(rexp(10))))

## use of replicate() with parameters:
foo <- function(x=1, y=2) c(x,y)
# does not work: bar <- function(n, ...) replicate(n, foo(...))
bar <- function(n, x) replicate(n, foo(x=x))
bar(5, x=3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Last.value}{Value of Last Evaluated Expression}{Last.value}
\aliasA{.Last.value}{Last.value}{.Last.value}
\keyword{programming}{Last.value}
%
\begin{Description}\relax
The value of the internal evaluation of a top-level \R{} expression
is always assigned to \code{.Last.value} (in \code{package:base})
before further processing (e.g., printing).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Last.value
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
The value of a top-level assignment \emph{is} put in \code{.Last.value},
unlike S.

Do not assign to \code{.Last.value} in the workspace, because this
will always mask the object of the same name in \code{package:base}.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{eval}{eval}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## These will not work correctly from example(),
## but they will in make check or if pasted in,
## as example() does not run them at the top level
gamma(1:15)          # think of some intensive calculation...
fac14 <- .Last.value # keep them

library("splines") # returns invisibly
.Last.value    # shows what library(.) above returned

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{length}{Length of an Object}{length}
\aliasA{length<\Rdash}{length}{length<.Rdash.}
\methaliasA{length<\Rdash.factor}{length}{length<.Rdash..factor}
\keyword{attribute}{length}
%
\begin{Description}\relax
Get or set the length of vectors (including lists) and factors, and of
any other \R{} object for which a method has been defined.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
length(x)
length(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object.  For replacement, a vector or factor.
\item[\code{value}] an integer.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Both functions are generic: you can write methods to handle specific
classes of objects, see \LinkA{InternalMethods}{InternalMethods}.  \code{length<-} has a
\code{"factor"} method.

The replacement form can be used to reset the length of a vector.  If
a vector is shortened, extra values are discarded and when a vector is
lengthened, it is padded out to its new length with \code{\LinkA{NA}{NA}}s
(\code{nul} for raw vectors).

These functions are \LinkA{primitive}{primitive}, so argument names are ignored
(but this might not be true of their methods).
\end{Details}
%
\begin{Value}
The default method currently returns an \code{\LinkA{integer}{integer}} of
length 1.  Since this may change in the future and may
differ for other methods, programmers should not rely on it.
(Should the length exceed the maximum representable integer, it is
returned as \code{NA}.)

For vectors (including lists) and factors the length is the number of
elements.  For an environment it is the number of objects in the
environment, and \code{NULL} has length 0.  For expressions and
pairlists (including language objects and dotlists) it is the length
of the pairlist chain.  All other objects (including functions) have
length one: note that for functions this differs from S.

The replacement form removes all the attributes of \code{x} except its
names.  
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{nchar} for counting the number of characters in
character vectors.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
length(diag(4))# = 16 (4 x 4)
length(options())# 12 or more
length(y ~ x1 + x2 + x3)# 3
length(expression(x, {y <- x^2; y+2}, x^y)) # 3

## from example(warpbreaks)
require(stats)

fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)
length(fm1$call) # 3, lm() and two arguments.
length(formula(fm1)) # 3, ~ lhs rhs
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{levels}{Levels Attributes}{levels}
\methaliasA{levels.default}{levels}{levels.default}
\aliasA{levels<\Rdash}{levels}{levels<.Rdash.}
\methaliasA{levels<\Rdash.factor}{levels}{levels<.Rdash..factor}
\keyword{category}{levels}
%
\begin{Description}\relax
\code{levels} provides access to the levels attribute of a variable.
The first form returns the value of the levels of its argument
and the second sets the attribute.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
levels(x)
levels(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object, for example a factor.
\item[\code{value}] A valid value for \code{levels(x)}.
For the default method, \code{NULL} or a character vector.  For the
\code{factor} method, a vector of character strings with length at
least the number of levels of \code{x}, or a named list specifying how to
rename the levels.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Both the extractor and replacement forms are generic and new methods
can be written for them. The most important method for the replacement
function is that for \code{\LinkA{factor}{factor}}s.

For the factor replacement method, a \code{NA} in \code{value}
causes that level to be removed from the levels and the elements
formerly with that level to be replaced by \code{NA}.

Note that for a factor, replacing the levels via
\code{levels(x) <- value} is not the same as (and is preferred to)
\code{attr(x, "levels") <- value}.

The replacement function is \LinkA{primitive}{primitive}, so argument names are
ignored (but this might not be true of its methods).
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{nlevels}{nlevels}}, \code{\LinkA{relevel}{relevel}}, \code{\LinkA{reorder}{reorder}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## assign individual levels
x <- gl(2, 4, 8)
levels(x)[1] <- "low"
levels(x)[2] <- "high"
x

## or as a group
y <- gl(2, 4, 8)
levels(y) <- c("low", "high")
y

## combine some levels
z <- gl(3, 2, 12)
levels(z) <- c("A", "B", "A")
z

## same, using a named list
z <- gl(3, 2, 12)
levels(z) <- list(A=c(1,3), B=2)
z

## we can add levels this way:
f <- factor(c("a","b"))
levels(f) <- c("c", "a", "b")
f

f <- factor(c("a","b"))
levels(f) <- list(C="C", A="a", B="b")
f
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{libPaths}{Search Paths for Packages}{libPaths}
\aliasA{.expand\_R\_libs\_env\_var}{libPaths}{.expand.Rul.R.Rul.libs.Rul.env.Rul.var}
\aliasA{.libPaths}{libPaths}{.libPaths}
\aliasA{.Library}{libPaths}{.Library}
\methaliasA{.Library.site}{libPaths}{.Library.site}
\aliasA{R\_LIBS}{libPaths}{R.Rul.LIBS}
\aliasA{R\_LIBS\_SITE}{libPaths}{R.Rul.LIBS.Rul.SITE}
\aliasA{R\_LIBS\_USER}{libPaths}{R.Rul.LIBS.Rul.USER}
\keyword{data}{libPaths}
%
\begin{Description}\relax
\code{.libPaths} gets/sets the library trees within which packages are
looked for.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.libPaths(new)

.Library
.Library.site
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{new}] a character vector with the locations of \R{} library
trees.  Tilde expansion (\code{\LinkA{path.expand}{path.expand}}) is done, and if
any element contains one of \code{*?[}, globbing is done where
supported by the platform: see \code{\LinkA{Sys.glob}{Sys.glob}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{.Library} is a character string giving the location of the
default library, the \file{library} subdirectory of \env{R\_HOME}.

\code{.Library.site} is a (possibly empty) character vector giving the
locations of the site libraries, by default the \file{site-library}
subdirectory of \env{R\_HOME} (which may not exist).

\code{.libPaths} is used for getting or setting the library trees that
\R{} knows about (and hence uses when looking for packages).  If called
with argument \code{new}, the library search path is set to
the existing directories in \code{unique(c(new, .Library.site, .Library))}
and this is returned.  If given no argument, a character vector with
the currently active library trees is returned.

The library search path is initialized at startup from the environment
variable \env{R\_LIBS} (which should be a colon-separated list of
directories at which \R{} library trees are rooted) followed by those in
environment variable \env{R\_LIBS\_USER}.  Only directories which exist
at the time will be included.

By default \env{R\_LIBS} is unset, and \env{R\_LIBS\_USER} is set to
directory \file{R/\var{R.version\$platform}-library/\var{x.y}}
of the home directory (or \file{Library/R/\var{x.y}/library} for
Mac OS X AQUA builds), for \R{} \var{x.y.z}.

\code{.Library.site} can be set via the environment variable 
\env{R\_LIBS\_SITE} (as a colon-separated list of library trees).

Both \env{R\_LIBS\_USER} and \env{R\_LIBS\_SITE} feature possible
expansion of specifiers for \R{} version specific information as part of
the startup process.  The possible conversion specifiers all start
with a \samp{\%} and are followed by a single letter (use \samp{\%\%}
to obtain \samp{\%}), with currently available conversion
specifications as follows:
\begin{description}

\item[\samp{\%V}] \R{} version number including the patchlevel (e.g.,
\samp{2.5.0}).
\item[\samp{\%v}] \R{} version number excluding the patchlevel (e.g.,
\samp{2.5}).
\item[\samp{\%p}] the platform for which \R{} was built, the value of
\code{\LinkA{R.version}{R.version}\$platform}.
\item[\samp{\%o}] the underlying operating system, the value of
\code{\LinkA{R.version}{R.version}\$os}.
\item[\samp{\%a}] the architecture (CPU) \R{} was built on/for, the
value of \code{\LinkA{R.version}{R.version}\$arch}.

\end{description}

(See \code{\LinkA{version}{version}} for details on R version information.)

Function \code{.libPaths} always uses the values of \code{.Library}
and \code{.Library.site} in the base name space.  \code{.Library.site}
can be set by the site in \file{Rprofile.site}, which should be
followed by a call to \code{.libPaths(.libPaths())} to make use of the
updated value.
\end{Details}
%
\begin{Value}
A character vector of file paths.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{library}{library}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
.libPaths()                 # all library trees R knows about
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{library}{Loading and Listing of Packages}{library}
\aliasA{.First.lib}{library}{.First.lib}
\aliasA{.Last.lib}{library}{.Last.lib}
\aliasA{.noGenerics}{library}{.noGenerics}
\aliasA{print.libraryIQR}{library}{print.libraryIQR}
\aliasA{print.packageInfo}{library}{print.packageInfo}
\aliasA{require}{library}{require}
\keyword{data}{library}
%
\begin{Description}\relax
\code{library} and \code{require} load add-on packages.

\code{.First.lib} is called when a package is loaded;
\code{.Last.lib} is called when a package is detached.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
library(package, help, pos = 2, lib.loc = NULL,
        character.only = FALSE, logical.return = FALSE,
        warn.conflicts = TRUE,
        keep.source = getOption("keep.source.pkgs"),
        verbose = getOption("verbose"))

require(package, lib.loc = NULL, quietly = FALSE,
        warn.conflicts = TRUE,
        keep.source = getOption("keep.source.pkgs"),
        character.only = FALSE, save = TRUE)

.First.lib(libname, pkgname)
.Last.lib(libpath)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{package, help}] the name of a package, given as a \LinkA{name}{name} or
literal character string, or a character string, depending on
whether \code{character.only} is \code{FALSE} (default) or
\code{TRUE}).
\item[\code{pos}] the position on the search list at which to attach the
loaded package.  Note that \code{.First.lib} may attach other
packages, and \code{pos} is computed \emph{after} \code{.First.lib}
has been run.  Can also be the name of a position on the current
search list as given by \code{\LinkA{search}{search}()}.
\item[\code{lib.loc}] a character vector describing the location of \R{}
library trees to search through, or \code{NULL}.  The default value
of \code{NULL} corresponds to all libraries currently known.
Non-existent library trees are silently ignored.
\item[\code{character.only}] a logical indicating whether \code{package} or
\code{help} can be assumed to be character strings.
\item[\code{logical.return}] logical.  If it is \code{TRUE},  \code{FALSE} or
\code{TRUE} is returned to indicate success.
\item[\code{warn.conflicts}] logical.  If \code{TRUE}, warnings are
printed about \code{\LinkA{conflicts}{conflicts}} from attaching the new
package, unless that package contains an object
\code{.conflicts.OK}.  A conflict is a function masking a function,
or a non-function masking a non-function.

\item[\code{keep.source}] logical.  If \code{TRUE}, functions
`keep their source' including comments, see argument
\code{keep.source} to \code{\LinkA{options}{options}}.  This applies only to
the named package, and not to any packages or name spaces which might be
loaded to satisfy dependencies or imports.

This argument does not apply to packages using lazy-loading.
Whether they have kept source is determined when they are installed
(and is most likely false).

\item[\code{verbose}] a logical.  If \code{TRUE}, additional diagnostics are
printed.
\item[\code{quietly}] a logical.  If \code{TRUE}, no message confirming
package loading is printed.
\item[\code{save}] logical or environment.  If \code{TRUE}, a call to
\code{require} from the source for a package will save the name of
the required package in the variable \code{".required"}, allowing
function \code{\LinkA{detach}{detach}} to warn if a required package is
detached. See section `Packages that require other packages' below.
\item[\code{libname}] a character string giving the library directory where
the package was found.
\item[\code{pkgname}] a character string giving the name of the package.
\item[\code{libpath}] a character string giving the complete path to the
package.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{library(package)} and \code{require(package)} both load the
package with name \code{package}.  \code{require} is designed for use
inside other functions; it returns \code{FALSE} and gives a warning
(rather than an error as \code{library()} does by default) if the
package does not exist.  Both functions check and update the list of
currently loaded packages and do not reload a package which is already
loaded.  (Furthermore, if the package has a name space and a name
space of that name is already loaded, they work from the existing
name space rather than reloading from the file system.  If you want to
reload a package, call \code{\LinkA{detach}{detach}} or
\code{\LinkA{unloadNamespace}{unloadNamespace}} first.)

To suppress messages during the loading of packages use
\code{\LinkA{suppressPackageStartupMessages}{suppressPackageStartupMessages}}: this will suppress all
messages from \R{} itself but not necessarily all those from package
authors.

If \code{library} is called with no \code{package} or \code{help}
argument, it lists all available packages in the libraries specified
by \code{lib.loc}, and returns the corresponding information in an
object of class \code{"libraryIQR"}.  The structure of this class may
change in future versions.  In earlier versions of \R{}, only the names
of all available packages were returned; use \code{.packages(all =
    TRUE)} for obtaining these.  Note that
\code{\LinkA{installed.packages}{installed.packages}()}
returns even more information.

\code{library(help = somename)} computes basic information about the
package \code{somename}, and returns this in an object of class
\code{"packageInfo"}.  The structure of this class may change in
future versions.  When used with the default value (\code{NULL}) for
\code{lib.loc}, the loaded packages are searched before the libraries.

\code{.First.lib} is called when a package without a name space is
loaded by \code{library}.  (For packages with name spaces see
\code{\LinkA{.onLoad}{.onLoad}}.)  It is called with two arguments, the name of
the library directory where the package was found (i.e., the
corresponding element of \code{lib.loc}), and the name of the package.
It is a good place to put calls to \code{\LinkA{library.dynam}{library.dynam}} which
are needed when loading a package into this function (don't call
\code{library.dynam} directly, as this will not work if the package is
not installed in a standard location).  \code{.First.lib} is invoked
after the search path interrogated by \code{search()} has been
updated, so \code{as.environment(match("package:name", search()))}
will return the environment in which the package is stored.  If
calling \code{.First.lib} gives an error the loading of the package is
abandoned, and the package will be unavailable.  Similarly, if the
option \code{".First.lib"} has a list element with the package's name,
this element is called in the same manner as \code{.First.lib} when
the package is loaded.  This mechanism allows the user to set package
`load hooks' in addition to startup code as provided by the
package maintainers, but \code{\LinkA{setHook}{setHook}} is preferred.

\code{.Last.lib} is called when a package is detached.  Beware
that it might be called if \code{.First.lib} has failed, so it
should be written defensively. (It is called within \code{\LinkA{try}{try}},
so errors will not stop the package being detached.)
\end{Details}
%
\begin{Value}
Normally \code{library} returns (invisibly) the list of loaded
packages, but \code{TRUE} or \code{FALSE} if \code{logical.return} is
\code{TRUE}.  When called as \code{library()} it returns an object of
class \code{"libraryIQR"}, and for \code{library(help=)}, one of
class \code{"packageInfo"}.

\code{require} returns (invisibly) a logical indicating whether the required
package is available.
\end{Value}
%
\begin{Section}{Packages that require other packages}
\bold{NB:} This mechanism has been almost entirely superseded by
using the \samp{Depends:} field in the \file{DESCRIPTION} file of a
package. 



The source code for a
package that requires one or more other packages should have a call
to \code{require}, preferably near the beginning of the source, and
of course before any code that uses functions, classes or methods
from the other package.  The default for argument \code{save} will
save the names of all required packages in the environment of the
new package.  The saved package names are used by
\code{\LinkA{detach}{detach}} when a package is detached to warn if other
packages still require the to-be-detached package.
\end{Section}
%
\begin{Section}{Formal methods}
\code{library} takes some further actions when package \pkg{methods}
is attached (as it is by default).  Packages may define formal generic
functions as well as re-defining functions in other packages (notably
\pkg{base}) to be generic, and this information is cached whenever
such a package is loaded after \pkg{methods} and re-defined functions
(\LinkA{implicit generic}{implicit generic}s) are excluded from the list of conflicts.
The caching  and check for conflicts require looking for a pattern of
objects; the search may be avoided by defining an object
\code{.noGenerics} (with any value) in the package.  Naturally, if the
package \emph{does} have any such methods, this will prevent them from
being used.
\end{Section}
%
\begin{Note}\relax
\code{library} and \code{require} can only load an \emph{installed}
package, and this is detected by having a \file{DESCRIPTION} file
containing a \samp{Built:} field.

Under Unix-alikes, the code checks that the package was installed
under a similar operating system as given by \code{R.version\$platform}
(the canonical name of the platform under which R was compiled),
provided it contains compiled code.  Packages which do not contain
compiled code can be shared between Unix-alikes, but not to other OSes
because of potential problems with line endings and OS-specific help
files.  If sub-architectures are used, the OS similarity is not
checked since the OS used to build may differ (e.g.
\code{i386-pc-linux-gnu} code can be built on an
\code{x86\_64-unknown-linux-gnu} OS).


The package name given to \code{library} and \code{require} must match
the name given in the package's \file{DESCRIPTION} file exactly, even
on case-insensitive file systems such as MS Windows.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{.libPaths}{.libPaths}}, \code{\LinkA{.packages}{.packages}}.

\code{\LinkA{attach}{attach}}, \code{\LinkA{detach}{detach}}, \code{\LinkA{search}{search}},
\code{\LinkA{objects}{objects}}, \code{\LinkA{autoload}{autoload}},
\code{\LinkA{library.dynam}{library.dynam}}, \code{\LinkA{data}{data}},
\code{\LinkA{install.packages}{install.packages}} and
\code{\LinkA{installed.packages}{installed.packages}};
\code{\LinkA{INSTALL}{INSTALL}}, \code{\LinkA{REMOVE}{REMOVE}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
library()                   # list all available packages
library(lib.loc = .Library) # list all packages in the default library
library(help = splines)     # documentation on package 'splines'
library(splines)            # load package 'splines'
require(splines)            # the same
search()                    # "splines", too
detach("package:splines")

# if the package name is in a character vector, use
pkg <- "splines"
library(pkg, character.only = TRUE)
detach(pos = match(paste("package", pkg, sep=":"), search()))

require(pkg, character.only = TRUE)
detach(pos = match(paste("package", pkg, sep=":"), search()))

require(nonexistent)        # FALSE
## Not run: 
## Suppose a package needs to call a DLL named 'fooEXT',
## where 'EXT' is the system-specific extension.  Then you should use
.First.lib <- function(lib, pkg)
  library.dynam("foo", pkg, lib)

## if you want to mask as little as possible, use
library(mypkg, pos = "package:base")

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{library.dynam}{Loading DLLs from Packages}{library.dynam}
\aliasA{.dynLibs}{library.dynam}{.dynLibs}
\methaliasA{library.dynam.unload}{library.dynam}{library.dynam.unload}
\keyword{data}{library.dynam}
%
\begin{Description}\relax
Load the specified file of compiled code if it has not been loaded
already, or unloads it.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
library.dynam(chname, package = NULL, lib.loc = NULL,
              verbose = getOption("verbose"),
              file.ext = .Platform$dynlib.ext, ...)

library.dynam.unload(chname, libpath,
              verbose = getOption("verbose"),
              file.ext = .Platform$dynlib.ext)

.dynLibs(new)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{chname}] a character string naming a DLL (also known as a dynamic
shared object or library) to load.
\item[\code{package}] a character vector with the names of packages to search
through, or \code{NULL}.  By default, all packages in the search
path are used.
\item[\code{lib.loc}] a character vector describing the location of \R{}
library trees to search through, or \code{NULL}.  The default value
of \code{NULL} corresponds to all libraries currently known.
\item[\code{libpath}] the path to the loaded package whose DLL is to be unloaded.
\item[\code{verbose}] a logical value indicating whether an announcement
is printed on the console before loading the DLL.  The
default value is taken from the verbose entry in the system
\code{\LinkA{options}{options}}.
\item[\code{file.ext}] the extension (including \samp{.} if used) to append
to the file name to specify the library to be loaded.  This defaults
to the appropriate value for the operating system.
\item[\code{...}] additional arguments needed by some libraries that
are passed to the call to \code{\LinkA{dyn.load}{dyn.load}} to control
how the library and its dependencies are loaded.
\item[\code{new}] a list of \code{"DLLInfo"} objects corresponding to the
DLLs loaded by packages.  Can be missing.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
See \code{\LinkA{dyn.load}{dyn.load}} for what sort of objects these functions handle.

\code{library.dynam} is designed to be used inside a package rather
than at the command line, and should really only be used inside
\code{\LinkA{.First.lib}{.First.lib}} or \code{\LinkA{.onLoad}{.onLoad}}.  The
system-specific extension for DLLs (e.g., \file{.so} or \file{.sl} on
Unix systems, \file{.so} on Mac OS X, \file{.dll} on Windows) should
not be added.

\code{library.dynam.unload} is designed for use in
\code{\LinkA{.Last.lib}{.Last.lib}} or \code{\LinkA{.onUnload}{.onUnload}}: it unloads the
DLL and updates the value of \code{.dynLibs()}

\code{.dynLibs} is used for getting (with no argument) or setting the
DLLs which are currently loaded by packages (using \code{library.dynam}).
\end{Details}
%
\begin{Value}
If \code{chname} is not specified, \code{library.dynam} returns an
object of class \code{"DLLInfoList"} corresponding to the DLLs loaded
by packages.

If \code{chname} is specified, an object of class \code{"DLLInfo"} that
identifies the DLL and can be used in future calls is returned
invisibly.  For packages that have name spaces, a list of these objects
is stored in the name space's environment for use at run-time.

Note that the class \code{DLLInfo} has an overloaded method for
\code{\$} which can be used to resolve native symbols within that
DLL.

\code{library.dynam.unload} invisibly returns an object of class
\code{"DLLInfo"} identifying the DLL successfully unloaded.

\code{.dynLibs} returns an object of class \code{"DLLInfoList"}
corresponding corresponding to its current value.
\end{Value}
%
\begin{Section}{Warning}
Do not use \code{\LinkA{dyn.unload}{dyn.unload}} on a DLL loaded by
\code{library.dynam}: use \code{library.dynam.unload} to ensure
that \code{.dynLibs} gets updated.  Otherwise a subsequent call to
\code{library.dynam} will be told the object is already loaded.

Note that whether or not it is possible to unload a DLL and then
reload a revised version of the same file is OS-dependent: see the
`Value' section of the help for  \code{\LinkA{dyn.unload}{dyn.unload}}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{getLoadedDLLs}{getLoadedDLLs}} for information on \code{"DLLInfo"} and
\code{"DLLInfoList"} objects.

\code{\LinkA{.First.lib}{.First.lib}}, \code{\LinkA{library}{library}},
\code{\LinkA{dyn.load}{dyn.load}}, \code{\LinkA{.packages}{.packages}},
\code{\LinkA{.libPaths}{.libPaths}}

\code{\LinkA{SHLIB}{SHLIB}} for how to create suitable DLLs.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Which DLLs were "dynamically loaded" by packages?
library.dynam() 
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{license}{The R License Terms}{license}
\aliasA{licence}{license}{licence}
\keyword{misc}{license}
%
\begin{Description}\relax
The license terms under which \R{} is distributed.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
license()
licence()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
\R{} is distributed under the terms of the GNU GENERAL PUBLIC LICENSE
Version 2, June 1991.  A copy of this license is in file
\file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/COPYING} and can be viewed by
\code{RShowDoc("COPYING")}. 

A small number of files (the API header files) are distributed under
the LESSER GNU GENERAL PUBLIC LICENSE version 2.1.  A copy of this
license is in file \file{\$R\_DOC\_DIR/COPYING.LIB} and can be viewed
by \code{RShowDoc("COPYING.LIB")}.
\end{Details}
\inputencoding{latin1}
\HeaderA{list}{Lists -- Generic and Dotted Pairs}{list}
\aliasA{alist}{list}{alist}
\aliasA{as.list}{list}{as.list}
\methaliasA{as.list.data.frame}{list}{as.list.data.frame}
\methaliasA{as.list.default}{list}{as.list.default}
\methaliasA{as.list.environment}{list}{as.list.environment}
\methaliasA{as.list.factor}{list}{as.list.factor}
\methaliasA{as.list.function}{list}{as.list.function}
\aliasA{as.pairlist}{list}{as.pairlist}
\aliasA{is.list}{list}{is.list}
\aliasA{is.pairlist}{list}{is.pairlist}
\aliasA{pairlist}{list}{pairlist}
\keyword{list}{list}
\keyword{manip}{list}
%
\begin{Description}\relax
Functions to construct, coerce and check for both kinds of \R{} lists.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
list(...)
pairlist(...)

as.list(x, ...)
## S3 method for class 'environment':
as.list(x, all.names = FALSE, ...)
as.pairlist(x)

is.list(x)
is.pairlist(x)

alist(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] objects, possibly named.
\item[\code{x}] object to be coerced or tested.
\item[\code{all.names}] a logical indicating whether to copy all values or
(default) only those whose names do not begin with a dot.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Most lists in \R{} internally are \emph{Generic Vectors}, whereas
traditional \emph{dotted pair} lists (as in LISP) are available
but rarely seen by users (except as \code{\LinkA{formals}{formals}} of functions).

The arguments to \code{list} or \code{pairlist} are of the form
\code{value} or \code{tag=value}.  The functions return a list or
dotted pair list composed of its arguments with each value either
tagged or untagged, depending on how the argument was specified.

\code{alist} handles its arguments as if they described function
arguments.  So the values are not evaluated, and tagged arguments with
no value are allowed whereas \code{list} simply ignores them.
\code{alist} is most often used in conjunction with \code{\LinkA{formals}{formals}}.

\code{as.list} attempts to coerce its argument to a list.  For
functions, this returns the concatenation of the list of formal
arguments and the function body.  For expressions, the list of
constituent elements is returned.  \code{as.list} is generic, and as the
default method calls \code{\LinkA{as.vector}{as.vector}(mode="list")} methods for
\code{as.vector} may be invoked.  \code{as.list}
turns a factor into a list of one-element factors.  All attributes
will be dropped unless the argument already is a list.  (This is
inconsistent with functions such as \code{\LinkA{as.character}{as.character}}, and is
for efficiency since lists can be expensive to copy.)

\code{is.list} returns \code{TRUE} if and only if its argument
is a \code{list} \emph{or} a \code{pairlist} of \code{length} \eqn{> 0}{}.
\code{is.pairlist} returns \code{TRUE} if and only if the argument
is a pairlist or \code{NULL} (see below).

The \code{"\LinkA{environment}{environment}"} method for \code{as.list} copies the
name-value pairs (for names not beginning with a dot) from an
environment to a named list.  The user can request that all named
objects are copied.  The list is in no particular order (the order
depends on the order of creation of objects and whether the
environment is hashed).  No parent environments are searched.  (Objects
copied are duplicated so this can be an expensive operation.)

An empty pairlist, \code{pairlist()} is the same as \code{NULL}.  This
is different from \code{list()}.

\code{as.pairlist} is implemented as \code{\LinkA{as.vector}{as.vector}(x, "pairlist")},
and hence will dispatch methods for the generic function \code{as.vector}.

\code{list}, \code{is.list} and \code{is.pairlist} are
\LinkA{primitive}{primitive} functions.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{vector}{vector}("list", length)} for creation of a list with empty
components; \code{\LinkA{c}{c}}, for concatenation; \code{\LinkA{formals}{formals}}.
\code{\LinkA{unlist}{unlist}} is an approximate inverse to \code{as.list()}.

`\LinkA{plotmath}{plotmath}' for the use of \code{list} in plot annotation.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

# create a plotting structure
pts <- list(x=cars[,1], y=cars[,2])
plot(pts)

is.pairlist(.Options)  # a user-level pairlist

## "pre-allocate" an empty list of length 5
vector("list", 5)

# Argument lists
f <- function() x
# Note the specification of a "..." argument:
formals(f) <- al <- alist(x=, y=2+3, ...=)
f
al

## environment->list coercion

e1 <- new.env()
e1$a <- 10
e1$b <- 20
as.list(e1)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{list.files}{List the Files in a Directory/Folder}{list.files}
\aliasA{dir}{list.files}{dir}
\keyword{file}{list.files}
%
\begin{Description}\relax
These functions produce a character vector of the names of files
in the named directory.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
list.files(path = ".", pattern = NULL, all.files = FALSE,
           full.names = FALSE, recursive = FALSE,
           ignore.case = FALSE)

       dir(path = ".", pattern = NULL, all.files = FALSE,
           full.names = FALSE, recursive = FALSE,
           ignore.case = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{path}] a character vector of full path names; the default
corresponds to the working directory \code{\LinkA{getwd}{getwd}()}.  Missing
values will be ignored.
\item[\code{pattern}] an optional \LinkA{regular expression}{regular expression}.  Only file names
which match the regular expression will be returned.
\item[\code{all.files}] a logical value. If \code{FALSE}, only the
names of visible files are returned.  If \code{TRUE},
all file names will be returned.
\item[\code{full.names}] a logical value.  If \code{TRUE}, the directory
path is prepended to the file names.  If \code{FALSE}, only
the file names are returned.
\item[\code{recursive}] logical. Should the listing recurse into directories?
\item[\code{ignore.case}] logical. Should pattern-matching be case-insensitive?
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character vector containing the names of the files in the
specified directories, or \code{""} if there were no files. If a
path does not exist or is not a directory or is unreadable it
is skipped, with a warning.

The files are sorted in alphabetical order, on the full path
if \code{full.names = TRUE}.  Directories are included only if
\code{recursive = FALSE}.
\end{Value}
%
\begin{Note}\relax
File naming conventions are platform dependent.

\code{recursive = TRUE} is not supported on all platforms and may be
ignored (with a warning).
\end{Note}
%
\begin{Author}\relax
Ross Ihaka, Brian Ripley
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.info}{file.info}}, \code{\LinkA{file.access}{file.access}}
and \code{\LinkA{files}{files}} for many more file handling functions and 
\code{\LinkA{file.choose}{file.choose}} 
for interactive selection.

\code{\LinkA{glob2rx}{glob2rx}} to convert wildcards (as used by system file
commands and shells) to regular expressions.

\code{\LinkA{Sys.glob}{Sys.glob}} for wildcard expansion on file paths.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
list.files(R.home())
## Only files starting with a-l or r
## Note that a-l is locale-dependent, but using case-insensitive
## matching makes it unambiguous in English locales
dir("../..", pattern = "^[a-lr]",full.names=TRUE, ignore.case = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{load}{Reload Saved Datasets}{load}
\keyword{file}{load}
%
\begin{Description}\relax
Reload datasets written with the function \code{save}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
load(file, envir = parent.frame())
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] a (readable binary) connection or a character string
giving the name of the file to load.
\item[\code{envir}] the environment where the data should be loaded.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{load} can load \R{} objects saved in the current or any earlier
format.  It can read a compressed file (see \code{\LinkA{save}{save}})
directly from a file or from a suitable connection (including a call
to \code{\LinkA{url}{url}}).

A not-open connection will be opened in mode \code{"rb"} and closed
after use. 

Only \R{} objects saved in the current format (used since \R{} 1.4.0)
can be read from a connection.  If no input is available on a
connection a warning will be given, but any input not in the current
format will result in a error.

Loading from an earlier version will give a warning about the
`magic number': magic numbers \code{1971:1977} are from \R{} <
0.99.0, and \code{R[ADX]1} from \R{} 0.99.0 to \R{} 1.3.1.
\end{Details}
%
\begin{Value}
A character vector of the names of objects created, invisibly.
\end{Value}
%
\begin{Section}{Warning}
Saved \R{} objects are binary files, even those saved with
\code{ascii = TRUE}, so ensure that they are transferred without
conversion of end of line markers.  \code{load} tries to detect this
case and give an informative error message.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{save}{save}}, \code{\LinkA{download.file}{download.file}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## save all data
xx <- pi # to ensure there is some data
save(list = ls(all=TRUE), file= "all.Rdata")
rm(xx)

## restore the saved values to the current environment
local({
   load("all.Rdata")
   ls()
})
## restore the saved values to the user's workspace
load("all.Rdata", .GlobalEnv)

unlink("all.Rdata")

## Not run: 
con <- url("http://some.where.net/R/data/example.rda")
## print the value to see what objects were created.
print(load(con))
close(con) # url() always opens the connection

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{locales}{Query or Set Aspects of the Locale}{locales}
\aliasA{LC\_ALL}{locales}{LC.Rul.ALL}
\aliasA{LC\_COLLATE}{locales}{LC.Rul.COLLATE}
\aliasA{LC\_CTYPE}{locales}{LC.Rul.CTYPE}
\aliasA{LC\_MEASUREMENT}{locales}{LC.Rul.MEASUREMENT}
\aliasA{LC\_MESSAGES}{locales}{LC.Rul.MESSAGES}
\aliasA{LC\_MONETARY}{locales}{LC.Rul.MONETARY}
\aliasA{LC\_NUMERIC}{locales}{LC.Rul.NUMERIC}
\aliasA{LC\_PAPER}{locales}{LC.Rul.PAPER}
\aliasA{LC\_TIME}{locales}{LC.Rul.TIME}
\aliasA{Sys.getlocale}{locales}{Sys.getlocale}
\aliasA{Sys.setlocale}{locales}{Sys.setlocale}
\keyword{utilities}{locales}
%
\begin{Description}\relax
Get details of or set aspects of the locale for the \R{} process.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.getlocale(category = "LC_ALL")
Sys.setlocale(category = "LC_ALL", locale = "")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{category}] character string.  The following categories should
always be supported: \code{"LC\_ALL"},
\code{"LC\_COLLATE"}, \code{"LC\_CTYPE"}, \code{"LC\_MONETARY"},
\code{"LC\_NUMERIC"} and \code{"LC\_TIME"}.  Some systems
will also support \code{"LC\_MESSAGES"}, \code{"LC\_PAPER"}
and \code{"LC\_MEASUREMENT"}.

\item[\code{locale}] character string.  A valid locale name on the system in
use.  Normally \code{""} (the default) will pick up the default
locale for the system.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The locale describes aspects of the internationalization of a program.
Initially most aspects of the locale of \R{} are set to \code{"C"} (which
is the default for the C language and reflects North-American usage).
\R{} sets \code{"LC\_CTYPE"} and \code{"LC\_COLLATE"}, which allow the
use of a different character set and alphabetic
comparisons in that character set (including the use of
\code{\LinkA{sort}{sort}}), \code{"LC\_MONETARY"} (for use by
\code{\LinkA{Sys.localeconv}{Sys.localeconv}}) and \code{"LC\_TIME"} may affect
the behaviour of \code{\LinkA{as.POSIXlt}{as.POSIXlt}} and \code{\LinkA{strptime}{strptime}}
and functions which use them (but not \code{\LinkA{date}{date}}).

\R{} can be built with no support for locales, but it is normally
available on Unix and is available on Windows.

The first seven categories described here are those specified by
POSIX.  \code{"LC\_MESSAGES"} will be \code{"C"} on systems that do not
support message translation, and is not supported on Windows.  Trying
to use an unsupported category is an error for \code{Sys.setlocale}.

Note that setting \code{"LC\_ALL"} sets only \code{"LC\_COLLATE"},
\code{"LC\_CTYPE"}, \code{"LC\_MONETARY"} and \code{"LC\_TIME"}.

Attempts to set an invalid locale are ignored.  There may or may not
be a warning, depending on the OS.

Attempts to change the character set (by
\code{Sys.setlocale("LC\_TYPE", )}, if that implies a different
character set) during a session may not work and are likely to lead to
some confusion.
\end{Details}
%
\begin{Value}
A character string of length one describing the locale in use (after
setting for \code{Sys.setlocale}), or an empty character string if the
current locale settings are invalid or \code{NULL} if locale
information is unavailable.

For \code{category = "LC\_ALL"} the details of the string are
system-specific: it might be a single locale name or a set of locale
names separated by \code{"/"} (Solaris, Mac OS X) or \code{";"}
(Windows, Linux).  For portability, it is best to query categories
individually: it is not necessarily the case that the result of
\code{foo <- Sys.getlocale()} can be used in
\code{Sys.setlocale("LC\_ALL", locale = foo)}.
\end{Value}
%
\begin{Section}{Warning}
Setting \code{"LC\_NUMERIC"} may cause \R{} to function
anomalously, so gives a warning.  Input conversions
in \R{} itself are unaffected, but the reading and writing of ASCII
\code{\LinkA{save}{save}} files will be, as may packages.
Setting it temporarily to produce graphical or text output may work
well enough, but \code{\LinkA{options}{options}(OutDec)} is often preferable.
\end{Section}
%
\begin{Note}\relax
Changing the values of locale categories whilst \R{} is running ought
to be noticed by the OS services, and usually is but exceptions have
been seen (usually in collation services).
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{strptime}{strptime}} for uses of \code{category = "LC\_TIME"}.
\code{\LinkA{Sys.localeconv}{Sys.localeconv}} for details of numerical and monetary
representations.

\code{\LinkA{l10n\_info}{l10n.Rul.info}} gives some summary facts about the locale and
its encoding.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
Sys.getlocale()
Sys.getlocale("LC_TIME")
## Not run: 
Sys.setlocale("LC_TIME", "de")     # Solaris: details are OS-dependent
Sys.setlocale("LC_TIME", "de_DE.utf8")  # Modern Linux etc.
Sys.setlocale("LC_TIME", "de_DE")  # Mac OS X
Sys.setlocale("LC_TIME", "German") # Windows

## End(Not run)
Sys.getlocale("LC_PAPER")          # may or may not be set

Sys.setlocale("LC_COLLATE", "C")   # turn off locale-specific sorting, usually
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{log}{Logarithms and Exponentials}{log}
\aliasA{exp}{log}{exp}
\aliasA{expm1}{log}{expm1}
\aliasA{log10}{log}{log10}
\aliasA{log1p}{log}{log1p}
\aliasA{log2}{log}{log2}
\aliasA{logb}{log}{logb}
\keyword{math}{log}
%
\begin{Description}\relax
\code{log} computes logarithms, by default natural logarithms, 
\code{log10} computes common (i.e., base 10) logarithms, and
\code{log2} computes binary (i.e., base 2) logarithms.
The general form \code{log(x, base)} computes logarithms with base
\code{base}.

\code{log1p(x)} computes \eqn{\log(1+x)}{} accurately also for
\eqn{|x| \ll 1}{} (and less accurately when \eqn{x \approx
    -1}{}).

\code{exp} computes the exponential function.

\code{expm1(x)} computes \eqn{\exp(x) - 1}{} accurately also for
\eqn{|x| \ll 1}{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
log(x, base = exp(1))
logb(x, base = exp(1))
log10(x)
log2(x)

log1p(x)

exp(x)
expm1(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric or complex vector.
\item[\code{base}] a positive or complex number: the base with respect to which
logarithms are computed.  Defaults to \eqn{e}{}=\code{exp(1)}.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
All except \code{logb} are generic functions: methods can be defined
for them individually or via the \code{\LinkA{Math}{S3groupGeneric}}
group generic.

\code{log10} and \code{log2} are only convenience wrappers, but logs
to bases 10 and 2 (whether computed \emph{via} \code{log} or the wrappers)
will be computed more efficiently and accurately where supported by the OS.
Methods can be set for them individually (and otherwise methods for
\code{log} will be used).

\code{logb} is a wrapper for \code{log} for compatibility with S.  If
(S3 or S4) methods are set for \code{log} they will be dispatched.
Do not set S4 methods on \code{logb} itself.
\end{Details}
%
\begin{Value}
A vector of the same length as \code{x} containing the transformed
values.  \code{log(0)} gives \code{-Inf}, and negative values give
\code{NaN}.
\end{Value}
%
\begin{Section}{S4 methods}
\code{exp}, \code{expm1}, \code{log}, \code{log10}, \code{log2} and
\code{log1p} are S4 generic and are members of the
\code{\LinkA{Math}{S4groupGeneric}} group generic.

Note that this means that the S4 generic for \code{log} has a
signature with only one argument, \code{x}, but that \code{base} can
be passed to methods (but will not be used for method selection).  On
the other hand, if you only set a method for the \code{Math} group
generic then \code{base} argument of \code{log} will be ignored for
your class.
\end{Section}
%
\begin{Note}\relax
\code{log} and \code{logb} are the same thing in \R{}, but \code{logb}
is preferred if \code{base} is specified, for S-PLUS compatibility.
\end{Note}
%
\begin{Source}\relax
\code{log1p} and \code{expm1} may be taken from the operating system,
but if not available there are based on the Fortran subroutine
\code{dlnrel} by W. Fullerton of Los Alamos Scientific Laboratory (see
\url{http://www.netlib.org/slatec/fnlib/dlnrel.f} and (for small x) a
single Newton step for the solution of \code{log1p(y) = x}
respectively.
\end{Source}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
(for \code{log}, \code{log10} and \code{exp}.)

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer. (for \code{logb}.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{Trig}{Trig}},
\code{\LinkA{sqrt}{sqrt}},
\code{\LinkA{Arithmetic}{Arithmetic}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
log(exp(3))
log10(1e7)# = 7

x <- 10^-(1+2*1:9)
cbind(x, log(1+x), log1p(x), exp(x)-1, expm1(x))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Logic}{Logical Operators}{Logic}
\aliasA{"!}{Logic}{!}
\aliasA{\&}{Logic}{.Ramp.}
\aliasA{\&\&}{Logic}{.Ramp..Ramp.}
\aliasA{isTRUE}{Logic}{isTRUE}
\aliasA{xor}{Logic}{xor}
\aliasB{"|}{Logic}{|}
\aliasB{"|"|}{Logic}{||}
\keyword{logic}{Logic}
%
\begin{Description}\relax
These operators act on logical and number-like vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
! x
x & y
x && y
x | y
x || y
xor(x, y)

isTRUE(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] logical or `number-like' vectors (i.e., of type
\code{\LinkA{double}{double}} (class \code{\LinkA{numeric}{numeric}}), \code{\LinkA{integer}{integer}},
\code{\LinkA{complex}{complex}} or \code{\LinkA{raw}{raw}}), or objects for
which methods have been written.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{!} indicates logical negation (NOT).

\code{\&} and \code{\&\&} indicate logical AND and \code{|} and \code{||}
indicate logical OR.  The shorter form performs elementwise
comparisons in much the same way as arithmetic operators.  The longer
form evaluates left to right examining only the first element of each
vector.  Evaluation proceeds only until the result is determined.  The
longer form is appropriate for programming control-flow and typically
preferred in \code{\LinkA{if}{if}} clauses.

\code{xor} indicates elementwise exclusive OR.

\code{isTRUE(x)} is an abbreviation of \code{identical(TRUE, x)}, and
so is true if and only if \code{x} is a length-one logical vector with
no attributes (not even names).

Numeric and complex vectors will be coerced to logical values, with
zero being false and all non-zero values being true.  Raw vectors are
handled without any coercion for \code{!}, \code{\&}, \code{|} and
\code{xor}, with these operators being applied bitwise (so \code{!} is
the 1s-complement).

The operators \code{!}, \code{\&} and \code{|} are generic functions:
methods can be written for them individually or via the
\code{\LinkA{Ops}{S3groupGeneric}} (or S4 \code{Logic}, see below)
group generic function.  (See \code{\LinkA{Ops}{S3groupGeneric}} for
how dispatch is computed.)

\code{\LinkA{NA}{NA}} is a valid logical object.  Where a component of
\code{x} or \code{y} is \code{NA}, the result will be \code{NA} if the
outcome is ambiguous.  In other words \code{NA \& TRUE} evaluates to
\code{NA}, but \code{NA \& FALSE} evaluates to \code{FALSE}.  See the
examples below.

See \LinkA{Syntax}{Syntax} for the precedence of these operators: unlike many
other languages (including S) the AND and OR operators do not have the
same precedence (the AND operators are higher than the OR operators).
\end{Details}
%
\begin{Value}
For \code{!}, a logical or raw vector of the same length as \code{x}.

For \code{|}, \code{\&} and \code{xor} a logical or raw vector. The
elements of shorter vectors are recycled as necessary (with a
\code{\LinkA{warning}{warning}} when they are recycled only \emph{fractionally}).
The rules for determining the attributes of the result are rather
complicated.  Most attributes are taken from the longer argument, the
first if they are of the same length.  Names will be copied from the
first if it is the same length as the answer, otherwise from the
second if that is.  For time series, these operations are allowed only
if the series are compatible, when the class and \code{\LinkA{tsp}{tsp}}
attribute of whichever is a time series (the same, if both are) are
used.  For arrays (and an array result) the dimensions and dimnames
are taken from first argument if it is an array, otherwise the second.

For \code{||}, \code{\&\&} and \code{isTRUE}, a length-one logical vector.
\end{Value}
%
\begin{Section}{S4 methods}
\code{!}, \code{\&} and \code{|} are S4 generics, the latter two part
of the \code{\LinkA{Logic}{S4groupGeneric}} group generic (and
hence methods need argument names \code{e1, e2}).
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{TRUE}{TRUE}} or \code{\LinkA{logical}{logical}}.

\code{\LinkA{any}{any}} and \code{\LinkA{all}{all}} for OR and AND on many scalar
arguments.

\code{\LinkA{Syntax}{Syntax}} for operator precedence.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
y <- 1 + (x <- stats::rpois(50, lambda=1.5) / 4 - 1)
x[(x > 0) & (x < 1)]    # all x values between 0 and 1
if (any(x == 0) || any(y == 0)) "zero encountered"

## construct truth tables :

x <- c(NA, FALSE, TRUE)
names(x) <- as.character(x)
outer(x, x, "&")## AND table
outer(x, x, "|")## OR  table
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{logical}{Logical Vectors}{logical}
\aliasA{as.logical}{logical}{as.logical}
\aliasA{F}{logical}{F}
\aliasA{FALSE}{logical}{FALSE}
\aliasA{is.logical}{logical}{is.logical}
\aliasA{T}{logical}{T}
\aliasA{TRUE}{logical}{TRUE}
\keyword{classes}{logical}
\keyword{logic}{logical}
%
\begin{Description}\relax
Create or test for objects of type \code{"logical"}, and the basic
logical constants.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
TRUE
FALSE
T; F

logical(length = 0)
as.logical(x, ...)
is.logical(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced or tested.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{TRUE} and \code{FALSE} are \LinkA{reserved}{reserved} words denoting logical
constants in the \R{} language, whereas \code{T} and \code{F} are global
variables whose initial values set to these.  All four are
\code{logical(1)} vectors.

Logical vectors are coerced to integer vectors in contexts where a
numerical value is required, with \code{TRUE} being mapped to
\code{1L}, \code{FALSE} to \code{0L} and \code{NA\_LOGICAL\_} to
\code{NA\_INTEGER\_}.

\code{as.logical} and \code{is.logical} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored. This may not be true of methods for \code{is.logical}. 
\end{Details}
%
\begin{Value}
\code{logical} creates a logical vector of the specified length.
Each element of the vector is equal to \code{FALSE}.

\code{as.logical} attempts to coerce its argument to be of logical
type.  For \code{\LinkA{factor}{factor}}s, this uses the \code{\LinkA{levels}{levels}}
(labels).  Like \code{\LinkA{as.vector}{as.vector}} it strips attributes including
names.

\code{is.logical} returns \code{TRUE} or \code{FALSE} depending on
whether its argument is of logical type or not.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{NA}{NA}}, the other logical constant.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{lower.tri}{Lower and Upper Triangular Part of a Matrix}{lower.tri}
\aliasA{upper.tri}{lower.tri}{upper.tri}
\keyword{array}{lower.tri}
%
\begin{Description}\relax
Returns a matrix of logicals the same size of a given matrix with
entries \code{TRUE} in the lower or upper triangle.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
lower.tri(x, diag = FALSE)
upper.tri(x, diag = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix.
\item[\code{diag}] logical. Should the diagonal be included?
\end{ldescription}
\end{Arguments}
%
\begin{SeeAlso}\relax
\code{\LinkA{diag}{diag}},
\code{\LinkA{matrix}{matrix}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(m2 <- matrix(1:20, 4, 5))
lower.tri(m2)
m2[lower.tri(m2)] <- NA
m2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{ls}{List Objects}{ls}
\aliasA{objects}{ls}{objects}
\keyword{environment}{ls}
%
\begin{Description}\relax
\code{ls} and \code{objects} return a vector of character strings
giving the names of the objects in the specified environment.
When invoked with no argument at the top level prompt,
\code{ls} shows what data sets and functions a user has defined.
When invoked with no argument inside a function,
\code{ls} returns the names of the functions local variables.
This is useful in conjunction with \code{browser}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
ls(name, pos = -1, envir = as.environment(pos),
   all.names = FALSE, pattern)
objects(name, pos= -1, envir = as.environment(pos),
        all.names = FALSE, pattern)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] which environment to use in listing the available objects.
Defaults to the \emph{current}
environment.  Although called \code{name} for back compatibility, in
fact this argument can specify the environment in any form; see the
details section.
\item[\code{pos}] an alternative argument to \code{name} for specifying the
environment as a position in the search list.  Mostly there for
back compatibility.
\item[\code{envir}] an alternative argument to \code{name} for specifying the
environment evaluation environment. Mostly there for back compatibility.
\item[\code{all.names}] a logical value.  If \code{TRUE}, all
object names are returned.  If \code{FALSE}, names which begin with a
\samp{.} are omitted.
\item[\code{pattern}] an optional \LinkA{regular expression}{regular expression}.  Only names
matching \code{pattern} are returned.  \code{\LinkA{glob2rx}{glob2rx}} can be
used to convert wildcard patterns to regular expressions.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{name} argument can specify the  environment from which
object names are taken in one of several forms:
as an integer (the position in the \code{\LinkA{search}{search}} list); as
the character string name of an element in the search list; or as an
explicit \code{\LinkA{environment}{environment}} (including using
\code{\LinkA{sys.frame}{sys.frame}} to access the currently active function calls).
By default, the environment of the call to \code{ls} or \code{objects}
is used. The \code{pos} and \code{envir} arguments are an alternative
way to specify an environment, but are primarily there for back
compatibility.

Note that the \emph{order} of the resulting strings is locale
dependent, see \code{\LinkA{Sys.getlocale}{Sys.getlocale}}.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{glob2rx}{glob2rx}} for converting wildcard patterns to regular
expressions.

\code{\LinkA{ls.str}{ls.str}} for a long listing based on \code{\LinkA{str}{str}}.
\code{\LinkA{apropos}{apropos}} (or \code{\LinkA{find}{find}})
for finding objects in the whole search path;
\code{\LinkA{grep}{grep}} for more details on `regular expressions';
\code{\LinkA{class}{class}}, \code{\LinkA{methods}{methods}}, etc., for
object-oriented programming.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
.Ob <- 1
ls(pattern = "O")
ls(pattern= " O", all.names = TRUE)    # also shows ".[foo]"

# shows an empty list because inside myfunc no variables are defined
myfunc <- function() {ls()}
myfunc()

# define a local variable inside myfunc
myfunc <- function() {y <- 1; ls()}
myfunc()                # shows "y"
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{make.names}{Make Syntactically Valid Names}{make.names}
\keyword{character}{make.names}
%
\begin{Description}\relax
Make syntactically valid names out of character vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
make.names(names, unique = FALSE, allow_ = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{names}] character vector to be coerced to syntactically valid
names. This is coerced to character if necessary.
\item[\code{unique}] logical; if \code{TRUE}, the resulting elements are
unique.  This may be desired for, e.g., column names.
\item[\code{allow\_}] logical.  For compatibility with \R{} prior to 1.9.0.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A syntactically valid name consists of letters, numbers and the dot or
underline characters and starts with a letter or the dot not followed
by a number.  Names such as \code{".2way"} are not valid, and neither
are the \LinkA{reserved}{reserved} words.

The definition of a \emph{letter} depends on the current locale, but
only ASCII digits are considered to be digits.

The character \code{"X"} is prepended if necessary.
All invalid characters are translated to \code{"."}.  A missing value
is translated to \code{"NA"}.  Names which match \R{} keywords have a dot
appended to them.  Duplicated values are altered by
\code{\LinkA{make.unique}{make.unique}}.
\end{Details}
%
\begin{Value}
A character vector of same length as \code{names} with each changed to
a syntactically valid name, in the current locale's encoding.
\end{Value}
%
\begin{Note}\relax
Prior to \R{} version 1.9.0, underscores were not valid in variable names,
and code that relies on them being converted to dots will no longer
work. Use \code{allow\_ = FALSE} for back-compatibility.

\code{allow\_ = FALSE} is also useful when creating names for export to
applications which do not allow underline in names (for example,
S-PLUS and some DBMSs).
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{make.unique}{make.unique}},
\code{\LinkA{names}{names}},
\code{\LinkA{character}{character}},
\code{\LinkA{data.frame}{data.frame}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
make.names(c("a and b", "a-and-b"), unique=TRUE)
# "a.and.b"  "a.and.b.1"
make.names(c("a and b", "a_and_b"), unique=TRUE)
# "a.and.b"  "a_and_b"
make.names(c("a and b", "a_and_b"), unique=TRUE, allow_=FALSE)
# "a.and.b"  "a.and.b.1"

state.name[make.names(state.name) != state.name] # those 10 with a space
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{make.unique}{Make Character Strings Unique}{make.unique}
\keyword{character}{make.unique}
%
\begin{Description}\relax
Makes the elements of a character vector unique by
appending sequence numbers to duplicates.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
make.unique(names, sep = ".")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{names}] a character vector
\item[\code{sep}] a character string used to separate a duplicate name from
its sequence number.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The algorithm used by \code{make.unique} has the property that
\code{make.unique(c(A, B)) == make.unique(c(make.unique(A), B))}.

In other words, you can append one string at a time to a vector,
making it unique each time, and get the same result as applying
\code{make.unique} to all of the strings at once.

If character vector \code{A} is already unique, then
\code{make.unique(c(A, B))} preserves \code{A}.
\end{Details}
%
\begin{Value}
A character vector of same length as \code{names} with duplicates
changed, in the current locale's encoding.
\end{Value}
%
\begin{Author}\relax
Thomas P. Minka
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{make.names}{make.names}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
make.unique(c("a", "a", "a"))
make.unique(c(make.unique(c("a", "a")), "a"))

make.unique(c("a", "a", "a.2", "a"))
make.unique(c(make.unique(c("a", "a")), "a.2", "a"))

rbind(data.frame(x=1), data.frame(x=2), data.frame(x=3))
rbind(rbind(data.frame(x=1), data.frame(x=2)), data.frame(x=3))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{mapply}{Apply a function to multiple list or vector arguments}{mapply}
\aliasA{Vectorize}{mapply}{Vectorize}
\keyword{manip}{mapply}
\keyword{utilities}{mapply}
%
\begin{Description}\relax
\code{mapply} is a multivariate version of \code{\LinkA{sapply}{sapply}}.
\code{mapply} applies \code{FUN} to the first elements of each \dots
argument, the second elements, the third elements, and so on.
Arguments are recycled if necessary.

\code{Vectorize} returns a new function that acts as if \code{mapply}
was called.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
mapply(FUN, ..., MoreArgs = NULL, SIMPLIFY = TRUE,
       USE.NAMES = TRUE)

Vectorize(FUN, vectorize.args = arg.names, SIMPLIFY = TRUE,
          USE.NAMES = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{FUN}] function to apply, found via \code{\LinkA{match.fun}{match.fun}}.
\item[\code{...}] arguments to vectorize over (list or vector).
\item[\code{MoreArgs}] a list of other arguments to \code{FUN}.
\item[\code{SIMPLIFY}] logical; attempt to reduce the result to a vector or matrix?
\item[\code{USE.NAMES}] logical; use names if the first \dots argument has
names, or if it is a character vector, use that character vector as
the names.
\item[\code{vectorize.args}] a character vector of arguments which should be
vectorized.  Defaults to all arguments to \code{FUN}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The arguments named in the \code{vectorize.args} argument to
\code{Vectorize} correspond to the arguments passed in the \code{...}
list to \code{mapply}.  However, only those that are actually passed
will be vectorized; default values will not.  See the example below.

\code{Vectorize} cannot be used with primitive functions as they have
no formal list.
\end{Details}
%
\begin{Value}
\code{mapply} returns a list, vector, or matrix.

\code{Vectorize} returns a function with the same arguments as \code{FUN},
but wrapping a call to \code{mapply}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{sapply}{sapply}},
\code{\LinkA{outer}{outer}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

mapply(rep, 1:4, 4:1)

mapply(rep, times=1:4, x=4:1)

mapply(rep, times=1:4, MoreArgs=list(x=42))

# Repeat the same using Vectorize: use rep.int as rep is primitive
vrep <- Vectorize(rep.int)
vrep(1:4, 4:1)
vrep(times=1:4, x=4:1)

vrep <- Vectorize(rep.int, "times")
vrep(times=1:4, x=42)

mapply(function(x,y) seq_len(x) + y,
       c(a= 1, b=2, c= 3),  # names from first
       c(A=10, B=0, C=-10))

word <- function(C,k) paste(rep.int(C,k), collapse='')
utils::str(mapply(word, LETTERS[1:6], 6:1, SIMPLIFY = FALSE))

f <- function(x=1:3, y) c(x,y)
vf <- Vectorize(f, SIMPLIFY = FALSE)
f(1:3,1:3)
vf(1:3,1:3)
vf(y=1:3) # Only vectorizes y, not x

# Nonlinear regression contour plot, based on nls() example

SS <- function(Vm, K, resp, conc) {
    pred <- (Vm * conc)/(K + conc)
    sum((resp - pred)^2 / pred)
}
vSS <- Vectorize(SS, c("Vm", "K"))
Treated <- subset(Puromycin, state == "treated")

Vm <- seq(140, 310, len=50)
K <- seq(0, 0.15, len=40)
SSvals <- outer(Vm, K, vSS, Treated$rate, Treated$conc)
contour(Vm, K, SSvals, levels=(1:10)^2, xlab="Vm", ylab="K")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{margin.table}{Compute table margin}{margin.table}
\keyword{array}{margin.table}
%
\begin{Description}\relax
For a contingency table in array form, compute the sum of table
entries for a given index.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
margin.table(x, margin=NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an array
\item[\code{margin}] index number (1 for rows, etc.) 
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is really just \code{apply(x, margin, sum)} packaged up for
newbies, except that if \code{margin} has length zero you get
\code{sum(x)}.
\end{Details}
%
\begin{Value}
The relevant marginal table.  The class of \code{x} is copied to the
output table, except in the summation case.
\end{Value}
%
\begin{Author}\relax
Peter Dalgaard
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{prop.table}{prop.table}} and \code{\LinkA{addmargins}{addmargins}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
m <- matrix(1:4,2)
margin.table(m,1)
margin.table(m,2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{mat.or.vec}{Create a Matrix or a Vector}{mat.or.vec}
\keyword{array}{mat.or.vec}
%
\begin{Description}\relax
\code{mat.or.vec} creates an \code{nr} by \code{nc} zero matrix if
\code{nc} is greater than 1, and a zero vector of length \code{nr} if
\code{nc} equals 1.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
mat.or.vec(nr, nc)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{nr, nc}] numbers of rows and columns.
\end{ldescription}
\end{Arguments}
%
\begin{Examples}
\begin{ExampleCode}
mat.or.vec(3, 1)
mat.or.vec(3, 2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{match}{Value Matching}{match}
\aliasA{\%in\%}{match}{.Rpcent.in.Rpcent.}
\keyword{manip}{match}
\keyword{logic}{match}
%
\begin{Description}\relax
\code{match} returns a vector of the positions of (first) matches of
its first argument in its second.

\code{\%in\%} is a more intuitive interface as a binary operator,
which returns a logical vector indicating if there is a match or not
for its left operand.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
match(x, table, nomatch = NA_integer_, incomparables = NULL)

x %in% table
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] vector or \code{NULL}: the values to be matched.
\item[\code{table}] vector or \code{NULL}: the values to be matched against.
\item[\code{nomatch}] the value to be returned in the case when no match is
found.  Note that it is coerced to \code{integer}.
\item[\code{incomparables}] a vector of values that cannot be matched.  Any
value in \code{x} matching a value in this vector is assigned the
\code{nomatch} value.  For historical reasons, \code{FALSE} is
equivalent to \code{NULL}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{\%in\%} is currently defined as \\{}
\code{"\%in\%" <- function(x, table) match(x, table, nomatch = 0) > 0}

Factors, raw vectors and lists are converted to character vectors, and
then \code{x} and \code{table} are coerced to a common type (the later
of the two types in R's ordering, logical < integer < numeric <
complex < character) before matching.  If \code{incomparables} has
positive length it is coerced to the common type.

Matching for lists is potentially very slow and best avoided except in
simple cases.

Exactly what matches what is to some extent a matter of definition.
For all types, \code{NA} matches \code{NA} and no other value.
For real and complex values, \code{NaN} values are regarded
as matching any other \code{NaN} value, but not matching \code{NA}.
\end{Details}
%
\begin{Value}
A vector of the same length as \code{x}.

\code{match}: An integer vector giving the position in \code{table} of
the first match if there is a match, otherwise \code{nomatch}.

If \code{x[i]} is found to equal \code{table[j]} then the value
returned in the \code{i}-th position of the return value is \code{j},
for the smallest possible \code{j}.  If no match is found, the value
is \code{nomatch}.

\code{\%in\%}: A logical vector, indicating if a match was located for
each element of \code{x}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{pmatch}{pmatch}} and \code{\LinkA{charmatch}{charmatch}} for (\emph{partial})
string matching, \code{\LinkA{match.arg}{match.arg}}, etc for function argument
matching.
\code{\LinkA{findInterval}{findInterval}} similarly returns a vector of positions, but
finds numbers within intervals, rather than exact matches.

\code{\LinkA{is.element}{is.element}} for an S-compatible equivalent of \code{\%in\%}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## The intersection of two sets can be defined via match():
## Simple version:  intersect <- function(x, y) y[match(x, y, nomatch = 0)]
intersect # the R function in base, slightly more careful
intersect(1:10,7:20)

1:10 %in% c(1,3,5,9)
sstr <- c("c","ab","B","bba","c","@","bla","a","Ba","%")
sstr[sstr %in% c(letters,LETTERS)]

"%w/o%" <- function(x,y) x[!x %in% y] #--  x without y
(1:10) %w/o% c(3,7,12)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{match.arg}{Argument Verification Using Partial Matching}{match.arg}
\keyword{programming}{match.arg}
%
\begin{Description}\relax
\code{match.arg} matches \code{arg} against a table of candidate
values as specified by \code{choices}, where \code{NULL} means to take
the first one.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
match.arg(arg, choices, several.ok = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{arg}] a character vector (of length one unless \code{several.ok}
is \code{TRUE}) or \code{NULL}.
\item[\code{choices}] a character vector of candidate values
\item[\code{several.ok}] logical specifying if \code{arg} should be allowed
to have more than one element.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
In the one-argument form \code{match.arg(arg)}, the choices are
obtained from a default setting for the formal argument \code{arg} of
the function from which \code{match.arg} was called.  (Since default
argument matching will set \code{arg} to \code{choices}, this is
allowed as an exception to the `length one unless
\code{several.ok} is \code{TRUE}' rule, and returns the first
element.)

Matching is done using \code{\LinkA{pmatch}{pmatch}}, so \code{arg} may be
abbreviated.

\end{Details}
%
\begin{Value}
The unabbreviated version of the exact or unique partial match if
there is one; otherwise, an error is signalled if \code{several.ok} is
false, as per default.  When \code{several.ok} is true and more than
one element of \code{arg} has a match, all unabbreviated versions of
matches are returned.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{pmatch}{pmatch}},
\code{\LinkA{match.fun}{match.fun}},
\code{\LinkA{match.call}{match.call}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
## Extends the example for 'switch'
center <- function(x, type = c("mean", "median", "trimmed")) {
  type <- match.arg(type)
  switch(type,
         mean = mean(x),
         median = median(x),
         trimmed = mean(x, trim = .1))
}
x <- rcauchy(10)
center(x, "t")       # Works
center(x, "med")     # Works
try(center(x, "m"))  # Error
stopifnot(identical(center(x),       center(x, "mean")),
          identical(center(x, NULL), center(x, "mean")) )

## Allowing more than one match:
match.arg(c("gauss", "rect", "ep"),
          c("gaussian", "epanechnikov", "rectangular", "triangular"),
          several.ok = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{match.call}{Argument Matching}{match.call}
\keyword{programming}{match.call}
%
\begin{Description}\relax
\code{match.call} returns a call in which all of the specified arguments are
specified by their full names.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
match.call(definition = NULL, call = sys.call(sys.parent()),
           expand.dots = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{definition}] a function, by default the function from which
\code{match.call} is called.  See details.
\item[\code{call}] an unevaluated call to the function specified by
\code{definition}, as generated by \code{\LinkA{call}{call}}.
\item[\code{expand.dots}] logical. Should arguments matching \code{...}
in the call be included or left as a \code{...} argument?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
`function' on this help page means an interpreted function
(also known as a `closure'):  \code{match.call} does not support
primitive functions (where argument matching is normally
positional).

\code{match.call} is most commonly used in two circumstances:
\begin{itemize}

\item To record the call for later re-use: for example most
model-fitting functions record the call as element \code{call} of
the list they return.  Here the default \code{expand.dots = TRUE}
is appropriate.

\item To pass most of the call to another function, often
\code{model.frame}.  Here the common idiom is that
\code{expand.dots = FALSE} is used, and the \code{...} element
of the matched call is removed.  An alternative is to
explicitly select the arguments to be passed on, as is done in
\code{lm}.

\end{itemize}


Calling \code{match.call} outside a function without specifying
\code{definition} is an error.
\end{Details}
%
\begin{Value}
An object of class \code{call}.
\end{Value}
%
\begin{References}\relax
Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{sys.call}{sys.call}()} is similar, but does \emph{not} expand the
argument names;
\code{\LinkA{call}{call}}, \code{\LinkA{pmatch}{pmatch}}, \code{\LinkA{match.arg}{match.arg}},
\code{\LinkA{match.fun}{match.fun}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
match.call(get, call("get", "abc", i = FALSE, p = 3))
## -> get(x = "abc", pos = 3, inherits = FALSE)
fun <- function(x, lower = 0, upper = 1) {
  structure((x - lower) / (upper - lower), CALL = match.call())
}
fun(4 * atan(1), u = pi)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{match.fun}{Function Verification for ``Function Variables''}{match.fun}
\keyword{programming}{match.fun}
%
\begin{Description}\relax
When called inside functions that take a function as argument, extract
the desired function object while avoiding undesired matching to
objects of other types.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
match.fun(FUN, descend = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{FUN}] item to match as function: a function, symbol or
character string.  See `Details'.
\item[\code{descend}] logical; control whether to search past non-function
objects.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{match.fun} is not intended to be used at the top level since it
will perform matching in the \emph{parent} of the caller.

If \code{FUN} is a function, it is returned.  If it is a symbol (for
example, enclosed in backquotes) or a
character vector of length one, it will be looked up using \code{get}
in the environment of the parent of the caller.  If it is of any other
mode, it is attempted first to get the argument to the caller as a
symbol (using \code{substitute} twice), and if that fails, an error is
declared.

If \code{descend = TRUE}, \code{match.fun} will look past non-function
objects with the given name; otherwise if \code{FUN} points to a
non-function object then an error is generated.

This is used in base functions such as \code{\LinkA{apply}{apply}},
\code{\LinkA{lapply}{lapply}}, \code{\LinkA{outer}{outer}}, and \code{\LinkA{sweep}{sweep}}.
\end{Details}
%
\begin{Value}
A function matching \code{FUN} or an error is generated.
\end{Value}
%
\begin{Section}{Bugs}
The \code{descend} argument is a bit of misnomer and probably not
actually needed by anything.  It may go away in the future.

It is impossible to fully foolproof this.  If one \code{attach}es a
list or data frame containing a length-one character vector with the
same name as a function, it may be used (although name spaces
will help).
\end{Section}
%
\begin{Author}\relax
Peter Dalgaard and Robert Gentleman, based on an earlier version
by Jonathan Rougier.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{match.arg}{match.arg}}, \code{\LinkA{get}{get}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# Same as get("*"):
match.fun("*")
# Overwrite outer with a vector
outer <- 1:5
## Not run: 
match.fun(outer, descend = FALSE) #-> Error:  not a function

## End(Not run)
match.fun(outer) # finds it anyway
is.function(match.fun("outer")) # as well
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{MathFun}{Miscellaneous Mathematical Functions}{MathFun}
\aliasA{abs}{MathFun}{abs}
\aliasA{sqrt}{MathFun}{sqrt}
\keyword{math}{MathFun}
%
\begin{Description}\relax
These functions compute miscellaneous mathematical functions.
The naming follows the standard for computer languages
such as C or Fortran.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
abs(x)
sqrt(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric or \code{\LinkA{complex}{complex}} vector or array.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These are generic functions: methods can be defined for them
individually or via the \code{\LinkA{Math}{S3groupGeneric}}
group generic.  For complex arguments (and the default method), \code{z},
\code{abs(z) == \LinkA{Mod}{Mod}(z)} and \code{sqrt(z) == z\textasciicircum{}0.5}.

\code{abs(x)} returns an \code{\LinkA{integer}{integer}} vector when \code{x} is
\code{integer} or \code{\LinkA{logical}{logical}}.
\end{Details}
%
\begin{Section}{S4 methods}
Both are S4 generic and members of the
\code{\LinkA{Math}{S4groupGeneric}} group generic.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{Arithmetic}{Arithmetic}} for simple, \code{\LinkA{log}{log}} for logarithmic,
\code{\LinkA{sin}{sin}} for trigonometric, and \code{\LinkA{Special}{Special}} for
special mathematical functions.

`\LinkA{plotmath}{plotmath}' for the use of \code{sqrt} in plot annotation.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats) # for spline
require(graphics)
xx <- -9:9
plot(xx, sqrt(abs(xx)),  col = "red")
lines(spline(xx, sqrt(abs(xx)), n=101), col = "pink")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{matmult}{Matrix Multiplication}{matmult}
\aliasA{\%*\%}{matmult}{.Rpcent.*.Rpcent.}
\keyword{array}{matmult}
\keyword{arith}{matmult}
%
\begin{Description}\relax
Multiplies two matrices, if they are conformable.
If one argument is a vector, it will be promoted to either a row or
column matrix to make the two arguments conformable.
If both are vectors it will return the inner product (as a matrix).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
x %*% y
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] numeric or complex matrices or vectors.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
When a vector is promoted to a matrix, its names are not
promoted to row or column names, unlike \code{\LinkA{as.matrix}{as.matrix}}.

This operator is S4 generic but not S3 generic.  S4 methods need to be
written for a function of two arguments named \code{x} and \code{y}.
\end{Details}
%
\begin{Value}
A double or complex matrix product.  Use \code{\LinkA{drop}{drop}} to remove
dimensions which have only one level.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{matrix}{matrix}},
\code{\LinkA{Arithmetic}{Arithmetic}},
\code{\LinkA{diag}{diag}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1:4
(z <- x %*% x)    # scalar ("inner") product (1 x 1 matrix)
drop(z)             # as scalar

y <- diag(x)
z <- matrix(1:12, ncol = 3, nrow = 4)
y %*% z
y %*% x
x %*% z
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{matrix}{Matrices}{matrix}
\aliasA{as.matrix}{matrix}{as.matrix}
\methaliasA{as.matrix.data.frame}{matrix}{as.matrix.data.frame}
\methaliasA{as.matrix.default}{matrix}{as.matrix.default}
\aliasA{is.matrix}{matrix}{is.matrix}
\keyword{array}{matrix}
\keyword{algebra}{matrix}
%
\begin{Description}\relax
\code{matrix} creates a matrix from the given set of values.

\code{as.matrix} attempts to turn its argument into a matrix.

\code{is.matrix} tests if its argument is a (strict) matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
matrix(data = NA, nrow = 1, ncol = 1, byrow = FALSE,
       dimnames = NULL)

as.matrix(x, ...)
## S3 method for class 'data.frame':
as.matrix(x, rownames.force = NA, ...)

is.matrix(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{data}] an optional data vector.
\item[\code{nrow}] the desired number of rows.
\item[\code{ncol}] the desired number of columns.
\item[\code{byrow}] logical. If \code{FALSE} (the default) the matrix is
filled by columns, otherwise the matrix is filled by rows.
\item[\code{dimnames}] A \code{\LinkA{dimnames}{dimnames}} attribute for the matrix:
\code{NULL} or a \code{list} of length 2 giving the row and column
names respectively.  An empty list is treated as \code{NULL}, and a
list of length one as row names.  The list can be named, and the
list names will be used as names for the dimensions.
\item[\code{x}] an \R{} object.
\item[\code{...}] additional arguments to be passed to or from methods.
\item[\code{rownames.force}] logical indicating if the resulting matrix
should have character (rather than \code{NULL})
\code{\LinkA{rownames}{rownames}}.  The default, \code{NA}, uses \code{NULL}
rownames if the data frame has `automatic' row.names or for a
zero-row data frame.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If one of \code{nrow} or \code{ncol} is not given, an attempt is
made to infer it from the length of \code{data} and the other
parameter.  If neither is given, a one-column matrix is returned.

If there are too few elements in \code{data} to fill the array,
then the elements in \code{data} are recycled.  If \code{data} has
length zero, \code{NA} of an appropriate type is used for atomic
vectors (\code{0} for raw vectors) and \code{NULL} for lists.

\code{is.matrix} returns \code{TRUE} if \code{x} is a matrix and has a
\code{\LinkA{dim}{dim}} attribute of length 2) and \code{FALSE} otherwise.
Note that a \code{\LinkA{data.frame}{data.frame}} is \strong{not} a matrix by this
test.  It is generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods}.

\code{as.matrix} is a generic function.  The method for data frames
will return a character matrix if there is any
non-(numeric/logical/complex) column, applying \code{\LinkA{format}{format}} to
non-character columns.  Otherwise, the usual coercion hierarchy
(logical < integer < double < complex) will be used, e.g., all-logical
data frames will be coerced to a logical matrix, mixed logical-integer
will give a integer matrix, etc.

When coercing a vector, it produces a one-column matrix, and
promotes the names (if any) of the vector to the rownames of the matrix.

\code{is.matrix} is a \LinkA{primitive}{primitive} function so any argument name is
ignored.    
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{data.matrix}{data.matrix}}, which attempts to convert to a numeric matrix.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
is.matrix(as.matrix(1:10))
!is.matrix(warpbreaks)# data.frame, NOT matrix!
warpbreaks[1:10,]
as.matrix(warpbreaks[1:10,]) #using as.matrix.data.frame(.) method

# Example of setting row and column names
mdat <- matrix(c(1,2,3, 11,12,13), nrow = 2, ncol=3, byrow=TRUE,
               dimnames = list(c("row1", "row2"),
                               c("C.1", "C.2", "C.3")))
mdat
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{maxCol}{Find Maximum Position in Matrix}{maxCol}
\aliasA{max.col}{maxCol}{max.col}
\keyword{utilities}{maxCol}
\keyword{array}{maxCol}
%
\begin{Description}\relax
Find the maximum position for each row of a matrix, breaking ties at random.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
max.col(m, ties.method=c("random", "first", "last"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{m}] numerical matrix
\item[\code{ties.method}] a character string specifying how ties are
handled, \code{"random"} by default; can be abbreviated; see
`Details'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
When \code{ties.method = "random"}, as per default, ties are broken at
random.  In this case, the determination of a tie assumes that
the entries are probabilities: there is a relative tolerance of
\eqn{10^{-5}}{}, relative to the largest (in magnitude, omitting
infinity) entry in the row.

If \code{ties.method = "first"}, \code{max.col} returns the
column number of the \emph{first} of several maxima in every row, the
same   as \code{\LinkA{unname}{unname}(\LinkA{apply}{apply}(m, 1, \LinkA{which.max}{which.max}))}.\\{}
Correspondingly, \code{ties.method = "last"} returns the \emph{last}
of possibly several indices.
\end{Details}
%
\begin{Value}
index of a maximal value for each row, an integer vector of
length \code{nrow(m)}.
\end{Value}
%
\begin{References}\relax
Venables, W. N. and Ripley, B. D. (2002)
\emph{Modern Applied Statistics with S.}
New York: Springer (4th ed).
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{which.max}{which.max}} for vectors.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
table(mc <- max.col(swiss))# mostly "1" and "5", 5 x "2" and once "4"
swiss[unique(print(mr <- max.col(t(swiss)))) , ] # 3 33 45 45 33 6

set.seed(1)# reproducible example:
(mm <- rbind(x = round(2*stats::runif(12)),
             y = round(5*stats::runif(12)),
             z = round(8*stats::runif(12))))
## Not run: 
  [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
x    1    1    1    2    0    2    2    1    1     0     0     0
y    3    2    4    2    4    5    2    4    5     1     3     1
z    2    3    0    3    7    3    4    5    4     1     7     5

## End(Not run)
## column indices of all row maxima :
utils::str(lapply(1:3, function(i) which(mm[i,] == max(mm[i,]))))
max.col(mm) ; max.col(mm) # "random"
max.col(mm, "first")# -> 4 6 5
max.col(mm, "last") # -> 7 9 11

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{mean}{Arithmetic Mean}{mean}
\methaliasA{mean.data.frame}{mean}{mean.data.frame}
\methaliasA{mean.default}{mean}{mean.default}
\keyword{univar}{mean}
%
\begin{Description}\relax
Generic function for the (trimmed) arithmetic mean.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
mean(x, ...)

## Default S3 method:
mean(x, trim = 0, na.rm = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An \R{} object.  Currently there are methods for
numeric/logical vectors and \LinkA{date}{Dates},
\LinkA{date-time}{date.Rdash.time} and \LinkA{time interval}{time interval} objects, and for data
frames all of whose columns have a method.  Complex vectors are
allowed for \code{trim = 0}, only.
\item[\code{trim}] the fraction (0 to 0.5) of observations to be
trimmed from each end of \code{x} before the mean is computed.
Values of trim outside that range are taken as the nearest endpoint.

\item[\code{na.rm}] a logical value indicating whether \code{NA}
values should be stripped before the computation proceeds.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
For a data frame, a named vector with the appropriate method being
applied column by column.

If \code{trim} is zero (the default), the arithmetic mean of the
values in \code{x} is computed, as a numeric or complex vector of
length one.  If \code{x} is not logical (coerced to numeric), numeric
(including integer) or complex, \code{NA} is returned, with a warning.

If \code{trim} is non-zero, a symmetrically trimmed mean is computed
with a fraction of \code{trim} observations deleted from each end
before the mean is computed.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{weighted.mean}{weighted.mean}}, \code{\LinkA{mean.POSIXct}{mean.POSIXct}},
\code{\LinkA{colMeans}{colMeans}} for row and column means.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c(0:10, 50)
xm <- mean(x)
c(xm, mean(x, trim = 0.10))

mean(USArrests, trim = 0.2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{memCompress}{In-memory Compression and Decompression}{memCompress}
\aliasA{memDecompress}{memCompress}{memDecompress}
\keyword{file}{memCompress}
\keyword{connection}{memCompress}
%
\begin{Description}\relax
In-memory compression or decompression for raw vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
memCompress(from, type = c("gzip", "bzip2", "xz", "none"))

memDecompress(from,
              type = c("unknown", "gzip", "bzip2", "xz", "none"),
              asChar = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{from}] A raw vector.  For \code{memCompress} a character vector
will be converted to a raw vector with character strings separated
by \code{"\bsl{}n"}.
\item[\code{type}] character string, the type of compression.  May be
abbreviated to a single letter, defaults to the first of the alternatives.
\item[\code{asChar}] logical: should the result be converted to a character
string?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{type = "none"} passes the input through unchanged, but may be
useful if \code{type} is a variable.

\code{type = "unknown"} attempts to detect the type of compression
applied (if any): this will always succeed for \command{bzip2}
compression, and will succeed for other forms if there is a suitable
header.  It will auto-detect the `magic' header
(\code{"\bsl{}x1f\bsl{}x8b"}) added to files by the \command{gzip} program (and
to files written by \code{\LinkA{gzfile}{gzfile}}), but \code{memCompress} does
not add such a header.

\command{bzip2} compression always adds a header (\code{"BZh"}).

Compressing with \code{type = "xz"} is equivalent to compressing a
file with \command{xz -9e} (including adding the `magic'
header): decompression should cope with the contents of any file
compressed with \command{xz} version 4.999 and some versions of
\command{lzma}.  There are other versions, in particular `raw'
streams, that are not currently handled.

All the types of compression can expand the input: for \code{"gzip"}
and \code{"bzip"} the maximum expansion is known and so
\code{memCompress} can always allocate sufficient space.  For
\code{"xz"} it is possible (but extremely unlikely) that compression
will fail if the output would have been too large.
\end{Details}
%
\begin{Value}
A raw vector or a character string (if \code{asChar = TRUE}).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}.

\url{http://en.wikipedia.org/wiki/Data_compression} for background on
data compression, \url{http://zlib.net/},
\url{http://en.wikipedia.org/wiki/Gzip}, \url{http://www.bzip.org/},
\url{http://en.wikipedia.org/wiki/Bzip2}, \url{http://tukaani.org/xz/}
and \url{http://en.wikipedia.org/wiki/Xz} for references about the
particular schemes used.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
txt <- readLines(file.path(R.home("doc"), "COPYING"))
sum(nchar(txt))
txt.gz <- memCompress(txt, "g")
length(txt.gz)
txt2 <- strsplit(memDecompress(txt.gz, "g", asChar = TRUE), "\n")[[1]]
stopifnot(identical(txt, txt2))
txt.bz2 <- memCompress(txt, "b")
length(txt.bz2)
## can auto-detect bzip2:
txt3 <- strsplit(memDecompress(txt.bz2, asChar = TRUE), "\n")[[1]]
stopifnot(identical(txt, txt3))

## xz compression is only worthwhile for large objects
txt.xz <- memCompress(txt, "x")
length(txt.xz)
txt3 <- strsplit(memDecompress(txt.xz, asChar = TRUE), "\n")[[1]]
stopifnot(identical(txt, txt3))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Memory}{Memory Available for Data Storage}{Memory}
\aliasA{mem.limits}{Memory}{mem.limits}
\keyword{environment}{Memory}
%
\begin{Description}\relax
Use command line options to control the memory available for \R{}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
R --min-vsize=vl --max-vsize=vu --min-nsize=nl --max-nsize=nu --max-ppsize=N

mem.limits(nsize = NA, vsize = NA)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{vl, vu, vsize}] Heap memory in bytes.
\item[\code{nl, nu, nsize}] Number of cons cells.
\item[\code{N}] Number of nested \code{PROTECT} calls..
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\R{} has a variable-sized workspace.  There is
much less need to set memory options than prior to \R{} 1.2.0, and most
users will never need to set these.  They are provided both as a way
to control the overall memory usage (which can also be done
by operating-system facilities such as \code{limit} on Unix),
and since setting larger values of the minima will make \R{} slightly
more efficient on large tasks.


To understand the options, one needs to know that \R{} maintains
separate areas for fixed and variable sized objects.  The first of these
is allocated as an array of \emph{cons cells} (Lisp programmers will
know what they are, others may think of them as the building blocks of
the language itself, parse trees, etc.), and the second are thrown on a
\emph{heap} of `Vcells' of 8 bytes each.  Effectively,
the inputs \code{vl} and \code{vu} are rounded up to the next
multiple of 8.

Each cons cell occupies 28 bytes on a 32-bit machine, (usually) 56 bytes
on a 64-bit machine.

The \option{--*-nsize} options can be used to specify the number of
cons cells and the \option{--*-vsize} options specify the size of the
vector heap in bytes.  Both options must be integers or integers
followed by \code{G}, \code{M}, \code{K}, or \code{k} meaning
\emph{Giga} (\eqn{2^{30} = 1073741824}{}) \emph{Mega} (\eqn{2^{20} =
    1048576}{}), (computer) \emph{Kilo} (\eqn{2^{10} = 1024}{}), or regular
\emph{kilo} (1000).

The \option{--min-*} options set the minimal sizes for the number of
cons cells and for the vector heap.  These values are also the initial
values, but thereafter \R{} will grow or shrink the areas depending on
usage, but never exceeding the limits set by the \option{--max-*}
options nor decreasing below the initial values.

The default values are currently minima of 350k cons cells,
6Mb of vector heap
and no maxima (other than machine resources).  The maxima can be
changed during an \R{} session by calling \code{mem.limits}. (If this is
called with the default values, it reports the current settings.)


You can find out the current memory consumption (the heap and cons
cells used as numbers and megabytes) by typing \code{\LinkA{gc}{gc}()} at the
\R{} prompt.  Note that following \code{\LinkA{gcinfo}{gcinfo}(TRUE)}, automatic
garbage collection always prints memory use statistics.  Maxima will
never be reduced below the current values for triggering garbage
collection, and attempts to do so will be silently ignored.

The command-line option \option{--max-ppsize} controls the maximum
size of the pointer protection stack.  This defaults to 50000, but can
be increased to allow deep recursion or large and complicated
calculations to be done. \emph{Note} that parts of the garbage
collection process goes through the full reserved pointer protection
stack and hence becomes slower when the size is increased.  Currently
the maximum value accepted is 500000.
\end{Details}
%
\begin{Value}
\code{mem.limits()} returns an integer vector giving the current
settings of the maxima, possibly \code{NA}.
\end{Value}
%
\begin{SeeAlso}\relax
\emph{An Introduction to R} for more command-line options

\code{\LinkA{Memory-limits}{Memory.Rdash.limits}} for the design limitations.

\code{\LinkA{gc}{gc}} for information on the garbage collector and total
memory usage,  \code{\LinkA{object.size}{object.size}(a)} for the (approximate)
size of \R{} object \code{a}.  \code{\LinkA{memory.profile}{memory.profile}} for
profiling the usage of cons cells.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# Start R with 10MB of heap memory and 500k cons cells, limit to
# 100Mb and 1M cells
## Not run: 
## Unix
R --min-vsize=10M --max-vsize=100M --min-nsize=500k --max-nsize=1M

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Memory-limits}{Memory Limits in R}{Memory.Rdash.limits}
\keyword{environment}{Memory-limits}
%
\begin{Description}\relax
\R{} holds objects it is using in memory.  This help file documents the
current design limitations on large objects: these differ between
32-bit and 64-bit builds of \R{}.
\end{Description}
%
\begin{Details}\relax
\R{} holds all objects in memory, and there are limits based on the
amount of memory that can be used by all objects:
\begin{itemize}

\item There may be limits on the size of the heap and the number of
cons cells allowed -- see \code{\LinkA{Memory}{Memory}} -- but these are
usually not imposed.
\item There is a limit on the address space of a single process such
as the \R{} executable.  This is system-specific.
\item The environment may impose limitations on the resources
available to a single process: Windows' versions of \R{} do so directly.

\end{itemize}

Error messages beginning \code{cannot allocate vector of size}
indicate a failure to obtain memory, either because the size exceeded
the address-space limit for a process or, more likely, because the
system was unable to provide the memory.  Note that on a 32-bit OS
there may well be enough free memory available, but not a large enough
contiguous block of address space into which to map it.

There are also limits on individual objects.  On all versions of \R{},
the maximum length (number of elements) of a vector is
\eqn{2^{31} - 1 \approx 2\thinspace 10^9}{}, as
lengths are stored as signed integers.  In addition, the storage space
cannot exceed the address limit, and if you try to exceed that limit,
the error message begins \code{cannot allocate vector of length}.
The number of characters in a character string is in theory only
limited by the address space.
\end{Details}
%
\begin{Section}{Unix}
The address-space limit is system-specific: 32-bit OSes
imposes a limit of no more than 4Gb: it is often 3Gb or less.  Running
32-bit executables on a 64-bit OS will have the similar limits: 64-bit
executables will have an essentially infinite  system-specific limit.

See the OS/shell's help on commands such as \code{limit} or
\code{ulimit} for how to impose limitations on the resources available
to a single process.  For example a \command{bash} user could use
\begin{alltt}
ulimit -t 600 -m 2000000
\end{alltt}

whereas a \command{csh} user might use
\begin{alltt}
limit cputime 10m
limit memoryuse 2048m
\end{alltt}

to limit a process to 10 minutes of CPU time and (around) 2GB of memory.
\end{Section}
%
\begin{Section}{Windows}
The address space limit is 2Gb under 32-bit Windows unless the OS's
default has been changed to allow more (up to 3Gb).  See
\url{http://www.microsoft.com/whdc/system/platform/server/PAE/PAEmem.mspx}
and
\url{http://msdn.microsoft.com/en-us/library/bb613473%28VS.85%29.aspx}.
Under most 64-bit versions of Windows the limit is 4Gb: for some older
ones it is 2Gb.

Under Windows, \R{} imposes limits on the total memory allocation
available to a single session as the OS provides no way to do so: see
\code{\LinkA{memory.size}{memory.size}} and \code{\LinkA{memory.limit}{memory.limit}}.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{object.size}{object.size}(a)} for the (approximate) size of \R{} object
\code{a}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{memory.profile}{Profile the Usage of Cons Cells}{memory.profile}
\keyword{utilities}{memory.profile}
%
\begin{Description}\relax
Lists the usage of the cons cells by \code{SEXPREC} type.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
memory.profile()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
The current types and their uses are listed in the include file
\file{Rinternals.h}.
\end{Details}
%
\begin{Value}
A vector of counts, named by the types.  See \code{\LinkA{typeof}{typeof}} for
an explanation of types.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{gc}{gc}} for the overall usage of cons cells.
\code{\LinkA{Rprofmem}{Rprofmem}} and \code{\LinkA{tracemem}{tracemem}} allow memory profiling
of specific code or objects, but need to be enabled at compile time.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
memory.profile()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{merge}{Merge Two Data Frames}{merge}
\methaliasA{merge.data.frame}{merge}{merge.data.frame}
\methaliasA{merge.default}{merge}{merge.default}
\keyword{array}{merge}
\keyword{manip}{merge}
%
\begin{Description}\relax
Merge two data frames by common columns or row names, or do other
versions of database \emph{join} operations.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
merge(x, y, ...)

## Default S3 method:
merge(x, y, ...)

## S3 method for class 'data.frame':
merge(x, y, by = intersect(names(x), names(y)),
      by.x = by, by.y = by, all = FALSE, all.x = all, all.y = all,
      sort = TRUE, suffixes = c(".x",".y"), incomparables = NULL, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] data frames, or objects to be coerced to one.
\item[\code{by, by.x, by.y}] specifications of the common columns.  See
`Details'.
\item[\code{all}] logical; \code{all = L} is shorthand for \code{all.x = L} and
\code{all.y = L}.
\item[\code{all.x}] logical; if \code{TRUE}, then extra rows will be added to
the output, one for each row in \code{x} that has no matching row in
\code{y}.  These rows will have \code{NA}s in those columns that are
usually filled with values from \code{y}.  The default is
\code{FALSE}, so that only rows with data from both \code{x} and
\code{y} are included in the output.
\item[\code{all.y}] logical; analogous to \code{all.x} above.
\item[\code{sort}] logical.  Should the results be sorted on the \code{by}
columns?
\item[\code{suffixes}] character(2) specifying the suffixes to be used for
making non-\code{by} \code{names()} unique.
\item[\code{incomparables}] values which cannot be matched.  See
\code{\LinkA{match}{match}}.
\item[\code{...}] arguments to be passed to or from methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
By default the data frames are merged on the columns with names they
both have, but separate specifications of the columns can be given by
\code{by.x} and \code{by.y}.  Columns can be specified by name, number
or by a logical vector: the name \code{"row.names"} or the number
\code{0} specifies the row names.  The rows in the two data frames
that match on the specified columns are extracted, and joined
together.  If there is more than one match, all possible matches
contribute one row each.  For the precise meaning of `match',
see \code{\LinkA{match}{match}}.

If \code{by} or both \code{by.x} and \code{by.y} are of length 0 (a
length zero vector or \code{NULL}), the result, \code{r}, is the
\emph{Cartesian product} of \code{x} and \code{y}, i.e.,
\code{dim(r) = c(nrow(x)*nrow(y), ncol(x) + ncol(y))}.

If \code{all.x} is true, all the non matching cases of \code{x} are
appended to the result as well, with \code{NA} filled in the
corresponding columns of \code{y};  analogously for \code{all.y}.

If the remaining columns in the data frames have any common names,
these have \code{suffixes} (\code{".x"} and \code{".y"} by default)
appended to make the names of the result unique.

The complexity of the algorithm used is proportional to the length of
the answer.


In SQL database terminology, the default value of \code{all = FALSE}
gives a \emph{natural join}, a special case of an \emph{inner
join}. Specifying \code{all.x = TRUE} gives a \emph{left (outer)
join}, \code{all.y = TRUE} a \emph{right (outer) join}, and both
(\code{all=TRUE} a \emph{(full) outer join}.  DBMSes do not match
\code{NULL} records, equivalent to \code{incomparables = NA} in \R{}.
\end{Details}
%
\begin{Value}
A data frame.  The rows are by default lexicographically sorted on the
common columns, but for \code{sort = FALSE} are in an unspecified order.
The columns are the common columns followed by the
remaining columns in \code{x} and then those in \code{y}.  If the
matching involved row names, an extra character column called
\code{Row.names} is added at the left, and in all cases the result has
`automatic' row names.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{data.frame}{data.frame}},
\code{\LinkA{by}{by}},
\code{\LinkA{cbind}{cbind}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## use character columns of names to get sensible sort order
authors <- data.frame(
    surname = I(c("Tukey", "Venables", "Tierney", "Ripley", "McNeil")),
    nationality = c("US", "Australia", "US", "UK", "Australia"),
    deceased = c("yes", rep("no", 4)))
books <- data.frame(
    name = I(c("Tukey", "Venables", "Tierney",
             "Ripley", "Ripley", "McNeil", "R Core")),
    title = c("Exploratory Data Analysis",
              "Modern Applied Statistics ...",
              "LISP-STAT",
              "Spatial Statistics", "Stochastic Simulation",
              "Interactive Data Analysis",
              "An Introduction to R"),
    other.author = c(NA, "Ripley", NA, NA, NA, NA,
                     "Venables & Smith"))

(m1 <- merge(authors, books, by.x = "surname", by.y = "name"))
(m2 <- merge(books, authors, by.x = "name", by.y = "surname"))
stopifnot(as.character(m1[,1]) == as.character(m2[,1]),
          all.equal(m1[, -1], m2[, -1][ names(m1)[-1] ]),
          dim(merge(m1, m2, by = integer(0))) == c(36, 10))

## "R core" is missing from authors and appears only here :
merge(authors, books, by.x = "surname", by.y = "name", all = TRUE)

## example of using 'incomparables'
x <- data.frame(k1=c(NA,NA,3,4,5), k2=c(1,NA,NA,4,5), data=1:5)
y <- data.frame(k1=c(NA,2,NA,4,5), k2=c(NA,NA,3,4,5), data=1:5)
merge(x, y, by=c("k1","k2")) # NA's match
merge(x, y, by=c("k1","k2"), incomparables=NA)
merge(x, y, by="k1") # NA's match, so 6 rows
merge(x, y, by="k2", incomparables=NA) # 2 rows
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{message}{Diagnostic Messages}{message}
\aliasA{.makeMessage}{message}{.makeMessage}
\aliasA{.packageStartupMessage}{message}{.packageStartupMessage}
\aliasA{packageStartupMessage}{message}{packageStartupMessage}
\aliasA{suppressMessages}{message}{suppressMessages}
\aliasA{suppressPackageStartupMessages}{message}{suppressPackageStartupMessages}
\keyword{programming}{message}
%
\begin{Description}\relax
Generate a diagnostic message from its arguments.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
message(..., domain = NULL, appendLF = TRUE)
suppressMessages(expr)

packageStartupMessage(..., domain = NULL, appendLF = TRUE)
suppressPackageStartupMessages(expr)

.makeMessage(..., domain = NULL, appendLF = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] zero or more objects which can be coerced to character
(and which are pasted together with no separator) or (for
\code{message} only) a single condition object.
\item[\code{domain}] see \code{\LinkA{gettext}{gettext}}.  If \code{NA}, messages will
not be translated.
\item[\code{appendLF}] logical: should messages given as a character string
have a newline appended?
\item[\code{expr}] expression to evaluate.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{message} is used for generating `simple' diagnostic
messages which are neither warnings nor errors, but nevertheless
represented as conditions.  Unlike warnings and errors, a final
newline is regarded as part of the message, and is optional.
The default handler sends the message to the
\code{\LinkA{stderr}{stderr}()} connection.

If a condition object is supplied  to \code{message} it should be
the only argument, and further arguments will be ignored, with a warning.

While the message is being processed, a \code{muffleMessage} restart
is available.

\code{suppressMessages} evaluates its expression in a context that
ignores all `simple' diagnostic messages.

\code{packageStartupMessage} is a variant whose messages can be
suppressed separately by \code{suppressPackageStartupMessages}.  (They
are still messages, so can be suppressed by \code{suppressMessages}.)

\code{.makeMessage} is a utility used by \code{message}, \code{warning}
and \code{stop} to generate a text message from the \code{...}
arguments by possible translation (see \code{\LinkA{gettext}{gettext}}) and
concatenation (with no separator).
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{warning}{warning}} and \code{\LinkA{stop}{stop}} for generating warnings
and errors; \code{\LinkA{conditions}{conditions}} for condition handling and
recovery.

\code{\LinkA{gettext}{gettext}} for the mechanisms for the automated translation
of text.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
message("ABC", "DEF")
suppressMessages(message("ABC"))

testit <- function() {
  message("testing package startup messages")
  packageStartupMessage("initializing ...", appendLF = FALSE)
  Sys.sleep(1)
  packageStartupMessage(" done")
}

testit()
suppressPackageStartupMessages(testit())
suppressMessages(testit())
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{missing}{Does a Formal Argument have a Value?}{missing}
\keyword{programming}{missing}
%
\begin{Description}\relax
\code{missing} can be used to test whether a value was specified
as an argument to a function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
missing(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a formal argument.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{missing(x)} is only reliable if \code{x} has not been altered
since entering the function: in particular it will \emph{always}
be false after \code{x <- match.arg(x)}. 

The example shows how a plotting function can be written to work with
either a pair of vectors giving x and y coordinates of points to be
plotted or a single vector giving y values to be plotted against their
indices.

Currently \code{missing} can only be used in the immediate body of
the function that defines the argument, not in the body of a nested
function or a \code{local} call.  This may change in the future.

This is a \LinkA{primitive}{primitive} function.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{substitute}{substitute}} for argument expression;
\code{\LinkA{NA}{NA}} for missing values in data.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
myplot <- function(x,y) {
                if(missing(y)) {
                        y <- x
                        x <- 1:length(y)
                }
                plot(x,y)
        }
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{mode}{The (Storage) Mode of an Object}{mode}
\aliasA{mode<\Rdash}{mode}{mode<.Rdash.}
\aliasA{storage.mode}{mode}{storage.mode}
\aliasA{storage.mode<\Rdash}{mode}{storage.mode<.Rdash.}
\keyword{attribute}{mode}
%
\begin{Description}\relax
Get or set the type or storage mode of an object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
mode(x)
mode(x) <- value
storage.mode(x)
storage.mode(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] any \R{} object.
\item[\code{value}] a character string giving the desired mode or
`storage mode' (type) of the object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Both \code{mode} and \code{storage.mode} return a character string
giving the (storage) mode of the object --- often the same --- both
relying on the output of \code{\LinkA{typeof}{typeof}(x)}, see the example
below.

\code{mode(x) <- "newmode"} changes the \code{mode} of object \code{x} to
\code{newmode}.  This is only supported if there is an appropriate
\code{as.newmode} function, for example
\code{"logical"}, \code{"integer"}, \code{"double"}, \code{"complex"},
\code{"raw"}, \code{"character"}, \code{"list"}, \code{"expression"},
\code{"name"}, \code{"symbol"} and \code{"function"}.  Attributes are
preserved (but see below).

\code{storage.mode(x) <- "newmode"} is a more efficient \LinkA{primitive}{primitive}
version of \code{mode<-}, which works for \code{"newmode"} which is
one of the internal types (see \code{\LinkA{typeof}{typeof}}), but not for
\code{"single"}.  Attributes are preserved.

As storage mode \code{"single"} is only a pseudo-mode in \R{}, it will
not be reported by \code{mode} or \code{storage.mode}: use
\code{attr(object, "Csingle")} to examine this.  However,
\code{mode<-} can be used to set the mode to \code{"single"},
which sets the real mode to \code{"double"} and the \code{"Csingle"}
attribute to \code{TRUE}.  Setting any other mode will remove this
attribute.

Note (in the examples below) that some \code{\LinkA{call}{call}}s have mode
\code{"("} which is S compatible.
\end{Details}
%
\begin{Section}{Mode names}
Modes have the same set of names as types (see \code{\LinkA{typeof}{typeof}})
except that
\begin{itemize}

\item types \code{"integer"} and \code{"double"} are
returned as \code{"numeric"}.
\item types \code{"special"} and \code{"builtin"} are returned as
\code{"function"}.
\item type \code{"symbol"} is called mode \code{"name"}.
\item type \code{"language"} is returned as \code{"("} or \code{"call"}.

\end{itemize}

\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{typeof}{typeof}} for the R-internal `mode',
\code{\LinkA{attributes}{attributes}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

sapply(options(),mode)

cex3 <- c("NULL","1","1:1","1i","list(1)","data.frame(x=1)",
  "pairlist(pi)", "c", "lm", "formals(lm)[[1]]",  "formals(lm)[[2]]",
  "y~x","expression((1))[[1]]", "(y~x)[[1]]",
  "expression(x <- pi)[[1]][[1]]")
lex3 <- sapply(cex3, function(x) eval(parse(text=x)))
mex3 <- t(sapply(lex3,
                 function(x) c(typeof(x), storage.mode(x), mode(x))))
dimnames(mex3) <- list(cex3, c("typeof(.)","storage.mode(.)","mode(.)"))
mex3

## This also makes a local copy of 'pi':
storage.mode(pi) <- "complex"
storage.mode(pi)
rm(pi)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{NA}{Not Available / ``Missing'' Values}{NA}
\aliasA{is.na}{NA}{is.na}
\methaliasA{is.na.data.frame}{NA}{is.na.data.frame}
\aliasA{is.na<\Rdash}{NA}{is.na<.Rdash.}
\methaliasA{is.na<\Rdash.default}{NA}{is.na<.Rdash..default}
\aliasA{NA\_character\_}{NA}{NA.Rul.character.Rul.}
\aliasA{NA\_complex\_}{NA}{NA.Rul.complex.Rul.}
\aliasA{NA\_integer\_}{NA}{NA.Rul.integer.Rul.}
\aliasA{NA\_real\_}{NA}{NA.Rul.real.Rul.}
\keyword{NA}{NA}
\keyword{logic}{NA}
\keyword{manip}{NA}
%
\begin{Description}\relax
\code{NA} is a logical constant of length 1 which contains a missing
value indicator.  \code{NA} can be freely coerced to any other vector
type except raw.  There are also constants \code{NA\_integer\_},
\code{NA\_real\_}, \code{NA\_complex\_} and \code{NA\_character\_} of the
other atomic vector types which support missing values: all of these
are \LinkA{reserved}{reserved} words in the \R{} language.

The generic function \code{is.na} indicates which elements are missing.

The generic function \code{is.na<-} sets elements to \code{NA}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
NA
is.na(x)
## S3 method for class 'data.frame':
is.na(x)

is.na(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object to be tested.
\item[\code{value}] a suitable index vector for use with \code{x}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{NA} of character type is distinct from the
string \code{"NA"}.  Programmers who need to specify an explicit
string \code{NA} should use \code{NA\_character\_} rather than
\code{"NA"}, or set elements to \code{NA} using \code{is.na<-}.

\code{is.na(x)} works elementwise when \code{x} is a
\code{\LinkA{list}{list}}.  It is generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods}.  A complex
value is regarded as \code{NA} if either its real or imaginary part is
\code{NA} or \code{NaN}.

Function \code{is.na<-} may provide a safer way to set missingness.
It behaves differently for factors, for example.

\code{is.na} (but not the replacement function nor the
\code{data.frame} method) is a \LinkA{primitive}{primitive} function so any
argument name is ignored.
\end{Details}
%
\begin{Value}
The default method for \code{is.na} returns a logical vector of the same
length as its argument \code{x}, containing \code{TRUE} for those
elements marked \code{NA} or \code{\LinkA{NaN}{NaN}} (!) and \code{FALSE}
otherwise.  \code{dim}, \code{dimnames} and \code{names} attributes
are preserved.

The method \code{is.na.data.frame} returns a logical matrix with the
same dimensions as the data frame, and with dimnames taken from the
row and column names of the data frame.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{NaN}{NaN}}, \code{\LinkA{is.nan}{is.nan}}, etc.,
and the utility function \code{\LinkA{complete.cases}{complete.cases}}.

\code{\LinkA{na.action}{na.action}}, \code{\LinkA{na.omit}{na.omit}}, \code{\LinkA{na.fail}{na.fail}}
on how methods can be tuned to deal with missing values.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
is.na(c(1, NA))        #> FALSE  TRUE
is.na(paste(c(1, NA))) #> FALSE FALSE

(xx <- c(0:4))
is.na(xx) <- c(2, 4)
xx                     #> 0 NA  2 NA  4
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{name}{Names and Symbols}{name}
\aliasA{as.name}{name}{as.name}
\aliasA{as.symbol}{name}{as.symbol}
\aliasA{is.name}{name}{is.name}
\aliasA{is.symbol}{name}{is.symbol}
\keyword{programming}{name}
\keyword{attribute}{name}
%
\begin{Description}\relax
A `name' (also known as a `symbol') is a way to refer to
\R{} objects by name (rather than the value of the object, if any, bound
to that name).

\code{as.name} and \code{as.symbol} are identical: they attempt to
coerce the argument to a name.

\code{is.symbol} and the identical \code{is.name} return \code{TRUE}
or \code{FALSE} depending on whether the argument is a name or not.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.symbol(x)
is.symbol(x)

as.name(x)
is.name(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be coerced or tested.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{as.name} first coerces its argument internally to a character
vector (so methods for \code{as.character} are not used).  It then
takes the first element and provided it is not \code{""}, returns a
symbol of that name (and if the element is \code{NA\_character\_}, the
name is \code{`NA`}. 

\code{as.name} is implemented as \code{\LinkA{as.vector}{as.vector}(x, "symbol")},
and hence will dispatch methods for the generic function \code{as.vector}.

\code{is.name} and \code{is.symbol} are \LinkA{primitive}{primitive} functions.
\end{Details}
%
\begin{Value}
For \code{as.name} and \code{as.symbol}, an \R{} object of type
\code{"symbol"} (see \code{\LinkA{typeof}{typeof}}).

For \code{is.name} and \code{is.symbol}, a length-one logical vector
with value \code{TRUE} or \code{FALSE}.
\end{Value}
%
\begin{Note}\relax
The term `symbol' is from the LISP background of \R{}, whereas
`name' has been the standard S term for this.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{call}{call}}, \code{\LinkA{is.language}{is.language}}.
For the internal object mode, \code{\LinkA{typeof}{typeof}}.

\code{\LinkA{plotmath}{plotmath}} for another use of `symbol'.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
an <- as.name("arrg")
is.name(an) # TRUE
mode(an)   # name
typeof(an) # symbol
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{names}{The Names of an Object}{names}
\methaliasA{names.default}{names}{names.default}
\aliasA{names<\Rdash}{names}{names<.Rdash.}
\methaliasA{names<\Rdash.default}{names}{names<.Rdash..default}
\keyword{attribute}{names}
%
\begin{Description}\relax
Functions to get or set the names of an object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
names(x)
names(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object.
\item[\code{value}] a character vector of up to the same length as \code{x}, or
\code{NULL}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{names} is a generic accessor function, and \code{names<-} is a
generic replacement function.  The default methods get and set
the \code{"names"} attribute of a vector (including a list) or
pairlist.

If \code{value} is shorter than \code{x}, it is extended by character
\code{NA}s to the length of \code{x}.

It is possible to update just part of the names attribute via the
general rules: see the examples.  This works because the expression
there is evaluated as \code{z <- "names<-"(z, "[<-"(names(z), 3, "c2"))}.

The name \code{""} is special: it is used to indicate that there is no
name associated with an element of a (atomic or generic) vector.
Subscripting by \code{""} will match nothing (not even elements which
have no name).

A name can be character \code{NA}, but such a name will never be
matched and is likely to lead to confusion.

These functions are \LinkA{primitive}{primitive}, so argument names are ignored
(but this might not be true of their methods).
\end{Details}
%
\begin{Value}
For \code{names}, \code{NULL} or a character vector of the same length
as \code{x}.  (\code{NULL} is given if the object has no names,
including for objects of types which cannot have names.)

For \code{names<-}, the updated object.  (Note that the value of
\code{names(x) <- value} is that of the assignment, \code{value}, not
the return value from the left-hand side.)
\end{Value}
%
\begin{Note}\relax
For vectors, the names are one of the \LinkA{attributes}{attributes} with
restrictions on the possible values.  For pairlists, the names are the
tags and converted to and from a character vector.

For a one-dimensional array the \code{names} attribute really is
\code{\LinkA{dimnames}{dimnames}[[1]]}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
# print the names attribute of the islands data set
names(islands)

# remove the names attribute
names(islands) <- NULL
islands
rm(islands) # remove the copy made

z <- list(a=1, b="c", c=1:3)
names(z)
# change just the name of the third element.
names(z)[3] <- "c2"
z

z <- 1:3
names(z)
## assign just one name
names(z)[2] <- "b"
z
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{nargs}{The Number of Arguments to a Function}{nargs}
\keyword{programming}{nargs}
%
\begin{Description}\relax
When used inside a function body, \code{nargs} returns the number of
arguments supplied to that function, \emph{including} positional
arguments left blank. 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
nargs()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
The count includes empty (missing) arguments, so that \code{foo(x,{},z)}
will be considered to have three arguments (see `Examples').
This can occur in rather indirect ways, so for example \code{x[]}
might dispatch a call to \code{`[.some\_method`(x, )} which is
considered to have two arguments.

This is a \LinkA{primitive}{primitive} function.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{args}{args}}, \code{\LinkA{formals}{formals}} and \code{\LinkA{sys.call}{sys.call}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
tst <- function(a, b = 3, ...) {nargs()}
tst() # 0
tst(clicketyclack) # 1 (even non-existing)
tst(c1, a2, rr3) # 3

foo <- function(x, y, z, w) {
   cat("call was", deparse(match.call()), "\n")
   nargs()
}
foo()    # 0
foo(,,3) # 3
foo(z=3) # 1, even though this is the same call

nargs()# not really meaningful
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{nchar}{Count the Number of Characters (or Bytes or Width)}{nchar}
\aliasA{nzchar}{nchar}{nzchar}
\keyword{character}{nchar}
%
\begin{Description}\relax
\code{nchar} takes a character vector as an argument and
returns a vector whose elements contain the sizes of
the corresponding elements of \code{x}.

\code{nzchar} is a fast way to find out if elements of a character
vector are non-empty strings.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
nchar(x, type = "chars", allowNA = FALSE)

nzchar(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] character vector, or a vector to be coerced to a character
vector.
\item[\code{type}] character string: partial matching to one of
\code{c("bytes", "chars", "width")}.  See `Details'.
\item[\code{allowNA}] logical: show \code{NA} be returned for invalid
multibyte strings (rather than throwing an error)?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The `size' of a character string can be measured in one of
three ways
\begin{description}

\item[\code{bytes}] The number of bytes needed to store the string
(plus in C a final terminator which is not counted).
\item[\code{chars}] The number of human-readable characters.
\item[\code{width}] The number of columns \code{cat} will use to
print the string in a monospaced font.  The same as \code{chars}
if this cannot be calculated.

\end{description}

These will often be the same, and almost always will be in single-byte
locales.  There will be differences between the first two with
multibyte character sequences, e.g. in UTF-8 locales.

The internal equivalent of the default method of
\code{\LinkA{as.character}{as.character}} is performed on \code{x} (so there is no
method dispatch).  If you want to operate on non-vector objects
passing them through \code{\LinkA{deparse}{deparse}} first will be required.

\code{nzchar} is \LinkA{primitive}{primitive} and so will ignore any argument name.
\end{Details}
%
\begin{Value}
For \code{nchar}, an integer vector giving the sizes of each element,
currently always \code{2} for missing values (for \code{NA}).

If \code{allowNA = TRUE} and an element is invalid in a multi-byte
character set such as UTF-8, its number of characters and the width
will be \code{NA}.  Otherwise the number of characters will be
non-negative, so \code{!is.na(nchar(x, "chars", TRUE))} is a test of
validity.

Names, dims and dimnames are copied from the input.

For \code{nzchar}, a logical vector of the same length as \code{x},
true if and only if the element has non-zero length.
\end{Value}
%
\begin{Note}\relax
This does \strong{not} by default give the number of characters that
will be used to \code{print()} the string.  Use
\code{\LinkA{encodeString}{encodeString}} to find the characters used to print the
string.
Where character strings have been marked as UTF-8, the number of
characters and widths will be computed in UTF-8, even though printing
may use escapes such as \samp{<U+2642>} in a non-UTF-8 locale.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{strwidth}{strwidth}} giving width of strings for plotting;
\code{\LinkA{paste}{paste}}, \code{\LinkA{substr}{substr}}, \code{\LinkA{strsplit}{strsplit}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c("asfef", "qwerty", "yuiop[", "b", "stuff.blah.yech")
nchar(x)
# 5  6  6  1 15

nchar(deparse(mean))
# 18 17
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{nlevels}{The Number of Levels of a Factor}{nlevels}
\keyword{category}{nlevels}
%
\begin{Description}\relax
Return the number of levels which its argument has.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
nlevels(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object, usually a factor.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is usually applied to a factor, but other objects can have levels.

The actual factor levels (if they exist) can be obtained
with the \code{\LinkA{levels}{levels}} function.
\end{Details}
%
\begin{Value}
The length of \code{\LinkA{levels}{levels}(x)}, which is zero if
\code{x} has no levels.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{levels}{levels}}, \code{\LinkA{factor}{factor}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
nlevels(gl(3,7)) # = 3
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{noquote}{Class for ``no quote'' Printing of Character Strings}{noquote}
\aliasA{as.matrix.noquote}{noquote}{as.matrix.noquote}
\aliasA{c.noquote}{noquote}{c.noquote}
\aliasA{print.noquote}{noquote}{print.noquote}
\aliasA{[.noquote}{noquote}{[.noquote}
\keyword{print}{noquote}
\keyword{methods}{noquote}
\keyword{utilities}{noquote}
%
\begin{Description}\relax
Print character strings without quotes.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
noquote(obj)

## S3 method for class 'noquote':
print(x, ...)

## S3 method for class 'noquote':
c(..., recursive = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{obj}] any \R{} object, typically a vector of
\code{\LinkA{character}{character}} strings.
\item[\code{x}] an object of class \code{"noquote"}.
\item[\code{...}] further options passed to next methods, such as \code{\LinkA{print}{print}}.
\item[\code{recursive}] for compatibility with the generic \code{\LinkA{c}{c}} function.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{noquote} returns its argument as an object of class
\code{"noquote"}.  There is a method for \code{c()} and subscript
method (\code{"[.noquote"}) which ensures that the class is not lost
by subsetting.  The print method (\code{print.noquote}) prints
character strings \emph{without} quotes (\code{"..."}).

These functions exist both as utilities and as an example of using (S3)
\code{\LinkA{class}{class}} and object orientation.
\end{Details}
%
\begin{Author}\relax
Martin Maechler \email{maechler@stat.math.ethz.ch}
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{methods}{methods}}, \code{\LinkA{class}{class}}, \code{\LinkA{print}{print}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
letters
nql <- noquote(letters)
nql
nql[1:4] <- "oh"
nql[1:12]

cmp.logical <- function(log.v)
{
  ## Purpose: compact printing of logicals
  log.v <- as.logical(log.v)
  noquote(if(length(log.v)==0)"()" else c(".","|")[1+log.v])
}
cmp.logical(stats::runif(20) > 0.8)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{NotYet}{Not Yet Implemented Functions and Unused Arguments}{NotYet}
\aliasA{.NotYetImplemented}{NotYet}{.NotYetImplemented}
\aliasA{.NotYetUsed}{NotYet}{.NotYetUsed}
\aliasA{NotYetImplemented}{NotYet}{NotYetImplemented}
\aliasA{NotYetUsed}{NotYet}{NotYetUsed}
\keyword{documentation}{NotYet}
\keyword{utilities}{NotYet}
%
\begin{Description}\relax
In order to pinpoint missing functionality, the \R{} core team uses
these functions for missing \R{} functions and not yet used arguments of
existing \R{} functions (which are typically there for compatibility
purposes).

You are very welcome to contribute your code \dots
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.NotYetImplemented()
.NotYetUsed(arg, error = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{arg}] an argument of a function that is not yet used.
\item[\code{error}] a logical.  If \code{TRUE}, an error is signalled; if
\code{FALSE}; only a warning is given.
\end{ldescription}
\end{Arguments}
%
\begin{SeeAlso}\relax
the contrary, \code{\LinkA{Deprecated}{Deprecated}} and
\code{\LinkA{Defunct}{Defunct}} for outdated code.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)
require(stats)
plot.mlm         # to see how the "NotYetImplemented"
                 # reference is made automagically
try(plot.mlm())

barplot(1:5, inside = TRUE) # 'inside' is not yet used
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{nrow}{The Number of Rows/Columns of an Array}{nrow}
\aliasA{NCOL}{nrow}{NCOL}
\aliasA{ncol}{nrow}{ncol}
\aliasA{NROW}{nrow}{NROW}
\keyword{array}{nrow}
%
\begin{Description}\relax
\code{nrow} and \code{ncol} return the number of rows or columns
present in \code{x}.
\code{NCOL} and \code{NROW} do the same treating a vector as
1-column matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
nrow(x)
ncol(x)
NCOL(x)
NROW(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector, array or data frame
\end{ldescription}
\end{Arguments}
%
\begin{Value}
an \code{\LinkA{integer}{integer}} of length 1 or \code{\LinkA{NULL}{NULL}}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole (\code{ncol} and \code{nrow}.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{dim}{dim}} which returns \emph{all} dimensions;
\code{\LinkA{array}{array}}, \code{\LinkA{matrix}{matrix}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
ma <- matrix(1:12, 3, 4)
nrow(ma)   # 3
ncol(ma)   # 4

ncol(array(1:24, dim = 2:4)) # 3, the second dimension
NCOL(1:12) # 1
NROW(1:12) # 12
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{ns-dblcolon}{Double Colon and Triple Colon Operators}{ns.Rdash.dblcolon}
\aliasA{::}{ns-dblcolon}{::}
\aliasA{:::}{ns-dblcolon}{:::}
\keyword{programming}{ns-dblcolon}
%
\begin{Description}\relax
Accessing exported and internal variables in a name space, or
variables in an attached package.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
pkg::name
pkg:::name
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{pkg}] package name: symbol or literal character string.
\item[\code{name}] variable name: symbol or literal character string.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For a package with a name space, \code{pkg::name} returns the value of
the exported variable \code{name} in name space \code{pkg}, whereas
\code{pkg:::name} returns the value of the internal variable
\code{name}. The name space will be loaded if it was not loaded
before the call, but the package will not be attached to the
search path.

If the package \code{pkg} does not have a name space but is on the
search path then \code{pkg::name} returns the value of \code{name} in
the package environment.  Thus \code{pkg::name} has the same effect
for attached packages whether or not they have a name space.

Specifying a variable that does not exist is an error, as is
specifying a package that does not exist or does not have a name space
and is not on the search path.

Note that it is typically a design mistake to use \code{:::}
in your code since the corresponding object has probably been kept
internal for a good reason.  Consider contacting the package
maintainer if you feel the need to access the object for anything but
mere inspection.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{get}{get}} to access an object masked by another of the same name.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
base::log
base::"+"

## Beware --  use ':::' at your own risk! (see "Details")
stats:::coef.default
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{ns-hooks}{Hooks for Name Space events}{ns.Rdash.hooks}
\aliasA{.onAttach}{ns-hooks}{.onAttach}
\aliasA{.onLoad}{ns-hooks}{.onLoad}
\aliasA{.onUnload}{ns-hooks}{.onUnload}
\keyword{utilities}{ns-hooks}
%
\begin{Description}\relax
Packages with name spaces can supply functions to be called when
loaded, attached or unloaded.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.onLoad(libname, pkgname)
.onAttach(libname, pkgname)
.onUnload(libpath)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{libname}] a character string giving the library directory where
the package defining the namespace was found.
\item[\code{pkgname}] a character string giving the name of the package.
\item[\code{libpath}] a character string giving the complete path to the package.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These functions apply only to packages with name spaces.

After loading, \code{\LinkA{loadNamespace}{loadNamespace}} looks for a hook function named
\code{.onLoad} and runs it before sealing the namespace and processing
exports.

If a name space is unloaded (via \code{\LinkA{unloadNamespace}{unloadNamespace}}),
a hook function \code{.onUnload} is run before final unloading.

Note that the code in \code{.onLoad} and \code{.onUnload} is run
without the package being on the search path, but (unless circumvented)
lexical scope will make objects in the namespace and its imports
visible. (Do not use the double colon operator in \code{.onLoad} as
exports have not been processed at the point it is run.)

When the package is attached (via \code{\LinkA{library}{library}}), the hook
function \code{.onAttach} is looked for and if found is called
after the exported functions are attached and before the package
environment is sealed.  This is less likely to be useful than
\code{.onLoad}, which should be seen as the analogue of
\code{\LinkA{.First.lib}{.First.lib}} (which is only used for packages without a
name space).

\code{.onLoad}, \code{.onUnload} and \code{.onAttach} are looked for
as internal variables in the name space and should not be exported.

If a function \code{\LinkA{.Last.lib}{.Last.lib}} is visible in the package, it
will be called when the package is detached: this does need to be exported.

Anything needed for the functioning of the name space should be
handled at load/unload times by the \code{.onLoad} and
\code{.onUnload} hooks.  For example, DLLs can be loaded (unless done
by a \code{useDynLib} directive in the \file{NAMESPACE} file) and
initialized in \code{.onLoad} and unloaded in \code{.onUnload}.  Use
\code{.onAttach} only for actions that are needed only when the
package becomes visible to the user, for example a start-up message.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{setHook}{setHook}} shows how users can set hooks on the same events.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{ns-load}{Loading and Unloading Name Spaces}{ns.Rdash.load}
\aliasA{attachNamespace}{ns-load}{attachNamespace}
\aliasA{loadedNamespaces}{ns-load}{loadedNamespaces}
\aliasA{loadNamespace}{ns-load}{loadNamespace}
\aliasA{unloadNamespace}{ns-load}{unloadNamespace}
\keyword{data}{ns-load}
\keyword{utilities}{ns-load}
%
\begin{Description}\relax
Functions to load and unload namespaces.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
attachNamespace(ns, pos = 2, dataPath = NULL)
loadNamespace(package, lib.loc = NULL,
              keep.source = getOption("keep.source.pkgs"),
              partial = FALSE, declarativeOnly = FALSE)
loadedNamespaces()
unloadNamespace(ns)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{ns}] string or namespace object.
\item[\code{pos}] integer specifying position to attach.
\item[\code{dataPath}] path to directory containing a database of datasets to
be lazy-loaded into the attached environment.
\item[\code{package}] string naming the package/name space to load.
\item[\code{lib.loc}] character vector specifying library search path.
\item[\code{keep.source}] 
logical specifying whether to retain source.
This applies only to the specified name space, and not to other name spaces
which might be loaded to satisfy imports.

For more details see this argument to \code{\LinkA{library}{library}}.

\item[\code{partial}] logical; if true, stop just after loading code.
\item[\code{declarativeOnly}] logical; disables \code{.Import}, etc, if true.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The functions \code{loadNamespace} and \code{attachNamespace} are
usually called implicitly when \code{library} is used to load a name
space and any imports needed.  However it may be useful to call
these functions directly at times.

\code{loadNamespace} loads the specified name space and registers it
in an internal data base.  A request to load a name space when one of
that name is already loaded has no effect.  The arguments have the
same meaning as the corresponding arguments to \code{\LinkA{library}{library}},
whose help page explains the details of how a particular installed
package comes to be chosen.  After loading, \code{loadNamespace} looks
for a hook function named \code{\LinkA{.onLoad}{.onLoad}} as an internal
variable in the name space (it should not be exported).  This function
is called with the same arguments as \code{.First.lib}.  Partial
loading is used to support installation with the \option{--save} and
\option{--lazy} options.

\code{loadNamespace} does not attach the name space it loads to the
search path.  \code{attachNamespace} can be used to attach a frame
containing the exported values of a name space to the search path (but
this is almost always done \emph{via} \code{\LinkA{library}{library}}).  The
hook function \code{\LinkA{.onAttach}{.onAttach}} is run after the name space
exports are attached.

\code{loadedNamespaces} returns a character vector of the names of
the loaded name spaces.

\code{unloadNamespace} can be used to attempt to force a name space to
be unloaded.  If the namespace is attached, it is first
\code{\LinkA{detach}{detach}}ed, thereby running a \code{.Last.lib} function
in the namespace if one is exported.  Then an error is signaled if the
name space is imported by other loaded name spaces, and the namespace
is not unloaded.  If defined, a hook function \code{\LinkA{.onUnload}{.onUnload}}
is run before removing the name space from the internal registry.

See the comments in the help for \code{\LinkA{detach}{detach}} about some
issues with unloading and reloading namespaces.
\end{Details}
%
\begin{Value}
\code{attachNamespace} returns invisibly the environment it adds to
the search path.

\code{loadNamespace} returns the namespace environment, either one
already loaded or the one the function causes to be loaded.

\code{loadedNamespaces} returns a character vector.

\code{unloadNamespace} returns \code{NULL}, invisibly.
\end{Value}
%
\begin{Author}\relax
Luke Tierney
\end{Author}
\inputencoding{latin1}
\HeaderA{ns-topenv}{Top Level Environment}{ns.Rdash.topenv}
\aliasA{topenv}{ns-topenv}{topenv}
\keyword{programming}{ns-topenv}
%
\begin{Description}\relax
Finding the top level environment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
topenv(envir = parent.frame(),
       matchThisEnv = getOption("topLevelEnvironment"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{envir}] environment.

\item[\code{matchThisEnv}] return this environment, if it matches before
any other criterion is satisfied.  The default, the option
\samp{topLevelEnvironment}, is set by \code{\LinkA{sys.source}{sys.source}},
which treats a specific environment as the top level environment.
Supplying the argument as \code{NULL} means it will never match.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{topenv} returns the first top level environment found when
searching \code{envir} and its parent environments.  An environment is
considered top level if it is the internal environment of a name space,
a package environment in the search path, or \code{.GlobalEnv}.
\end{Details}
%
\begin{Examples}
\begin{ExampleCode}
topenv(.GlobalEnv)
topenv(new.env())
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{NULL}{The Null Object}{NULL}
\aliasA{as.null}{NULL}{as.null}
\methaliasA{as.null.default}{NULL}{as.null.default}
\aliasA{is.null}{NULL}{is.null}
\keyword{attribute}{NULL}
\keyword{manip}{NULL}
\keyword{list}{NULL}
\keyword{sysdata}{NULL}
%
\begin{Description}\relax
\code{NULL} represents the null object in R: it is a \LinkA{reserved}{reserved} word.
NULL is often returned by expressions and functions whose
value is undefined: it is also used as the empty \LinkA{pairlist}{pairlist}.

\code{as.null} ignores its argument and returns the value \code{NULL}.

\code{is.null} returns \code{TRUE} if its argument
is \code{NULL} and \code{FALSE} otherwise.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
NULL
as.null(x, ...)
is.null(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object to be tested or coerced.
\item[\code{...}] ignored.
\end{ldescription}
\end{Arguments}
%
\begin{Note}\relax
\code{is.null} is a \LinkA{primitive}{primitive} function.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
is.null(list())    # FALSE (on purpose!)
is.null(integer(0))# F
is.null(logical(0))# F
as.null(list(a=1,b='c'))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{numeric}{Numeric Vectors}{numeric}
\aliasA{as.numeric}{numeric}{as.numeric}
\aliasA{is.numeric}{numeric}{is.numeric}
\methaliasA{is.numeric.Date}{numeric}{is.numeric.Date}
\methaliasA{is.numeric.POSIXt}{numeric}{is.numeric.POSIXt}
\keyword{classes}{numeric}
\keyword{attribute}{numeric}
%
\begin{Description}\relax
Creates or coerces objects of type \code{"numeric"}.
\code{is.numeric} is a more general test of an object being
interpretable as numbers.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
numeric(length = 0)
as.numeric(x, ...)
is.numeric(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced or tested.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{numeric} is identical to \code{\LinkA{double}{double}} (and \code{real}).
It creates a double-precision vector of the specified length with each
element equal to \code{0}.

\code{as.numeric} is a generic function, but S3 methods must be
written for \code{\LinkA{as.double}{as.double}}.  It is identical to
\code{as.double} (and \code{as.real}).

\code{is.numeric} is generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods}.  It is
\strong{not} the same as \code{\LinkA{is.double}{is.double}}.  Factors are handled
by the default method, and there are methods for classes
\code{"\LinkA{Date}{Date}"} and \code{"\LinkA{POSIXt}{POSIXt}"} (in all three cases
the result is false).  Methods for \code{is.numeric} should only
return true if the base type of the class is \code{double} or
\code{integer} \emph{and} values can reasonably be regarded as
numeric (e.g. arithmetic on them makes sense).
\end{Details}
%
\begin{Value}
for \code{numeric} and \code{as.numeric} see \code{\LinkA{double}{double}}.

The default method for \code{is.numeric} returns \code{TRUE}
if its argument is of \LinkA{mode}{mode} \code{"numeric"}
(\LinkA{type}{type} \code{"double"} or type \code{"integer"}) and not a
factor, and \code{FALSE} otherwise.  That is,
\code{is.integer(x) || is.double(x)}, or
\code{(mode(x) == "numeric") \&\& !is.factor(x)}.
\end{Value}
%
\begin{Section}{S4 methods}
\code{as.numeric} and \code{is.numeric} are internally S4 generic and
so methods can be set for them \emph{via} \code{setMethod}.

To ensure that \code{as.numeric}, \code{as.double} and \code{as.real}
remain identical, S4 methods can only be set for \code{as.numeric}.
\end{Section}
%
\begin{Section}{Note on names}
It is a historical anomaly that \R{} has three names for its
floating-point vectors, \code{\LinkA{double}{double}}, \code{\LinkA{numeric}{numeric}}
and \code{\LinkA{real}{real}}.

\code{double} is the name of the \LinkA{type}{type}.
\code{numeric} is the name of the \LinkA{mode}{mode} and also of the implicit
\LinkA{class}{class}.  As an S4 formal class, use \code{"numeric"} (there was
a formal class \code{"double"} prior to \R{} 2.7.0).

\code{real} is deprecated and should not be used in new code.

The potential confusion is that \R{} has used \emph{\LinkA{mode}{mode}}
\code{"numeric"} to mean `double or integer', which conflicts
with the S4 usage.  Thus \code{is.numeric} tests the mode, not the
class, but \code{as.numeric} (which is identical to \code{as.double})
coerces to the class.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{double}{double}}, \code{\LinkA{integer}{integer}}, \code{\LinkA{storage.mode}{storage.mode}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
as.numeric(c("-.1"," 2.7 ","B")) # (-0.1, 2.7, NA)  +  warning
as.numeric(factor(5:10))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{NumericConstants}{Numeric Constants}{NumericConstants}
\keyword{documentation}{NumericConstants}
%
\begin{Description}\relax
How \R{} parses numeric constants.
\end{Description}
%
\begin{Details}\relax
\R{} parses numeric constants in its input in a very similar way to C99
floating-point constants.

\code{\LinkA{Inf}{Inf}} and \code{\LinkA{NaN}{NaN}} are numeric constants (with
\code{\LinkA{typeof}{typeof}(.) "double"}).  These are recognized ignoring case,
as is \code{infinity} as an alternative to \code{Inf}.
\code{\LinkA{NA\_real\_}{NA.Rul.real.Rul.}} and \code{\LinkA{NA\_integer\_}{NA.Rul.integer.Rul.}} are constants of
types \code{"double"} and \code{"integer"} representing missing
values.  All other numeric constants start with a digit or period and
are either a decimal or hexadecimal constant optionally followed by
\code{L}.

Hexadecimal constants start with \code{0x} or \code{0X} followed by
a nonempty sequence from \code{0-9 a-f A-F .} which is interpreted as a
hexadecimal number, optionally followed by a binary exponent.  A binary
exponent consists of an \code{P} or \code{p} followed by an optional
plus or minus sign followed by a non-empty sequence of (decimal)
digits, and indicates multiplication by a power of two.  Thus
\code{0x123p456} is \eqn{291 \times 2^{456}}{}.

Decimal constants consist of a nonempty sequence of digits possibly
containing a period (the decimal point), optionally followed by a
decimal exponent.  A decimal exponent consists of an \code{E} or
\code{e} followed by an optional plus or minus sign followed by a
non-empty sequence of digits, and indicates multiplication by a power
of ten.

Values which are too large or too small to be representable will
overflow to \code{Inf} or underflow to \code{0.0}.

A numeric constant immediately followed by \code{i} is regarded as an
imaginary \LinkA{complex}{complex} number.

An numeric constant immediately followed by \code{L} is regarded as an
\code{\LinkA{integer}{integer}} number when possible (and with a warning if it
contains a \code{"."}).

Only the ASCII digits 0--9 are recognized as digits, even in languages
which have other representations of digits.  The `decimal
separator' is always a period and never a comma.

Note that a leading plus or minus is not regarded by the parser as
part of a numeric constant but as a unary operator applied to the constant.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{Syntax}{Syntax}}.

\code{\LinkA{Quotes}{Quotes}} for the parsing of character constants,
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
2.1
typeof(2)
sqrt(1i) # remember elementary math?
utils::str(0xA0)
identical(1L, as.integer(1))

## You can combine the "0x" prefix with the "L" suffix :
identical(0xFL, as.integer(15)) # (with a regard to Fritz :-)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{numeric\_version}{Numeric Versions}{numeric.Rul.version}
\aliasA{\$.package\_version}{numeric\_version}{.Rdol..package.Rul.version}
\aliasA{.decode\_numeric\_version}{numeric\_version}{.decode.Rul.numeric.Rul.version}
\aliasA{.encode\_numeric\_version}{numeric\_version}{.encode.Rul.numeric.Rul.version}
\aliasA{.make\_numeric\_version}{numeric\_version}{.make.Rul.numeric.Rul.version}
\aliasA{as.character.numeric\_version}{numeric\_version}{as.character.numeric.Rul.version}
\aliasA{as.data.frame.numeric\_version}{numeric\_version}{as.data.frame.numeric.Rul.version}
\aliasA{as.list.numeric\_version}{numeric\_version}{as.list.numeric.Rul.version}
\aliasA{as.numeric\_version}{numeric\_version}{as.numeric.Rul.version}
\aliasA{as.package\_version}{numeric\_version}{as.package.Rul.version}
\aliasA{c.numeric\_version}{numeric\_version}{c.numeric.Rul.version}
\aliasA{duplicated.numeric\_version}{numeric\_version}{duplicated.numeric.Rul.version}
\aliasA{getRversion}{numeric\_version}{getRversion}
\aliasA{is.na.numeric\_version}{numeric\_version}{is.na.numeric.Rul.version}
\aliasA{is.numeric\_version}{numeric\_version}{is.numeric.Rul.version}
\aliasA{is.package\_version}{numeric\_version}{is.package.Rul.version}
\aliasA{Ops.numeric\_version}{numeric\_version}{Ops.numeric.Rul.version}
\aliasA{package\_version}{numeric\_version}{package.Rul.version}
\aliasA{print.numeric\_version}{numeric\_version}{print.numeric.Rul.version}
\aliasA{rep.numeric\_version}{numeric\_version}{rep.numeric.Rul.version}
\aliasA{R\_system\_version}{numeric\_version}{R.Rul.system.Rul.version}
\aliasA{Summary.numeric\_version}{numeric\_version}{Summary.numeric.Rul.version}
\aliasA{unique.numeric\_version}{numeric\_version}{unique.numeric.Rul.version}
\aliasA{xtfrm.numeric\_version}{numeric\_version}{xtfrm.numeric.Rul.version}
\aliasA{[.numeric\_version}{numeric\_version}{[.numeric.Rul.version}
\aliasA{[[.numeric\_version}{numeric\_version}{[[.numeric.Rul.version}
\aliasA{[[<\Rdash.numeric\_version}{numeric\_version}{[[<.Rdash..numeric.Rul.version}
\keyword{utilities}{numeric\_version}
%
\begin{Description}\relax
A simple S3 class for representing numeric versions
including package versions, and associated methods.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
numeric_version(x, strict = TRUE)
package_version(x, strict = TRUE)
R_system_version(x, strict = TRUE)
getRversion()
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character vector with suitable numeric version strings (see
`Details'); for \code{package\_version}, alternatively an R
version object as obtained by \code{\LinkA{R.version}{R.version}}.
\item[\code{strict}] a logical indicating whether invalid numeric versions
should results in an error (default) or not.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Numeric versions are sequences of one or more non-negative integers,
usually (e.g., in package \file{DESCRIPTION} files) represented as
character strings with the elements of the sequence concatenated and
separated by single \samp{.} or \samp{-} characters.  \R{} package
versions consist of at least two such integers, an \R{} system version
of exactly three (major, minor and patchlevel).

Functions \code{numeric\_version}, \code{package\_version} and
\code{R\_system\_version} create a representation from such strings (if
suitable) which allows for coercion and testing, combination,
comparison, summaries (min/max), inclusion in data frames,
subscripting, and printing.  The classes can hold a vector of such
representations.

\code{getRversion} returns the version of the running \R{} as an R
system version object.

The \code{[[} operator extracts or replaces a single version.  To
access the integers of a version use two indices: see the examples.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{compareVersion}{compareVersion}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- package_version(c("1.2-4", "1.2-3", "2.1"))
x < "1.4-2.3"
c(min(x), max(x))
x[2, 2]
x$major
x$minor

if(getRversion() <= "2.5.0") { ## work around missing feature
  cat("Your version of R, ", as.character(getRversion()),
      ", is outdated.\n",
      "Now trying to work around that ...\n", sep = "")
}

x[[c(1,3)]]  # '4' as a numeric vector, same as x[1, 3]
x[1, 3]      # 4 as an integer
x[[2, 3]] <- 0   # zero the patchlevel
x[[c(2,3)]] <- 0 # same
x
x[[3]] <- "2.2.3"; x
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{octmode}{Display Numbers in Octal}{octmode}
\aliasA{as.character.octmode}{octmode}{as.character.octmode}
\aliasA{as.octmode}{octmode}{as.octmode}
\aliasA{format.octmode}{octmode}{format.octmode}
\aliasA{print.octmode}{octmode}{print.octmode}
\aliasA{[.octmode}{octmode}{[.octmode}
\keyword{print}{octmode}
%
\begin{Description}\relax
Convert or print integers in octal format, with as many digits as are
needed to display the largest, using leading zeroes as necessary.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
as.octmode(x)

## S3 method for class 'octmode':
as.character(x, ...)

## S3 method for class 'octmode':
format(x, ...)

## S3 method for class 'octmode':
print(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An object, for the methods inheriting from class \code{"octmode"}.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Class \code{"octmode"} consists of integer vectors with that class
attribute, used merely to ensure that they are printed in octal
notation, specifically for Unix-like file permissions such as
\code{755}.  Subsetting (\code{\LinkA{[}{[}}) works too.

\code{as.octmode} can convert integers (of \LinkA{type}{type} \code{"integer"} or
\code{"double"}) and character strings to class \code{"octmode"}
\end{Details}
%
\begin{SeeAlso}\relax
These are auxiliary functions for \code{\LinkA{file.info}{file.info}}.

\code{\LinkA{hexmode}{hexmode}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(on <- structure(c(16,32, 127:129),  class = "octmode")) #-> print.*()
##-> "020" "040" "177" "200" "201"
unclass(on[3:4]) # subsetting
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{on.exit}{Function Exit Code}{on.exit}
\keyword{programming}{on.exit}
%
\begin{Description}\relax
\code{on.exit} records the expression given as its argument as needing
to be executed when the current function exits (either naturally or as
the result of an error).  This is useful for resetting graphical
parameters or performing other cleanup actions.

If no expression is provided, i.e., the call is \code{on.exit()}, then
the current \code{on.exit} code is removed.

\code{on.exit} is a primitive function so positional matching is
used and names of supplied arguments are ignored.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
on.exit(expr, add = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] an expression to be executed.
\item[\code{add}] if TRUE, add \code{expr} to be executed after any previously
set expressions; otherwise (the default) \code{expr} will overwrite
any previously set expressions.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Where \code{expr} was evaluated changed in \R{} 2.8.0, and the following
applies only to that and later versions.

The \code{expr} argument passed to \code{on.exit} is recorded without
evaluation.  If it is not subsequently removed/replaced by another
\code{on.exit} call in the same function, it is evaluated in the
evaluation frame of the function when it exits (including during
standard error handling).  Thus any functions or variables in the
expression will be looked for in the function and its environment at
the time of exit: to capture the current value in \code{expr} use
\code{\LinkA{substitute}{substitute}} or similar.

This is a \LinkA{primitive}{primitive} function and uses positional matching.
\end{Details}
%
\begin{Value}
Invisible \code{NULL}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{sys.on.exit}{sys.on.exit}} which returns the expression stored for use
by \code{on.exit()} in the function in which \code{sys.on.exit()} is
evaluated.  
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

opar <- par(mai = c(1,1,1,1))
on.exit(par(opar))

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Ops.Date}{Operators on the Date Class}{Ops.Date}
\aliasA{+.Date}{Ops.Date}{+.Date}
\aliasA{-.Date}{Ops.Date}{.Rdash..Date}
\keyword{utilities}{Ops.Date}
\keyword{chron}{Ops.Date}
%
\begin{Description}\relax
Operators for the \code{"\LinkA{Date}{Date}"} class.

There is a method for the \code{\LinkA{Ops}{S3groupGeneric}} group
generic handing the comparison operators and specific methods for
\code{+} and \code{-}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
date + x
x + date
date - x
date1 lop date2
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{date}] date objects
\item[\code{date1, date2}] date objects.  One can be a character
vector which will be converted by \code{\LinkA{as.Date}{as.Date}}.
\item[\code{x}] a numeric vector (in days) \emph{or} an object of class
\code{"\LinkA{difftime}{difftime}"}, rounded to the nearest whole day.
\item[\code{lop}] One of \code{==}, \code{!=}, \code{<}, \code{<=}, \code{>}
or \code{>=}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{x} does not need to be integer if specified as a numeric vector,
but see the comments about fractional days in the help for
\code{\LinkA{Dates}{Dates}}.
\end{Details}
%
\begin{Examples}
\begin{ExampleCode}
(z <- Sys.Date())
z + 10
z < c("2009-06-01", "2010-01-01", "2015-01-01")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{options}{Options Settings}{options}
\aliasA{.Options}{options}{.Options}
\aliasA{getOption}{options}{getOption}
\keyword{environment}{options}
\keyword{error}{options}
\keyword{print}{options}
%
\begin{Description}\relax
Allow the user to set and examine a variety of global \emph{options}
which affect the way in which \R{} computes and displays its results.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
options(...)

getOption(x, default = NULL)

.Options
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] any options can be defined, using \code{name = value} or
by passing a list of such tagged values.  However, only the ones
below are used in base \R{}.
Further, \code{options('name') == options()['name']}, see the example.

\item[\code{x}] a character string holding an option name.

\item[\code{default}] if the specified option is not set in the options list,
this value is returned.  This facilitates retrieving an option and
checking whether it is set and setting it separately if not.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Invoking \code{options()} with no arguments returns a list with the
current values of the options.  Note that not all options listed below
are set initially.  To access the value of a single option, one should
use \code{getOption("width")}, e.g., rather than
\code{options("width")} which is a \emph{list} of length one.

\code{.Options} also always contains the \code{options()} list (as a
pairlist, unsorted), for S compatibility.  Assigning to it will make a
local copy and not change the original.
\end{Details}
%
\begin{Value}
For \code{getOption}, the current value set for option \code{x}, or
\code{NULL} if the option is unset.

For \code{options()}, a list of all set options sorted by name.  For
\code{options(name)}, a list of length one containing the set value,
or \code{NULL} if it is unset.  For uses setting one or more options,
a list with the previous values of the options changed (returned
invisibly).
\end{Value}
%
\begin{Section}{Options used in base \R{}}
\begin{description}

\item[\code{add.smooth}:] typically logical, defaulting to
\code{TRUE}.  Could also be set to an integer for specifying how
many (simulated) smooths should be added.  This is currently only
used by \code{\LinkA{plot.lm}{plot.lm}}.

\item[\code{check.bounds}:] logical, defaulting to \code{FALSE}.  If
true, a \LinkA{warning}{warning} is produced whenever a
vector (atomic or \code{\LinkA{list}{list}}) is extended, by something
like \code{x <- 1:3; x[5] <- 6}.

\item[\code{continue}:] a non-empty string setting the prompt used
for lines which continue over one line.


\item[\code{defaultPackages}:] the packages that are attached by
default when \R{} starts up.  Initially set from value of the
environment variable \env{R\_DEFAULT\_PACKAGES}, or if that is unset
to \code{c("datasets", "utils", "grDevices", "graphics", "stats",
        "methods")}.  (Set \env{R\_DEFAULT\_PACKAGES} to \code{NULL} or
a comma-separated list of package names.)   A call to
\code{options} should be in your \file{.Rprofile} file to ensure
that the change takes effect before the base package is
initialized (see \code{\LinkA{Startup}{Startup}}).

\item[\code{deparse.max.lines}:] controls the number of lines used
when deparsing in \code{\LinkA{traceback}{traceback}}, \code{\LinkA{browser}{browser}},
and upon entry to a function whose debugging flag is set.
Initially unset, and only used if set to a positive integer.

\item[\code{digits}:] controls the number of digits to print when
printing numeric values.  It is a suggestion only.  Valid values
are 1\dots22 with default 7.  See the warning in
\code{\LinkA{print.default}{print.default}} about values greater than 15.

\item[\code{digits.secs}:] controls the maximum number of digits to
print when formatting time values in seconds.  Valid values
are 0\dots6 with default 0.  See \code{\LinkA{strftime}{strftime}}.

\item[\code{download.file.method}:] Method to be used for
\code{download.file}.  Currently download methods
\code{"internal"}, \code{"wget"} and \code{"lynx"} are available.
There is no default for this option, when \code{method = "auto"}
is chosen: see \code{\LinkA{download.file}{download.file}}.

\item[\code{echo}:] logical.  Only used in non-interactive mode,
when it controls whether input is echoed.  Command-line option
\option{--slave} sets this to \code{FALSE}, but otherwise
it starts the session as \code{TRUE}.

\item[\code{encoding}:] The name of an encoding, default
\code{"native.enc"}).  See \code{\LinkA{connections}{connections}}.

\item[\code{error}:] either a function or an expression governing
the handling of non-catastrophic errors such as those generated by
\code{\LinkA{stop}{stop}} as well as by signals and internally detected
errors.  If the option is a function, a call to that function,
with no arguments, is generated as the expression.  The default
value is \code{NULL}: see \code{\LinkA{stop}{stop}} for the behaviour in
that case.  The functions \code{\LinkA{dump.frames}{dump.frames}} and
\code{\LinkA{recover}{recover}} provide alternatives that allow post-mortem
debugging.  Note that these need to specified as e.g.
\code{options(error=utils::recover)} in startup files such as
\file{\LinkA{.Rprofile}{.Rprofile}}.

\item[\code{expressions}:] sets a limit on the number of nested
expressions that will be evaluated.  Valid values are
25\dots500000 with default 5000.  If you increase it, you may
also want to start \R{} with a larger protection stack;
see \option{--max-ppsize} in \code{\LinkA{Memory}{Memory}}.  Note too that
you may cause a segfault from overflow of the C stack, and on OSes
where it is possible you may want to increase that.

\item[\code{keep.source}:] When \code{TRUE}, the source code for
functions (newly defined or loaded) is stored in their
\code{"source"} attribute (see \code{\LinkA{attr}{attr}}) allowing
comments to be kept in the right places.

The default is \code{\LinkA{interactive}{interactive}()}, i.e., \code{TRUE} for
interactive use.

\item[\code{keep.source.pkgs}:] As for \code{keep.source}, for
functions in packages loaded by \code{\LinkA{library}{library}} or
\code{\LinkA{require}{require}}.  Defaults to \code{FALSE} unless the
environment variable \env{R\_KEEP\_PKG\_SOURCE} is set to
\code{yes}.

Note this does not apply to packages using lazy-loading or saved
images.  Whether they have kept source is determined when they are
installed (and is almost certainly false).

\item[\code{mailer}:] default mailer used by
\code{\LinkA{bug.report}{bug.report}()}.  Can be \code{"none"}.

\item[\code{max.contour.segments}:] positive integer, defaulting to
\code{250000} and usually not set.  A limit on the number of
segments in a single contour line in \code{\LinkA{contour}{contour}} or
\code{\LinkA{contourLines}{contourLines}}.

\item[\code{max.print}:] integer, defaulting to \code{99999}.
\code{\LinkA{print}{print}} or \code{\LinkA{show}{show}} methods can make use of
this option, to limit the amount of information that is printed,
to something in the order of (and typically slightly less than)
\code{max.print} \emph{entries}.

\item[\code{OutDec}:] character string containing a single-byte
character.  The character to be used as the decimal point in output
conversions, that is in printing, plotting and \code{as.character}
but not deparsing.

\item[\code{pager}:] the command used for displaying text files by
\code{\LinkA{file.show}{file.show}}.
Defaults to \file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/bin/pager},
which selects a pager via the \env{\bsl{}link\{PAGER\}} environment variable
(and that usually defaults to \code{less}).
Can be a character string or an \R{} function, in which case it
needs to accept the same first four arguments as
\code{\LinkA{file.show}{file.show}}.

\item[\code{papersize}:] the default paper format used by
\code{\LinkA{postscript}{postscript}};  set by environment variable
\env{R\_PAPERSIZE} when \R{} is started: if that is unset or invalid
it defaults to
a value derived from the locale category \code{LC\_PAPER}, or
if that is unavailable to a default set when \R{} was built.


\item[\code{pdfviewer}:] default PDF viewer.
The default is set from the environment variable
\env{R\_PDFVIEWER}, the default value of which is set when \R{} is
configured.


\item[\code{printcmd}:] the command used by \code{\LinkA{postscript}{postscript}}
for printing; set by environment variable \env{R\_PRINTCMD} when
\R{} is started.  This should be a command that expects either input
to be piped to \file{stdin} or to be given a single filename
argument.  Usually set to \code{"lpr"} on a Unix-alike.

\item[\code{prompt}:] a non-empty string to be used for \R{}'s prompt;
should usually end in a blank (\code{" "}).


\item[\code{rl\_word\_breaks}:] Used for the readline-based terminal
interface.  Default value \code{" \bsl{}t\bsl{}n\bsl{}"\bsl{}\bsl{}'`><=\%;,|\&\bsl{}\{()\bsl{}\}"}.
This is the set of characters use to break the input line up into
tokens for object- and file-name completion.  Those who do not use
spaces around operators may prefer\\{}
\code{" \bsl{}t\bsl{}n\bsl{}"\bsl{}\bsl{}'`><=+-*\%;,|\&\bsl{}\{()\bsl{}\}"}
which was the default in \R{} 2.5.0.  (The default in pre-2.5.0
versions of \R{} was\\{}
\code{" \bsl{}t\bsl{}n\bsl{}"\bsl{}\bsl{}'`@\$><=;|\&\bsl{}\{("}.)

\item[\code{save.defaults}, \code{save.image.defaults}:] 
see \code{\LinkA{save}{save}}.

\item[\code{scipen}:] integer.  A penalty to be applied
when deciding to print numeric values in fixed or exponential
notation.  Positive values bias towards fixed and negative towards
scientific notation: fixed notation will be preferred unless it is
more than \code{scipen} digits wider.

\item[\code{showWarnCalls}, \code{showErrorCalls}:] a logical.
Should warning and error messages show a summary of the call
stack?  By default error calls are shown in non-interactive
sessions.

\item[\code{showNCalls}:] a integer.  Controls how long the sequence
of calls must be (in bytes) before ellipses are used.  Defaults to
40 and should be at least 30 and no more than 500.

\item[\code{show.error.messages}:] a logical.  Should error messages
be printed?  Intended for use with \code{\LinkA{try}{try}} or a
user-installed error handler.

\item[\code{stringsAsFactors}:] The default setting for arguments of
\code{\LinkA{data.frame}{data.frame}} and \code{\LinkA{read.table}{read.table}}.

\item[\code{texi2dvi}:] used by function
\code{\LinkA{texi2dvi}{texi2dvi}} in package \pkg{tools}.
Set at startup from the environment variable \env{R\_TEXI2DVICMD}.


\item[\code{timeout}:] integer.  The timeout for some Internet
operations, in seconds.  Default 60 seconds.  See
\code{\LinkA{download.file}{download.file}} and \code{\LinkA{connections}{connections}}.

\item[\code{topLevelEnvironment}:] see \code{\LinkA{topenv}{topenv}} and
\code{\LinkA{sys.source}{sys.source}}.

\item[\code{useFancyQuotes}:] logical: controls the use of
directional quotes in \code{\LinkA{sQuote}{sQuote}}, \code{dQuote} and in
rendering text help (see \code{\LinkA{Rd2txt}{Rd2txt}}).

\item[\code{verbose}:] logical.  Should \R{} report extra information
on progress?  Set to \code{TRUE} by the command-line option
\option{--verbose}.

\item[\code{warn}:] sets the handling of warning messages.  If
\code{warn} is negative all warnings are ignored.  If \code{warn}
is zero (the default) warnings are stored until the top--level
function returns.  If fewer than 10 warnings were signalled they
will be printed otherwise a message saying how many (max 50) were
signalled.  An object called \code{last.warning} is
created and can be printed through the function
\code{\LinkA{warnings}{warnings}}.  If \code{warn} is one, warnings are
printed as they occur.  If \code{warn} is two or larger all
warnings are turned into errors.

\item[\code{warnEscapes}:] logical.  If true (the default) the parser
warns on unrecognized (backslash) escape sequences and there is a
truncation warning on any attempt to create a character string
containing an embedded nul.

\item[\code{warnPartialMatchArgs}:] logical.  If true, warns if
partial matching is used in argument matching.

\item[\code{warnPartialMatchAttr}:] logical.  If true, warns if
partial matching is used in extracting attributes via
\code{\LinkA{attr}{attr}}.

\item[\code{warnPartialMatchDollar}:] logical.  If true, warns if
partial matching is used for extraction by \code{\$}.

\item[\code{warning.expression}:] an \R{} code expression to be called
if a warning is generated, replacing the standard message.  If
non-null it is called irrespective of the value of option
\code{warn}.

\item[\code{warning.length}:] sets the truncation limit for error
and warning messages.  A non-negative integer, with allowed values
100\dots8170, default 1000.

\item[\code{width}:] controls the maximum number of columns on a
line used in printing vectors, matrices and arrays, and when
filling by \code{\LinkA{cat}{cat}}.

Columns are normally the same as characters except in CJK languages.

You may want to change this if you re-size the window that \R{} is
running in.  Valid values are 10\dots10000 with default normally
80.  (The limits on valid values are in file \file{Print.h} and can be
changed by re-compiling \R{}.)  Some \R{} consoles automatically change
the value when they are resized.


\end{description}


The `factory-fresh' default settings of some of these options are

\Tabular{ll}{
\code{add.smooth} & \code{TRUE}\\{}
\code{check.bounds} & \code{FALSE}\\{}
\code{continue} & \code{"+ "}\\{}
\code{digits} & \code{7}\\{}
\code{echo} & \code{TRUE}\\{}
\code{encoding} & \code{"native.enc"}\\{}
\code{error} & \code{NULL}\\{}
\code{expressions} & \code{5000}\\{}
\code{keep.source} & \code{interactive()}\\{}
\code{keep.source.pkgs} & \code{FALSE}\\{}
\code{max.print} & \code{99999}\\{}
\code{OutDec} & \code{"."}\\{}
\code{prompt} & \code{"> "}\\{}
\code{scipen} & \code{0} \\{}
\code{show.error.messages} & \code{TRUE}\\{}
\code{timeout} & \code{60}\\{}
\code{verbose} & \code{FALSE}\\{}
\code{warn} & \code{0}\\{}
\code{warnings.length} & \code{1000}\\{}
\code{width}  & \code{80}\\{}
}
Others are set from environment variables or are platform-dependent.
\end{Section}
%
\begin{Section}{Options set in package grDevices}
These will be set when package \pkg{grDevices} (or its name space)
is loaded if not already set.
\begin{description}

\item[\code{device}:] a character string giving
the name of a function, or the function object itself,
which when called creates a new graphics device of the default
type for that session.  The value of this option defaults to the
normal screen device (e.g., \code{X11}, \code{windows} or
\code{quartz}) for an interactive session, and \code{pdf}
in batch use or if a screen is not available.  If set to the name
of a device, the device is looked for first from the global
environment (that is down the usual search path) and then in the
\pkg{grDevices} namespace.

The default values in interactive and non-interactive sessions are
configurable via environment variables
\env{R\_INTERACTIVE\_DEVICE} and \env{R\_DEFAULT\_DEVICE}
respectively.


\item[\code{locatorBell}:] logical.  Should selection in \code{locator}
and \code{identify} be confirmed by a bell?  Default \code{TRUE}.
Honoured at least on \code{X11} and \code{windows} devices.

\item[\code{device.ask.default}:] logical.  The default for
\code{\LinkA{devAskNewPage}{devAskNewPage}("ask")} when a device is opened.

\item[\code{bitmapType}:] character.  The default type for the
bitmap devices such as \code{\LinkA{png}{png}}.  Defaults to
\code{"cairo"} on systems where that is available, or to
\code{"quartz"} on Mac OS X where that is available.

\end{description}

\end{Section}
%
\begin{Section}{Options set in package stats}
These will be set when package \pkg{stats} (or its name space)
is loaded if not already set.
\begin{description}

\item[\code{contrasts}:] the default \code{\LinkA{contrasts}{contrasts}} used in
model fitting such as with \code{\LinkA{aov}{aov}} or \code{\LinkA{lm}{lm}}.
A character vector of length two, the first giving the function to
be used with unordered factors and the second the function to be
used with ordered factors.  By default the elements are named
\code{c("unordered", "ordered")}, but the names are unused.

\item[\code{na.action}:] the name of a function for treating missing
values (\code{\LinkA{NA}{NA}}'s) for certain situations.

\item[\code{show.coef.Pvalues}:] logical, affecting whether P
values are printed in summary tables of coefficients.  See
\code{\LinkA{printCoefmat}{printCoefmat}}.

\item[\code{show.signif.stars}:] logical, should stars be printed on
summary tables of coefficients?  See \code{\LinkA{printCoefmat}{printCoefmat}}.

\item[\code{ts.eps}:] the relative tolerance for certain time series
(\code{\LinkA{ts}{ts}}) computations.  Default \code{1e-05}.

\item[\code{ts.S.compat}:] logical.  Used to select S compatibility
for plotting time-series spectra.  See the description of argument
\code{log} in \code{\LinkA{plot.spec}{plot.spec}}.

\end{description}

\end{Section}
%
\begin{Section}{Options set in package utils}
These will be set when package \pkg{utils} (or its name space)
is loaded if not already set.
\begin{description}

\item[\code{browser}:] default HTML browser used by
\code{\LinkA{help.start}{help.start}()} and \code{\LinkA{browseURL}{browseURL}} on UNIX, or
a non-default browser on Windows.  Alternatively, an \R{} function that
is called with a URL as its argument.

\item[\code{de.cellwidth}:] integer: the cell widths (number of
characters) to be used in the data editor \code{\LinkA{dataentry}{dataentry}}.
If this is unset (the default), 0, negative or \code{NA}, variable
cell widths are used.

\item[\code{demo.ask}:] default for the \code{ask} argument of
\code{\LinkA{demo}{demo}}.

\item[\code{editor}:] a non-empty string, or a function that is
called with a file path as argument.  Sets the default text
editor, e.g., for \code{\LinkA{edit}{edit}}.  Set from the environment
variable \env{EDITOR} on UNIX, or if unset \env{VISUAL} or
\command{vi}.

\item[\code{example.ask}:] default for the \code{ask} argument of
\code{\LinkA{example}{example}}.

\item[\code{help\_text\_width}:] The target pager width when
formatting text help.  Usually unset, when the default is 80
columns.

\item[\code{help.try.all.packages}:] default for an argument of
\code{\LinkA{help}{help}}.

\item[\code{help\_type}:] default for an argument of \code{\LinkA{help}{help}}.

\item[\code{HTTPUserAgent}:] string used as the user agent in HTTP
requests.  If \code{NULL}, HTTP requests will be made without a
user agent header.  The default is \code{R (<version> <platform>
      <arch> <os>)}

\item[\code{internet.info}:] The minimum level of information to be
printed on URL downloads etc.  Default is 2, for failure causes.
Set to 1 or 0 to get more information.

\item[\code{menu.graphics}:] Logical: should graphical menus be
used if available?.  Defaults to \code{TRUE}.  Currently applies
to \code{\LinkA{chooseCRANmirror}{chooseCRANmirror}}, \code{\LinkA{setRepositories}{setRepositories}}
and to select from multiple help files in \code{\LinkA{help}{help}}.

\item[\code{pkgType}:] The default type of packages to be downloaded
and installed -- see \code{\LinkA{install.packages}{install.packages}}.
Possible values are \code{"source"} (the default except under the
CRAN Mac OS X build) and \code{"mac.binary"}. The latter can
have a suffix if supported by a special build, such as
\code{"mac.binary.leopard"} to access the \code{"leopard"} tree
of repositories instead of the default \code{"universal"}.


\item[\code{repos}:] URLs of the repositories for use by
\code{\LinkA{update.packages}{update.packages}}.  Defaults to
\code{c(CRAN="@CRAN@")}, a value that causes some utilities to
prompt for a CRAN mirror.  To avoid this do set the CRAN mirror,
by something like
\code{local(\{r <- getOption("repos"); r["CRAN"] <- "http://my.local.cran";
                   options(repos=r)\})}.

Note that you can add more repositories (Bioconductor and
Omegahat, notably) using \code{\LinkA{setRepositories}{setRepositories}()}.

\item[\code{SweaveHooks}, \code{SweaveSyntax}:] see \code{\LinkA{Sweave}{Sweave}}.

\item[\code{unzip}:] a character string, the path of the command
used for unzipping help files, or \code{"internal"}.
Defaults to the value of \env{R\_UNZIPCMD}, which is set in
\file{etc/Renviron} if an \code{unzip} command was found during
configuration.


\end{description}

\end{Section}
%
\begin{Section}{Options used on Unix only}
These will be \code{""} if no suitable path is known.
\begin{description}

\item[\code{latexcmd}, \code{dvipscmd}:] character strings giving
commands to be used in off-line printing of help pages.

\end{description}

\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
op <- options(); utils::str(op) # op() may contain functions.

getOption("width") == options()$width # the latter needs more memory
options(digits = 15)
pi

# set the editor, and save previous value
old.o <- options(editor = "nedit")
old.o

options(check.bounds = TRUE, warn = 1)
x <- NULL; x[4] <- "yes" # gives a warning

options(digits=5)
print(1e5)
options(scipen=3); print(1e5)

options(op)     # reset (all) initial options
options("digits")

## Not run: ## set contrast handling to be like S
options(contrasts = c("contr.helmert", "contr.poly"))

## End(Not run)

## Not run: ## on error, terminate the R session with error status 66
options(error = quote(q("no", status=66, runLast=FALSE)))
stop("test it")

## End(Not run)

## Not run: ## Set error actions for debugging:
## enter browser on error, see ?recover:
options(error = recover)
## allows to call debugger() afterwards, see ?debugger:
options(error = dump.frames)
## A possible setting for non-interactive sessions
options(error = quote({dump.frames(to.file=TRUE); q()}))

## End(Not run)

  # Compare the two ways to get an option and use it
  # acconting for the possibility it might not be set.
if(as.logical(getOption("performCleanp", TRUE)))
   cat("do cleanup\n")

## Not run: 
  # a clumsier way of expressing the above w/o the default.
tmp <- getOption("performCleanup")
if(is.null(tmp))
  tmp <- TRUE
if(tmp)
   cat("do cleanup\n")

## End(Not run)

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{order}{Ordering Permutation}{order}
\aliasA{sort.list}{order}{sort.list}
\keyword{univar}{order}
\keyword{manip}{order}
%
\begin{Description}\relax
\code{order} returns a permutation which rearranges its first
argument into ascending or descending order, breaking ties by further
arguments. \code{sort.list} is the same, using only one argument.\\{}
See the examples for how to use these functions to sort data frames,
etc.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
order(..., na.last = TRUE, decreasing = FALSE)

sort.list(x, partial = NULL, na.last = TRUE, decreasing = FALSE,
          method = c("shell", "quick", "radix"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] a sequence of numeric, complex, character or logical
vectors, all of the same length, or a classed \R{} object.
\item[\code{x}] a vector.
\item[\code{partial}] vector of indices for partial sorting.
(Non-\code{NULL} values are not implemented.)
\item[\code{decreasing}] logical. Should the sort order be increasing or
decreasing?
\item[\code{na.last}] for controlling the treatment of \code{NA}s.
If \code{TRUE}, missing values in the data are put last; if
\code{FALSE}, they are put first; if \code{NA}, they are removed.

\item[\code{method}] the method to be used: partial matches are allowed.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
In the case of ties in the first vector, values in the second are used
to break the ties.  If the values are still tied, values in the later
arguments are used to break the tie (see the first example).
The sort used is \emph{stable} (except for \code{method = "quick"}),
so any unresolved ties will be left in their original ordering.

Complex values are sorted first by the real part, then the imaginary
part.

The sort order for character vectors will depend on the collating
sequence of the locale in use: see \code{\LinkA{Comparison}{Comparison}}.

The default method for \code{sort.list} is a good compromise.
Method \code{"quick"} is only supported for numeric \code{x} with
\code{na.last=NA}, and is not stable, but will be faster for long vectors.
Method \code{"radix"} is only implemented for integer \code{x} with
a range of less than 100,000.  For such \code{x} it is very
fast (and stable), and hence is ideal for sorting factors.

\code{partial} is supplied for compatibility with other
implementations of S, but no other values are accepted and ordering is
always complete.

For a classed \R{} object, the sort order is taken from
\code{\LinkA{xtfrm}{xtfrm}}: as its help page notes, this can be slow unless a
suitable method has been defined.  For factors, this sorts on the
internal codes and not on the printed representation.
\end{Details}
%
\begin{Note}\relax
\code{sort.list} can get called by mistake as a method for
\code{\LinkA{sort}{sort}} with a list argument, and gives a suitable error
message for list \code{x}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{sort}{sort}}, \code{\LinkA{rank}{rank}}, \code{\LinkA{xtfrm}{xtfrm}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

(ii <- order(x <- c(1,1,3:1,1:4,3), y <- c(9,9:1), z <-c(2,1:9)))
## 6  5  2  1  7  4 10  8  3  9
rbind(x,y,z)[,ii] # shows the reordering (ties via 2nd & 3rd arg)

## Suppose we wanted descending order on y.
## A simple solution for numeric 'y' is
rbind(x,y,z)[, order(x, -y, z)]
## More generally we can make use of xtfrm
cy <- as.character(y)
rbind(x,y,z)[, order(x, -xtfrm(cy), z)]

## Sorting data frames:
dd <- transform(data.frame(x,y,z),
                z = factor(z, labels=LETTERS[9:1]))
## Either as above {for factor 'z' : using internal coding}:
dd[ order(x, -y, z) ,]
## or along 1st column, ties along 2nd, ... *arbitrary* no.{columns}:
dd[ do.call(order, dd) ,]

set.seed(1)# reproducible example:
d4 <- data.frame(x = round(   rnorm(100)), y = round(10*runif(100)),
                 z = round( 8*rnorm(100)), u = round(50*runif(100)))
(d4s <- d4[ do.call(order, d4) ,])
(i <- which(diff(d4s[,3]) == 0))
#   in 2 places, needed 3 cols to break ties:
d4s[ rbind(i,i+1), ]

## rearrange matched vectors so that the first is in ascending order
x <- c(5:1, 6:8, 12:9)
y <- (x - 5)^2
o <- order(x)
rbind(x[o], y[o])

## tests of na.last
a <- c(4, 3, 2, NA, 1)
b <- c(4, NA, 2, 7, 1)
z <- cbind(a, b)
(o <- order(a, b)); z[o, ]
(o <- order(a, b, na.last = FALSE)); z[o, ]
(o <- order(a, b, na.last = NA)); z[o, ]

## Not run: 
##  speed examples for long vectors:
x <- factor(sample(letters, 1e6, replace=TRUE))
system.time(o <- sort.list(x)) ## 1.2 secs
stopifnot(!is.unsorted(x[o]))
system.time(o <- sort.list(x, method="quick", na.last=NA)) # 0.15 sec
stopifnot(!is.unsorted(x[o]))
system.time(o <- sort.list(x, method="radix")) # 0.02 sec
stopifnot(!is.unsorted(x[o]))
xx <- sample(1:26, 1e7, replace=TRUE)
system.time(o <- sort.list(xx, method="radix")) # 0.2 sec
xx <- sample(1:100000, 1e7, replace=TRUE)
system.time(o <- sort.list(xx, method="radix")) # 0.8 sec
system.time(o <- sort.list(xx, method="quick", na.last=NA)) # 1.4 sec

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{outer}{Outer Product of Arrays}{outer}
\aliasA{\%o\%}{outer}{.Rpcent.o.Rpcent.}
\keyword{array}{outer}
%
\begin{Description}\relax
The outer product of the arrays \code{X} and \code{Y} is the array
\code{A} with dimension \code{c(dim(X), dim(Y))} where element
\code{A[c(arrayindex.x, arrayindex.y)]
    = FUN(X[arrayindex.x], Y[arrayindex.y], ...)}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
outer(X, Y, FUN="*", ...)
X %o% Y
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{X, Y}] First and second arguments for function \code{FUN}.
Typically a vector or array.
\item[\code{FUN}] a function to use on the outer products, found \emph{via}
\code{\LinkA{match.fun}{match.fun}} (except for the special case \code{"*"}).
\item[\code{...}] optional arguments to be passed to \code{FUN}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{X} and \code{Y} must be suitable arguments for \code{FUN}.  Each
will be extended by \code{\LinkA{rep}{rep}} to length the products of the
lengths of \code{X} and \code{Y} before \code{FUN} is called.

\code{FUN} is called with these two extended vectors as
arguments. Therefore, it must be a vectorized function (or the
name of one), expecting at
least two arguments.

Where they exist, the [dim]names of \code{X} and \code{Y} will be
copied to the answer, and a dimension assigned which is the
concatenation of the dimensions of \code{X} and \code{Y} (or lengths
if dimensions do not exist).

\code{FUN = "*"} is handled internally as a special case, \emph{via}
\code{as.vector(X) \%*\% t(as.vector(Y))}, and is intended only for
numeric vectors and arrays.

\code{\%o\%} is binary operator providing a wrapper for
\code{outer(x, y, "*")}.
\end{Details}
%
\begin{Author}\relax
Jonathan Rougier
\end{Author}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{\Rpercent{}*\Rpercent{}}{.Rpcent.*.Rpcent.}} for usual (\emph{inner}) matrix vector
multiplication;
\code{\LinkA{kronecker}{kronecker}} which is based on \code{outer};
\code{\LinkA{Vectorize}{Vectorize}} for vectorizing a non-vectorized function.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1:9; names(x) <- x
# Multiplication & Power Tables
x %o% x
y <- 2:8; names(y) <- paste(y,":",sep="")
outer(y, x, "^")

outer(month.abb, 1999:2003, FUN = "paste")

## three way multiplication table:
x %o% x %o% y[1:3]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Paren}{Parentheses and Braces}{Paren}
\aliasA{(}{Paren}{(}
\aliasA{\{}{Paren}{.Rlbrace.}
\keyword{programming}{Paren}
%
\begin{Description}\relax
Open parenthesis, \code{(}, and open brace, \code{\{}, are
\code{\LinkA{.Primitive}{.Primitive}} functions in \R{}.

Effectively, \code{(} is semantically equivalent to the identity
\code{function(x) x}, whereas \code{\{} is slightly more interesting,
see examples.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
( ... )

{ ... }
\end{verbatim}
\end{Usage}
%
\begin{Value}
For \code{(}, the result of evaluating the argument.  This has
visibility set, so will auto-print if used at top-level.

For \code{\{}, the result of the last expression evaluated. This has
the visibility of the last evaluation.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{if}{if}}, \code{\LinkA{return}{return}}, etc for other objects used in
the \R{} language itself.

\code{\LinkA{Syntax}{Syntax}} for operator precedence.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
f <- get("(")
e <- expression(3 + 2 * 4)
identical(f(e), e)

do <- get("{")
do(x <- 3, y <- 2*x-3, 6-x-y); x; y

## note the differences
(2+3)
{2+3; 4+5}
(invisible(2+3))
{invisible(2+3)}
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{parse}{Parse Expressions}{parse}
\keyword{file}{parse}
\keyword{programming}{parse}
\keyword{connection}{parse}
%
\begin{Description}\relax
\code{parse} returns the parsed but unevaluated expressions in a
list.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
parse(file = "", n = NULL, text = NULL, prompt = "?", srcfile,
      encoding = "unknown")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] a connection, or a character string giving the name of a
file or a URL to read the expressions from.
If \code{file} is \code{""} and \code{text} is missing or \code{NULL}
then input is taken from the console.
\item[\code{n}] integer (or coerced to integer).  The maximum number of
expressions to parse.  If \code{n} is \code{NULL} or negative or
\code{NA} the input is parsed in its entirety.
\item[\code{text}] character vector.  The text to parse.  Elements are treated
as if they were lines of a file.  Other \R{} objects will be coerced
to character (without method dispatch) if possible.
\item[\code{prompt}] the prompt to print when parsing from the keyboard.
\code{NULL} means to use \R{}'s prompt, \code{getOption("prompt")}.
\item[\code{srcfile}] \code{NULL}, or a \code{\LinkA{srcfile}{srcfile}} object.  See
the `Details' section.
\item[\code{encoding}] encoding to be assumed for input strings.  If the
value is \code{"latin1"} or \code{"UTF-8"} it is used to mark
character strings as known to be in Latin-1 or UTF-8: it is not used
to re-encode the input.  To do the latter, specify the encoding as
part of the connection \code{con} or \emph{via}
\code{\LinkA{options}{options}(encoding=)}: see the example under
\code{\LinkA{file}{file}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{text} has length greater than zero (after coercion) it is used in
preference to \code{file}.

All versions of \R{} accept input from a connection with end of line
marked by LF (as used on Unix), CRLF (as used on DOS/Windows)
or CR (as used on classic Mac OS).  The final line can be incomplete,
that is missing the final EOL marker.

See \code{\LinkA{source}{source}} for the limits on the size of functions
that can be parsed (by default).

When input is taken from the console, \code{n = NULL} is equivalent to
\code{n = 1}, and \code{n < 0} will read until an EOF character is
read.  (The EOF character is Ctrl-Z for the Windows front-ends.)  The
line-length limit is 4095 bytes when reading from the console (which
may impose a lower limit: see `An Introduction to R').

The default for \code{srcfile} is set as follows.  If
\code{options("keep.source")} is \code{FALSE}, \code{srcfile}
defaults to \code{NULL}. Otherwise, if \code{text} is used,
\code{srcfile} will be set to a \code{\LinkA{srcfilecopy}{srcfilecopy}} containing
the text.  If a character string is used for \code{file}, a
\code{\LinkA{srcfile}{srcfile}} object referring to that file will be used.
\end{Details}
%
\begin{Value}
An object of type \code{"\LinkA{expression}{expression}"}, with up to \code{n}
elements if specified as a non-negative integer.

When \code{srcfile} is non-\code{NULL}, a \code{"srcref"} attribute
will be attached to the result containing a list of \code{\LinkA{srcref}{srcref}}
records corresponding to each element, and a \code{"srcfile"} attribute
will be attached containing a copy of \code{srcfile}.

A syntax error (including an incomplete expression) will throw an error.

Character strings in the result will have a declared encoding if
\code{encoding} is \code{"latin1"} or \code{"UTF-8"}, or if
\code{text} is supplied with every element of known encoding in a
Latin-1 or UTF-8 locale.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{scan}{scan}}, \code{\LinkA{source}{source}}, \code{\LinkA{eval}{eval}},
\code{\LinkA{deparse}{deparse}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
cat("x <- c(1,4)\n  x ^ 3 -10 ; outer(1:7,5:9)\n", file="xyz.Rdmped")
# parse 3 statements from the file "xyz.Rdmped"
parse(file = "xyz.Rdmped", n = 3)
unlink("xyz.Rdmped")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{paste}{Concatenate Strings}{paste}
\keyword{character}{paste}
%
\begin{Description}\relax
Concatenate vectors after converting to character.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
paste(..., sep = " ", collapse = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] one or more \R{} objects, to be converted to character vectors.
\item[\code{sep}] a character string to separate the terms.  Not
\code{\LinkA{NA\_character\_}{NA.Rul.character.Rul.}}.
\item[\code{collapse}] an optional character string to separate the results.  Not
\code{\LinkA{NA\_character\_}{NA.Rul.character.Rul.}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{paste} converts its arguments (\emph{via}
\code{\LinkA{as.character}{as.character}}) to character strings, and concatenates
them (separating them by the string given by \code{sep}).  If the
arguments are vectors, they are concatenated term-by-term to give a
character vector result.  Vector arguments are recycled as needed,
with zero-length arguments being recycled to \code{""}.

Note that \code{paste()} coerces \code{\LinkA{NA\_character\_}{NA.Rul.character.Rul.}}, the
character missing value, to \code{"NA"} which may seem
undesirable, e.g., when pasting two character vectors, or very
desirable, e.g. in \code{paste("the value of p is ", p)}.

If a value is specified for \code{collapse}, the values in the result
are then concatenated into a single string, with the elements being
separated by the value of \code{collapse}.
\end{Details}
%
\begin{Value}
A character vector of the concatenated values.  This will be of length
zero if all the objects are, unless \code{collapse} is non-NULL in
which case it is a single empty string.

If any input into an element of the result is in UTF-8, that element
will be in UTF-8, otherwise in the current encoding in which case the
encoding of an element of the element is declared if the current
locale is either Latin-1 or UTF-8, at least one of the corresponding
inputs (including separators) had a declared encoding and all inputs
were either ASCII or declared.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
String manipulation with
\code{\LinkA{as.character}{as.character}}, \code{\LinkA{substr}{substr}}, \code{\LinkA{nchar}{nchar}},
\code{\LinkA{strsplit}{strsplit}}; further, \code{\LinkA{cat}{cat}} which concatenates and
writes to a file, and \code{\LinkA{sprintf}{sprintf}} for C like string
construction.

`\LinkA{plotmath}{plotmath}' for the use of \code{paste} in plot annotation.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
paste(1:12) # same as as.character(1:12)
paste("A", 1:6, sep = "")
paste("Today is", date())
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{path.expand}{Expand File Paths}{path.expand}
\keyword{file}{path.expand}
%
\begin{Description}\relax
Expand a path name, for example by replacing a leading tilde by the
user's home directory (if defined on that platform).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
path.expand(path)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{path}] character vector containing one or more path names.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
On \emph{some} Unix builds of \R{}, a leading \code{\textasciitilde{}user} will expand to
the home directory of \code{user}, but not on Unix versions without
\code{readline} installed, nor if \R{} is invoked with
\option{--no-readline}.

In an interactive session \code{capabilities("cledit")} will report if
\code{readline} is available.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{basename}{basename}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
path.expand("~/foo")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{pmatch}{Partial String Matching}{pmatch}
\keyword{character}{pmatch}
%
\begin{Description}\relax
\code{pmatch} seeks matches for the elements of its first argument
among those of its second.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
pmatch(x, table, nomatch = NA_integer_, duplicates.ok = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] the values to be matched: converted to a character vector by
\code{\LinkA{as.character}{as.character}}.
\item[\code{table}] the values to be matched against: converted to a character
vector.
\item[\code{nomatch}] the value to be returned at non-matching or multiply
partially matching positions.  Note that it is coerced to \code{integer}.
\item[\code{duplicates.ok}] should elements be in \code{table} be used more
than once?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The behaviour differs by the value of \code{duplicates.ok}. Consider
first the case if this is true.  First exact matches are considered,
and the positions of the first exact matches are recorded. Then unique
partial matches are considered, and if found recorded. (A partial
match occurs if the whole of the element of \code{x} matches the
beginning of the element of \code{table}.)  Finally,
all remaining elements of \code{x} are regarded as unmatched.
In addition, an empty string can match nothing, not even an exact
match to an empty string.  This is the appropriate behaviour for
partial matching of character indices, for example.

If \code{duplicates.ok} is \code{FALSE}, values of \code{table} once
matched are excluded from the search for subsequent matches.  This
behaviour is equivalent to the \R{} algorithm for argument
matching, except for the consideration of empty strings (which in
argument matching are matched after exact and partial matching to any
remaining arguments).

\code{\LinkA{charmatch}{charmatch}} is similar to \code{pmatch} with
\code{duplicates.ok} true, the differences being that it
differentiates between no match and an ambiguous partial match,  it
does match empty strings, and it does not allow multiple exact matches.

\code{NA} values are treated as if they were the string constant \code{"NA"}.
\end{Details}
%
\begin{Value}
An integer vector (possibly including \code{NA} if \code{nomatch =
    NA}) of the same length as \code{x}, giving the indices of the
elements in \code{table} which matched, or \code{nomatch}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{match}{match}}, \code{\LinkA{charmatch}{charmatch}} and
\code{\LinkA{match.arg}{match.arg}}, \code{\LinkA{match.fun}{match.fun}},
\code{\LinkA{match.call}{match.call}}, for function argument matching etc.,
\code{\LinkA{grep}{grep}} etc for more general (regexp) matching of strings.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
pmatch("", "")                             # returns NA
pmatch("m",   c("mean", "median", "mode")) # returns NA
pmatch("med", c("mean", "median", "mode")) # returns 2

pmatch(c("", "ab", "ab"), c("abc", "ab"), dup=FALSE)
pmatch(c("", "ab", "ab"), c("abc", "ab"), dup=TRUE)
## compare
charmatch(c("", "ab", "ab"), c("abc", "ab"))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{polyroot}{Find Zeros of a Real or Complex Polynomial}{polyroot}
\keyword{math}{polyroot}
%
\begin{Description}\relax
Find zeros of a real or complex polynomial.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
polyroot(z)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{z}] the vector of polynomial coefficients in increasing order.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A polynomial of degree \eqn{n - 1}{},
\deqn{
    p(x) = z_1 + z_2 x + \cdots + z_n x^{n-1}}{}
is given by its coefficient vector \code{z[1:n]}.
\code{polyroot} returns the \eqn{n-1}{} complex zeros of \eqn{p(x)}{}
using the Jenkins-Traub algorithm.

If the coefficient vector \code{z} has zeroes for the highest powers,
these are discarded.

There is no maximum degree, but numerical stability
may be an issue for all but low-degree polynomials.
\end{Details}
%
\begin{Value}
A complex vector of length \eqn{n - 1}{}, where \eqn{n}{} is the position
of the largest non-zero element of \code{z}. 
\end{Value}
%
\begin{References}\relax
Jenkins and Traub (1972)
TOMS Algorithm 419.
\emph{Comm. ACM}, \bold{15}, 97--99.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{uniroot}{uniroot}} for numerical root finding of arbitrary
functions;
\code{\LinkA{complex}{complex}} and the \code{zero} example in the demos
directory.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
polyroot(c(1, 2, 1))
round(polyroot(choose(8, 0:8)), 11) # guess what!
for (n1 in 1:4) print(polyroot(1:n1), digits = 4)
polyroot(c(1, 2, 1, 0, 0)) # same as the first
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{pos.to.env}{Convert Positions in the Search Path to Environments}{pos.to.env}
\keyword{utilities}{pos.to.env}
%
\begin{Description}\relax
Returns the environment at a specified position in the search path.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
pos.to.env(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an integer between 1 and \code{length(search())}, the length
of the search path.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Several \R{} functions for manipulating objects in environments (such as
\code{\LinkA{get}{get}} and \code{\LinkA{ls}{ls}}) allow specifying environments
via corresponding positions in the search path.  \code{pos.to.env} is
a convenience function for programmers which converts these positions
to corresponding environments; users will typically have no need for
it.  It is \LinkA{primitive}{primitive}.
\end{Details}
%
\begin{Examples}
\begin{ExampleCode}
pos.to.env(1) # R_GlobalEnv
# the next returns the base environment
pos.to.env(length(search()))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{pretty}{Pretty Breakpoints}{pretty}
\keyword{dplot}{pretty}
%
\begin{Description}\relax
Compute a  sequence of about \code{n+1} equally spaced `round'
values which cover the range of the values in \code{x}.
The values are chosen so that they are 1, 2 or 5 times a power of 10.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
pretty(x, n = 5, min.n = n %/% 3,  shrink.sml = 0.75,
       high.u.bias = 1.5, u5.bias = .5 + 1.5*high.u.bias,
       eps.correct = 0)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object coercible to numeric by \code{\LinkA{as.numeric}{as.numeric}}.
\item[\code{n}] integer giving the \emph{desired} number of
intervals.  Non-integer values are rounded down.
\item[\code{min.n}] nonnegative integer giving the \emph{minimal} number of
intervals.  If \code{min.n == 0}, \code{pretty(.)} may return a
single value.
\item[\code{shrink.sml}] positive numeric
by a which a default scale is shrunk in the case when
\code{range(x)} is very small (usually 0).
\item[\code{high.u.bias}] non-negative numeric, typically \eqn{> 1}{}.
The interval unit is determined as \{1,2,5,10\} times \code{b}, a
power of 10.  Larger \code{high.u.bias} values favor larger units.
\item[\code{u5.bias}] non-negative numeric
multiplier favoring factor 5 over 2.  Default and `optimal':
\code{u5.bias = .5 + 1.5*high.u.bias}.
\item[\code{eps.correct}] integer code, one of \{0,1,2\}. If non-0, an
\emph{epsilon correction} is made at the boundaries such that
the result boundaries will be outside \code{range(x)}; in the
\emph{small} case, the correction is only done if \code{eps.correct >=2}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{pretty} ignores non-finite values in \code{x}.

Let \code{d <- max(x) - min(x)} \eqn{\ge 0}{}.
If \code{d} is not (very close) to 0, we let \code{c <- d/n},
otherwise more or less \code{c <- max(abs(range(x)))*shrink.sml / min.n}.
Then, the \emph{10 base} \code{b} is
\eqn{10^{\lfloor{\log_{10}(c)}\rfloor}}{} such
that \eqn{b \le c < 10b}{}.

Now determine the basic \emph{unit} \eqn{u}{} as one of
\eqn{\{1,2,5,10\} b}{}, depending on \eqn{c/b \in [1,10)}{} and the two
`\emph{bias}' coefficients, \eqn{h =}{}\code{high.u.bias} and
\eqn{f =}{}\code{u5.bias}.

\dots\dots\dots
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{axTicks}{axTicks}} for the computation of pretty axis tick
locations in plots, particularly on the log scale.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
pretty(1:15)     # 0  2  4  6  8 10 12 14 16
pretty(1:15, h=2)# 0  5 10 15
pretty(1:15, n=4)# 0  5 10 15
pretty(1:15 * 2) # 0  5 10 15 20 25 30
pretty(1:20)      # 0  5 10 15 20
pretty(1:20, n=2) # 0 10 20
pretty(1:20, n=10)# 0  2  4 ... 20

for(k in 5:11) {
  cat("k=",k,": "); print(diff(range(pretty(100 + c(0, pi*10^-k)))))}

##-- more bizarre, when  min(x) == max(x):
pretty(pi)

add.names <- function(v) { names(v) <- paste(v); v}
utils::str(lapply(add.names(-10:20), pretty))
utils::str(lapply(add.names(0:20),   pretty, min.n = 0))
sapply(    add.names(0:20),   pretty, min.n = 4)

pretty(1.234e100)
pretty(1001.1001)
pretty(1001.1001, shrink = .2)
for(k in -7:3)
  cat("shrink=", formatC(2^k, width=9),":",
      formatC(pretty(1001.1001, shrink.sml = 2^k), width=6),"\n")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Primitive}{Call a ``Primitive'' Internal Function}{Primitive}
\aliasA{.Primitive}{Primitive}{.Primitive}
\aliasA{primitive}{Primitive}{primitive}
\keyword{interface}{Primitive}
%
\begin{Description}\relax
\code{.Primitive} returns an entry point to a `primitive'
(internally implemented) function.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Primitive(name)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{name}] name of the \R{} function.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The advantage of \code{.Primitive} over \code{\LinkA{.Internal}{.Internal}}
functions is the potential efficiency of argument passing.  However,
this is done by ignoring argument names and using positional matching
of arguments (unless arranged differently for specific primitives such
as \code{\LinkA{log}{log}}, \code{\LinkA{round}{round}}, \code{\LinkA{signif}{signif}},
\code{\LinkA{rep}{rep}} and \code{\LinkA{seq.int}{seq.int}}), so this is discouraged
for functions of more than one argument.

All primitive functions are in the base name space.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Internal}{.Internal}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
mysqrt <- .Primitive("sqrt")
c
.Internal # this one *must* be primitive!
get("if") # just 'if' or 'print(if)' are not syntactically ok.
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{print}{Print Values}{print}
\methaliasA{print.factor}{print}{print.factor}
\methaliasA{print.function}{print}{print.function}
\methaliasA{print.htest}{print}{print.htest}
\methaliasA{print.listof}{print}{print.listof}
\methaliasA{print.simple.list}{print}{print.simple.list}
\methaliasA{print.table}{print}{print.table}
\keyword{print}{print}
%
\begin{Description}\relax
\code{print} prints its argument and returns it \emph{invisibly} (via
\code{\LinkA{invisible}{invisible}(x)}).  It is a generic function which means that
new printing methods can be easily added for new \code{\LinkA{class}{class}}es.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
print(x, ...)

## S3 method for class 'factor':
print(x, quote = FALSE, max.levels = NULL,
      width = getOption("width"), ...)

## S3 method for class 'table':
print(x, digits = getOption("digits"), quote = FALSE,
      na.print = "", zero.print = "0", justify = "none", ...)

## S3 method for class 'function':
print(x, useSource = TRUE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object used to select a method.
\item[\code{...}] further arguments passed to or from other methods.
\item[\code{quote}] logical, indicating whether or not strings should be
printed with surrounding quotes.
\item[\code{max.levels}] integer, indicating how many levels should be
printed for a factor; if \code{0}, no extra "Levels" line will be
printed.  The default, \code{NULL}, entails choosing \code{max.levels}
such that the levels print on one line of width \code{width}.
\item[\code{width}] only used when \code{max.levels} is NULL, see above.
\item[\code{digits}] minimal number of \emph{significant} digits, see
\code{\LinkA{print.default}{print.default}}.
\item[\code{na.print}] character string (or \code{NULL}) indicating
\code{\LinkA{NA}{NA}} values in printed output, see
\code{\LinkA{print.default}{print.default}}.
\item[\code{zero.print}] character specifying how zeros (\code{0}) should be
printed; for sparse tables, using \code{"."} can produce stronger results.
\item[\code{justify}] character indicating if strings should left- or
right-justified or left alone, passed to \code{\LinkA{format}{format}}.
\item[\code{useSource}] logical indicating if a \code{"source"} attribute
should be used for printing when present, e.g., if
\code{\LinkA{options}{options}(keep.source=TRUE)} has been in use.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The default method, \code{\LinkA{print.default}{print.default}} has its own help page.
Use \code{\LinkA{methods}{methods}("print")} to get all the methods for the
\code{print} generic.

\code{print.factor} allows some customization and is used for printing
\code{\LinkA{ordered}{ordered}} factors as well.

\code{print.table} for printing \code{\LinkA{table}{table}}s allows other
customization.

See \code{\LinkA{noquote}{noquote}} as an example of a class whose main
purpose is a specific \code{print} method.
\end{Details}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S.}
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
The default method \code{\LinkA{print.default}{print.default}}, and help for the
methods above; further \code{\LinkA{options}{options}}, \code{\LinkA{noquote}{noquote}}.

For more customizable (but cumbersome) printing, see
\code{\LinkA{cat}{cat}}, \code{\LinkA{format}{format}} or also \code{\LinkA{write}{write}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

ts(1:20)#-- print is the "Default function" --> print.ts(.) is called
for(i in 1:3) print(1:i)

## Printing of factors
attenu$station ## 117 levels -> 'max.levels' depending on width

## ordered factors: levels  "l1 < l2 < .."
esoph$agegp[1:12]
esoph$alcgp[1:12]

## Printing of sparse (contingency) tables
set.seed(521)
t1 <- round(abs(rt(200, df=1.8)))
t2 <- round(abs(rt(200, df=1.4)))
table(t1,t2) # simple
print(table(t1,t2), zero.print = ".")# nicer to read
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{print.data.frame}{Printing Data Frames}{print.data.frame}
\keyword{print}{print.data.frame}
%
\begin{Description}\relax
Print a data frame.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'data.frame':
print(x, ..., digits = NULL,
      quote = FALSE, right = TRUE, row.names = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object of class \code{data.frame}.
\item[\code{...}] optional arguments to \code{print} or \code{plot} methods.
\item[\code{digits}] the minimum number of significant digits to be used: see
\code{\LinkA{print.default}{print.default}}.
\item[\code{quote}] logical, indicating whether or not entries should be
printed with surrounding quotes.
\item[\code{right}] logical, indicating whether or not strings should be
right-aligned.  The default is right-alignment.
\item[\code{row.names}] logical (or character vector), indicating whether (or
what) row names should be printed.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This calls \code{\LinkA{format}{format}} which formats the data frame
column-by-column, then converts to a character matrix and dispatches
to the \code{print} method for matrices.

When \code{quote = TRUE} only the entries are quoted not the row names
nor the column names.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{data.frame}{data.frame}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(dd <- data.frame(x=1:8, f=gl(2,4), ch=I(letters[1:8])))
     # print() with defaults
print(dd, quote = TRUE, row.names = FALSE)
     # suppresses row.names and quotes all entries
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{print.default}{Default Printing}{print.default}
\keyword{print}{print.default}
%
\begin{Description}\relax
\code{print.default} is the \emph{default} method of the generic
\code{\LinkA{print}{print}} function which prints its argument.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## Default S3 method:
print(x, digits = NULL, quote = TRUE,
      na.print = NULL, print.gap = NULL, right = FALSE,
      max = NULL, useSource = TRUE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] the object to be printed.
\item[\code{digits}] a non-null value for \code{digits} specifies the minimum
number of significant digits to be printed in values.  The default,
\code{NULL}, uses \code{\LinkA{getOption}{getOption}(digits)}.  (For the
interpretation for complex numbers see \code{\LinkA{signif}{signif}}.)
Non-integer values will be rounded down, and only values
greater than or equal to 1 and no greater than 22 are accepted.

\item[\code{quote}] logical, indicating whether or not strings
(\code{\LinkA{character}{character}}s) should be printed with surrounding quotes.
\item[\code{na.print}] a character string which is used to indicate
\code{\LinkA{NA}{NA}} values in printed output, or \code{NULL}
(see `Details').
\item[\code{print.gap}] a non-negative integer \eqn{\le 1024}{},
or \code{NULL} (meaning 1), giving the spacing between adjacent
columns in printed vectors, matrices and arrays.
\item[\code{right}] logical, indicating whether or not strings should be
right aligned.  The default is left alignment.
\item[\code{max}] a non-null value for \code{max} specifies the approximate
maximum number of entries to be printed.  The default, \code{NULL},
uses \code{\LinkA{getOption}{getOption}(max.print)}; see that help page for more
details.
\item[\code{useSource}] logical, indicating whether to use source
references or copies rather than deparsing language objects.
The default is to use the original source if it is available.
\item[\code{...}] further arguments to be passed to or from other
methods.  They are ignored in this function.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The default for printing \code{NA}s is to print \code{NA} (without
quotes) unless this is a character \code{NA} \emph{and} \code{quote =
    FALSE}, when \samp{<NA>} is printed.

The same number of decimal places is used throughout a vector.  This
means that \code{digits} specifies the minimum number of significant
digits to be used, and that at least one entry will be encoded with
that minimum number.  However, if all the encoded elements then have
trailing zeroes, the number of decimal places is reduced until at
least one element has a non-zero final digit.  Decimal points are only
included if at least one decimal place is selected.

Attributes are printed respecting their class(es), using the values of
\code{digits} to \code{print.default}, but using the default values
(for the methods called) of the other arguments.

When the \pkg{methods} package is attached, \code{print} will call
\code{\LinkA{show}{show}} for \R{} objects with formal classes if called
with no optional arguments.
\end{Details}
%
\begin{Section}{Warning}
Using too large a value of \code{digits} may lead to representation
errors in the calculation of the number of significant digits and the
decimal representation: these are likely for \code{digits >= 16}, and
these possible errors are taken into account in
assessing the number of significant digits to be printed in that case.

Whereas earlier versions of \R{} might have printed further digits for
\code{digits >= 16} on some platforms, they were not necessarily reliable.
\end{Section}
%
\begin{Section}{Single-byte locales}
If a non-printable character is encountered during output, it is
represented as one of the ANSI escape sequences (\samp{\bsl{}a}, \samp{\bsl{}b},
\samp{\bsl{}f}, \samp{\bsl{}n}, \samp{\bsl{}r}, \samp{\bsl{}t}, \samp{\bsl{}v}, \samp{\bsl{}\bsl{}} and
\samp{\bsl{}0}: see \LinkA{Quotes}{Quotes}), or failing that as a 3-digit octal
code: for example the UK currency pound sign in the C locale (if
implemented correctly) is printed as \samp{\bsl{}243}.  Which characters
are non-printable depends on the locale.
\end{Section}
%
\begin{Section}{Unicode and other multi-byte locales}
In all locales, the characters in the ASCII range (\samp{0x00} to
\samp{0x7f}) are printed in the same way, as-is if printable, otherwise
via ANSI escape sequences or 3-digit octal escapes as described for
single-byte locales.

Multi-byte non-printing characters are printed as an escape sequence
of the form \samp{\bsl{}uxxxx} or \samp{\bsl{}Uxxxxxxxx} (in hexadecimal).
This is the internal code for the wide-character representation of the
character.  If this is not known to be the Unicode point, a warning is
issued.  The only known exceptions are certain Japanese ISO2022
locales on commercial Unixes, which use a concatenation of the bytes:
it is unlikely that \R{} compiles on such a system.


It is possible to have a character string in a character vector that
is not valid in the current locale.  If a byte is encountered that is
not part of a valid character it is printed in hex in the form
\samp{\bsl{}xab} and this is repeated until the start of a valid character.
(This will rapidly recover from minor errors in UTF-8.)
\end{Section}
%
\begin{SeeAlso}\relax
The generic \code{\LinkA{print}{print}}, \code{\LinkA{options}{options}}.
The \code{"\LinkA{noquote}{noquote}"} class and print method.

\code{\LinkA{encodeString}{encodeString}}, which encodes a character vector the way
it would be printed.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
pi
print(pi, digits = 16)
LETTERS[1:16]
print(LETTERS, quote = FALSE)

M <- cbind(I = 1, matrix(1:10000, ncol = 10,
                         dimnames = list(NULL, LETTERS[1:10])))
utils::head(M) # makes more sense than
print(M, max = 1000)# prints 90 rows and a message about omitting 910
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{prmatrix}{Print Matrices, Old-style}{prmatrix}
\keyword{print}{prmatrix}
%
\begin{Description}\relax
An earlier method for printing matrices, provided for S compatibility.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
prmatrix(x, rowlab =, collab =,
         quote = TRUE, right = FALSE, na.print = NULL, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] numeric or character matrix.
\item[\code{rowlab,collab}] (optional) character vectors giving row or column
names respectively.  By default, these are taken from
\code{\LinkA{dimnames}{dimnames}(x)}.
\item[\code{quote}] logical; if \code{TRUE} and \code{x} is of mode
\code{"character"}, \emph{quotes} (\samp{"}) are used.
\item[\code{right}]  if \code{TRUE} and \code{x} is of mode
\code{"character"}, the output columns are \emph{right}-justified.
\item[\code{na.print}] how \code{NA}s are printed.  If this is non-null, its
value is used to represent \code{NA}.
\item[\code{...}] arguments for \code{print} methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{prmatrix} is an earlier form of \code{print.matrix}, and
is very similar to the S function of the same name.
\end{Details}
%
\begin{Value}
Invisibly returns its argument, \code{x}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{print.default}{print.default}}, and other \code{\LinkA{print}{print}} methods.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
prmatrix(m6 <- diag(6), rowlab = rep("",6), collab =rep("",6))

chm <- matrix(scan(system.file("help", "AnIndex", package = "splines"),
                   what = ""), , 2, byrow = TRUE)
chm  # uses print.matrix()
prmatrix(chm, collab = paste("Column",1:3), right=TRUE, quote=FALSE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{proc.time}{Running Time of R}{proc.time}
\aliasA{print.proc\_time}{proc.time}{print.proc.Rul.time}
\keyword{utilities}{proc.time}
%
\begin{Description}\relax
\code{proc.time} determines how much real and CPU time (in seconds)
the currently running \R{} process has already taken.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
proc.time()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
\code{proc.time} returns five elements for backwards compatibility,
but its \code{print} method prints a named vector of
length 3.  The first two entries are the total user and system CPU
times of the current \R{} process and any child processes on which it
has waited, and the third entry is the `real' elapsed time
since the process was started.
\end{Details}
%
\begin{Value}
An object of class \code{"proc\_time"} which is a numeric vector of
length 5, containing the user, system, and total elapsed times for the
currently running \R{} process, and the cumulative sum of user and
system times of any child processes spawned by it on which it has
waited.  (The \code{print} method combines the child times with those
of the main process.)

The definition of `user' and `system' times is from your
OS.  Typically it is something like

\emph{The `user time' is the CPU time charged for the execution
of user instructions of the calling process. The `system time'
is the CPU time charged for execution by the system on behalf of the
calling process.}

The resolution of the times will be system-specific
and on Unix-alikes times are rounded to the nearest 1ms.  On modern
systems they will be that accurate, but on older systems they might be
accurate to 1/100 or 1/60 sec.

This is a \LinkA{primitive}{primitive} function.
\end{Value}
%
\begin{Note}\relax
It is possible to compile \R{} without support for \code{proc.time},
when the function will throw an error.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{system.time}{system.time}} for timing a valid \R{} expression,
\code{\LinkA{gc.time}{gc.time}} for how much of the time was spent in garbage
collection.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
## a way to time an R expression: system.time is preferred
ptm <- proc.time()
for (i in 1:50) mad(stats::runif(500))
proc.time() - ptm

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{prod}{Product of Vector Elements}{prod}
\keyword{arith}{prod}
%
\begin{Description}\relax
\code{prod} returns the product of all the values
present in its arguments.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
prod(..., na.rm = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] numeric or complex or logical vectors.
\item[\code{na.rm}] logical.  Should missing values be removed?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{na.rm} is \code{FALSE} an \code{NA}
value in any of the arguments will cause
a value of \code{NA} to be returned, otherwise
\code{NA} values are ignored.

This is a generic function: methods can be defined for it
directly or via the \code{\LinkA{Summary}{S3groupGeneric}} group generic.
For this to work properly, the arguments \code{...} should be
unnamed, and dispatch is on the first argument.

Logical true values are regarded as one, false values as zero.
For historical reasons, \code{NULL} is accepted and treated as if it
were \code{numeric(0)}.
\end{Details}
%
\begin{Value}
The product, a numeric (of type \code{"double"}) or complex vector of length one.
\strong{NB:} the product of an empty set is one, by definition.
\end{Value}
%
\begin{Section}{S4 methods}
This is part of the S4 \code{\LinkA{Summary}{S4groupGeneric}}
group generic.  Methods for it must use the signature
\code{x, ..., na.rm}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{sum}{sum}},
\code{\LinkA{cumprod}{cumprod}}, \code{\LinkA{cumsum}{cumsum}}.

`\LinkA{plotmath}{plotmath}' for the use of \code{prod} in plot annotation.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
print(prod(1:7)) == print(gamma(8))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{prop.table}{Express Table Entries as Fraction of Marginal Table}{prop.table}
\keyword{array}{prop.table}
%
\begin{Description}\relax
This is really \code{sweep(x, margin, margin.table(x, margin), "/")}
for newbies, except that if \code{margin} has length zero, then one
gets \code{x/sum(x)}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
prop.table(x, margin=NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}]  table 
\item[\code{margin}]  index, or vector of indices to generate margin for
\end{ldescription}
\end{Arguments}
%
\begin{Value}
Table like \code{x} expressed relative to \code{margin}
\end{Value}
%
\begin{Author}\relax
 Peter Dalgaard 
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{margin.table}{margin.table}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
m <- matrix(1:4,2)
m
prop.table(m,1)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{pushBack}{Push Text Back on to a Connection}{pushBack}
\aliasA{pushBackLength}{pushBack}{pushBackLength}
\keyword{connection}{pushBack}
%
\begin{Description}\relax
Functions to push back text lines onto a connection, and to enquire
how many lines are currently pushed back.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
pushBack(data, connection, newLine = TRUE)
pushBackLength(connection)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{data}] a character vector.
\item[\code{connection}] A connection.
\item[\code{newLine}] logical. If true, a newline is appended to each string
pushed back.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Several character strings can be pushed back on one or more occasions.
The occasions form a stack, so the first line to be retrieved will be
the first string from the last call to \code{pushBack}.  Lines which
are pushed back are read prior to the normal input from the
connection, by the normal text-reading functions such as
\code{\LinkA{readLines}{readLines}} and \code{\LinkA{scan}{scan}}.

Pushback is only allowed for readable connections in text mode.

Not all uses of connections respect pushbacks, in particular the input
connection is still wired directly, so for example parsing
commands from the console and \code{\LinkA{scan}{scan}("")} ignore pushbacks on
\code{\LinkA{stdin}{stdin}}.
\end{Details}
%
\begin{Value}
\code{pushBack} returns nothing.

\code{pushBackLength} returns number of lines currently pushed back.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}, \code{\LinkA{readLines}{readLines}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
zz <- textConnection(LETTERS)
readLines(zz, 2)
pushBack(c("aa", "bb"), zz)
pushBackLength(zz)
readLines(zz, 1)
pushBackLength(zz)
readLines(zz, 1)
readLines(zz, 1)
close(zz)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{qr}{The QR Decomposition of a Matrix}{qr}
\aliasA{as.qr}{qr}{as.qr}
\aliasA{is.qr}{qr}{is.qr}
\methaliasA{qr.coef}{qr}{qr.coef}
\methaliasA{qr.default}{qr}{qr.default}
\methaliasA{qr.fitted}{qr}{qr.fitted}
\methaliasA{qr.qty}{qr}{qr.qty}
\methaliasA{qr.qy}{qr}{qr.qy}
\methaliasA{qr.resid}{qr}{qr.resid}
\methaliasA{qr.solve}{qr}{qr.solve}
\aliasA{solve.qr}{qr}{solve.qr}
\keyword{algebra}{qr}
\keyword{array}{qr}
%
\begin{Description}\relax
\code{qr} computes the QR decomposition of a matrix.  It provides an
interface to the techniques used in the LINPACK routine DQRDC
or the LAPACK routines DGEQP3 and (for complex matrices) ZGEQP3.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
qr(x, ...)
## Default S3 method:
qr(x, tol = 1e-07 , LAPACK = FALSE, ...)

qr.coef(qr, y)
qr.qy(qr, y)
qr.qty(qr, y)
qr.resid(qr, y)
qr.fitted(qr, y, k = qr$rank)
qr.solve(a, b, tol = 1e-7)
## S3 method for class 'qr':
solve(a, b, ...)

is.qr(x)
as.qr(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix whose QR decomposition is to be computed.
\item[\code{tol}] the tolerance for detecting linear dependencies in the
columns of \code{x}. Only used if \code{LAPACK} is false and
\code{x} is real.
\item[\code{qr}] a QR decomposition of the type computed by \code{qr}.
\item[\code{y, b}] a vector or matrix of right-hand sides of equations.
\item[\code{a}] a QR decomposition or (\code{qr.solve} only) a rectangular matrix.
\item[\code{k}] effective rank.
\item[\code{LAPACK}] logical. For real \code{x}, if true use LAPACK
otherwise use LINPACK.
\item[\code{...}] further arguments passed to or from other methods
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The QR decomposition plays an important role in many
statistical techniques.  In particular it can be used to solve the
equation \eqn{\bold{Ax} = \bold{b}}{} for given matrix \eqn{\bold{A}}{},
and vector \eqn{\bold{b}}{}.  It is useful for computing regression
coefficients and in applying the Newton-Raphson algorithm.

The functions \code{qr.coef}, \code{qr.resid}, and \code{qr.fitted}
return the coefficients, residuals and fitted values obtained when
fitting \code{y} to the matrix with QR decomposition \code{qr}.
(If pivoting is used, some of the coefficients will be \code{NA}.)
\code{qr.qy} and \code{qr.qty} return \code{Q \%*\% y} and
\code{t(Q) \%*\% y}, where \code{Q} is the (complete) \eqn{\bold{Q}}{} matrix.

All the above functions keep \code{dimnames} (and \code{names}) of
\code{x} and \code{y} if there are.

\code{solve.qr} is the method for \code{\LinkA{solve}{solve}} for \code{qr} objects.
\code{qr.solve} solves systems of equations via the QR decomposition:
if \code{a} is a QR decomposition it is the same as \code{solve.qr},
but if \code{a} is a rectangular matrix the QR decomposition is
computed first.  Either will handle over- and under-determined
systems, providing a least-squares fit if appropriate.

\code{is.qr} returns \code{TRUE} if \code{x} is a \code{\LinkA{list}{list}}
with components named \code{qr}, \code{rank} and \code{qraux} and
\code{FALSE} otherwise.

It is not possible to coerce objects to mode \code{"qr"}.  Objects
either are QR decompositions or they are not.
\end{Details}
%
\begin{Value}
The QR decomposition of the matrix as computed by LINPACK or LAPACK.
The components in the returned value correspond directly
to the values returned by DQRDC/DGEQP3/ZGEQP3.
\begin{ldescription}
\item[\code{qr}] a matrix with the same dimensions as \code{x}.
The upper triangle contains the \eqn{\bold{R}}{} of the decomposition
and the lower triangle contains information on the \eqn{\bold{Q}}{} of
the decomposition (stored in compact form).  Note that the storage
used by DQRDC and DGEQP3 differs.
\item[\code{qraux}] a vector of length \code{ncol(x)} which contains
additional information on \eqn{\bold{Q}}{}.
\item[\code{rank}] the rank of \code{x} as computed by the decomposition:
always full rank in the LAPACK case.
\item[\code{pivot}] information on the pivoting strategy used during
the decomposition.

\end{ldescription}
Non-complex QR objects computed by LAPACK have the attribute
\code{"useLAPACK"} with value \code{TRUE}.
\end{Value}
%
\begin{Note}\relax
To compute the determinant of a matrix (do you \emph{really} need it?),
the QR decomposition is much more efficient than using Eigen values
(\code{\LinkA{eigen}{eigen}}).  See \code{\LinkA{det}{det}}.

Using LAPACK (including in the complex case) uses column pivoting and
does not attempt to detect rank-deficient matrices.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
\emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.

Anderson. E. and ten others (1999)
\emph{LAPACK Users' Guide}. Third Edition. SIAM.\\{}
Available on-line at
\url{http://www.netlib.org/lapack/lug/lapack_lug.html}.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{qr.Q}{qr.Q}},  \code{\LinkA{qr.R}{qr.R}},  \code{\LinkA{qr.X}{qr.X}} for
reconstruction of the matrices.
\code{\LinkA{lm.fit}{lm.fit}},  \code{\LinkA{lsfit}{lsfit}},
\code{\LinkA{eigen}{eigen}}, \code{\LinkA{svd}{svd}}.

\code{\LinkA{det}{det}} (using \code{qr}) to compute the determinant of a matrix.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
h9 <- hilbert(9); h9
qr(h9)$rank           #--> only 7
qrh9 <- qr(h9, tol = 1e-10)
qrh9$rank             #--> 9
##-- Solve linear equation system  H %*% x = y :
y <- 1:9/10
x <- qr.solve(h9, y, tol = 1e-10) # or equivalently :
x <- qr.coef(qrh9, y) #-- is == but much better than
                      #-- solve(h9) %*% y
h9 %*% x              # = y


## overdetermined system
A <- matrix(runif(12), 4)
b <- 1:4
qr.solve(A, b) # or solve(qr(A), b)
solve(qr(A, LAPACK=TRUE), b)
# this is a least-squares solution, cf. lm(b ~ 0 + A)

## underdetermined system
A <- matrix(runif(12), 3)
b <- 1:3
qr.solve(A, b)
solve(qr(A, LAPACK=TRUE), b)
# solutions will have one zero, not necessarily the same one
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{QR.Auxiliaries}{Reconstruct the Q, R, or X Matrices from a QR Object}{QR.Auxiliaries}
\aliasA{qr.Q}{QR.Auxiliaries}{qr.Q}
\aliasA{qr.R}{QR.Auxiliaries}{qr.R}
\aliasA{qr.X}{QR.Auxiliaries}{qr.X}
\keyword{algebra}{QR.Auxiliaries}
\keyword{array}{QR.Auxiliaries}
%
\begin{Description}\relax
Returns the original matrix from which the object was constructed or
the components of the decomposition.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
qr.X(qr, complete = FALSE, ncol =)
qr.Q(qr, complete = FALSE, Dvec =)
qr.R(qr, complete = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{qr}] object representing a QR decomposition.  This will
typically have come from a previous call to \code{\LinkA{qr}{qr}} or
\code{\LinkA{lsfit}{lsfit}}.
\item[\code{complete}] logical expression of length 1.  Indicates whether an
arbitrary  orthogonal completion of the \eqn{\bold{Q}}{} or
\eqn{\bold{X}}{} matrices is to be made, or whether the \eqn{\bold{R}}{}
matrix is to be completed  by binding zero-value rows beneath the
square upper triangle.
\item[\code{ncol}] integer in the range \code{1:nrow(qr\$qr)}.  The number
of columns to be in the reconstructed \eqn{\bold{X}}{}.  The default
when \code{complete} is \code{FALSE} is the first
\code{min(ncol(X), nrow(X))} columns of the original \eqn{\bold{X}}{}
from which the qr object was constructed.  The default when
\code{complete} is \code{TRUE} is a square matrix with the original
\eqn{\bold{X}}{} in the first \code{ncol(X)} columns and an arbitrary
orthogonal completion (unitary completion in the complex case) in
the remaining columns.
\item[\code{Dvec}] vector (not matrix) of diagonal values.  Each column of
the returned \eqn{\bold{Q}}{} will be multiplied by the corresponding
diagonal value.  Defaults to all \code{1}s.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
\code{qr.X} returns \eqn{\bold{X}}{}, the original matrix from
which the qr object was constructed, provided \code{ncol(X) <= nrow(X)}.
If \code{complete} is \code{TRUE} or the argument \code{ncol} is greater than
\code{ncol(X)}, additional columns from an arbitrary orthogonal
(unitary) completion of \code{X} are returned.

\code{qr.Q} returns part or all of \bold{Q}, the order-nrow(X)
orthogonal (unitary) transformation represented by \code{qr}.  If
\code{complete} is \code{TRUE}, \bold{Q} has \code{nrow(X)} columns.
If \code{complete} is \code{FALSE}, \bold{Q} has \code{ncol(X)}
columns.  When \code{Dvec} is specified, each column of \bold{Q} is
multiplied by the corresponding value in \code{Dvec}.

\code{qr.R} returns \bold{R}.  The number of rows of \bold{R} is
either \code{nrow(X)} or \code{ncol(X)} (and may depend on whether
\code{complete} is \code{TRUE} or \code{FALSE}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{qr}{qr}},
\code{\LinkA{qr.qy}{qr.qy}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
p <- ncol(x <- LifeCycleSavings[,-1]) # not the 'sr'
qrstr <- qr(x)   # dim(x) == c(n,p)
qrstr $ rank # = 4 = p
Q <- qr.Q(qrstr) # dim(Q) == dim(x)
R <- qr.R(qrstr) # dim(R) == ncol(x)
X <- qr.X(qrstr) # X == x
range(X - as.matrix(x))# ~ < 6e-12
## X == Q %*% R if there has been no pivoting, as here.
Q %*% R
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{quit}{Terminate an R Session}{quit}
\aliasA{.Last}{quit}{.Last}
\methaliasA{.Last.sys}{quit}{.Last.sys}
\aliasA{q}{quit}{q}
\keyword{environment}{quit}
%
\begin{Description}\relax
The function \code{quit} or its alias \code{q} terminate the current
\R{} session.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
quit(save = "default", status = 0, runLast = TRUE)
   q(save = "default", status = 0, runLast = TRUE)
.Last <- function(x) { ...... }
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{save}] a character string indicating whether the environment
(workspace) should be saved, one of \code{"no"}, \code{"yes"},
\code{"ask"} or \code{"default"}.
\item[\code{status}] the (numerical) error status to be returned to the
operating system, where relevant. Conventionally \code{0}
indicates successful completion.
\item[\code{runLast}] should \code{.Last()} be executed?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{save} must be one of \code{"no"}, \code{"yes"},
\code{"ask"} or \code{"default"}.  In the first case the workspace
is not saved, in the second it is saved and in the third the user is
prompted and can also decide \emph{not} to quit.  The default is to
ask in interactive use but may be overridden by command-line
arguments (which must be supplied in non-interactive use).

Immediately \emph{before} terminating, the function \code{.Last()}
is executed if it exists and \code{runLast} is true. If in
interactive use there are errors in
the \code{.Last} function, control will be returned to the command
prompt, so do test the function thoroughly.  There is a system
analogue, \code{.Last.sys()}, which is run after \code{.Last()}
if \code{runLast} is true.

Exactly what happens at termination of an \R{} session depends on the
platform and GUI interface in use.  A typical sequence is to run
\code{.Last()} and \code{.Last.sys()} (unless \code{runLast} is
false), to save the workspace if requested (and in most cases also
to save the session history: see \code{\LinkA{savehistory}{savehistory}}), then
run any finalizers (see \code{\LinkA{reg.finalizer}{reg.finalizer}}) that have been
set to be run on exit, close all open graphics devices, remove the
session temporary directory and print any remaining warnings
(e.g. from \code{.Last()} and device closure).

Some error statuses are used by \R{} itself.  The default error
handler for non-interactive use effectively calls \code{q("no", 1,
      FALSE)} and returns error code 1.  Error status 2 is used for \R{}
`suicide', that is a catastrophic failure, and other small
numbers are used by specific ports for initialization failures.  It
is recommended that users choose statuses of 10 or more.

Valid values of \code{status} are system-dependent, but \code{0:255}
are normally valid.  (Many OSes will report the last byte of the
value, that is report the number modulo 256.  But not all.)
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{.First}{.First}} for setting things on startup.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: ## Unix-flavour example
.Last <- function() {
  cat("Now sending PostScript graphics to the printer:\n")
  system("lpr Rplots.ps")
  cat("bye bye...\n")
}
quit("yes")
## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Quotes}{Quotes}{Quotes}
\aliasA{"}{Quotes}{"}
\aliasA{'}{Quotes}{'}
\aliasA{backquote}{Quotes}{backquote}
\aliasA{backtick}{Quotes}{backtick}
\aliasA{`}{Quotes}{`}
\keyword{documentation}{Quotes}
%
\begin{Description}\relax
Descriptions of the various uses of quoting in \R{}.
\end{Description}
%
\begin{Details}\relax
Three types of quote are part of the syntax of \R{}: single and double
quotation marks and the backtick (or back quote, \samp{`}).  In
addition, backslash is used for quoting the following characters
inside character constants.
\end{Details}
%
\begin{Section}{Character constants}
Single and double quotes delimit character constants.  They can be used
interchangeably but double quotes are preferred (and character
constants are printed using double quotes), so single quotes are
normally only used to delimit character constants containing double
quotes.

Backslash is used to start an escape sequence inside character constants.
Unless specified in the following table, an escaped character is
interpreted as the character itself.  (Note that the parser will warn
about most such uses, as they are most often erroneous, e.g.
using \samp{\bsl{}.} where \samp{\bsl{}\bsl{}.} was intended.)

Single quotes need to be escaped by backslash in single-quoted
strings, and double quotes in double-quoted strings.


\Tabular{ll}{
\samp{\bsl{}n}& newline\\{}
\samp{\bsl{}r}& carriage return\\{}
\samp{\bsl{}t}& tab\\{}
\samp{\bsl{}b}& backspace\\{}
\samp{\bsl{}a}& alert (bell)\\{}
\samp{\bsl{}f}& form feed\\{}
\samp{\bsl{}v}& vertical tab\\{}
\samp{\bsl{}\bsl{}}& backslash \samp{\bsl{}}\\{}
\samp{\bsl{}nnn}& character with given octal code (1, 2 or 3 digits)\\{}
\samp{\bsl{}xnn}& character with given hex code (1 or 2 hex digits)\\{}
\samp{\bsl{}unnnn}& Unicode character with given code (1--4 hex digits)\\{}
\samp{\bsl{}Unnnnnnnn}& Unicode character with given code (1--8 hex digits)\\{}
}
The last two are only supported on versions of \R{} built with MBCS
support: they are an error on other versions.  Alternative forms are
\samp{\bsl{}u\{nnnn\}} and \samp{\bsl{}U\{nnnnnnnn\}}.  All except the Unicode
escape sequences are also supported when reading character strings by
\code{\LinkA{scan}{scan}} and \code{\LinkA{read.table}{read.table}} if
\code{allowEscapes = TRUE}.  On most platforms they can be used to
enter Unicode characters not in the current locale (which will be
stored internally in UTF-8).

These forms will also be used by \code{\LinkA{print.default}{print.default}}
when outputting non-printable characters (including backslash).

Embedded nuls are not allowed in character strings, so using escapes
(such as \samp{\bsl{}0}) for a nul will result in the string being
truncated at that point (usually with a warning).
\end{Section}
%
\begin{Section}{Names and Identifiers}
Identifiers consist of a sequence of letters, digits, the period
(\code{.}) and the underscore.  They must not start with a digit nor
underscore, nor with a period followed by a digit.  \LinkA{Reserved}{Reserved}
words are not valid identifiers.

The definition of a \emph{letter} depends on the current locale, but
only ASCII digits are considered to be digits.

Such identifiers are also known as \emph{syntactic names} and may be used
directly in \R{} code.  Almost always, other names can be used
provided they are quoted.  The preferred quote is the backtick
(\samp{`}), and \code{\LinkA{deparse}{deparse}} will normally use it, but under
many circumstances single or double quotes can be used (as a character
constant will often be converted to a name).  One place where
backticks may be essential is to delimit variable names in formulae:
see \code{\LinkA{formula}{formula}}.
\end{Section}
%
\begin{SeeAlso}\relax
\code{\LinkA{Syntax}{Syntax}} for other aspects of the syntax.

\code{\LinkA{sQuote}{sQuote}} for quoting English text.

\code{\LinkA{shQuote}{shQuote}} for quoting OS commands.

The \emph{R Language Definition} manual.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{R.Version}{Version Information}{R.Version}
\aliasA{R.version}{R.Version}{R.version}
\methaliasA{R.version.string}{R.Version}{R.version.string}
\aliasA{version}{R.Version}{version}
\keyword{environment}{R.Version}
\keyword{sysdata}{R.Version}
\keyword{programming}{R.Version}
%
\begin{Description}\relax
\code{R.Version()} provides detailed information about the version of
\R{} running.

\code{R.version} is a variable (a \code{\LinkA{list}{list}}) holding this
information (and \code{version} is a copy of it for S compatibility).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
R.Version()
R.version
R.version.string
version
\end{verbatim}
\end{Usage}
%
\begin{Value}
\code{R.Version} returns a list with character-string components
\begin{ldescription}
\item[\code{platform}] the platform for which \R{} was built.  A triplet of the
form CPU-VENDOR-OS, as determined by the configure script.  E.g,
\code{"i586-unknown-linux"} or \code{"i386-pc-mingw32"}.

\item[\code{arch}] the architecture (CPU) \R{} was built on/for.
\item[\code{os}] the underlying operating system
\item[\code{system}] CPU and OS, separated by a comma.
\item[\code{status}] the status of the version (e.g., \code{"Alpha"})
\item[\code{major}] the major version number
\item[\code{minor}] the minor version number, including the patchlevel
\item[\code{year}] the year the version was released
\item[\code{month}] the month the version was released
\item[\code{day}] the day the version was released
\item[\code{svn rev}] the Subversion revision number, which should be either
\code{"unknown"} or a single number. (A range of numbers or a number
with \samp{M} or \samp{S} appended indicates inconsistencies in the
sources used to build this version of \R{}.)

\item[\code{language}] always \code{"R"}.
\item[\code{version.string}] a
\code{\LinkA{character}{character}} string concatenating some of the info above,
useful for plotting, etc.

\end{ldescription}
\code{R.version} and \code{version} are lists of class
\code{"simple.list"} which has a \code{print} method.
\end{Value}
%
\begin{Note}\relax
Do \emph{not} use \code{R.version\$os} to test the platform the
code is running on: use \code{.Platform\$OS.type} instead.  Slightly
different versions of the OS may report different values of
\code{R.version\$os}, as may different versions of \R{}.

\code{R.version.string} is a copy of \code{R.version\$version.string}
for simplicity and backwards compatibility.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{sessionInfo}{sessionInfo}} which provides additional information;
\code{\LinkA{getRversion}{getRversion}} typically used inside R code,
\code{\LinkA{.Platform}{.Platform}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

R.version$os # to check how lucky you are ...
plot(0) # any plot
mtext(R.version.string, side=1,line=4,adj=1)# a useful bottom-right note
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Random}{Random Number Generation}{Random}
\aliasA{.Random.seed}{Random}{.Random.seed}
\aliasA{RNG}{Random}{RNG}
\aliasA{RNGkind}{Random}{RNGkind}
\aliasA{RNGversion}{Random}{RNGversion}
\aliasA{set.seed}{Random}{set.seed}
\keyword{distribution}{Random}
\keyword{sysdata}{Random}
%
\begin{Description}\relax
\code{.Random.seed} is an integer vector, containing the random number
generator (RNG) \bold{state} for random number generation in \R{}.  It
can be saved and restored, but should not be altered by the user.

\code{RNGkind} is a more friendly interface to query or set the kind
of RNG in use.

\code{RNGversion} can be used to set the random generators as they
were in an earlier \R{} version (for reproducibility).

\code{set.seed} is the recommended way to specify seeds.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.Random.seed <- c(rng.kind, n1, n2, ...)
save.seed <- .Random.seed

RNGkind(kind = NULL, normal.kind = NULL)
RNGversion(vstr)
set.seed(seed, kind = NULL, normal.kind = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{kind}] character or \code{NULL}.  If \code{kind} is a character
string, set \R{}'s RNG to the kind desired.  Use \code{"default"} to
return to the \R{} default.  See `Details' for the
interpretation of \code{NULL}.
\item[\code{normal.kind}] character string or \code{NULL}.  If it is a character
string, set the method of Normal generation.  Use \code{"default"}
to return to the \R{} default.  \code{NULL} makes no change.
\item[\code{seed}] a single value, interpreted as an integer.
\item[\code{vstr}] a character string containing a version number,
e.g., \code{"1.6.2"}
\item[\code{rng.kind}] integer code in \code{0:k} for the above \code{kind}.
\item[\code{n1, n2, ...}] integers.  See the details for how many are required
(which depends on \code{rng.kind}).
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The currently available RNG kinds are given below.  \code{kind} is
partially matched to this list.  The default is
\code{"Mersenne-Twister"}.
\begin{description}

\item[\code{"Wichmann-Hill"}] 
The seed, \code{.Random.seed[-1] == r[1:3]} is an integer vector of
length 3, where each \code{r[i]} is in \code{1:(p[i] - 1)}, where
\code{p} is the length 3 vector of primes, \code{p = (30269, 30307,
      30323)}.
The Wichmann--Hill generator has a cycle length of
\eqn{6.9536 \times 10^{12}}{} (=
\code{prod(p-1)/4}, see \emph{Applied Statistics} (1984)
\bold{33}, 123 which corrects the original article).

\item[\code{"Marsaglia-Multicarry"}:] 
A \emph{multiply-with-carry} RNG is used, as recommended by George
Marsaglia in his post to the mailing list \file{sci.stat.math}.
It has a period of more than \eqn{2^{60}}{} and has passed
all tests (according to Marsaglia).  The seed is two integers (all
values allowed).

\item[\code{"Super-Duper"}:] 
Marsaglia's famous Super-Duper from the 70's.  This is the original
version which does \emph{not} pass the MTUPLE test of the Diehard
battery.  It has a period of \eqn{\approx 4.6\times 10^{18}}{} for most initial seeds.  The seed is two integers (all
values allowed for the first seed: the second must be odd).

We use the implementation by Reeds et al.\bsl{} (1982--84).

The two seeds are the Tausworthe and congruence long integers,
respectively.  A one-to-one mapping to S's \code{.Random.seed[1:12]}
is possible but we will not publish one, not least as this generator
is \bold{not} exactly the same as that in recent versions of S-PLUS.

\item[\code{"Mersenne-Twister":}] 
From Matsumoto and Nishimura (1998). A twisted GFSR with period
\eqn{2^{19937} - 1}{} and equidistribution in 623
consecutive dimensions (over the whole period).  The `seed' is a
624-dimensional set of 32-bit integers plus a current position in
that set.


\item[\code{"Knuth-TAOCP-2002":}] 
A 32-bit integer GFSR using lagged Fibonacci sequences with
subtraction.  That is, the recurrence used is
\deqn{X_j = (X_{j-100} - X_{j-37}) \bmod 2^{30}%
      }{}
and the `seed' is the set of the 100 last numbers (actually
recorded as 101 numbers, the last being a cyclic shift of the
buffer).  The period is around \eqn{2^{129}}{}.


\item[\code{"Knuth-TAOCP":}] 
An earlier version from Knuth (1997).

The 2002 version was not backwards compatible with the earlier
version: the initialization of the GFSR from the seed was altered.
\R{} did not allow you to choose consecutive seeds, the reported
`weakness', and already scrambled the seeds.

Initialization of this generator is done in interpreted \R{} code
and so takes a short but noticeable time.


\item[\code{"user-supplied":}] 
Use a user-supplied generator. See \code{\LinkA{Random.user}{Random.user}} for
details.


\end{description}


\code{normal.kind} can be \code{"Kinderman-Ramage"},
\code{"Buggy Kinderman-Ramage"} (not for \code{set.seed}),
\code{"Ahrens-Dieter"}, \code{"Box-Muller"}, \code{"Inversion"} (the
default), or \code{"user-supplied"}.  (For inversion, see the
reference in \code{\LinkA{qnorm}{qnorm}}.)  The Kinderman-Ramage generator
used in versions prior to 1.7.1 (now called \code{"Buggy"} had several
approximation errors and should only be used for reproduction of older
results.  The \code{"Box-Muller"} generator is stateful as pairs of
normals are generated and returned sequentially.  The state is reset
whenever it is selected (even if it is the current normal generator)
and when \code{kind} is changed.

\code{set.seed} uses its single integer argument to set as many seeds
as are required.  It is intended as a simple way to get quite different
seeds by specifying small integer arguments, and also as a way to get
valid seed sets for the more complicated methods (especially
\code{"Mersenne-Twister"} and \code{"Knuth-TAOCP"}).

The use of \code{kind=NULL} or \code{normal.kind=NULL} in
\code{RNGkind} or \code{set.seed} selects the currently-used
generator (including that used in the previous session if the
workspace has been restored): if no generator has been used it selects
\code{"default"}.
\end{Details}
%
\begin{Value}
\code{.Random.seed} is an \code{\LinkA{integer}{integer}} vector whose first
element \emph{codes} the kind of RNG and normal generator. The lowest
two decimal digits are in \code{0:(k-1)}
where \code{k} is the number of available RNGs.  The hundreds
represent the type of normal generator (starting at \code{0}).

In the underlying C, \code{.Random.seed[-1]} is \code{unsigned};
therefore in \R{} \code{.Random.seed[-1]} can be negative, due to
the representation of an unsigned integer by a signed integer.

\code{RNGkind} returns a two-element character vector of the RNG and
normal kinds selected \emph{before} the call, invisibly if either
argument is not \code{NULL}.  A type starts a session as the default,
and is selected either by a call to \code{RNGkind} or by setting
\code{.Random.seed} in the workspace.

\code{RNGversion} returns the same information as \code{RNGkind} about
the defaults in a specific \R{} version.

\code{set.seed} returns \code{NULL}, invisibly.
\end{Value}
%
\begin{Note}\relax
Initially, there is no seed;  a new one is created from the current
time when one is required.  Hence, different sessions started at
(sufficiently) different times will give different simulation results,
by default.  However, the seed might be restored from a previous
session if a previously saved workspace is restored.

\code{.Random.seed} saves the seed set for the uniform random-number
generator, at least for the system generators.  It does not
necessarily save the state of other generators, and in particular does
not save the state of the Box--Muller normal generator.  If you want
to reproduce work later, call \code{set.seed} (preferably with
explicit values for \code{kind} and \code{normal.kind}) rather than
set \code{.Random.seed}.

The object \code{.Random.seed} is only looked for in the user's
workspace.

Do not rely on randomness of low-order bits from RNGs.  Most of the
supplied uniform generators return 32-bit integer values that are
converted to doubles, so they take at most \eqn{2^{32}}{} distinct
values and long runs will return duplicated values (Wichmann-Hill is
the exception, and all give at least 30 varying bits.)
\end{Note}
%
\begin{Author}\relax
of RNGkind: Martin Maechler. Current implementation, B. D. Ripley
\end{Author}
%
\begin{References}\relax
Ahrens, J. H. and Dieter, U. (1973)
Extensions of Forsythe's method for random sampling from the normal
distribution.
\emph{Mathematics of Computation} \bold{27}, 927-937.

Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (\code{set.seed}, storing in \code{.Random.seed}.)

Box, G. E. P. and Muller, M. E. (1958) A note on the generation of normal
random deviates. \emph{Annals of Mathematical Statistics} \bold{29},
610--611.

De Matteis, A. and Pagnutti, S. (1993)
\emph{Long-range Correlation Analysis of the Wichmann-Hill Random
Number Generator}, Statist. Comput., \bold{3}, 67--70.

Kinderman, A. J. and Ramage, J. G. (1976)
Computer generation of normal random variables.
\emph{Journal of the American Statistical Association} \bold{71},
893-896.

Knuth, D. E. (1997)
\emph{The Art of Computer Programming.} Volume 2, third edition.\\{}
Source code at \url{http://www-cs-faculty.stanford.edu/~knuth/taocp.html}.

Knuth, D. E. (2002)
\emph{The Art of Computer Programming.} Volume 2, third edition, ninth
printing.\\{}
See \url{http://Sunburn.Stanford.EDU/~knuth/news02.html}.

Marsaglia, G. (1997) \emph{A random number generator for C.} Discussion
paper, posting on Usenet newsgroup \code{sci.stat.math} on
September 29, 1997.

Marsaglia, G. and Zaman, A. (1994) Some portable very-long-period
random number generators. \emph{Computers in Physics}, \bold{8},
117--121.

Matsumoto, M. and Nishimura, T. (1998)
Mersenne Twister: A 623-dimensionally equidistributed uniform
pseudo-random number generator,
\emph{ACM Transactions on Modeling and Computer Simulation},
\bold{8}, 3--30.\\{}
Source code at \url{http://www.math.keio.ac.jp/~matumoto/emt.html}.

Reeds, J., Hubert, S. and Abrahams, M. (1982--4) C implementation of
SuperDuper, University of California at Berkeley.  (Personal
communication from Jim Reeds to Ross Ihaka.)

Wichmann, B. A.  and Hill, I. D. (1982)
\emph{Algorithm AS 183: An Efficient and Portable Pseudo-random Number
Generator}, Applied Statistics, \bold{31}, 188--190; Remarks:
\bold{34}, 198 and \bold{35}, 89.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{runif}{runif}}, \code{\LinkA{rnorm}{rnorm}}, \ldots.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

## the default random seed is 626 integers, so only print a few
runif(1); .Random.seed[1:6]; runif(1); .Random.seed[1:6]
## If there is no seed, a "random" new one is created:
rm(.Random.seed); runif(1); .Random.seed[1:6]

ok <- RNGkind()
RNGkind("Wich")# (partial string matching on 'kind')

## This shows how 'runif(.)' works for Wichmann-Hill,
## using only R functions:

p.WH <- c(30269, 30307, 30323)
a.WH <- c(  171,   172,   170)
next.WHseed <- function(i.seed = .Random.seed[-1])
  { (a.WH * i.seed) %% p.WH }
my.runif1 <- function(i.seed = .Random.seed)
  { ns <- next.WHseed(i.seed[-1]); sum(ns / p.WH) %% 1 }
rs <- .Random.seed
(WHs <- next.WHseed(rs[-1]))
u <- runif(1)
stopifnot(
 next.WHseed(rs[-1]) == .Random.seed[-1],
 all.equal(u, my.runif1(rs))
)

## ----
.Random.seed
RNGkind("Super")#matches  "Super-Duper"
RNGkind()
.Random.seed # new, corresponding to  Super-Duper

## Reset:
RNGkind(ok[1])

## ----
sum(duplicated(runif(1e6))) # around 110 for default generator
## and we would expect about almost sure duplicates beyond about
qbirthday(1-1e-6, classes=2e9) # 235,000
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Random.user}{User-supplied Random Number Generation}{Random.user}
\keyword{distribution}{Random.user}
\keyword{sysdata}{Random.user}
%
\begin{Description}\relax
Function \code{\LinkA{RNGkind}{RNGkind}} allows user-coded uniform and
normal random number generators to be supplied.  The details are given
here.
\end{Description}
%
\begin{Details}\relax
A user-specified uniform RNG is called from entry points in
dynamically-loaded compiled code. The user must supply the entry point
\code{user\_unif\_rand}, which takes no arguments and returns a
\emph{pointer to} a double. The example below will show the general
pattern.

Optionally, the user can supply the entry point \code{user\_unif\_init},
which is called with an \code{unsigned int} argument when
\code{\LinkA{RNGkind}{RNGkind}} (or \code{set.seed}) is called, and is intended
to be used to initialize the user's RNG code. The argument is intended
to be used to set the `seeds'; it is the \code{seed} argument to
\code{set.seed} or an essentially random seed if \code{\LinkA{RNGkind}{RNGkind}}
is called.

If only these functions are supplied, no information about the
generator's state is recorded in \code{.Random.seed}.  Optionally,
functions \code{user\_unif\_nseed} and \code{user\_unif\_seedloc} can be
supplied which are called with no arguments and should return pointers
to the number of seeds and to an integer (specifically, \samp{Int32})
array of seeds.  Calls to \code{GetRNGstate} and \code{PutRNGstate}
will then copy this array to and from \code{.Random.seed}.

A user-specified normal RNG is specified by a single entry point
\code{user\_norm\_rand}, which takes no arguments and returns a
\emph{pointer to} a double.
\end{Details}
%
\begin{Section}{Warning}
As with all compiled code, mis-specifying these
functions can crash \R{}.  Do include the \file{R\_ext/Random.h}
header file for type checking.
\end{Section}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
##  Marsaglia's congruential PRNG
#include <R_ext/Random.h>

static Int32 seed;
static double res;
static int nseed = 1;

double * user_unif_rand()
{
    seed = 69069 * seed + 1;
    res = seed * 2.32830643653869e-10;
    return &res;
}

void  user_unif_init(Int32 seed_in) { seed = seed_in; }
int * user_unif_nseed() { return &nseed; }
int * user_unif_seedloc() { return (int *) &seed; }

/*  ratio-of-uniforms for normal  */
#include <math.h>
static double x;

double * user_norm_rand()
{
    double u, v, z;
    do {
        u = unif_rand();
        v = 0.857764 * (2. * unif_rand() - 1);
        x = v/u; z = 0.25 * x * x;
        if (z < 1. - u) break;
        if (z > 0.259/u + 0.35) continue;
    } while (z > -log(u));
    return &x;
}

## Use under Unix:
R CMD SHLIB urand.c
R
> dyn.load("urand.so")
> RNGkind("user")
> runif(10)
> .Random.seed
> RNGkind(, "user")
> rnorm(10)
> RNGkind()
[1] "user-supplied" "user-supplied"

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{range}{Range of Values}{range}
\methaliasA{range.default}{range}{range.default}
\keyword{univar}{range}
\keyword{arith}{range}
%
\begin{Description}\relax
\code{range} returns a vector containing the minimum and maximum of
all the given arguments.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
range(..., na.rm = FALSE)

## Default S3 method:
range(..., na.rm = FALSE, finite = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] any \code{\LinkA{numeric}{numeric}} or character objects.
\item[\code{na.rm}] logical, indicating if \code{\LinkA{NA}{NA}}'s should be
omitted.
\item[\code{finite}] logical, indicating if all non-finite elements should
be omitted.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{range} is a generic function: methods can be defined for it
directly or via the \code{\LinkA{Summary}{S3groupGeneric}} group generic.
For this to work properly, the arguments \code{...} should be
unnamed, and dispatch is on the first argument.

If \code{na.rm} is \code{FALSE}, \code{NA}
and \code{NaN} values in any of the arguments will cause \code{NA} values
to be returned, otherwise \code{NA} values are ignored.

If \code{finite} is \code{TRUE}, the minimum
and maximum of all finite values is computed, i.e.,
\code{finite=TRUE} \emph{includes} \code{na.rm=TRUE}.

A special situation occurs when there is no (after omission
of \code{NA}s) nonempty argument left, see \code{\LinkA{min}{min}}.
\end{Details}
%
\begin{Section}{S4 methods}
This is part of the S4 \code{\LinkA{Summary}{S4groupGeneric}}
group generic.  Methods for it must use the signature
\code{x, ..., na.rm}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{min}{min}}, \code{\LinkA{max}{max}}.

The \code{\LinkA{extendrange}{extendrange}()} utility in package \pkg{grDevices}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(r.x <- range(stats::rnorm(100)))
diff(r.x) # the SAMPLE range

x <- c(NA, 1:3, -1:1/0); x
range(x)
range(x, na.rm = TRUE)
range(x, finite = TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{rank}{Sample Ranks}{rank}
\keyword{univar}{rank}
%
\begin{Description}\relax
Returns the sample ranks of the values in a vector.  Ties (i.e., equal
values) and missing values can be handled in several ways.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rank(x, na.last = TRUE,
     ties.method = c("average", "first", "random", "max", "min"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric, complex, character or logical vector.
\item[\code{na.last}] for controlling the treatment of \code{\LinkA{NA}{NA}}s.
If \code{TRUE}, missing values in the data are put last; if
\code{FALSE}, they are put first; if \code{NA}, they are removed; if
\code{"keep"} they are kept with rank \code{NA}.
\item[\code{ties.method}] a character string specifying how ties are treated,
see `Details'; can be abbreviated.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If all components are different (and no \code{NA}s), the ranks are
well defined, with values in \code{seq\_len(x)}.  With some values equal
(called `ties'), the argument \code{ties.method} determines the
result at the corresponding indices. The \code{"first"} method results
in a permutation with increasing values at each index set of ties.
The \code{"random"} method puts these in random order whereas the
default, \code{"average"}, replaces them by their mean, and
\code{"max"} and \code{"min"} replaces them by their maximum and
minimum respectively, the latter being the typical sports
ranking.

\code{NA} values are never considered to be equal: for \code{na.last =
    TRUE} and \code{na.last = FALSE} they are given distinct ranks in
the order in which they occur in \code{x}.

\strong{NB}: \code{rank} is not itself generic but \code{\LinkA{xtfrm}{xtfrm}}
is, and \code{rank(xtfrm(x), ....)} will have the desired result if
there is a \code{xtfrm} method.  Otherwise, \code{rank} will make use
of \code{==}, \code{>} and \code{is.na} methods for classed objects,
possibly rather slowly.
\end{Details}
%
\begin{Value}
A numeric vector of the same length as \code{x} with names copied from
\code{x} (unless \code{na.last = NA}, when missing values are
removed).  The vector is of integer type unless \code{ties.method =
    "average"} when it is of double type (whether or not there are any ties).
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{order}{order}} and \code{\LinkA{sort}{sort}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(r1 <- rank(x1 <- c(3, 1, 4, 15, 92)))
x2 <- c(3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5)
names(x2) <- letters[1:11]
(r2 <- rank(x2)) # ties are averaged

## rank() is "idempotent": rank(rank(x)) == rank(x) :
stopifnot(rank(r1) == r1, rank(r2) == r2)

## ranks without averaging
rank(x2, ties.method= "first")  # first occurrence wins
rank(x2, ties.method= "random") # ties broken at random
rank(x2, ties.method= "random") # and again

## keep ties ties, no average
(rma <- rank(x2, ties.method= "max"))  # as used classically
(rmi <- rank(x2, ties.method= "min"))  # as in Sports
stopifnot(rma + rmi == round(r2 + r2))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{rapply}{Recursively Apply a Function to a List}{rapply}
\keyword{iteration}{rapply}
\keyword{list}{rapply}
%
\begin{Description}\relax
\code{rapply} is a recursive version of \code{\LinkA{lapply}{lapply}}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rapply(object, f, classes = "ANY", deflt = NULL,
       how = c("unlist", "replace", "list"), ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] A list.
\item[\code{f}] A function of a single argument.
\item[\code{classes}] A character vector of \code{\LinkA{class}{class}} names, or
\code{"ANY"} to match any class.
\item[\code{deflt}] The default result (not used if \code{how = "replace"}).
\item[\code{how}] A character string matching the three possibilities given:
see `Details'.
\item[\code{...}] additional arguments passed to the call to \code{f}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function has two basic modes.  If \code{how = "replace"}, each
element of the list which is not itself a list and has a class
included in \code{classes} is replaced by the result of applying
\code{f} to the element.

If the mode is \code{how = "list"} or \code{how = "unlist"}, the list
is copied, all non-list elements which have a class included in
\code{classes} are replaced by the result of applying \code{f} to the
element and all others are replaced by \code{deflt}.  Finally, if
\code{how = "unlist"}, \code{unlist(recursive = TRUE)} is called on
the result.

The semantics differ in detail from \code{\LinkA{lapply}{lapply}}: in
particular the arguments are evaluated before calling the C code.
\end{Details}
%
\begin{Value}
If \code{how = "unlist"}, a vector, otherwise a list of similar
structure to \code{object}.
\end{Value}
%
\begin{References}\relax
Chambers, J. A. (1998)
\emph{Programming with Data}.
Springer.\\{}
(\code{rapply} is only described briefly there.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{lapply}{lapply}}, \code{\LinkA{dendrapply}{dendrapply}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
X <- list(list(a=pi, b=list(c=1:1)), d="a test")
rapply(X, function(x) x, how="replace")
rapply(X, sqrt, classes="numeric", how="replace")
rapply(X, nchar, classes="character",
       deflt = as.integer(NA), how="list")
rapply(X, nchar, classes="character",
       deflt = as.integer(NA), how="unlist")
rapply(X, nchar, classes="character", how="unlist")
rapply(X, log, classes="numeric", how="replace", base=2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{raw}{Raw Vectors}{raw}
\aliasA{as.raw}{raw}{as.raw}
\aliasA{is.raw}{raw}{is.raw}
\keyword{classes}{raw}
%
\begin{Description}\relax
Creates or tests for objects of type \code{"raw"}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
raw(length = 0)
as.raw(x)
is.raw(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The raw type is intended to hold raw bytes.  It is possible to extract
subsequences of bytes, and to replace elements (but only by elements
of a raw vector).  The relational operators (see \LinkA{Comparison}{Comparison})
work, as do the logical operators (see \LinkA{Logic}{Logic}) with a bitwise
interpretation.

A raw vector is printed with each byte separately represented as a
pair of hex digits.  If you want to see a character representation
(with escape sequences for non-printing characters) use
\code{\LinkA{rawToChar}{rawToChar}}.

Coercion to raw treats the input values as representing a small
(decimal) integers, so the input is first coerced to integer, and then
values which are outside the range \code{[0 ... 255]} or are
\code{NA} are set to \code{0} (the \code{nul} byte).

\code{as.raw} and \code{is.raw} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored.  This may not be true of methods for \code{as.raw}.  
\end{Details}
%
\begin{Value}
\code{raw} creates a raw vector of the specified length.
Each element of the vector is equal to \code{0}.
Raw vectors are used to store fixed-length sequences of bytes.

\code{as.raw} attempts to coerce its argument to be of raw
type.  The (elementwise) answer will be \code{0} unless the
coercion succeeds (or if the original value successfully coerces to 0).

\code{is.raw} returns true if and only if \code{typeof(x) == "raw"}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{charToRaw}{charToRaw}}, \code{\LinkA{rawShift}{rawShift}}, etc.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
xx <- raw(2)
xx[1] <- as.raw(40)     # NB, not just 40.
xx[2] <- charToRaw("A")
xx

x <- "A test string"
(y <- charToRaw(x))
is.vector(y) # TRUE
rawToChar(y)
is.raw(x)
is.raw(y)

isASCII <-  function(txt) all(charToRaw(txt) <= as.raw(127))
isASCII(x)  # true
isASCII("\x9c25.63") # false (in Latin-1, this is an amount in UK pounds)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{rawConnection}{Raw Connections}{rawConnection}
\aliasA{rawConnectionValue}{rawConnection}{rawConnectionValue}
\keyword{file}{rawConnection}
\keyword{connection}{rawConnection}
%
\begin{Description}\relax
Input and output raw connections.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rawConnection(object, open = "r")

rawConnectionValue(con)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] character or raw vector.  A description of the connection. 
For an input this is an \R{} raw vector object, and for an output
connection the name for the connection.

\item[\code{open}] character.  Any of the standard connection open modes.
\item[\code{con}] An output raw connection.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
An input raw connection is opened and the raw vector is copied
at the time the connection object is created, and \code{close}
destroys the copy.

An output raw connection is opened and creates an \R{} raw vector
internally.  The raw vector can be retrieved \emph{via} 
\code{rawConnectionValue}.

If a connection is open for both input and output the initial raw
vector supplied is copied when the connections is open
\end{Details}
%
\begin{Value}
For \code{rawConnection}, a connection object of class
\code{"rawConnection"} which inherits from class \code{"connection"}.

For \code{rawConnectionValue}, a raw vector.
\end{Value}
%
\begin{Note}\relax
As output raw connections keep the internal raw vector up to date
call-by-call, they are relatively expensive to use (although
over-allocation is used), and it may be better to use an anonymous
\code{\LinkA{file}{file}()} connection to collect output.

On (rare) platforms where \code{vsnprintf} does not return the needed length
of output there is a 100,000 character limit on the length of line for
output connections: longer lines will be truncated with a warning.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}, \code{\LinkA{showConnections}{showConnections}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
zz <- rawConnection(raw(0), "r+") # start with empty raw vector
writeBin(LETTERS, zz)
seek(zz, 0)
readLines(zz) # raw vector has embedded nuls
seek(zz, 0)
writeBin(letters[1:3], zz)
rawConnectionValue(zz)
close(zz)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{rawConversion}{Convert to or from Raw Vectors}{rawConversion}
\aliasA{charToRaw}{rawConversion}{charToRaw}
\aliasA{intToBits}{rawConversion}{intToBits}
\aliasA{packBits}{rawConversion}{packBits}
\aliasA{rawShift}{rawConversion}{rawShift}
\aliasA{rawToBits}{rawConversion}{rawToBits}
\aliasA{rawToChar}{rawConversion}{rawToChar}
\keyword{classes}{rawConversion}
%
\begin{Description}\relax
Conversion and manipulation of  objects of type \code{"raw"}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
charToRaw(x)
rawToChar(x, multiple = FALSE)

rawShift(x, n)

rawToBits(x)
intToBits(x)
packBits(x, type = c("raw", "integer"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be converted or shifted.
\item[\code{multiple}] logical: should the conversion be to a single
character string or multiple individual characters?
\item[\code{n}] the number of bits to shift.  Positive numbers shift right
and negative numbers shift left: allowed values are \code{-8 ... 8}.
\item[\code{type}] the result type.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{packBits} accepts raw, integer or logical inputs, the last two
without any NAs.

Note that `bytes' are not necessarily the same as characters,
e.g. in UTF-8 domains.
\end{Details}
%
\begin{Value}
\code{charToRaw} converts a length-one character string to raw bytes.
It does so without taking into account any declared encoding (see
\code{\LinkA{Encoding}{Encoding}}).

\code{rawToChar} converts raw bytes either to a single character
string or a character vector of single bytes (with \code{""} for
\code{0}).  (Note that a single character string could contain
embedded nuls, in which case it will be truncated at the first nul
with a warning.)  In either case it is possible to create a result
which is invalid in a multibyte locale, e.g. one using UTF-8.

\code{rawShift(x,n)} shift the bits in \code{x} by \code{n} positions
to the right, see the argument \code{n}, above.

\code{rawToBits} returns a raw vector of 8 times the length of a raw
vector with entries 0 or 1.  \code{intToBits} returns a raw vector
of 32 times the length of an integer vector with entries 0 or 1.
(Non-integral numeric values are truncated to integers.) In
both cases the unpacking is least-significant bit first.

\code{packBits} packs its input (using only the lowest bit for raw or
integer vectors) least-significant bit first to a raw or integer vector.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
x <- "A test string"
(y <- charToRaw(x))
is.vector(y) # TRUE

rawToChar(y)
rawToChar(y, multiple = TRUE)
(xx <- c(y, as.raw(0), charToRaw("more")))
rawToChar(xx)
xxx <- xx
xxx[length(y)+1] <- charToRaw("&")
xxx
rawToChar(xxx)

rawShift(y, 1)
rawShift(y, -2)

rawToBits(y)

showBits <- function(r) stats::symnum(as.logical(rawToBits(r)))

z <- as.raw(5)
z ; showBits(z)
showBits(rawShift(z, 1)) # shift to right
showBits(rawShift(z, 2))
showBits(z)
showBits(rawShift(z, -1)) # shift to left
showBits(rawShift(z, -2)) # ..
showBits(rawShift(z, -3)) # shifted off entirely
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{RdUtils}{Utilities for Processing Rd Files}{RdUtils}
\aliasA{Rd2dvi}{RdUtils}{Rd2dvi}
\aliasA{Rd2pdf}{RdUtils}{Rd2pdf}
\aliasA{Rdconv}{RdUtils}{Rdconv}
\aliasA{Sd2Rd}{RdUtils}{Sd2Rd}
\keyword{utilities}{RdUtils}
%
\begin{Description}\relax
Utilities for converting files in R documentation (Rd) format to other
formats or create indices from them, and for converting documentation
in other formats to Rd format.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
R CMD Rdconv [options] file
R CMD Rd2dvi [options] files
R CMD Rd2pdf [options] files
R CMD Sd2Rd [options] file
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] the path to a file to be processed.
\item[\code{files}] a list of file names specifying the R documentation
sources to use, by either giving the paths to the files, or the path
to a directory with the sources of a package.
\item[\code{options}] further options to control the processing, or for
obtaining information about usage and version of the utility.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\command{R CMD Rdconv} converts Rd format to plain text, HTML or LaTeX
formats: it can also extract the examples.

\command{R CMD Rd2dvi} is the user-level program for producing DVI/PDF output
from Rd sources.  It will make use of the environment variables
\env{R\_PAPERSIZE} (set by \command{R CMD}, with a default set when \R{}
was installed) and \env{xdvi} (the DVI previewer, default
\command{xdvi}),
and \env{R\_PDFVIEWER} (the PDF previewer).  (Valid values for
\env{R\_PAPERSIZE} are \code{a4}, \code{letter}, \code{legal} and
\code{executive}.)  \command{Rd2pdf} is shorthand for \command{Rd2dvi
--pdf}.

\command{R CMD Sd2Rd} converts S (version 3 or 4) documentation formats to Rd
format: it is no longer much used and the results may need
hand-tuning.  (It requires Perl.)

Use \command{R CMD \var{foo} --help} to obtain usage information on utility
\code{\var{foo}}.
\end{Details}
%
\begin{SeeAlso}\relax
The chapter ``Processing Rd format'' in the ``Writing \R{}
Extensions'' manual.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{readBin}{Transfer Binary Data To and From Connections}{readBin}
\aliasA{writeBin}{readBin}{writeBin}
\keyword{file}{readBin}
\keyword{connection}{readBin}
%
\begin{Description}\relax
Read binary data from a connection, or write binary data to a connection.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
readBin(con, what, n = 1L, size = NA_integer_, signed = TRUE,
        endian = .Platform$endian)

writeBin(object, con, size = NA_integer_,
         endian = .Platform$endian, useBytes = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{con}] A connection object or a character string naming a file or
a raw vector.
\item[\code{what}] Either an object whose mode will give the mode of the
vector to be read, or a character vector of length one describing
the mode: one of \code{"numeric"}, \code{"double"},
\code{"integer"}, \code{"int"}, \code{"logical"}, \code{"complex"},
\code{"character"}, \code{"raw"}.
\item[\code{n}] integer.  The (maximal) number of records to be
read.  You can use an over-estimate here, but not too large as
storage is reserved for \code{n} items.
\item[\code{size}] integer.  The number of bytes per element in the byte
stream.  The default, \code{NA\_integer\_}, uses the natural size.
Size changing is not supported for raw and complex vectors.
\item[\code{signed}] logical. Only used for integers of sizes 1 and 2,
when it determines if the quantity on file
should be regarded as a signed or unsigned integer.
\item[\code{endian}] The endian-ness (\code{"big"} or \code{"little"} of the
target system for the file.  Using \code{"swap"} will force swapping
endian-ness.
\item[\code{object}] An \R{} object to be written to the connection.
\item[\code{useBytes}] See \code{\LinkA{writeLines}{writeLines}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{con} is a character string, the functions call
\code{\LinkA{file}{file}} to obtain an file connection which is opened for
the duration of the function call.

If the connection is open it is read/written from its current
position.  If it is not open, it is opened for the duration of the
call in an appropriate mode (binary read or write) and then closed
again.  An open connection must be in binary mode.

If \code{readBin} is called with \code{con} a raw vector, the data in
the vector is used as input.  If \code{writeBin} is called with
\code{con} a raw vector, it is just an indication that a raw vector
should be returned.

If \code{size} is specified and not the natural size of the object,
each element of the vector is coerced to an appropriate type before
being written or as it is read.  Possible sizes are 1, 2, 4 and
possibly 8 for integer or logical vectors, and 4, 8 and possibly 12/16
for numeric vectors.  (Note that coercion occurs as signed types
except if \code{signed = FALSE} when reading integers of sizes 1 and 2.)
Changing sizes is unlikely to preserve \code{NA}s, and the extended
precision sizes are unlikely to be portable across platforms.

\code{readBin} and \code{writeBin} read and write C-style
zero-terminated character strings.  Input strings are limited to 10000
characters.  \code{\LinkA{readChar}{readChar}} and \code{\LinkA{writeChar}{writeChar}} can
be used to read and write fixed-length strings.  No check is made that
the string is valid in the current locale.

Handling \R{}'s missing and special (\code{Inf}, \code{-Inf} and
\code{NaN}) values is discussed in the \emph{R Data Import/Export} manual.
\end{Details}
%
\begin{Value}
For \code{readBin}, a vector of appropriate mode and length the number of
items read (which might be less than \code{n}).

For \code{writeBin}, a raw vector (if \code{con} is a raw vector) or
invisibly \code{NULL}.
\end{Value}
%
\begin{Note}\relax
Integer read/writes of size 8 will be available if either C type
\code{long} is of size 8 bytes or C type \code{long long} exists and
is of size 8 bytes.

Real read/writes of size \code{sizeof(long double)} (usually 12 or 16
bytes) will be available only if that type is available and different
from \code{double}.

If \code{readBin(what = character())} is used incorrectly on a file
which does not contain C-style character strings, warnings (usually
many) are given.  From a file or connection, the input will be broken
into pieces of length 10000 with any final part being discarded.
\end{Note}
%
\begin{SeeAlso}\relax
The \emph{R Data Import/Export} manual.

\code{readChar} to read/write fixed-length strings.

\code{\LinkA{connections}{connections}}, \code{\LinkA{readLines}{readLines}},
\code{\LinkA{writeLines}{writeLines}}.

\code{\LinkA{.Machine}{.Machine}} for the sizes of \code{long}, \code{long long}
and \code{long double}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
zz <- file("testbin", "wb")
writeBin(1:10, zz)
writeBin(pi, zz, endian="swap")
writeBin(pi, zz, size=4)
writeBin(pi^2, zz, size=4, endian="swap")
writeBin(pi+3i, zz)
writeBin("A test of a connection", zz)
z <- paste("A very long string", 1:100, collapse=" + ")
writeBin(z, zz)
if(.Machine$sizeof.long == 8 || .Machine$sizeof.longlong == 8)
    writeBin(as.integer(5^(1:10)), zz, size = 8)
if((s <-.Machine$sizeof.longdouble) > 8)
    writeBin((pi/3)^(1:10), zz, size = s)
close(zz)

zz <- file("testbin", "rb")
readBin(zz, integer(), 4)
readBin(zz, integer(), 6)
readBin(zz, numeric(), 1, endian="swap")
readBin(zz, numeric(), size=4)
readBin(zz, numeric(), size=4, endian="swap")
readBin(zz, complex(), 1)
readBin(zz, character(), 1)
z2 <- readBin(zz, character(), 1)
if(.Machine$sizeof.long == 8 || .Machine$sizeof.longlong == 8)
    readBin(zz, integer(), 10,  size = 8)
if((s <-.Machine$sizeof.longdouble) > 8)
    readBin(zz, numeric(), 10, size = s)
close(zz)
unlink("testbin")
stopifnot(z2 == z)

## signed vs unsigned ints
zz <- file("testbin", "wb")
x <- as.integer(seq(0, 255, 32))
writeBin(x, zz, size=1)
writeBin(x, zz, size=1)
x <- as.integer(seq(0, 60000, 10000))
writeBin(x, zz, size=2)
writeBin(x, zz, size=2)
close(zz)
zz <- file("testbin", "rb")
readBin(zz, integer(), 8, size=1)
readBin(zz, integer(), 8, size=1, signed=FALSE)
readBin(zz, integer(), 7, size=2)
readBin(zz, integer(), 7, size=2, signed=FALSE)
close(zz)
unlink("testbin")

## use of raw
z <- writeBin(pi^{1:5}, raw(), size = 4)
readBin(z, numeric(), 5, size = 4)
z <- writeBin(c("a", "test", "of", "character"), raw())
rawToChar(z)
readBin(z, character(), 4)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{readChar}{Transfer Character Strings To and From Connections}{readChar}
\aliasA{writeChar}{readChar}{writeChar}
\keyword{file}{readChar}
\keyword{connection}{readChar}
%
\begin{Description}\relax
Transfer character strings to and from connections, without assuming
they are null-terminated on the connection.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
readChar(con, nchars, useBytes = FALSE)

writeChar(object, con, nchars = nchar(object, type="chars"),
          eos = "", useBytes = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{con}] A connection object, or a character string naming a file,
or a raw vector.
\item[\code{nchars}] integer, giving the lengths in characters of (unterminated)
character strings to be read or written.  Must be >= 0 and not
missing.
\item[\code{useBytes}] logical: For \code{readChar}, should \code{nchars} be
regarded as a number of bytes not characters in a multi-byte
locale?  For \code{writeChar}, see \code{\LinkA{writeLines}{writeLines}}.
\item[\code{object}] A character vector to be written to the connection, at
least as long as \code{nchars}.
\item[\code{eos}] `end of string': character string .  The terminator
to be written after each string, followed by an ASCII \code{nul};
use \code{NULL} for no terminator at all.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These functions complement \code{\LinkA{readBin}{readBin}} and
\code{\LinkA{writeBin}{writeBin}} which read and write C-style zero-terminated
character strings.  They are for strings of known length, and
can optionally write an end-of-string mark.  They are intended only
for character strings valid in the current locale.

If \code{con} is a character string, the functions call
\code{\LinkA{file}{file}} to obtain an file connection which is opened for
the duration of the function call.

If the connection is open it is read/written from its current
position.  If it is not open, it is opened for the duration of the
call in an appropriate mode (binary read or write) and then closed
again.  An open connection must be in binary mode.

If \code{readChar} is called with \code{con} a raw vector, the data in
the vector is used as input.  If \code{writeChar} is called with
\code{con} a raw vector, it is just an indication that a raw vector
should be returned.  

Character strings containing ASCII \code{nul}(s) will be read
correctly by \code{readChar} but truncated at the first
\code{nul} with a warning.

If the character length requested for \code{readChar} is longer than
the data available on the connection, what is available is
returned.  For \code{writeChar} if too many characters are requested
the output is zero-padded, with a warning.

Missing strings are written as \code{NA}.
\end{Details}
%
\begin{Value}
For \code{readChar}, a character vector of length the number of
items read (which might be less than \code{length(nchars)}).

For \code{writeChar}, a raw vector (if \code{con} is a raw vector) or
invisibly \code{NULL}.
\end{Value}
%
\begin{Note}\relax
Earlier versions of \R{} allowed embedded nul bytes within character
strings, but not \R{} >= 2.8.0.  \code{readChar} was commonly used to
read fixed-size zero-padded byte fields for which \code{readBin} was
unsuitable.  \code{readChar} can still be used for such fields if
there are no embedded nuls: otherwise \code{readBin(what="raw")}
provides an alternative.

\code{nchars} will be interpreted in bytes not characters in a
non-UTF-8 multi-byte locale, with a warning.

There is little validity checking of UTF-8 reads.
\end{Note}
%
\begin{SeeAlso}\relax
The \emph{R Data Import/Export} manual.

\code{\LinkA{connections}{connections}}, \code{\LinkA{readLines}{readLines}},
\code{\LinkA{writeLines}{writeLines}}, \code{\LinkA{readBin}{readBin}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## test fixed-length strings
zz <- file("testchar", "wb")
x <- c("a", "this will be truncated", "abc")
nc <- c(3, 10, 3)
writeChar(x, zz, nc, eos=NULL)
writeChar(x, zz, eos="\r\n")
close(zz)

zz <- file("testchar", "rb")
readChar(zz, nc)
readChar(zz, nchar(x)+3) # need to read the terminator explicitly
close(zz)
unlink("testchar")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{readline}{Read a Line from the Terminal}{readline}
\keyword{utilities}{readline}
%
\begin{Description}\relax
\code{readline} reads a line from the terminal
\end{Description}
%
\begin{Usage}
\begin{verbatim}
readline(prompt = "")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{prompt}] the string printed when prompting the user for input.
Should usually end with a space \code{" "}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The prompt string will be truncated to a maximum allowed length,
normally 256 chars (but can be changed in the source code).
\end{Details}
%
\begin{Value}
A character vector of length one.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{readLines}{readLines}} for reading text lines of connections,
including files.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
fun <- function() {
  ANSWER <- readline("Are you a satisfied R user? ")
  if (substr(ANSWER, 1, 1) == "n")
    cat("This is impossible.  YOU LIED!\n")
  else
    cat("I knew it.\n")
}
fun()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{readLines}{Read Text Lines from a Connection}{readLines}
\keyword{file}{readLines}
\keyword{connection}{readLines}
%
\begin{Description}\relax
Read some or all text lines from a connection.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
readLines(con = stdin(), n = -1L, ok = TRUE, warn = TRUE,
          encoding = "unknown")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{con}] a connection object or a character string.
\item[\code{n}] integer.  The (maximal) number of lines to
read.  Negative values indicate that one should read up to the end of
input on the connection.
\item[\code{ok}] logical.  Is it OK to reach the end of the connection before
\code{n > 0} lines are read?  If not, an error will be generated.
\item[\code{warn}] logical.  Warn if a text file is missing a final EOL.
\item[\code{encoding}] encoding to be assumed for input strings.  It is
used to mark character strings as known to be in
Latin-1 or UTF-8: it is not used to re-encode the input.  To do the
latter, specify the encoding as part of the connection \code{con} or
via \code{\LinkA{options}{options}(encoding=)}: see the example under
\code{\LinkA{file}{file}}.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If the \code{con} is a character string, the function calls
\code{\LinkA{file}{file}} to obtain a file connection which is opened for
the duration of the function call.  As from \R{} 2.10.0 this can be a
compressed file.

If the connection is open it is read from its current position.  If it
is not open, it is opened in \code{"rt"} mode for the duration of
the call and then closed again.

If the final line is incomplete (no final EOL marker) the behaviour
depends on whether the connection is blocking or not.  For a
non-blocking text-mode connection the incomplete line is pushed back,
silently.  For all other connections the line will be accepted, with a
warning. 

Whatever mode the connection is opened in, any of LF, CRLF or CR will
be accepted as the EOL marker for a line.
\end{Details}
%
\begin{Value}
A character vector of length the number of lines read.

The elements of the result have a declared encoding if \code{encoding} is
\code{"latin1"} or \code{"UTF-8"},
\end{Value}
%
\begin{Note}\relax
The default connection, \code{\LinkA{stdin}{stdin}}, may be different from
\code{con = "stdin"}: see \code{\LinkA{file}{file}}.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}, \code{\LinkA{writeLines}{writeLines}}, \code{\LinkA{readBin}{readBin}},
\code{\LinkA{scan}{scan}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
cat("TITLE extra line", "2 3 5 7", "", "11 13 17", file="ex.data",
    sep="\n")
readLines("ex.data", n=-1)
unlink("ex.data") # tidy up

## difference in blocking
cat("123\nabc", file = "test1")
readLines("test1") # line with a warning

con <- file("test1", "r", blocking = FALSE)
readLines(con) # empty
cat(" def\n", file = "test1", append = TRUE)
readLines(con) # gets both
close(con)

unlink("test1") # tidy up

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{real}{Real Vectors}{real}
\aliasA{as.real}{real}{as.real}
\aliasA{is.real}{real}{is.real}
\keyword{classes}{real}
%
\begin{Description}\relax
These functions are the same as their \code{\LinkA{double}{double}} equivalents
and are provided for backwards compatibility only.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
real(length = 0)
as.real(x, ...)
is.real(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{length}] desired length.
\item[\code{x}] object to be coerced or tested.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{as.real} is a generic function, but S3 methods must be
written for \code{\LinkA{as.double}{as.double}}.  

\code{as.real} and \code{is.real} are \LinkA{primitive}{primitive}, so
positional matching is used and any names of supplied arguments are
ignored.  This may not be true of methods for \code{as.real}.  
\end{Details}
\inputencoding{latin1}
\HeaderA{Recall}{Recursive Calling}{Recall}
\keyword{programming}{Recall}
%
\begin{Description}\relax
\code{Recall} is used as a placeholder for the name of the function
in which it is called.  It allows the definition of recursive
functions which still work after being renamed, see example below.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Recall(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] all the arguments to be passed.
\end{ldescription}
\end{Arguments}
%
\begin{Note}\relax
\code{Recall} will not work correctly when passed as a function
argument, e.g. to the \code{apply} family of functions.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{do.call}{do.call}} and \code{\LinkA{call}{call}}.

\code{\LinkA{local}{local}} for another way to write anonymous recursive functions.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## A trivial (but inefficient!) example:
fib <- function(n)
   if(n<=2) { if(n>=0) 1 else 0 } else Recall(n-1) + Recall(n-2)
fibonacci <- fib; rm(fib)
## renaming wouldn't work without Recall
fibonacci(10) # 55
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{reg.finalizer}{Finalization of Objects}{reg.finalizer}
\keyword{programming}{reg.finalizer}
\keyword{environment}{reg.finalizer}
%
\begin{Description}\relax
Registers an \R{} function to be called upon garbage collection of
object or (optionally) at the end of an \R{} session.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
  reg.finalizer(e, f, onexit = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{e}] Object to finalize. Must be environment or external pointer.
\item[\code{f}] Function to call on finalization. Must accept a single argument,
which will be the object to finalize.
\item[\code{onexit}] logical: should the finalizer be run if the object is
still uncollected at the end of the \R{} session?
\end{ldescription}
\end{Arguments}
%
\begin{Value}
\code{NULL}.
\end{Value}
%
\begin{Note}\relax
The purpose of this function is mainly to allow objects that refer to
external items (a temporary file, say) to perform cleanup actions when
they are no longer referenced from within \R{}.  This only makes sense
for objects that are never copied on assignment, hence the restriction
to environments and external pointers.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{gc}{gc}} and \code{\LinkA{Memory}{Memory}} for garbage collection and
memory management.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
f <- function(e) print("cleaning....")
g <- function(x){ e <- environment(); reg.finalizer(e,f) }
g()
invisible(gc()) # trigger cleanup
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{regex}{Regular Expressions as used in R}{regex}
\aliasA{regexp}{regex}{regexp}
\aliasA{regular expression}{regex}{regular expression}
\keyword{character}{regex}
%
\begin{Description}\relax
This help page documents the regular expression patterns supported by
\code{\LinkA{grep}{grep}} and related functions \code{grepl}, \code{regexpr},
\code{gregexpr}, \code{sub} and \code{gsub}, as well as by
\code{\LinkA{strsplit}{strsplit}}.
\end{Description}
%
\begin{Details}\relax
A `regular expression' is a pattern that describes a set of
strings.  Three types of regular expressions are used in \R{},
\emph{extended} regular expressions, used by
\code{extended = TRUE} (the default), \emph{basic} regular
expressions, as used by \code{extended = FALSE}, and
\emph{Perl-like} regular expressions used by \code{perl = TRUE}.
There is a also \code{fixed = TRUE} which can be considered to use a
\emph{literal} regular expression.

Other functions which use regular expressions (often via the use of
\code{grep}) include \code{apropos}, \code{browseEnv},
\code{help.search}, \code{list.files} and \code{ls}.
These will all use \emph{extended} regular expressions.

Patterns are described here as they would be printed by \code{cat}:
(\emph{do remember that backslashes need to be doubled when entering \R{}
character strings}, e.g. from the keyboard).
\end{Details}
%
\begin{Section}{Extended Regular Expressions}
This section covers the regular expressions allowed in the default
mode of \code{grep}, \code{regexpr}, \code{gregexpr}, \code{sub},
\code{gsub} and \code{strsplit}.  They use an implementation of the
POSIX 1003.2 standard: that allows some scope for interpretation and
the interpretations here are those used as from \R{} 2.10.0.

Regular expressions are constructed analogously to arithmetic
expressions, by using various operators to combine smaller
expressions. The whole expression matches zero or more characters
(read `character' as `byte' if \code{useBytes = TRUE}).

The fundamental building blocks are the regular expressions that match
a single character.  Most characters, including all letters and
digits, are regular expressions that match themselves.  Any
metacharacter with special meaning may be quoted by preceding it with
a backslash.  The metacharacters in EREs are \samp{. \bsl{}
  | ( ) [ \{ \textasciicircum{} \$ * + ?}, but note that whether these have a special
meaning depends on the context.

Escaping non-metacharacters with a backslash is
implementation-dependent.  The current implementation interprets
\samp{\bsl{}a} as \samp{BEL}, \samp{\bsl{}e} as \samp{ESC}, \samp{\bsl{}f} as
\samp{FF}, \samp{\bsl{}n} as \samp{LF}, \samp{\bsl{}r} as \samp{CR} and
\samp{\bsl{}t} as \samp{TAB}.  (Note that these will be interpreted by
\R{}'s parser in literal character strings.)

A \emph{character class} is a list of characters enclosed between
\samp{[} and \samp{]} which matches any single character in that list;
unless the first character of the list is the caret \samp{\textasciicircum{}}, when it
matches any character \emph{not} in the list.  For example, the
regular expression \samp{[0123456789]} matches any single digit, and
\samp{[\textasciicircum{}abc]} matches anything except the characters \samp{a},
\samp{b} or \samp{c}.  A range of characters may be specified by
giving the first and last characters, separated by a hyphen.  (Because
their interpretation is locale- and implementation-dependent, they are
best avoided.)  The only portable way to specify all ASCII letters is
to list them all as the character class
\samp{[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz]}.  (The
current implementation uses numerical order of the encoding: prior to
\R{} 2.10.0 locale-specific collation was used, and might be again.)

Certain named classes of characters are predefined.  Their
interpretation depends on the \emph{locale} (see \LinkA{locales}{locales}); the
interpretation below is that of the POSIX locale.

\begin{description}

\item[\samp{[:alnum:]}] Alphanumeric characters: \samp{[:alpha:]}
and \samp{[:digit:]}.

\item[\samp{[:alpha:]}] Alphabetic characters: \samp{[:lower:]} and
\samp{[:upper:]}.

\item[\samp{[:blank:]}] Blank characters: space and tab. (This is an
extension to the POSIX standard.)

\item[\samp{[:cntrl:]}] 
Control characters.  In ASCII, these characters have octal codes
000 through 037, and 177 (\code{DEL}).  In another character set,
these are the equivalent characters, if any.

\item[\samp{[:digit:]}] Digits: \samp{0 1 2 3 4 5 6 7 8 9}.

\item[\samp{[:graph:]}] Graphical characters: \samp{[:alnum:]} and
\samp{[:punct:]}.

\item[\samp{[:lower:]}] Lower-case letters in the current locale.

\item[\samp{[:print:]}] 
Printable characters: \samp{[:alnum:]}, \samp{[:punct:]} and space.

\item[\samp{[:punct:]}] Punctuation characters:
\samp{! " \# \$ \% \& ' ( ) * + , - . / : ; < = > ? @ [ \bsl{} ] \textasciicircum{} \_ ` \{ | \} \textasciitilde{}}.


\item[\samp{[:space:]}] 
Space characters: tab, newline, vertical tab, form feed, carriage
return, and space.

\item[\samp{[:upper:]}] Upper-case letters in the current locale.

\item[\samp{[:xdigit:]}] Hexadecimal digits:
\samp{0 1 2 3 4 5 6 7 8 9 A B C D E F a b c d e f}.

\end{description}


For example, \samp{[[:alnum:]]} means \samp{[0-9A-Za-z]}, except the
latter depends upon the locale and the character encoding, whereas the
former is independent of locale and character set.  (Note that the
brackets in these class names are part of the symbolic names, and must
be included in addition to the brackets delimiting the bracket list.)
Most metacharacters lose their special meaning inside a character
class.  To include a literal \samp{]}, place it first in the list.
Similarly, to include a literal \samp{\textasciicircum{}}, place it anywhere but first.
Finally, to include a literal \samp{-}, place it first or last (or,
for \code{perl = TRUE} only, precede it by a backslash.).  (Only
\samp{\textasciicircum{} - \bsl{} ]} are special inside character classes.)

The period \samp{.} matches any single character.  The symbol
\samp{\bsl{}w} matches a `word' character (a synonym for
\samp{[[:alnum:]\_]}) and \samp{\bsl{}W} is its negation.  Symbols
\samp{\bsl{}d}, \samp{\bsl{}s}, \samp{\bsl{}D} and \samp{\bsl{}S} denote the digit and
space classes and their negations.

The caret \samp{\textasciicircum{}} and the dollar sign \samp{\$} are metacharacters
that respectively match the empty string at the beginning and end of a
line.  The symbols \samp{\bsl{}<} and \samp{\bsl{}>} match the empty string at
the beginning and end of a word.  The symbol \samp{\bsl{}b} matches the
empty string at either edge of a word, and \samp{\bsl{}B} matches the
empty string provided it is not at an edge of a word.  (The
interpretation of `word' depends on the locale and
implementation.)

A regular expression may be followed by one of several repetition
quantifiers:
\begin{description}

\item[\samp{?}] The preceding item is optional and will be matched
at most once.

\item[\samp{*}] The preceding item will be matched zero or more
times.

\item[\samp{+}] The preceding item will be matched one or more
times.

\item[\samp{\{n\}}] The preceding item is matched exactly \code{n}
times.

\item[\samp{\{n,\}}] The preceding item is matched \code{n} or more
times.

\item[\samp{\{n,m\}}] The preceding item is matched at least \code{n}
times, but not more than \code{m} times.

\end{description}

By default repetition is greedy, so the maximal possible number of
repeats is used.  This can be changed to `minimal' by appending
\code{?} to the quantifier.  (There are further quantifiers that allow
approximate matching: see the TRE documentation.)

Regular expressions may be concatenated; the resulting regular
expression matches any string formed by concatenating the substrings
that match the concatenated subexpressions.

Two regular expressions may be joined by the infix operator \samp{|};
the resulting regular expression matches any string matching either
subexpression.   For example, \samp{abba|cde} matches either the
string \code{abba} or the string \code{cde}.  Note that alternation
does not work inside character classes, where \samp{|} has its literal
meaning.

Repetition takes precedence over concatenation, which in turn takes
precedence over alternation.  A whole subexpression may be enclosed in
parentheses to override these precedence rules.

The backreference \samp{\bsl{}N}, where \samp{N = 1 ... 9}, matches
the substring previously matched by the Nth parenthesized
subexpression of the regular expression.  (This is an
extension for extended regular expressions: POSIX defines them only
for basic ones.)
\end{Section}
%
\begin{Section}{Basic Regular Expressions}
Basic regular expressions are used if \code{extended = FALSE} is
specified.  These are regarded as obsolete and were deprecated in \R{}
2.10.0; you should not rely on their conformance to the quirks
described in POSIX standard.

In basic regular expressions the metacharacters \samp{?}, \samp{+},
\samp{\{}, \samp{|}, \samp{(}, and \samp{)} lose their special meaning;
instead use the backslashed versions \samp{\bsl{}?}, \samp{\bsl{}+},
\samp{\bsl{} \{}, \samp{\bsl{}|}, \samp{\bsl{}(}, and \samp{\bsl{})}.  Thus the
metacharacters are \samp{. \bsl{} [ \textasciicircum{} \$ *}, and \samp{\textasciicircum{} \$} only have a
special meaning at the beginning/end of an expression or parenthesized
subexpression.

Instead, either use \code{fixed = TRUE} to remove all metacharacters
or use extended regular expressions with appropriate escapes for
metacharacters.
\end{Section}
%
\begin{Section}{Perl Regular Expressions}
The \code{perl = TRUE} argument to \code{grep}, \code{regexpr},
\code{gregexpr}, \code{sub}, \code{gsub} and \code{strsplit} switches
to the PCRE library that implements regular expression pattern
matching using the same syntax and semantics as Perl 5.10,
with just a few differences.

For complete details please consult the man pages for PCRE, especially
\command{man pcrepattern} and \command{man pcreapi}), on your system or from
the sources at \url{http://www.pcre.org}. If PCRE support was compiled
from the sources within \R{}, the PCRE version is 8.0 as described here.

Perl regular expressions can be computed byte-by-byte or
(UTF-8) character-by-character: the latter is used in all multibyte
locales and if any of the inputs are marked as UTF-8 (see
\code{\LinkA{Encoding}{Encoding}}).

All the regular expressions described for extended regular expressions
are accepted except \samp{\bsl{}<} and \samp{\bsl{}>}: in Perl all backslashed
metacharacters are alphanumeric and backslashed symbols always are
interpreted as a literal character. \samp{\{} is not special if it
would be the start of an invalid interval specification.  There can be
more than 9 backreferences (but the replacement in \code{\LinkA{sub}{sub}}
can only refer to the first 9).

Character ranges are interpreted in the numerical order of
the characters, either as bytes in a single-byte locale or as Unicode
points in UTF-8 mode.  So in either case \samp{[A-Za-z]} specifies
the set of ASCII letters.

In UTF-8 mode the named character classes only match ASCII characters:
see \samp{\bsl{}p} below for an alternative.

The construct \samp{(?...)} is used for Perl extensions in a variety
of ways depending on what immediately follows the \samp{?}.

Perl-like matching can work in several modes, set by the options
\samp{(?i)} (caseless, equivalent to Perl's \samp{/i}), \samp{(?m)}
(multiline, equivalent to Perl's \samp{/m}), \samp{(?s)} (single line,
so a dot matches all characters, even new lines: equivalent to Perl's
\samp{/s}) and \samp{(?x)} (extended, whitespace data characters are
ignored unless escaped and comments are allowed: equivalent to Perl's
\samp{/x}).  These can be concatenated, so for example, \samp{(?im)}
sets caseless multiline matching.  It is also possible to unset these
options by preceding the letter with a hyphen, and to combine setting
and unsetting such as \samp{(?im-sx)}.  These settings can be applied
within patterns, and then apply to the remainder of the pattern.
Additional options not in Perl include \samp{(?U)} to set
`ungreedy' mode (so matching is minimal unless \samp{?} is used
as part of the repetition quantifier, when it is greedy).  Initially
none of these options are set.

If you want to remove the special meaning from a sequence of
characters, you can do so by putting them between \samp{\bsl{}Q} and
\samp{\bsl{}E}. This is different from Perl in that \samp{\$} and \samp{@} are
handled as literals in \samp{\bsl{}Q...\bsl{}E} sequences in PCRE, whereas in
Perl, \samp{\$} and \samp{@} cause variable interpolation.

The escape sequences \samp{\bsl{}d}, \samp{\bsl{}s} and \samp{\bsl{}w} represent
any decimal digit, space character and `word' character
(letter, digit or underscore in the current locale: in UTF-8 mode only
ASCII letters and digits are considered) respectively, and their
upper-case versions represent their negation.  Unlike POSIX, vertical
tab is not regarded as a space character.  Sequences \samp{\bsl{}h},
\samp{\bsl{}v}, \samp{\bsl{}H} and \samp{\bsl{}V} match horizontal and vertical
space or the negation.  (In UTF-8 mode, these do match non-ASCII
Unicode points.)

There are additional escape sequences: \samp{\bsl{}cx} is
\samp{cntrl-x} for any \samp{x}, \samp{\bsl{}ddd} is the
octal character (for up to three digits unless
interpretable as a backreference, as \samp{\bsl{}1} to \samp{\bsl{}7} always
are), and \samp{\bsl{}xhh} specifies a character by two hex digits.
In a UTF-8 locale, \samp{\bsl{}x\{h...\}} specifies a Unicode point
by one or more hex digits.  (Note that some of these will be
interpreted by \R{}'s parser in literal character strings.)

Outside a character class, \samp{\bsl{}A} matches at the start of a
subject (even in multiline mode, unlike \samp{\textasciicircum{}}), \samp{\bsl{}Z} matches
at the end of a subject or before a newline at the end, \samp{\bsl{}z}
matches only at end of a subject. and \samp{\bsl{}G} matches at first
matching position in a subject (which is subtly different from Perl's
end of the previous match).  \samp{\bsl{}C} matches a single
byte. including a newline, but its use is warned against.  In UTF-8
mode, \samp{\bsl{}R} matches any Unicode newline character (not just CR),
and \samp{\bsl{}X} matches any number of Unicode characters that form an
extended Unicode sequence.

In UTF-8 mode, some Unicode properties are supported via
\samp{\bsl{}p\{xx\}} and \samp{\bsl{}P\{xx\}} which match
characters with and without property \samp{xx} respectively.
For a list of supported properties see the PCRE documentation, but for
example \samp{Lu} is `upper case letter' and \samp{Sc} is
`currency symbol'.

The sequence \samp{(?\#} marks the start of a comment which continues
up to the next closing parenthesis.  Nested parentheses are not
permitted.  The characters that make up a comment play no part at all in
the pattern matching.

If the extended option is set, an unescaped \samp{\#} character outside
a character class introduces a comment that continues up to the next
newline character in the pattern.

The pattern \samp{(?:...)} groups characters just as parentheses do
but does not make a backreference.

Patterns \samp{(?=...)} and \samp{(?!...)} are zero-width positive and
negative lookahead \emph{assertions}: they match if an attempt to
match the \code{...} forward from the current position would succeed
(or not), but use up no characters in the string being processed.
Patterns \samp{(?<=...)} and \samp{(?<!...)} are the lookbehind
equivalents: they do not allow repetition quantifiers nor \samp{\bsl{}C}
in \code{...}.

Named subpatterns, atomic grouping, possessive qualifiers and conditional
and recursive patterns are not covered here.
\end{Section}
%
\begin{Author}\relax
This help page is based on the documentation of GNU grep 2.4.2, the
TRE documentation and the POSIX standard,  and the \code{pcrepattern}
man page from PCRE 8.0.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{grep}{grep}}, \code{\LinkA{apropos}{apropos}}, \code{\LinkA{browseEnv}{browseEnv}},
\code{\LinkA{glob2rx}{glob2rx}}, \code{\LinkA{help.search}{help.search}}, \code{\LinkA{list.files}{list.files}},
\code{\LinkA{ls}{ls}} and \code{\LinkA{strsplit}{strsplit}}.

The TRE documentation at
\url{http://laurikari.net/tre/documentation/regex-syntax/}).

The POSIX 1003.2 standard at
\url{http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html}

The \code{pcrepattern} can be found as part of
\url{http://www.pcre.org/pcre.txt}, and details of Perl's own
implementation at \url{http://perldoc.perl.org/perlre.html}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{remove}{Remove Objects from a Specified Environment}{remove}
\aliasA{rm}{remove}{rm}
\keyword{environment}{remove}
%
\begin{Description}\relax
\code{remove} and \code{rm} can be used to remove objects.  These can
be specified successively as character strings, or in the character
vector \code{list}, or through a combination of both.  All objects
thus specified will be removed.

If \code{envir} is NULL then the currently active environment is
searched first.

If \code{inherits} is \code{TRUE} then parents of the supplied
directory are searched until a variable with the given name is
encountered.  A warning is printed for each variable that is not
found.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
remove(..., list = character(0L), pos = -1,
       envir = as.environment(pos), inherits = FALSE)

rm    (..., list = character(0L), pos = -1,
       envir = as.environment(pos), inherits = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] the objects to be removed, as names (unquoted) or
character strings (quoted).
\item[\code{list}] a character vector naming objects to be removed.
\item[\code{pos}] where to do the removal.  By default, uses the
current environment.  See the details for other possibilities.
\item[\code{envir}] the \code{\LinkA{environment}{environment}} to use. See the details section.
\item[\code{inherits}] should the enclosing frames of the environment be
inspected?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{pos} argument can specify the  environment from which to remove
the objects in any of several ways:
as an integer (the position in the \code{\LinkA{search}{search}} list); as
the character string name of an element in the search list; or as an
\code{\LinkA{environment}{environment}} (including using \code{\LinkA{sys.frame}{sys.frame}} to
access the currently active function calls).
The \code{envir} argument is an alternative way to specify an
environment, but is primarily there for back compatibility.

It is not allowed to remove variables from the base environment and
base name space, nor from any environment which is locked (see
\code{\LinkA{lockEnvironment}{lockEnvironment}}).

Earlier versions of \R{} incorrectly claimed that supplying a character
vector in \code{...} removed the objects named in the character
vector, but it removed the character vector.  Use the \code{list}
argument to specify objects \emph{via} a character vector.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{ls}{ls}}, \code{\LinkA{objects}{objects}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
tmp <- 1:4
## work with tmp  and cleanup
rm(tmp)

## Not run: 
## remove (almost) everything in the working environment.
## You will get no warning, so don't do this unless you are really sure.
rm(list = ls())

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{rep}{Replicate Elements of Vectors and Lists}{rep}
\methaliasA{rep.Date}{rep}{rep.Date}
\methaliasA{rep.factor}{rep}{rep.factor}
\methaliasA{rep.int}{rep}{rep.int}
\methaliasA{rep.POSIXct}{rep}{rep.POSIXct}
\methaliasA{rep.POSIXlt}{rep}{rep.POSIXlt}
\keyword{manip}{rep}
\keyword{chron}{rep}
%
\begin{Description}\relax
\code{rep} replicates the values in \code{x}.  It is a generic
function, and the (internal) default method is described here.

\code{rep.int} is a faster simplified version for the most common case.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rep(x, ...)

rep.int(x, times)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector (of any mode including a list) or a pairlist or a
factor or (except for \code{rep.int}) a \code{POSIXct} or
\code{POSIXlt} or \code{date} object; or also, an S4 object containing
a vector of the above kind.
\item[\code{...}] further arguments to be passed to or from other methods.
For the internal default method these can include:
\begin{description}

\item[\code{times}] A vector giving the number of
times to repeat each element if of length \code{length(x)}, or to
repeat the whole vector if of length 1.
\item[\code{length.out}] non-negative integer. The desired length of the
output vector.  Ignored if \code{NA} or invalid.
\item[\code{each}] non-negative integer.  Each element of \code{x} is
repeated \code{each} times.  Treated as \code{1} if \code{NA} or
invalid.

\end{description}


\item[\code{times}] see \code{...}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The default behaviour is as if the call was \code{rep(x, times=1,
    length.out=NA, each=1)}.  Normally just one of the additional
arguments is specified, but if \code{each} is specified with either
of the other two, its replication is performed first, and then that
implied by \code{times} or \code{length.out}.

If \code{times} consists of a single integer, the result consists of
the whole input repeated this many times.  If \code{times} is a
vector of the same length as \code{x} (after replication by
\code{each}), the result consists of \code{x[1]} repeated
\code{times[1]} times, \code{x[2]} repeated \code{times[2]} times and
so on.

\code{length.out} may be given in place of \code{times},
in which case \code{x} is repeated as many times as is
necessary to create a vector of this length.  If both are given,
\code{length.out} takes priority and \code{times} is ignored.

Non-integer values of \code{times} will be truncated towards zero.
If \code{times} is a computed quantity it is prudent to add a small fuzz.

If \code{x} has length zero and \code{length.out} is supplied and is
positive, the values are filled in using the extraction rules, that is
by an \code{NA} of the appropriate class for an atomic vector
(\code{0} for raw vectors) and \code{NULL} for a list.
\end{Details}
%
\begin{Value}
An object of the same type as \code{x} (except that \code{rep} will
coerce pairlists to vector lists).

\code{rep.int} returns no attributes.

The default method of \code{rep} gives the result names (which will
almost always contain duplicates) if \code{x} had names, but retains
no other attributes except for factors.
\end{Value}
%
\begin{Note}\relax
Function \code{rep.int} is a simple case handled by internal code, and
provided as a separate function purely for S compatibility.

Function \code{rep} is a primitive, but (partial)
matching of argument names is performed as for normal functions.
You can no longer pass a missing argument to. e.g. \code{length.out}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{seq}{seq}}, \code{\LinkA{sequence}{sequence}}, \code{\LinkA{replicate}{replicate}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
rep(1:4, 2)
rep(1:4, each = 2)       # not the same.
rep(1:4, c(2,2,2,2))     # same as second.
rep(1:4, c(2,1,2,1))
rep(1:4, each = 2, len = 4)    # first 4 only.
rep(1:4, each = 2, len = 10)   # 8 integers plus two recycled 1's.
rep(1:4, each = 2, times = 3)  # length 24, 3 complete replications

rep(1, 40*(1-.8)) # length 7 on most platforms
rep(1, 40*(1-.8)+1e-7) # better

## replicate a list
fred <- list(happy = 1:10, name = "squash")
rep(fred, 5)

# date-time objects
x <- .leap.seconds[1:3]
rep(x, 2)
rep(as.POSIXlt(x), rep(2, 3))

## named factor
x <- factor(LETTERS[1:4]); names(x) <- letters[1:4]
x
rep(x, 2)
rep(x, each=2)
rep.int(x, 2)  # no names
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{replace}{Replace Values in a Vector}{replace}
\keyword{manip}{replace}
%
\begin{Description}\relax
\code{replace} replaces the values in \code{x}
with indices given in \code{list} by those given in \code{values}.
If necessary, the values in \code{values} are recycled.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
replace(x, list, values)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] vector
\item[\code{list}] an index vector
\item[\code{values}] replacement values
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A vector with the values replaced.
\end{Value}
%
\begin{Note}\relax
\code{x} is unchanged: remember to assign the result.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
\inputencoding{latin1}
\HeaderA{Reserved}{Reserved Words in R}{Reserved}
\aliasA{reserved}{Reserved}{reserved}
\keyword{programming}{Reserved}
\keyword{documentation}{Reserved}
%
\begin{Description}\relax
The reserved words in \R{}'s parser are

\code{\LinkA{if}{if}} \code{\LinkA{else}{else}} \code{\LinkA{repeat}{repeat}} \code{\LinkA{while}{while}}
\code{\LinkA{function}{function}} \code{\LinkA{for}{for}} \code{in}
\code{\LinkA{next}{next}} \code{\LinkA{break}{break}}

\code{\LinkA{TRUE}{TRUE}} \code{\LinkA{FALSE}{FALSE}} \code{\LinkA{NULL}{NULL}}
\code{\LinkA{Inf}{Inf}} \code{\LinkA{NaN}{NaN}}
\code{\LinkA{NA}{NA}} \code{\LinkA{NA\_integer\_}{NA.Rul.integer.Rul.}} \code{\LinkA{NA\_real\_}{NA.Rul.real.Rul.}}
\code{\LinkA{NA\_complex\_}{NA.Rul.complex.Rul.}} \code{\LinkA{NA\_character\_}{NA.Rul.character.Rul.}}

\code{...} and \code{..1}, \code{..2} etc, which are used to refer to
arguments passed down from an enclosing function.
\end{Description}
%
\begin{Details}\relax
Reserved words outside \LinkA{quotes}{Quotes} are always parsed to be
references to the objects linked to in the `Description', and
hence they are not allowed as syntactic names (see
\code{\LinkA{make.names}{make.names}}).  They \bold{are} allowed as non-syntactic
names, e.g. inside \LinkA{backtick}{backtick} quotes.
\end{Details}
\inputencoding{latin1}
\HeaderA{rev}{Reverse Elements}{rev}
\methaliasA{rev.default}{rev}{rev.default}
\keyword{manip}{rev}
%
\begin{Description}\relax
\code{rev} provides a reversed version of its argument.  It is generic
function with a default method for vectors and one for
\code{\LinkA{dendrogram}{dendrogram}}s.

Note that this is no longer needed (nor efficient) for obtaining
vectors sorted into descending order, since that is now rather more
directly achievable by \code{\LinkA{sort}{sort}(x, decreasing = TRUE)}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rev(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector or another object for which reversal is defined.
\end{ldescription}
\end{Arguments}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{seq}{seq}}, \code{\LinkA{sort}{sort}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c(1:5,5:3)
## sort into descending order; first more efficiently:
stopifnot(sort(x, decreasing = TRUE) == rev(sort(x)))
stopifnot(rev(1:7) == 7:1)#- don't need 'rev' here
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Rhome}{Return the R Home Directory}{Rhome}
\aliasA{R.home}{Rhome}{R.home}
\aliasA{R\_HOME}{Rhome}{R.Rul.HOME}
\keyword{utilities}{Rhome}
%
\begin{Description}\relax
Return the \R{} home directory.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
R.home(component="home")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{component}] As well as \code{"home"} which gives the \R{} home
directory, other known values are \code{"bin"}, \code{"doc"},
\code{"etc"} and \code{"share"} giving the paths to the
corresponding parts of an \R{} installation.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \R{} home directory is the top-level directory of the \R{}
installation being run.

The \R{} home directory is often referred to as \var{R\_HOME},
and is the value of an environment variable of that name in an \R{}
session.
It can be found outside an \R{} session by \code{R \LinkA{RHOME}{RHOME}}.
\end{Details}
%
\begin{Value}
A character string giving the \R{} home directory or path to a
particular component.  Normally the components are all subdirectories
of the \R{} home directory, but this may not be the case in a Unix-like
installation.
\end{Value}
\inputencoding{latin1}
\HeaderA{rle}{Run Length Encoding}{rle}
\aliasA{inverse.rle}{rle}{inverse.rle}
\aliasA{print.rle}{rle}{print.rle}
\keyword{manip}{rle}
%
\begin{Description}\relax
Compute the lengths and values of runs of equal values in a vector
-- or the reverse operation.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rle(x)
inverse.rle(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an atomic vector for \code{rle()}; an object of class
\code{"rle"} for \code{inverse.rle()}.
\item[\code{...}] further arguments which are ignored in \R{}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Missing values are regarded as unequal to the previous value, even if
that is also missing.

\code{inverse.rle()} is the inverse function of \code{rle()},
reconstructing \code{x} from the runs.
\end{Details}
%
\begin{Value}
\code{rle()} returns an object of class \code{"rle"} which is a list
with components:
\begin{ldescription}
\item[\code{lengths}] an integer vector containing the length of each run.
\item[\code{values}] a vector of the same length as \code{lengths} with the
corresponding values.

\end{ldescription}
\code{inverse.rle()} returns an atomic vector.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
x <- rev(rep(6:10, 1:5))
rle(x)
## lengths [1:5]  5 4 3 2 1
## values  [1:5] 10 9 8 7 6

z <- c(TRUE,TRUE,FALSE,FALSE,TRUE,FALSE,TRUE,TRUE,TRUE)
rle(z)
rle(as.character(z))

stopifnot(x == inverse.rle(rle(x)),
          z == inverse.rle(rle(z)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Round}{Rounding of Numbers}{Round}
\aliasA{ceiling}{Round}{ceiling}
\aliasA{floor}{Round}{floor}
\aliasA{round}{Round}{round}
\aliasA{signif}{Round}{signif}
\aliasA{trunc}{Round}{trunc}
\keyword{arith}{Round}
%
\begin{Description}\relax
\code{ceiling} takes a single numeric argument \code{x} and returns a
numeric vector containing the smallest integers not less than the
corresponding elements of \code{x}.

\code{floor} takes a single numeric argument \code{x} and returns a
numeric vector containing the largest integers not greater than the
corresponding elements of \code{x}.

\code{trunc} takes a single numeric argument \code{x} and returns a
numeric vector containing the integers formed by truncating the values in
\code{x} toward \code{0}.

\code{round} rounds the values in its first argument to the specified
number of decimal places (default 0).

\code{signif} rounds the values in its first argument to the specified
number of significant digits.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
ceiling(x)
floor(x)
trunc(x, ...)

round(x, digits = 0)
signif(x, digits = 6)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric vector.  Or, for \code{round} and \code{signif}, a
complex vector.
\item[\code{digits}] integer indicating the number of decimal places
(\code{round}) or significant digits (\code{signif}) to be used.
\item[\code{...}] arguments to be passed to methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These are generic functions: methods can be defined for them
individually or via the \code{\LinkA{Math}{S3groupGeneric}} group
generic.

Note that for rounding off a 5, the IEC 60559 standard is expected to
be used, `\emph{go to the even digit}'.
Therefore \code{round(0.5)} is \code{0} and \code{round(-1.5)} is
\code{-2}.  However, this is dependent on OS services and on
representation error (since e.g. \code{0.15} is not represented
exactly, the rounding rule applies to the represented number and not
to the printed number, and so \code{round(0.15, 1)} could be either
\code{0.1} or \code{0.2}).

For \code{signif} the recognized values of \code{digits} are
\code{1...22}.  Complex numbers are rounded to retain
the specified number of digits in the larger of the components.  Each
element of the vector is rounded individually, unlike printing.

These are all primitive functions, but arguments are matched by
name in \code{round} and \code{signif} (whereas the default methods
for \code{ceiling}, \code{floor} and \code{trunc} ignore argument
names).
\end{Details}
%
\begin{Section}{S4 methods}
These are all (internally) S4 generic.

\code{ceiling}, \code{floor} and \code{trunc} are members of the
\code{\LinkA{Math}{S4groupGeneric}} group generic.  As an S4
generic, \code{trunc} has only one argument.

\code{round} and \code{signif} are members of the
\code{\LinkA{Math2}{S4groupGeneric}} group generic.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.  Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{as.integer}{as.integer}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
round(.5 + -2:4) # IEEE rounding: -2  0  0  2  2  4  4
( x1 <- seq(-2, 4, by = .5) )
round(x1)#-- IEEE rounding !
x1[trunc(x1) != floor(x1)]
x1[round(x1) != floor(x1 + .5)]
(non.int <- ceiling(x1) != floor(x1))

x2 <- pi * 100^(-1:3)
round(x2, 3)
signif(x2, 3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{round.POSIXt}{Round / Truncate Data-Time Objects}{round.POSIXt}
\aliasA{round.Date}{round.POSIXt}{round.Date}
\aliasA{trunc.Date}{round.POSIXt}{trunc.Date}
\aliasA{trunc.POSIXt}{round.POSIXt}{trunc.POSIXt}
\keyword{chron}{round.POSIXt}
%
\begin{Description}\relax
Round or truncate date-time objects.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'POSIXt':
round(x, units = c("secs", "mins", "hours", "days"))
## S3 method for class 'POSIXt':
trunc(x, units = c("secs", "mins", "hours", "days"), ...)

## S3 method for class 'Date':
round(x, ...)
## S3 method for class 'Date':
trunc(x, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object inheriting from \code{"POSIXt"} or \code{"Date"}.
\item[\code{units}] one of the units listed.  Can be abbreviated.
\item[\code{...}] arguments to be passed to or from other methods, notably
\code{digits} for \code{round}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The time is rounded or truncated to the second, minute, hour or day.
Timezones are only relevant to days, when midnight in the current
timezone is used.

The methods for class \code{"Date"} are of little use except to remove
fractional days.
\end{Details}
%
\begin{Value}
An object of class \code{"POSIXlt"} or \code{"Date"}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{round}{round}} for the generic function and default methods.

\code{\LinkA{DateTimeClasses}{DateTimeClasses}}, \code{\LinkA{Date}{Date}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
round(.leap.seconds + 1000, "hour")
trunc(Sys.time(), "day")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{row}{Row Indexes}{row}
\keyword{array}{row}
%
\begin{Description}\relax
Returns a matrix of integers indicating their row number in a
matrix-like object, or a factor indicating the row labels.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
row(x, as.factor = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix-like object, that is one with a two-dimensional
\code{dim}.
\item[\code{as.factor}] a logical value indicating whether the value should
be returned as a factor of row labels (created if necessary)
rather than as numbers.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
An integer (or factor) matrix with the same dimensions as \code{x} and whose
\code{ij}-th element is equal to \code{i} (or the \code{i}-th row label).
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{col}{col}} to get columns.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- matrix(1:12, 3, 4)
# extract the diagonal of a matrix
dx <- x[row(x) == col(x)]
dx

# create an identity 5-by-5 matrix
x <- matrix(0, nrow = 5, ncol = 5)
x[row(x) == col(x)] <- 1
x
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{row.names}{Get and Set Row Names for Data Frames}{row.names}
\methaliasA{row.names.data.frame}{row.names}{row.names.data.frame}
\methaliasA{row.names.default}{row.names}{row.names.default}
\aliasA{row.names<\Rdash}{row.names}{row.names<.Rdash.}
\methaliasA{row.names<\Rdash.data.frame}{row.names}{row.names<.Rdash..data.frame}
\methaliasA{row.names<\Rdash.default}{row.names}{row.names<.Rdash..default}
\keyword{classes}{row.names}
\keyword{methods}{row.names}
%
\begin{Description}\relax
All data frames have a row names attribute, a character vector of
length the number of rows with no duplicates nor missing values.

For convenience, these are generic functions for which users can write
other methods, and there are default methods for arrays.  The
description here is for the \code{data.frame} method.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
row.names(x)
row.names(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object of class \code{"data.frame"}, or any other class for
which a method has been defined.
\item[\code{value}] an object to be coerced to character unless an integer
vector.  It should have (after coercion) the same length as the
number of rows of \code{x} with no duplicated nor missing values.
\code{NULL} is also allowed: see `Details'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
A data frame has (by definition) a vector of \emph{row names} which
has length the number of rows in the data frame, and contains neither
missing nor duplicated values.  Where a row names sequence has been
added by the software to meet this requirement, they are regarded as
`automatic'.

Row names were character are allowed to be integer or character, but
for backwards compatibility (with \R{} <= 2.4.0) \code{row.names} will
always return a character vector.  (Use \code{attr(x, "row.names")} if
you need an integer value.)

Using \code{NULL} for the value resets the row names to
\code{seq\_len(nrow(x))}, regarded as `automatic'.
\end{Details}
%
\begin{Value}
\code{row.names} returns a character vector.

\code{row.names<-} returns a data frame with the row names changed.
\end{Value}
%
\begin{Note}\relax
\code{row.names} is similar to \code{\LinkA{rownames}{rownames}} for arrays, and
it has a method that calls \code{rownames} for an array argument.

Row names of the form \code{1:n} for \code{n > 2} are stored
internally in a compact form, which might be seen from C code or by
deparsing but never via \code{row.names} or
\code{\LinkA{attr}{attr}(x, "row.names")}.  Additionally, some names of this
sort are marked as `automatic' and handled differently by
\code{\LinkA{as.matrix}{as.matrix}} and \code{\LinkA{data.matrix}{data.matrix}} (and potentially
other functions).  (All zero-row data frames are regarded as having
automatic row.names.)
\end{Note}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Data for models.}
Chapter 3 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{data.frame}{data.frame}}, \code{\LinkA{rownames}{rownames}}, \code{\LinkA{names}{names}}.

\code{\LinkA{.row\_names\_info}{.row.Rul.names.Rul.info}} for the internal representations.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{row/colnames}{Row and Column Names}{row/colnames}
\aliasA{colnames}{row/colnames}{colnames}
\aliasA{colnames<\Rdash}{row/colnames}{colnames<.Rdash.}
\aliasA{rownames}{row/colnames}{rownames}
\aliasA{rownames<\Rdash}{row/colnames}{rownames<.Rdash.}
\keyword{array}{row/colnames}
\keyword{manip}{row/colnames}
%
\begin{Description}\relax
Retrieve or set the row or column names of a matrix-like object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rownames(x, do.NULL = TRUE, prefix = "row")
rownames(x) <- value

colnames(x, do.NULL = TRUE, prefix = "col")
colnames(x) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix-like \R{} object, with at least two dimensions for
\code{colnames}.
\item[\code{do.NULL}] logical.  Should this create names if they are
\code{NULL}?
\item[\code{prefix}] for created names.
\item[\code{value}] a valid value for that component of
\code{\LinkA{dimnames}{dimnames}(x)}.  For a matrix or array this is either
\code{NULL} or a character vector of non-zero length equal to the
appropriate dimension.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The extractor functions try to do something sensible for any
matrix-like object \code{x}.  If the object has \code{\LinkA{dimnames}{dimnames}}
the first component is used as the row names, and the second component
(if any) is used for the column names.  For a data frame, \code{rownames}
and \code{colnames} eventually call \code{\LinkA{row.names}{row.names}} and
\code{\LinkA{names}{names}} respectively, but the latter are preferred.

If \code{do.NULL} is \code{FALSE}, a character vector (of length
\code{\LinkA{NROW}{NROW}(x)} or \code{\LinkA{NCOL}{NCOL}(x)}) is returned in any
case, prepending \code{prefix} to simple numbers, if there are no
dimnames or the corresponding component of the dimnames is \code{NULL}.

The replacement methods for arrays/matrices coerce vector and factor
values of \code{value} to character, but do not dispatch methods for
\code{as.character}.

For a data frame, \code{value} for \code{rownames} should be a
character vector of non-duplicated and non-missing names (this is
enforced), and for \code{colnames} a character vector of (preferably)
unique syntactically-valid names.  In both cases, \code{value} will be
coerced by \code{\LinkA{as.character}{as.character}}, and setting \code{colnames}
will convert the row names to character.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{dimnames}{dimnames}},
\code{\LinkA{case.names}{case.names}},
\code{\LinkA{variable.names}{variable.names}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
m0 <- matrix(NA, 4, 0)
rownames(m0)

m2 <- cbind(1,1:4)
colnames(m2, do.NULL = FALSE)
colnames(m2) <- c("x","Y")
rownames(m2) <- rownames(m2, do.NULL = FALSE, prefix = "Obs.")
m2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{rowsum}{Give column sums of a matrix or data frame, based on a grouping variable}{rowsum}
\methaliasA{rowsum.data.frame}{rowsum}{rowsum.data.frame}
\methaliasA{rowsum.default}{rowsum}{rowsum.default}
\keyword{manip}{rowsum}
%
\begin{Description}\relax
Compute column sums across rows of a matrix-like object for each level of a
grouping variable.  \code{rowsum} is generic, with a method for data
frames and a default method for vectors and matrices.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
rowsum(x, group, reorder = TRUE, ...)

## S3 method for class 'data.frame':
rowsum(x, group, reorder = TRUE, na.rm = FALSE, ...)

## Default S3 method:
rowsum(x, group, reorder = TRUE, na.rm = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix, data frame or vector of numeric data.  Missing
values are allowed.  A numeric vector will be treated as a column vector.
\item[\code{group}] a vector or factor giving the grouping, with one element
per row of \code{x}.  Missing values will be treated as another
group and a warning will be given.
\item[\code{reorder}] if \code{TRUE}, then the result will be in order of
\code{sort(unique(group))}, if \code{FALSE}, it will be in the order
that groups were encountered.
\item[\code{na.rm}] logical (\code{TRUE} or \code{FALSE}).  Should \code{NA}
values be discarded?
\item[\code{...}] other arguments to be passed to or from methods
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The default is to reorder the rows to agree with \code{tapply} as in
the example below.  Reordering should not add noticeably to the time
except when there are very many distinct values of \code{group} and
\code{x} has few columns.

The original function was written by Terry Therneau, but this is a
new implementation using hashing that is much faster for large matrices.

To sum over all the rows of a matrix (ie, a single \code{group}) use
\code{\LinkA{colSums}{colSums}}, which should be even faster.
\end{Details}
%
\begin{Value}
A matrix or data frame containing the sums.  There will be one row per
unique value of \code{group}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{tapply}{tapply}}, \code{\LinkA{aggregate}{aggregate}}, \code{\LinkA{rowSums}{rowSums}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

x <- matrix(runif(100), ncol=5)
group <- sample(1:8, 20, TRUE)
(xsum <- rowsum(x, group))
## Slower versions
tapply(x, list(group[row(x)], col(x)), sum)
t(sapply(split(as.data.frame(x), group), colSums))
aggregate(x, list(group), sum)[-1]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sample}{Random Samples and Permutations}{sample}
\methaliasA{sample.int}{sample}{sample.int}
\keyword{distribution}{sample}
%
\begin{Description}\relax
\code{sample} takes a sample of the specified size from the elements
of \code{x} using either with or without replacement.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sample(x, size, replace = FALSE, prob = NULL)

sample.int(n, size, replace = FALSE, prob = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] Either a (numeric, complex, character or logical) vector of
more than one element from which to choose, or a positive integer.
\item[\code{n}] a non-negative integer, the number of items to choose from.
\item[\code{size}] positive integer giving the number of items to choose.
\item[\code{replace}] Should sampling be with replacement?
\item[\code{prob}] A vector of probability weights for obtaining the elements
of the vector being sampled.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{x} has length 1, is numeric (in the sense of
\code{\LinkA{is.numeric}{is.numeric}}) and \code{x >= 1}, sampling \emph{via}
\code{sample} takes place from
\code{1:x}.  \emph{Note} that this convenience feature may lead to
undesired behaviour when \code{x} is of varying length
\code{sample(x)}.  See the \code{resample()} example below.

By default \code{size} is equal to \code{length(x)}
so that \code{sample(x)} generates a random permutation
of the elements of \code{x} (or \code{1:x}).

The optional \code{prob} argument can be used to give a vector
of weights for obtaining the elements of the vector being
sampled. They need not sum to one, but they should be nonnegative
and not all zero.  If \code{replace} is true, Walker's alias method
(Ripley, 1987) is used when there are more than 250 reasonably
probable values: this gives results incompatible with those from \R{} <
2.2.0, and there will be a warning the first time this happens in a
session.

If \code{replace} is false, these probabilities are applied
sequentially, that is the probability of choosing the next item is
proportional to the weights amongst the remaining items.  The number
of nonzero weights must be at least \code{size} in this case.

\code{sample.int} is a bare interface in which both \code{n} and
\code{size} must be supplied as integers.
\end{Details}
%
\begin{Value}
For \code{sample} a vector of length \code{size} with elements
drawn from either \code{x} or from \code{1:x}.

For \code{sample.int}, an integer vector of length \code{size} with
elements from \code{1:n},
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Ripley, B. D. (1987) \emph{Stochastic Simulation}. Wiley.
\end{References}
%
\begin{SeeAlso}\relax
Package \pkg{sampling} for other methods of weighted sampling without
replacement.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1:12
# a random permutation
sample(x)
# bootstrap sampling -- only if length(x) > 1 !
sample(x,replace=TRUE)

# 100 Bernoulli trials
sample(c(0,1), 100, replace = TRUE)

## More careful bootstrapping --  Consider this when using sample()
## programmatically (i.e., in your function or simulation)!

# sample()'s surprise -- example
x <- 1:10
    sample(x[x >  8]) # length 2
    sample(x[x >  9]) # oops -- length 10!
try(sample(x[x > 10]))# error!

## This is safer, but only for sampling without replacement
resample <- function(x, size, ...)
  if(length(x) <= 1) { if(!missing(size) && size == 0) x[FALSE] else x
  } else sample(x, size, ...)

resample(x[x >  8])# length 2
resample(x[x >  9])# length 1
resample(x[x > 10])# length 0
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{save}{Save R Objects}{save}
\methaliasA{save.image}{save}{save.image}
\keyword{file}{save}
%
\begin{Description}\relax
\code{save} writes an external representation of \R{} objects to the
specified file.  The objects can be read back from the file at a later
date by using the function \code{load} (or \code{data} in some cases).

\code{save.image()} is just a short-cut for `save my current
workspace',
i.e., \code{save(list = ls(all=TRUE), file = ".RData")}.  It is also what
happens with \code{\LinkA{q}{q}("yes")}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
save(..., list = character(0L),
     file = stop("'file' must be specified"),
     ascii = FALSE, version = NULL, envir = parent.frame(),
     compress = !ascii, compression_level,
     eval.promises = TRUE, precheck = TRUE)

save.image(file = ".RData", version = NULL, ascii = FALSE,
           compress = !ascii, safe = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] the names of the objects to be saved (as symbols or
character strings).
\item[\code{list}] A character vector containing the names of objects to be
saved.
\item[\code{file}] a connection or the name of the file where the data will be
saved.  Must be a file name for workspace format version 1.
\item[\code{ascii}] if \code{TRUE}, an ASCII representation of the data is
written.  The default value of \code{ascii} is \code{FALSE} which
leads to a more compact binary file being written.
\item[\code{version}] the workspace format version to use.  \code{NULL}
specifies the current default format.  The version used from \R{}
0.99.0 to \R{} 1.3.1 was version 1.  The default format as from \R{}
1.4.0 is version 2.
\item[\code{envir}] environment to search for objects to be saved.
\item[\code{compress}] logical or character string specifying whether saving
to a named file is to use compression.  \code{TRUE} corresponds to
\command{gzip} compression, and (from \R{} 2.10.0) character strings
\code{"gzip"}, \code{"bzip2"} or \code{"xz"} specify the
type of compression.  Ignored when \code{file} is a connection
and for workspace format version 1.
\item[\code{compression\_level}] integer: the level of compression to be
used.  Defaults to \code{6} for \command{gzip} compression and to
\code{9} for \command{bzip2} or \command{xz} compression.
\item[\code{eval.promises}] logical: should objects which are promises be
forced before saving?
\item[\code{precheck}] logical: should the existence of the objects be
checked before starting to save (and in particular before opening
the file/connection)?  Does not apply to version 1 saves.
\item[\code{safe}] logical.  If \code{TRUE}, a temporary file is used for
creating the saved workspace.  The temporary file is renamed to
\code{file} if the save succeeds.  This preserves an existing
workspace \code{file} if the save fails, but at the cost of using
extra disk space during the save.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The names of the objects specified either as symbols (or character
strings) in \code{...} or as a character vector in \code{list} are
used to look up the objects from environment \code{envir}.  By default
\LinkA{promises}{promises} are evaluated, but if \code{eval.promises = FALSE}
promises are saved (together with their evaluation environments).
(Promises embedded in objects are always saved unevaluated.)

All \R{} platforms use the XDR (bigendian) representation of C ints and
doubles in binary save-d files, and these are portable across all \R{}
platforms. (ASCII saves used to be useful for moving data between
platforms but are now mainly of historical interest.)

Default values for the \code{ascii}, \code{compress}, \code{safe} and
\code{version} arguments can be modified with the \code{save.defaults}
option (used both by \code{save} and \code{save.image}), see also the
example section below.  If a \code{save.image.defaults} option is set
it overrides \code{save.defaults} for function \code{save.image}
(which allows this to have different defaults).

A connection that is not already open will be opened in mode
\code{"wb"}.  Only ASCII saves can be written to text-mode connections.
\end{Details}
%
\begin{Section}{Compression}
Large files can be reduced considerably in size by compression.  A
particular 46MB dataset was saved as 35MB without compression in 2
seconds, 22MB with \command{gzip} compression in 8 secs, 19MB with
\command{bzip2} compression in 13 secs and 9.4MB with \command{xz}
compression in 40 secs.  The load times were 1.3, 2.8, 5.5 and 5.7
seconds respectively.  These results are indicative, but the relative
performances do depend on the actual file and \command{xz} did
unusually well here.

It is possible to compress later (with \command{gzip}, \command{bzip2}
or \command{xz}) a file saved with \code{compress = FALSE}: the effect
is the same as saving with compression.  Also, a saved file can be
uncompressed and re-compressed under a different compression scheme
(and see \code{\LinkA{resaveRdaFiles}{resaveRdaFiles}} for a way to do so from within \R{}).
\end{Section}
%
\begin{Section}{Warnings}
The \code{...} arguments only give the \emph{names} of the objects
to be saved: they are searched for in the environment given by the
\code{envir} argument, and the actual objects given as arguments need
not be those found.

Saved \R{} objects are binary files, even those saved with
\code{ascii = TRUE}, so ensure that they are transferred without
conversion of end of line markers and of 8-bit characters.  The lines
are delimited by LF on all platforms.

Although the default version has not changed since \R{} 1.4.0, this
does not mean that saved files are necessarily backwards compatible.
You will be able to load a saved image into an earlier version of \R{}
unless use is made of later additions (for example, raw vectors or
external pointers).
\end{Section}
%
\begin{Note}\relax
The most common reason for failure is lack of write permission in the
current directory.  For \code{save.image} and for saving at the end of
a session this will shown by messages like
\begin{alltt}
    Error in gzfile(file, "wb") : unable to open connection
    In addition: Warning message:
    In gzfile(file, "wb") :
      cannot open compressed file '.RDataTmp',
      probable reason 'Permission denied'
\end{alltt}


The defaults were changed to use compressed saves for \code{save} in
2.3.0 and for \code{save.image} in 2.4.0.  Any recent version of \R{}
can read compressed save files, and a compressed file can be
uncompressed (by \code{gzip -d}) for use with very old versions of \R{}.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{dput}{dput}}, \code{\LinkA{dump}{dump}}, \code{\LinkA{load}{load}},
\code{\LinkA{data}{data}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- stats::runif(20)
y <- list(a = 1, b = TRUE, c = "oops")
save(x, y, file = "xy.Rdata")
save.image()
unlink("xy.Rdata")
unlink(".RData")

# set save defaults using option:
options(save.defaults=list(ascii=TRUE, safe=FALSE))
save.image()
unlink(".RData")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{scale}{Scaling and Centering of Matrix-like Objects}{scale}
\methaliasA{scale.default}{scale}{scale.default}
\keyword{array}{scale}
%
\begin{Description}\relax
\code{scale} is generic function whose default method centers and/or
scales the columns of a numeric matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
scale(x, center = TRUE, scale = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric matrix(like object).
\item[\code{center}] either a logical value or a numeric vector of length
equal to the number of columns of \code{x}.
\item[\code{scale}] either a logical value or a numeric vector of length
equal to the number of columns of \code{x}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The value of \code{center} determines how column centering is
performed.  If \code{center} is a numeric vector with length equal to
the number of columns of \code{x}, then each column of \code{x} has
the corresponding value from \code{center} subtracted from it.  If
\code{center} is \code{TRUE} then centering is done by subtracting the
column means (omitting \code{NA}s) of \code{x} from their
corresponding columns, and if \code{center} is \code{FALSE}, no
centering is done.

The value of \code{scale} determines how column scaling is performed
(after centering).  If \code{scale} is a numeric vector with length
equal to the number of columns of \code{x}, then each column of
\code{x} is divided by the corresponding value from \code{scale}.  If
\code{scale} is \code{TRUE} then scaling is done by dividing the
(centered) columns of \code{x} by their standard deviations, and if
\code{scale} is \code{FALSE}, no scaling is done.

The standard deviation for a column is obtained by computing the
square-root of the sum-of-squares of the non-missing values in the
column divided by the number of non-missing values minus one (whether
or not centering was done).
\end{Details}
%
\begin{Value}
For \code{scale.default}, the centered, scaled matrix. The numeric
centering and scalings used (if any) are returned as attributes
\code{"scaled:center"} and \code{"scaled:scale"}
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{sweep}{sweep}} which allows centering (and scaling) with
arbitrary statistics.

For working with the scale of a plot, see \code{\LinkA{par}{par}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
x <- matrix(1:10, ncol=2)
(centered.x <- scale(x, scale=FALSE))
cov(centered.scaled.x <- scale(x))# all 1
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{scan}{Read Data Values}{scan}
\keyword{file}{scan}
\keyword{connection}{scan}
%
\begin{Description}\relax
Read data into a vector or list from the console or file.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
scan(file = "", what = double(0), nmax = -1, n = -1, sep = "",
     quote = if(identical(sep, "\n")) "" else "'\"", dec = ".",
     skip = 0, nlines = 0, na.strings = "NA",
     flush = FALSE, fill = FALSE, strip.white = FALSE,
     quiet = FALSE, blank.lines.skip = TRUE, multi.line = TRUE,
     comment.char = "", allowEscapes = FALSE,
     encoding = "unknown")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] the name of a file to read data values from.  If the
specified file is \code{""}, then input is taken from the keyboard
(or whatever \code{\LinkA{stdin}{stdin}()} reads if input is redirected or
\R{} is embedded).
(In this case input can be terminated by a blank line or an EOF
signal, \samp{Ctrl-D} on Unix and \samp{Ctrl-Z} on Windows.)

Otherwise, the file name is interpreted \emph{relative} to the
current working directory (given by \code{\LinkA{getwd}{getwd}()}),
unless it specifies an \emph{absolute} path.
Tilde-expansion is performed where supported.
When running \R{} from a script, \code{file="stdin"} can be used to
refer to the process's \code{stdin} file stream.

As from \R{} 2.10.0 this can be a compressed file (see \code{\LinkA{file}{file}}).

Alternatively, \code{file} can be a \code{\LinkA{connection}{connection}},
which will be opened if necessary, and if so closed at the end of
the function call.  Whatever mode the connection is opened in,
any of LF, CRLF or CR will be accepted as the EOL marker for a line
and so will match \code{sep = "\bsl{}n"}.

\code{file} can also be a complete URL.

To read a data file not in the current encoding (for example a
Latin-1 file in a UTF-8 locale or conversely) use a
\code{\LinkA{file}{file}} connection setting the \code{encoding} argument.


\item[\code{what}] the type of \code{what} gives the type of data to be read.
The supported types are \code{logical}, \code{integer}, \code{numeric},
\code{complex}, \code{character}, \code{raw} and \code{\LinkA{list}{list}}.
If \code{what} is a list, it is assumed that the lines of the data file
are records each containing \code{length(what)} items
(`fields') and the list components should have elements which
are one of the first six types listed or \code{NULL}, see section
`Details' below.

\item[\code{nmax}] integer: the maximum number of data values to be read, or if
\code{what} is a list, the maximum number of records to be read.  If
omitted or not positive or an invalid value for an integer
(and \code{nlines} is not set to a positive value), \code{scan} will
read to the end of \code{file}.

\item[\code{n}] integer: the maximum number of data values to be read, defaulting to
no limit.  Invalid values will be ignored.

\item[\code{sep}] by default, scan expects to read white-space delimited
input fields.  Alternatively, \code{sep} can be used to specify a
character which delimits fields.  A field is always delimited by an
end-of-line marker unless it is quoted.

If specified this should be the empty character string (the default)
or \code{NULL} or a character string containing just one single-byte
character.


\item[\code{quote}] the set of quoting characters as a single character
string or \code{NULL}.  In a multibyte locale the quoting characters
must be ASCII (single-byte).

\item[\code{dec}] decimal point character.  This should be a character string
containing just one single-byte character.  (\code{NULL} and a
zero-length character vector are also accepted, and taken as the
default.)

\item[\code{skip}] the number of  lines of the input file to skip before
beginning to read data values.

\item[\code{nlines}] if positive, the maximum number of lines of data to be read.

\item[\code{na.strings}] character vector.  Elements of this vector are to be
interpreted as missing (\code{\LinkA{NA}{NA}}) values. Blank fields are
also considered to be missing values in logical, integer, numeric
and complex fields.

\item[\code{flush}] logical: if \code{TRUE}, \code{scan} will flush to the
end of the line after reading the last of the fields requested.
This allows putting comments after the last field, but precludes
putting more that one record on a line.

\item[\code{fill}] logical: if \code{TRUE}, \code{scan} will implicitly add
empty fields to any lines with fewer fields than implied by
\code{what}.

\item[\code{strip.white}] vector of logical value(s) corresponding to items
in the \code{what} argument. It is used only when \code{sep} has
been specified, and allows the stripping of leading and trailing
white space from \code{character} fields (\code{numeric} fields
are always stripped).

If \code{strip.white} is of length 1, it applies to all fields;
otherwise, if \code{strip.white[i]} is \code{TRUE} \emph{and} the
\code{i}-th field is of mode character (because \code{what[i]} is)
then the leading and trailing white space from field \code{i} is
stripped.

\item[\code{quiet}] logical: if \code{FALSE} (default), scan() will print a
line, saying how many items have been read.

\item[\code{blank.lines.skip}] logical: if \code{TRUE} blank lines in the
input are ignored, except when counting \code{skip} and \code{nlines}.

\item[\code{multi.line}] logical. Only used if \code{what} is a list.
If \code{FALSE}, all of a record must appear on one line (but more
than one record can appear on a single line).  Note that using
\code{fill = TRUE} implies that a record will terminated at the end
of a line.

\item[\code{comment.char}] character: a character vector of length one
containing a single character or an empty string.  Use \code{""} to
turn off the interpretation of comments altogether (the default).

\item[\code{allowEscapes}] logical.  Should C-style escapes such as
\samp{\bsl{}n} be processed (the default) or read verbatim?   Note that if
not within quotes these could be interpreted as a delimiter (but not
as a comment character).

The escapes which are interpreted are the control characters
\samp{\bsl{}a, \bsl{}b, \bsl{}f, \bsl{}n, \bsl{}r, \bsl{}t, \bsl{}v} and octal and
hexadecimal representations like \samp{\bsl{}040} and \samp{\bsl{}0x2A}.  Any
other escaped character is treated as itself, including backslash.

\item[\code{encoding}] encoding to be assumed for input strings.  If the
value is \code{"latin1"} or \code{"UTF-8"} it is used to mark
character strings as known to be in Latin-1 or UTF-8: it is not used
to re-encode the input.  To do the latter, specify the encoding as
part of the connection \code{con} or \emph{via}
\code{\LinkA{options}{options}(encoding=)}: see the example under
\code{\LinkA{file}{file}}.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The value of \code{what} can be a list of types, in which case
\code{scan} returns a list of vectors with the types given by the
types of the elements in \code{what}.  This provides a way of reading
columnar data.  If any of the types is \code{NULL}, the corresponding
field is skipped (but a \code{NULL} component appears in the result).

The type of \code{what} or its components can be one of the six
atomic vector types or \code{NULL} (see \code{\LinkA{is.atomic}{is.atomic}}).

`White space' is defined for the purposes of this function as
one or more contiguous characters from the set space, horizontal tab,
carriage return and line feed.  It does not include form feed or
vertical tab, but in Latin-1 and Windows 8-bit locales 'space'
includes non-breaking space.

Empty numeric fields are always regarded as missing values.
Empty character fields are scanned as empty character vectors, unless
\code{na.strings} contains \code{""} when they are regarded as missing
values.

The allowed input for a numeric field is optional whitespace followed
either \code{NA} or an optional sign followed by a decimal or
hexadecimal constant (see \LinkA{NumericConstants}{NumericConstants}), or \code{NaN},
\code{Inf} or \code{infinity} (ignoring case).  Out-of-range values
are recorded as \code{Inf}, \code{-Inf} or \code{0}.

For an integer field the allowed input is optional whitespace,
followed by either \code{NA} or an optional sign and one or more
digits (\samp{0-9}): all out-of-range values are converted to
\code{NA\_integer\_}.

If \code{sep} is the default (\code{""}), the character \samp{\bsl{}}
in a quoted string escapes the following character, so quotes may be
included in the string by escaping them.

If \code{sep} is non-default, the fields may be quoted in the style of
\file{.csv} files where separators inside quotes (\code{''} or
\code{""}) are ignored and quotes may be put inside strings by
doubling them.  However, if \code{sep = "\bsl{}n"} it is assumed
by default that one wants to read entire lines verbatim.

Quoting is only interpreted in character fields and in \code{NULL}
fields (which might be skipping character fields).

Note that since \code{sep} is a separator and not a terminator,
reading a file by \code{scan("foo", sep="\bsl{}n", blank.lines.skip=FALSE)}
will give an empty final line if the file ends in a linefeed and not if
it does not.  This might not be what you expected; see also
\code{\LinkA{readLines}{readLines}}.

If \code{comment.char} occurs (except inside a quoted character
field), it signals that the rest of the line
should be regarded as a comment and be discarded.  Lines beginning
with a comment character (possibly after white space with the default
separator) are treated as blank lines.

There is a line-length limit of 4095 bytes when reading from the
console (which may impose a lower limit: see `An Introduction
to R').

There is a check for a user interrupt every 1000 lines if \code{what}
is a list, otherwise every 10000 items.
\end{Details}
%
\begin{Value}
if \code{what} is a list, a list of the same length and same names (as
any) as \code{what}.

Otherwise, a vector of the type of \code{what}.

Character strings in the result will have a declared encoding if
\code{encoding} is \code{"latin1"} or \code{"UTF-8"}.
\end{Value}
%
\begin{Note}\relax
The default for \code{multi.line} differs from S.  To read one record
per line, use \code{flush = TRUE} and \code{multi.line = FALSE}.
(Note that quoted character strings can still include embedded newlines.)

If number of items is not specified, the internal
mechanism re-allocates memory in powers of two and so could use up
to three times as much memory as needed.  (It needs both old and new
copies.)  If you can, specify either \code{n} or \code{nmax} whenever
inputting a large vector, and \code{nmax} or \code{nlines} when
inputting a large list.

Using \code{scan} on an open connection to read partial lines can lose
chars: use an explicit separator to avoid this.

Having \code{nul} bytes in fields (including \samp{\bsl{}0} if
\code{allowEscapes = TRUE}) may lead to interpretation of the
field being terminated at the \code{nul}.  They not normally present
in text files -- see \code{\LinkA{readBin}{readBin}}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{read.table}{read.table}} for more user-friendly reading of data
matrices;
\code{\LinkA{readLines}{readLines}} to read a file a line at a time.
\code{\LinkA{write}{write}}.

\code{Quotes} for the details of C-style escape sequences.

\code{\LinkA{readChar}{readChar}} and \code{\LinkA{readBin}{readBin}} to read fixed or
variable length character strings or binary representations of numbers
a few at a time from a connection.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
cat("TITLE extra line", "2 3 5 7", "11 13 17", file="ex.data", sep="\n")
pp <- scan("ex.data", skip = 1, quiet= TRUE)
scan("ex.data", skip = 1)
scan("ex.data", skip = 1, nlines=1) # only 1 line after the skipped one
scan("ex.data", what = list("","","")) # flush is F -> read "7"
scan("ex.data", what = list("","",""), flush = TRUE)
unlink("ex.data") # tidy up
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{search}{Give Search Path for R Objects}{search}
\aliasA{searchpaths}{search}{searchpaths}
\keyword{data}{search}
%
\begin{Description}\relax
Gives a list of \code{\LinkA{attach}{attach}}ed \emph{packages}
(see \code{\LinkA{library}{library}}), and \R{} objects, usually
\code{\LinkA{data.frame}{data.frame}s}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
search()
searchpaths()
\end{verbatim}
\end{Usage}
%
\begin{Value}
A character vector, starting with \code{"\LinkA{.GlobalEnv}{.GlobalEnv}"}, and
ending with \code{"package:base"} which is \R{}'s \pkg{base} package
required always.

\code{searchpaths} gives a similar character vector, with the
entries for packages being the path to the package used to load the
code.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (\code{search}.)

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer. (\code{searchPaths}.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{.packages}{.packages}} to list just the packages on search path.

\code{\LinkA{loadedNamespaces}{loadedNamespaces}} to list loaded name spaces.

\code{\LinkA{attach}{attach}} and \code{\LinkA{detach}{detach}} to change the
search path, \code{\LinkA{objects}{objects}} to find \R{} objects in there.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
search()
searchpaths()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{seek}{Functions to Reposition Connections}{seek}
\aliasA{isSeekable}{seek}{isSeekable}
\methaliasA{seek.connection}{seek}{seek.connection}
\aliasA{truncate}{seek}{truncate}
\methaliasA{truncate.connection}{seek}{truncate.connection}
\keyword{file}{seek}
\keyword{connection}{seek}
%
\begin{Description}\relax
Functions to re-position connections.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
seek(con, ...)
## S3 method for class 'connection':
seek(con, where = NA, origin = "start", rw = "", ...)

isSeekable(con)

truncate(con, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{con}] a connection.
\item[\code{where}] numeric.  A file position (relative to the origin
specified by \code{origin}), or \code{NA}.
\item[\code{rw}] character.  Empty or \code{"read"} or \code{"write"},
partial matches allowed.
\item[\code{origin}] character.  One of \code{"start"}, \code{"current"},
\code{"end"}: see `Details'.
\item[\code{...}] further arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{seek} with \code{where = NA} returns the current byte offset
of a connection (from the beginning), and with a non-missing \code{where}
argument the connection is re-positioned (if possible) to the
specified position. \code{isSeekable} returns whether the connection
in principle supports \code{seek}: currently only (possibly
gz-compressed) file connections do.  \code{gzfile} connections do not
support \code{origin = "end"}; the file position they use is that
of the uncompressed file.

\code{where} is stored as a real but should represent an integer:
non-integer values are likely to be truncated.  Note that the possible
values can exceed the largest representable number in an \R{}
\code{integer} on 64-bit OSes, and on some 32-bit OSes.


File connections can be open for both writing/appending, in which case
\R{} keeps separate positions for reading and writing.  Which \code{seek}
refers to can be set by its \code{rw} argument: the default is the
last mode (reading or writing) which was used.  Most files are
only opened for reading or writing and so default to that state.  If a
file is open for both reading and writing but has not been used, the
default is to give the reading position (0).

The initial file position for reading is always at the beginning.
The initial position for writing is at the beginning of the file
for modes \code{"r+"} and \code{"r+b"}, otherwise at the end of the
file.  Some platforms only allow writing at the end of the file in
the append modes.  (The reported write position for a file opened in
an append mode will typically be unreliable until the file has been
written to.)

If \code{seek} is called with a non-\code{NA} value of \code{where},
any pushback on a text-mode connection is discarded.

\code{truncate} truncates a file opened for writing at its current
position.  It works only for \code{file} connections, and is not
implemented on all platforms: on others (including Windows) it will
not work for large (> 2Gb) files.
\end{Details}
%
\begin{Value}
\code{seek} returns the current position (before any move), as a
(numeric) byte offset from the origin, if relevant, or \code{0} if
not.  Note that the position can exceed the largest representable
number in an \R{} \code{integer} on 64-bit OSes, and on some 32-bit
OSes.

\code{truncate} returns \code{NULL}: it stops with an error if
it fails (or is not implemented).

\code{isSeekable} returns a logical value, whether the connection
supports \code{seek}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{seq}{Sequence Generation}{seq}
\methaliasA{seq.default}{seq}{seq.default}
\methaliasA{seq.int}{seq}{seq.int}
\aliasA{seq\_along}{seq}{seq.Rul.along}
\aliasA{seq\_len}{seq}{seq.Rul.len}
\keyword{manip}{seq}
%
\begin{Description}\relax
Generate regular sequences.  \code{seq} is a standard generic with a
default method.  \code{seq.int} is an internal generic which can be
much faster but has a few restrictions.  \code{seq\_along} and
\code{seq\_len} are very fast primitives for two common cases.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
seq(...)

## Default S3 method:
seq(from = 1, to = 1, by = ((to - from)/(length.out - 1)),
    length.out = NULL, along.with = NULL, ...)

seq.int(from, to, by, length.out, along.with, ...)

seq_along(along.with)
seq_len(length.out)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] arguments passed to or from methods.
\item[\code{from, to}] the starting and (maximal) end value of the sequence.
\item[\code{by}] number: increment of the sequence.
\item[\code{length.out}] desired length of the sequence.  A
non-negative number, which for \code{seq} and \code{seq.int} will be
rounded up if fractional.
\item[\code{along.with}] take the length from the length of this argument.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The interpretation of the unnamed arguments of \code{seq} and
\code{seq.int} is \emph{not} standard, and it is recommended always to
name the arguments when programming.

Both \code{seq} are \code{seq.int} are generic, and only the default
method is described here.  Typical usages are
\begin{alltt}
seq(from, to)
seq(from, to, by= )
seq(from, to, length.out= )
seq(along.with= )
seq(from)
seq(length.out= )
\end{alltt}

The first form generates the sequence \code{from, from+/-1, ..., to}
(identical to \code{from:to}).

The second form generates \code{from, from+by}, \ldots, up to the
sequence value less than or equal to \code{to}.  Specifying
\code{to - from} and \code{by} of opposite signs is an error.  Note
that the computed final value can go just beyond \code{to} to allow for
rounding error, but (as from \R{} 2.9.0) is truncated to \code{to}.

The third generates a sequence of \code{length.out} equally spaced
values from \code{from} to \code{to}.  (\code{length.out} is usually
abbreviated to \code{length} or \code{len}, and \code{seq\_len} is much
faster.)

The fourth form generates the sequence \code{1, 2, ...,
    length(along.with)}.  (\code{along.with} is usually abbreviated to
\code{along}, and \code{seq\_along} is much faster.)

The fifth form generates the sequence \code{1, 2, ..., length(from)}
(as if argument \code{along.with} had been specified),
\emph{unless} the argument is numeric of length 1 when it is
interpreted as \code{1:from} (even for \code{seq(0)} for
compatibility with S).

The final form generates \code{1, 2, ..., length.out} unless
\code{length.out = 0}, when it generates \code{integer(0)}.

Very small sequences (with \code{from - to} of the order of \eqn{10^{-14}}{}
times the larger of the ends) will return \code{from}.

For \code{seq}(only), up to two of \code{from}, \code{to} and \code{by} can
be supplied as complex values provided \code{length.out} or
\code{along.with} is specified.

\code{seq.int}, \code{seq\_along} and \code{seq\_len} are
\LinkA{primitive}{primitive}: the latter two ignore any argument name.
\end{Details}
%
\begin{Value}
Currently, \code{seq.int} and the default method of \code{seq}
return a result of type \code{"integer"} (if it is representable as
that and) if \code{from} is (numerically equal to an) integer and,
e.g., only \code{to} is specified, or also if only \code{length} or
only \code{along.with} is specified.  \strong{Note:} this may change
in the future and programmers should not rely on it.

\code{seq\_along} and \code{seq\_length} always return an integer vector.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
The methods \code{\LinkA{seq.Date}{seq.Date}} and \code{\LinkA{seq.POSIXt}{seq.POSIXt}}.

\code{\LinkA{:}{:}},
\code{\LinkA{rep}{rep}},
\code{\LinkA{sequence}{sequence}},
\code{\LinkA{row}{row}},
\code{\LinkA{col}{col}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
seq(0, 1, length.out=11)
seq(stats::rnorm(20))
seq(1, 9, by = 2) # match
seq(1, 9, by = pi)# stay below
seq(1, 6, by = 3)
seq(1.575, 5.125, by=0.05)
seq(17) # same as 1:17
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{seq.Date}{Generate Regular Sequences of Dates}{seq.Date}
\keyword{manip}{seq.Date}
\keyword{chron}{seq.Date}
%
\begin{Description}\relax
The method for \code{\LinkA{seq}{seq}} for objects of class class
\code{"\LinkA{Date}{Date}"} representing calendar dates.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'Date':
seq(from, to, by, length.out = NULL, along.with = NULL, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{from}] starting date. Required
\item[\code{to}] end date. Optional.
\item[\code{by}] increment of the sequence. Optional.  See `Details'.
\item[\code{length.out}] integer, optional. desired length of the sequence.
\item[\code{along.with}] take the length from the length of this argument.
\item[\code{...}] arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{by} can be specified in several ways.
\begin{itemize}

\item A number, taken to be in days.
\item A object of class \code{\LinkA{difftime}{difftime}}
\item A character string, containing one of \code{"day"},
\code{"week"}, \code{"month"} or \code{"year"}.  This can optionally be
preceded by a (positive or negative) integer and a space,
or followed by \code{"s"}.

See \code{\LinkA{seq.POSIXt}{seq.POSIXt}} for the details of \code{"month"}.

\end{itemize}

\end{Details}
%
\begin{Value}
A vector of class \code{"Date"}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{Date}{Date}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## first days of years
seq(as.Date("1910/1/1"), as.Date("1999/1/1"), "years")
## by month
seq(as.Date("2000/1/1"), by="month", length.out=12)
## quarters
seq(as.Date("2000/1/1"), as.Date("2003/1/1"), by="3 months")

## find all 7th of the month between two dates, the last being a 7th.
st <- as.Date("1998-12-17")
en <- as.Date("2000-1-7")
ll <- seq(en, st, by="-1 month")
rev(ll[ll > st & ll < en])
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{seq.POSIXt}{Generate Regular Sequences of Dates}{seq.POSIXt}
\keyword{manip}{seq.POSIXt}
\keyword{chron}{seq.POSIXt}
%
\begin{Description}\relax
The method for \code{\LinkA{seq}{seq}} for date-time classes.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'POSIXt':
seq(from, to, by, length.out = NULL, along.with = NULL, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{from}] starting date. Required.
\item[\code{to}] end date. Optional.
\item[\code{by}] increment of the sequence. Optional.  See `Details'.
\item[\code{length.out}] integer, optional. desired length of the sequence.
\item[\code{along.with}] take the length from the length of this argument.
\item[\code{...}] arguments passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{by} can be specified in several ways.
\begin{itemize}

\item A number, taken to be in seconds.
\item A object of class \code{\LinkA{difftime}{difftime}}
\item A character string, containing one of \code{"sec"},
\code{"min"}, \code{"hour"}, \code{"day"}, \code{"DSTday"},
\code{"week"}, \code{"month"} or \code{"year"}.  This can optionally be
preceded by a (positive or negative) integer and a space,
or followed by \code{"s"}.

\end{itemize}

The difference between \code{"day"} and \code{"DSTday"} is that the
former ignores changes to/from daylight savings time and the latter takes
the same clock time each day.  (\code{"week"} ignores DST (it is a
period of 144 hours), but \code{"7 DSTdays"}) can be used as an
alternative.  \code{"month"} and \code{"year"} allow for DST.)

The timezone of the result is taken from \code{from}: remember than
GMT does not have daylight savings time.

Using \code{"month"} first advances the month without changing the
day: if this results in an invalid day of the month, it is counted
forward into the next month: see the examples.
\end{Details}
%
\begin{Value}
A vector of class \code{"POSIXct"}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{DateTimeClasses}{DateTimeClasses}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## first days of years
seq(ISOdate(1910,1,1), ISOdate(1999,1,1), "years")
## by month
seq(ISOdate(2000,1,1), by = "month", length.out = 12)
seq(ISOdate(2000,1,31), by = "month", length.out = 4)
## quarters
seq(ISOdate(1990,1,1), ISOdate(2000,1,1), by = "3 months")
## days vs DSTdays: use c() to lose the timezone.
seq(c(ISOdate(2000,3,20)), by = "day", length.out = 10)
seq(c(ISOdate(2000,3,20)), by = "DSTday", length.out = 10)
seq(c(ISOdate(2000,3,20)), by = "7 DSTdays", length.out = 4)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sequence}{Create A Vector of Sequences}{sequence}
\keyword{manip}{sequence}
%
\begin{Description}\relax
For each element of \code{nvec} the sequence \code{\LinkA{seq\_len}{seq.Rul.len}(nvec[i])}
is created.  These are concatenated and the result returned.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sequence(nvec)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{nvec}] a non-negative integer vector each element of which
specifies the end point of a sequence.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Earlier versions of \code{sequence} used to work for 0 or negative inputs as
\code{seq(x) == 1:x}.

Note that \code{sequence <- function(nvec) unlist(lapply(nvec, seq\_len))}
and it mainly exists in reverence to the very early history of \R{}.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{gl}{gl}}, \code{\LinkA{seq}{seq}}, \code{\LinkA{rep}{rep}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
sequence(c(3,2))# the concatenated sequences 1:3 and 1:2.
#> [1] 1 2 3 1 2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{serialize}{Simple Serialization Interface}{serialize}
\aliasA{unserialize}{serialize}{unserialize}
\keyword{file}{serialize}
\keyword{connection}{serialize}
%
\begin{Description}\relax
A simple low-level interface for serializing to connections.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
serialize(object, connection, ascii = FALSE, refhook = NULL)

unserialize(connection, refhook = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] \R{} object to serialize.
\item[\code{connection}] an open connection or (for \code{serialize})
\code{NULL} or (for \code{unserialize}) a raw vector
(see `Details').
\item[\code{ascii}] a logical.  If \code{TRUE}, an ASCII representation is
written; otherwise (default except for text-mode connections), a
more compact binary one is used.
\item[\code{refhook}] a hook function for handling reference objects.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The function \code{serialize} writes \code{object} to the specified
connection.  If \code{connection} is \code{NULL} then \code{object} is
serialized to a raw vector, which is returned as the result of
\code{serialize}.

Sharing of reference objects is preserved within the object but not
across separate calls to \code{serialize}.

\code{unserialize} reads an object (as written by \code{serialize})
from \code{connection} or a raw vector.

The \code{refhook} functions can be used to customize handling of
non-system reference objects (all external pointers and weak
references, and all environments other than name space and package
environments and \code{.GlobalEnv}).  The hook function for
\code{serialize} should return a raw vector for references it
wants to handle; otherwise it should return \code{NULL}.  The hook for
\code{unserialize} will be called with raw vectors supplied to
\code{serialize} and should return an appropriate object.

For a text-mode connection, the default value of \code{ascii} is set
to \code{TRUE}: only ASCII representations can be written to text-mode
connections and attempting to use \code{ascii = FALSE} will throw an
error.

The format consists of a single line followed by the data: the first
line contains a single character: \code{X} for binary serialization
and \code{A} for ASCII serialization, followed by a new line.
\end{Details}
%
\begin{Value}
For \code{serialize}, \code{NULL} unless \code{connection = NULL}, when
the result is returned in a raw vector.

For \code{unserialize} an \R{} object.
\end{Value}
%
\begin{Section}{Warning}
These functions are still experimental.  Names, interfaces and
values might change in future versions (and the value of
\code{serialize} was changed for \R{} 2.4.0).

A raw vector is limited to \eqn{2^{31} - 1}{} bytes, but \R{}
objects can exceed this and their serializations will normally be
larger than the objects.
\end{Section}
%
\begin{Examples}
\begin{ExampleCode}
x <- serialize(list(1,2,3), NULL)
unserialize(x)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sets}{Set Operations}{sets}
\aliasA{intersect}{sets}{intersect}
\aliasA{is.element}{sets}{is.element}
\aliasA{setdiff}{sets}{setdiff}
\aliasA{setequal}{sets}{setequal}
\aliasA{union}{sets}{union}
\keyword{misc}{sets}
%
\begin{Description}\relax
Performs \bold{set} union, intersection, (asymmetric!) difference,
equality and membership on two vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
union(x, y)
intersect(x, y)
setdiff(x, y)
setequal(x, y)

is.element(el, set)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y, el, set}] vectors (of the same mode) containing a sequence
of items (conceptually) with no duplicated values.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Each of \code{union}, \code{intersect}, \code{setdiff} and
\code{setequal} will discard any duplicated values in the arguments,
and they apply \code{\LinkA{as.vector}{as.vector}} to their arguments (and so
in particular coerce factors to character vectors).

\code{is.element(x, y)} is identical to \code{x \%in\% y}.
\end{Details}
%
\begin{Value}
A vector of the same \code{\LinkA{mode}{mode}} as \code{x} or \code{y} for
\code{setdiff} and \code{intersect}, respectively, and
of a common mode for \code{union}.

A logical scalar for \code{setequal} and a logical of the same
length as \code{x} for \code{is.element}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{\Rpercent{}in\Rpercent{}}{.Rpcent.in.Rpcent.}}

`\LinkA{plotmath}{plotmath}' for the use of \code{union} and
\code{intersect} in plot annotation.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(x <- c(sort(sample(1:20, 9)),NA))
(y <- c(sort(sample(3:23, 7)),NA))
union(x, y)
intersect(x, y)
setdiff(x, y)
setdiff(y, x)
setequal(x, y)

## True for all possible x & y :
setequal( union(x,y),
          c(setdiff(x,y), intersect(x,y), setdiff(y,x)))

is.element(x, y)# length 10
is.element(y, x)# length  8
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{setTimeLimit}{Set CPU and/or Elapsed Time Limits}{setTimeLimit}
\aliasA{setSessionTimeLimit}{setTimeLimit}{setSessionTimeLimit}
\keyword{utilities}{setTimeLimit}
%
\begin{Description}\relax
Functions to set CPU and/or elapsed time limits for top-level
computations or the current session.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
setTimeLimit(cpu = Inf, elapsed = Inf, transient = FALSE)

setSessionTimeLimit(cpu = Inf, elapsed = Inf)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{cpu}] double.  Limit on total cpu time.
\item[\code{elapsed}] double.  Limit on elapsed time.
\item[\code{transient}] logical.  If \code{TRUE}, the limits apply only to
the rest of the current computation.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{setTimeLimit} sets limits which apply to each top-level
computation, that is a command line (including any continuation lines)
entered at the console or from a file.  If it is called from within a
computation the limits apply to the rest of the computation and
(unless \code{transient = TRUE} to subsequent top-level computations.

\code{setSessionTimeLimit} sets limits for the rest of the
session.  Once a session limit is reached it is reset to \code{Inf}.

Setting any limit has a small overhead -- well under 1\% on the
systems measured.

Time limits are checked whenever a user interrupt could occur.
This will happen frequently in \R{} code and during \code{\LinkA{Sys.sleep}{Sys.sleep}},
but only at points in compiled C and Foreign code identified by the
code author.

`Total cpu time' includes that used by child processes where
the latter is reported.

It is possible (but very unusual) to build \R{} without support for
\code{\LinkA{proc.time}{proc.time}}, in which case these functions have no effect.
\end{Details}
\inputencoding{latin1}
\HeaderA{showConnections}{Display Connections}{showConnections}
\aliasA{closeAllConnections}{showConnections}{closeAllConnections}
\aliasA{getAllConnections}{showConnections}{getAllConnections}
\aliasA{getConnection}{showConnections}{getConnection}
\aliasA{stderr}{showConnections}{stderr}
\aliasA{stdin}{showConnections}{stdin}
\aliasA{stdout}{showConnections}{stdout}
\keyword{connection}{showConnections}
%
\begin{Description}\relax
Display aspects of connections.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
showConnections(all = FALSE)
getConnection(what)
closeAllConnections()

stdin()
stdout()
stderr()
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{all}] logical: if true all connections, including closed ones
and the standard ones are displayed.  If false only open user-created
connections are included.

\item[\code{what}] integer: a row number of the table given by
\code{showConnections}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{stdin()}, \code{stdout()} and \code{stderr()} are standard
connections corresponding to input, output and error on the console
respectively (and not necessarily to file streams).  They are text-mode
connections of class \code{"terminal"} which cannot be opened or
closed, and are read-only, write-only and write-only respectively.
The \code{stdout()} and \code{stderr()} connections can be
re-directed by \code{\LinkA{sink}{sink}} (and in some circumstances the
output from \code{stdout()} can be split: see the help page).

The encoding for \code{\LinkA{stdin}{stdin}()} when redirected can
be set by the command-line flag \option{--encoding}.

\code{showConnections} returns a matrix of information.  If a
connection object has been lost or forgotten, \code{getConnection}
will take a row number from the table and return a connection object
for that connection, which can be used to close the connection,
for example.  However, if there is no \R{} level object referring to the
connection it will be closed automatically at the next garbage
collection.

\code{closeAllConnections} closes (and destroys) all user
connections, restoring all \code{\LinkA{sink}{sink}} diversions as it does so.
\end{Details}
%
\begin{Value}
\code{stdin()}, \code{stdout()} and \code{stderr()} return connection
objects.

\code{showConnections} returns a character matrix of information with
a row for each connection, by default only for open non-standard connections.

\code{getConnection} returns a connection object, or \code{NULL}.
\end{Value}
%
\begin{Note}\relax
\code{stdin()} refers to the `console' and not to the C-level
\file{stdin} of the process.  The distinction matters in GUI consoles
(which may not have an active \file{stdin}, and if they do it may not
be connected to console input), and also in embedded applications.
If you want access to the C-level file stream \file{stdin}, use
\code{\LinkA{file}{file}("stdin")}.

When \R{} is reading a script from a file, the \emph{file} is the
`console': this is traditional usage to allow in-line data (see
`An Introduction to R' for an example).
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
showConnections(all = TRUE)

textConnection(letters)
# oops, I forgot to record that one
showConnections()
#  class     description      mode text   isopen   can read can write
#3 "letters" "textConnection" "r"  "text" "opened" "yes"    "no"     
## Not run: close(getConnection(3))

showConnections()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{shQuote}{Quote Strings for Use in OS Shells}{shQuote}
\keyword{utilities}{shQuote}
%
\begin{Description}\relax
Quote a string to be passed to an operating system shell.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
shQuote(string, type = c("sh", "csh", "cmd"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{string}] a character vector, usually of length one.
\item[\code{type}] character: the type of shell.  Partial matching is
supported.  \code{"cmd"} refers to the Windows NT shell, and is the
default under Windows.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The default type of quoting supported under Unix-alikes is that for
the Bourne shell \code{sh}.  If the string does not contain single
quotes, we can just surround it with single quotes.  Otherwise, the
string is surrounded in double quotes, which suppresses all special
meanings of metacharacters except dollar, backquote and backslash, so
these (and of course double quote) are preceded by backslash.  This
type of quoting is also appropriate for \code{bash}, \code{ksh} and
\code{zsh}.

The other type of quoting is for the C-shell (\code{csh} and
\code{tcsh}).  Once again, if the string does not contain single
quotes, we can just surround it with single quotes.  If it does
contain single quotes, we can use double quotes provided it does not
contain dollar or backquote (and we need to escape backslash,
exclamation mark and double quote).  As a last resort, we need to
split the string into pieces not containing single quotes and surround
each with single quotes, and the single quotes with double quotes.

\end{Details}
%
\begin{References}\relax
Loukides, M. et al (2002)
\emph{Unix Power Tools} Third Edition.  O'Reilly.  Section 27.12.

\url{http://www.mhuffman.com/notes/dos/bash_cmd.htm}
\end{References}
%
\begin{SeeAlso}\relax
\code{Quotes} for quoting \R{} code.

\code{\LinkA{sQuote}{sQuote}} for quoting English text.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
test <- "abc$def`gh`i\\j"
cat(shQuote(test), "\n")
## Not run: system(paste("echo", shQuote(test)))
test <- "don't do it!"
cat(shQuote(test), "\n")

tryit <- paste("use the", sQuote("-c"), "switch\nlike this")
cat(shQuote(tryit), "\n")
## Not run: system(paste("echo", shQuote(tryit)))
cat(shQuote(tryit, type="csh"), "\n")

## Windows-only example.
perlcmd <- 'print "Hello World\n";'
## Not run: shell(paste("perl -e", shQuote(perlcmd, type="cmd")))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sign}{Sign Function}{sign}
\keyword{arith}{sign}
%
\begin{Description}\relax
\code{sign} returns a vector with the signs of the corresponding
elements of \code{x} (the sign of a real number is 1, 0, or \eqn{-1}{}
if the number is positive, zero, or negative, respectively).

Note that \code{sign} does not operate on complex vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sign(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric vector
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function: methods can be defined for it
directly or via the \code{\LinkA{Math}{S3groupGeneric}} group generic.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{abs}{abs}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
sign(pi) # == 1
sign(-2:3)# -1 -1 0 1 1 1
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Signals}{Interrupting Execution of R}{Signals}
\keyword{utilities}{Signals}
%
\begin{Description}\relax
On receiving \code{SIGUSR1} \R{} will save the workspace and quit.
\code{SIGUSR2} has the same result except that the \code{\LinkA{.Last}{.Last}}
function and \code{\LinkA{on.exit}{on.exit}} expressions will not be called.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
kill -USR1 pid
kill -USR2 pid
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{pid}] The process ID of the R process
\end{ldescription}
\end{Arguments}
%
\begin{Section}{Warning}
It is possible that one or more R objects will be undergoing
modification at the time the signal is sent.  These objects could be
saved in a corrupted form.
\end{Section}
\inputencoding{latin1}
\HeaderA{sink}{Send R Output to a File}{sink}
\methaliasA{sink.number}{sink}{sink.number}
\keyword{file}{sink}
\keyword{connection}{sink}
%
\begin{Description}\relax
\code{sink} diverts \R{} output to a connection.

\code{sink.number()} reports how many diversions are in use.

\code{sink.number(type = "message")} reports the number of the
connection currently being used for error messages.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sink(file = NULL, append = FALSE, type = c("output", "message"),
     split = FALSE)

sink.number(type = c("output", "message"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] a writable connection or a character string naming the
file to write to, or \code{NULL} to stop sink-ing.
\item[\code{append}] logical. If \code{TRUE}, output will be appended to
\code{file}; otherwise, it will overwrite the contents of
\code{file}.
\item[\code{type}] character.  Either the output stream or the messages
stream.
\item[\code{split}] logical: if \code{TRUE}, output will be sent to the new
sink and to the current output stream, like the Unix program \code{tee}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{sink} diverts \R{} output to a connection.  If \code{file} is a
character string, a file connection with that name will be established
for the duration of the diversion.

Normal \R{} output (to connection \code{\LinkA{stdout}{stdout}}) is diverted by
the default \code{type = "output"}.  Only prompts and (most)
messages continue to appear on the console.  Messages sent to
\code{\LinkA{stderr}{stderr}()} (including those from \code{\LinkA{message}{message}},
\code{\LinkA{warning}{warning}} and \code{\LinkA{stop}{stop}}) can be diverted by
\code{sink(type = "message")} (see below).

\code{sink()} or \code{sink(file=NULL)} ends the last diversion (of
the specified type).  There is a stack of diversions for normal
output, so output reverts to the previous diversion (if there was
one).  The stack is of up to 21 connections (20 diversions).

If \code{file} is a connection it will be opened if necessary (in
\code{"wt"} mode) and closed once it is removed from the stack of
diversions.

\code{split = TRUE} only splits \R{} output (via \code{Rvprintf}) and
the default output from \code{\LinkA{writeLines}{writeLines}}: it does not split
all output that might be sent to \code{\LinkA{stdout}{stdout}()}.

Sink-ing the messages stream should be done only with great care.
For that stream \code{file} must be an already open connection, and
there is no stack of connections.
\end{Details}
%
\begin{Value}
\code{sink} returns \code{NULL}.

For \code{sink.number()} the number (0, 1, 2, \dots) of diversions of
output in place.

For \code{sink.number("message")} the connection number used for
messages, 2 if no diversion has been used.
\end{Value}
%
\begin{Section}{Warning}
Do not use a connection that is open for \code{sink} for any other
purpose.  The software will stop you closing one such inadvertently.

Do not sink the messages stream unless you understand the source code
implementing it and hence the pitfalls.
\end{Section}
%
\begin{Note}\relax
\code{sink(split = TRUE)} is only available on systems which support
the C99 function \code{va\_copy} (or under the name \code{\_\_va\_copy}),
but we know of no current systems which do not.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{capture.output}{capture.output}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
sink("sink-examp.txt")
i <- 1:10
outer(i, i, "*")
sink()
unlink("sink-examp.txt")
## Not run: 
## capture all the output to a file.
zz <- file("all.Rout", open="wt")
sink(zz)
sink(zz, type="message")
try(log("a"))
## back to the console
sink(type="message")
sink()
try(log("a"))

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{slice.index}{Slice Indexes in an Array}{slice.index}
\keyword{array}{slice.index}
%
\begin{Description}\relax
Returns a matrix of integers indicating the number of their slice in a
given array.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
slice.index(x, MARGIN)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an array.  If \code{x} has no dimension attribute, it is
considered a one-dimensional array.
\item[\code{MARGIN}] an integer giving the dimension number to slice by.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
An integer array \code{y} with dimensions corresponding to those of
\code{x} such that all elements of slice number \code{i} with respect
to dimension \code{MARGIN} have value \code{i}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{row}{row}} and \code{\LinkA{col}{col}} for determining row and column
indexes; in fact, these are special cases of \code{slice.index}
corresponding to \code{MARGIN} equal to 1 and 2, respectively when \code{x}
is a matrix.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- array(1 : 24, c(2, 3, 4))
slice.index(x, 2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{slotOp}{Extract Slots}{slotOp}
\aliasA{@}{slotOp}{@}
\keyword{manip}{slotOp}
%
\begin{Description}\relax
Extract the contents of a slot in a object with a formal (S4) class
structure.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
object@name
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] An object from a formally defined (S4) class.
\item[\code{name}] The character-string name of the slot.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This operator supports the formal classes of package \pkg{methods}, and
is enabled only when \pkg{methods} is loaded (as per default).  See
\code{\LinkA{slot}{slot}} for further details.

It is checked that \code{object} is an S4 object (see
\code{\LinkA{isS4}{isS4}}), and it is an error to attempt to use \code{@} on
any other object. (There is an exception for name \code{.Data} for
internal useonly.)

If \code{name} is not a slot name, an error is thrown. 
\end{Details}
%
\begin{Value}
The current contents of the slot.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{Extract}{Extract}}, \code{\LinkA{slot}{slot}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{socketSelect}{Wait on Socket Connections}{socketSelect}
\keyword{connection}{socketSelect}
%
\begin{Description}\relax
Waits for the first of several socket connections to become available.  
\end{Description}
%
\begin{Usage}
\begin{verbatim}
socketSelect(socklist, write = FALSE, timeout = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{socklist}] list of open socket connections
\item[\code{write}] logical. If \code{TRUE} wait for corresponding socket to
become available for writing; otherwise wait for it to become
available for reading.
\item[\code{timeout}] numeric or \code{NULL}. Time in seconds to wait for a
socket to become available; \code{NULL} means wait
indefinitely.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The values in \code{write} are recycled if necessary to make up a
logical vector the same length as \code{socklist}. Socket connections
can appear more than once in \code{socklist}; this can be useful if
you want to determine whether a socket is available for reading or
writing.
\end{Details}
%
\begin{Value}
Logical the same length as \code{socklist} indicating
whether the corresponding socket connection is available for
output or input, depending on the corresponding value of \code{write}.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
## test whether socket connection s is available for writing or reading
socketSelect(list(s,s),c(TRUE,FALSE),timeout=0)

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{solve}{Solve a System of Equations}{solve}
\methaliasA{solve.default}{solve}{solve.default}
\keyword{algebra}{solve}
%
\begin{Description}\relax
This generic function solves the equation \code{a \%*\% x = b} for \code{x},
where \code{b} can be either a vector or a matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
solve(a, b, ...)

## Default S3 method:
solve(a, b, tol, LINPACK = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{a}] a square numeric or complex matrix containing the coefficients of
the linear system.
\item[\code{b}] a numeric or complex vector or matrix giving the right-hand
side(s) of the linear system.  If missing, \code{b} is taken to be
an identity matrix and \code{solve} will return the inverse of \code{a}.
\item[\code{tol}] the tolerance for detecting linear dependencies in the
columns of \code{a}.  If \code{LINPACK} is \code{TRUE} the default
is \code{1e-7}, otherwise it is \code{.Machine\$double.eps}. Future
versions of R may use a tighter tolerance. Not presently used with
complex matrices \code{a}.
\item[\code{LINPACK}] logical. Should LINPACK be used (for compatibility with
\R{} < 1.7.0)?  Otherwise LAPACK is used.
\item[\code{...}] further arguments passed to or from other methods
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{a} or \code{b} can be complex, but this uses double complex
arithmetic which might not be available on all platforms and LAPACK
will always be used.

The row and column names of the result are taken from the column names
of \code{a} and of \code{b} respectively.  If \code{b} is missing the
column names of the result are the row names of \code{a}.  No check is
made that the column names of \code{a} and the row names of \code{b}
are equal.

For back-compatibility \code{a} can be a (real) QR decomposition,
although \code{\LinkA{qr.solve}{qr.solve}} should be called in that case.
\code{\LinkA{qr.solve}{qr.solve}} can handle non-square systems.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{solve.qr}{solve.qr}} for the \code{qr} method,
\code{\LinkA{chol2inv}{chol2inv}} for inverting from the Choleski factor
\code{\LinkA{backsolve}{backsolve}}, \code{\LinkA{qr.solve}{qr.solve}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
h8 <- hilbert(8); h8
sh8 <- solve(h8)
round(sh8 %*% h8, 3)

A <- hilbert(4)
A[] <- as.complex(A)
## might not be supported on all platforms
try(solve(A))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sort}{Sorting or Ordering Vectors}{sort}
\methaliasA{sort.default}{sort}{sort.default}
\methaliasA{sort.int}{sort}{sort.int}
\methaliasA{sort.POSIXlt}{sort}{sort.POSIXlt}
\keyword{univar}{sort}
\keyword{manip}{sort}
\keyword{arith}{sort}
%
\begin{Description}\relax
Sort (or \emph{order}) a vector or factor (partially) into
ascending (or descending) order.  For ordering along more than one
variable, e.g., for sorting data frames, see \code{\LinkA{order}{order}}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sort(x, decreasing = FALSE, ...)

## Default S3 method:
sort(x, decreasing = FALSE, na.last = NA, ...)

sort.int(x, partial = NULL, na.last = NA, decreasing = FALSE,
         method = c("shell", "quick"), index.return = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] for \code{sort} an \R{} object with a class or a numeric,
complex, character or logical vector.  For \code{sort.int}, a
numeric, complex, character or logical vector, or a factor.
\item[\code{decreasing}] logical.  Should the sort be increasing or decreasing?
Not available for partial sorting.
\item[\code{...}] arguments to be passed to or from methods or (for the
default methods and objects without a class) to \code{sort.int}.
\item[\code{na.last}] for controlling the treatment of \code{NA}s.
If \code{TRUE}, missing values in the data are put last; if
\code{FALSE}, they are put first; if \code{NA}, they are removed.
\item[\code{partial}] \code{NULL} or an integer vector of indices for
partial sorting.
\item[\code{method}] character string specifying the algorithm used.
\item[\code{index.return}] logical indicating if the ordering index vector should
be returned as well; this is only available for a few cases, the default
\code{na.last = NA} and full sorting of non-factors.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{sort} is a generic function for which methods can be written,
and \code{sort.int} is the internal method which is compatible
with S if only the first three arguments are used.

The default \code{sort} method makes use of \code{\LinkA{order}{order}} for
objects with classes, which in turn makes use of the generic function
\code{\LinkA{xtfrm}{xtfrm}}.

If \code{partial} is not \code{NULL}, it is taken to contain indices
of elements of the result which are to be placed in their correct
positions in the sorted array by partial sorting.  For each of the
result values in a specified position, any values smaller than that
one are guaranteed to have a smaller index in the sorted array and any
values which are greater are guaranteed to have a bigger index in the
sorted array.  (This is included for efficiency, and many of the
options are not available for partial sorting.  It is only
substantially more efficient if \code{partial} has a handful of
elements, and a full sort is done if there are more than 10.)  Names
are discarded for partial sorting.

Complex values are sorted first by the real part, then the imaginary
part.

The sort order for character vectors will depend on the collating
sequence of the locale in use: see \code{\LinkA{Comparison}{Comparison}}.
The sort order for factors is the order of their levels (which is
particularly appropriate for ordered factors).

Method \code{"shell"} uses Shellsort (an \eqn{O(n^{4/3})}{} variant
from Sedgewick (1996)).  If \code{x} has names a stable sort is used,
so ties are not reordered.  (This only matters if names are present.)

Method \code{"quick"} uses Singleton's Quicksort implementation and is
only available when \code{x} is numeric (double or integer) and
\code{partial} is \code{NULL}.  (For other types of \code{x} Shellsort
is used, silently.)  It is normally somewhat faster than Shellsort
(perhaps twice as fast on vectors of length a million) but has poor
performance in the rare worst case. (Peto's modification using a
pseudo-random midpoint is used to make the worst case rarer.)  This is
not a stable sort, and ties may be reordered.
\end{Details}
%
\begin{Value}
For \code{sort}, the result depends on the S3 method which is
dispatched.  If \code{x} does not have a class the rest of this section
applies.  For classed objects which do not have a specific method the
default method will be used and is equivalent to \code{x[order(x,
    ...)]}: this depends on the class having a suitable method for
\code{[} (and also that \code{\LinkA{order}{order}} will work, which is not
the case for a class based on a list).

For \code{sort.int} the value is the sorted vector unless
\code{index.return} is true, when the result is
a list with components named \code{x} and \code{ix} containing the
sorted numbers and the ordering index vector.  In the latter case,
if \code{method == "quick"} ties may be reversed in the ordering,
unlike \code{sort.list}, as quicksort is not stable.

All attributes are removed from the return value (see Becker \emph{et
al}, 1988, p.146) except names, which are sorted.  (If
\code{partial} is specified even the names are removed.)  Note that
this means that the returned value has no class, except for factors
and ordered factors (which are treated specially and whose result is
transformed back to the original class).
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Sedgewick, R. (1986)
A new upper bound for Shell sort.
\emph{J. Algorithms} \bold{7}, 159--173.

Singleton, R. C. (1969) An efficient algorithm for sorting with
minimal storage: Algorithm 347.
\emph{Communications of the ACM} \bold{12}, 185--187.
\end{References}
%
\begin{SeeAlso}\relax
`\LinkA{Comparison}{Comparison}' for how character strings are collated.

\code{\LinkA{order}{order}} for sorting on or reordering multiple variables.

\code{\LinkA{is.unsorted}{is.unsorted}}. \code{\LinkA{rank}{rank}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)

x <- swiss$Education[1:25]
x; sort(x); sort(x, partial = c(10, 15))
median.default # shows you another example for 'partial'

## illustrate 'stable' sorting (of ties):
sort(c(10:3,2:12), method = "sh", index.return=TRUE) # is stable
## $x : 2  3  3  4  4  5  5  6  6  7  7  8  8  9  9 10 10 11 12
## $ix: 9  8 10  7 11  6 12  5 13  4 14  3 15  2 16  1 17 18 19
sort(c(10:3,2:12), method = "qu", index.return=TRUE) # is not
## $x : 2  3  3  4  4  5  5  6  6  7  7  8  8  9  9 10 10 11 12
## $ix: 9 10  8  7 11  6 12  5 13  4 14  3 15 16  2 17  1 18 19
##        ^^^^^

x <- c(1:3, 3:5, 10)
is.unsorted(x)                #-> FALSE: is sorted
is.unsorted(x, strictly=TRUE) #-> TRUE : is not (and cannot be) sorted strictly

## Not run: 
## Small speed comparison simulation:
N <- 2000
Sim <- 20
rep <- 1000 # << adjust to your CPU
c1 <- c2 <- numeric(Sim)
for(is in 1:Sim){
  x <- rnorm(N)
  c1[is] <- system.time(for(i in 1:rep) sort(x, method = "shell"))[1]
  c2[is] <- system.time(for(i in 1:rep) sort(x, method = "quick"))[1]
  stopifnot(sort(x, method = "s") == sort(x, method = "q"))
}
rbind(ShellSort = c1, QuickSort = c2)
cat("Speedup factor of quick sort():\n")
summary({qq <- c1 / c2; qq[is.finite(qq)]})

## A larger test
x <- rnorm(1e7)
system.time(x1 <- sort(x, method = "shell"))
system.time(x2 <- sort(x, method = "quick"))
stopifnot(identical(x1, x2))

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{source}{Read R Code from a File or a Connection}{source}
\keyword{file}{source}
\keyword{programming}{source}
\keyword{connection}{source}
%
\begin{Description}\relax
\code{source} causes \R{} to accept its input from the named file or URL
(the name must be quoted) or connection.  Input is read and
\code{\LinkA{parse}{parse}}d by from that file until the end of the file is
reached, then the parsed expressions are evaluated sequentially in the
chosen environment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
source(file, local = FALSE, echo = verbose, print.eval = echo,
       verbose = getOption("verbose"),
       prompt.echo = getOption("prompt"),
       max.deparse.length = 150, chdir = FALSE,
       encoding = getOption("encoding"),
       continue.echo = getOption("continue"),
       skip.echo = 0, keep.source = getOption("keep.source"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] a connection or a character string giving the pathname
of the file or URL to read from.  \code{""} indicates the connection
\code{\LinkA{stdin}{stdin}()}.
\item[\code{local}] if \code{local} is \code{FALSE}, the statements scanned
are evaluated in the user's workspace (the global environment),
otherwise in the environment calling \code{source}.
\item[\code{echo}] logical; if \code{TRUE}, each expression is printed
after parsing, before evaluation.
\item[\code{print.eval}] logical; if \code{TRUE}, the result of
\code{eval(i)} is printed for each expression \code{i}; defaults
to the value of \code{echo}.
\item[\code{verbose}] if \code{TRUE}, more diagnostics (than just
\code{echo = TRUE}) are printed during parsing and evaluation of
input, including extra info for \bold{each} expression.
\item[\code{prompt.echo}] character; gives the prompt to be used if
\code{echo = TRUE}.
\item[\code{max.deparse.length}] integer; is used only if \code{echo} is
\code{TRUE} and gives the maximal number of characters output for
the deparse of a single expression.
\item[\code{chdir}] logical; if \code{TRUE} and \code{file} is a pathname,
the \R{} working directory is temporarily changed to the directory
containing \code{file} for evaluating.
\item[\code{encoding}] character vector.  The encoding(s) to be assumed when
\code{file} is a character string: see \code{\LinkA{file}{file}}.  A
possible value is \code{"unknown"} when the encoding is guesses: see
the `Details'.
\item[\code{continue.echo}] character; gives the prompt to use on
continuation lines if \code{echo = TRUE}.
\item[\code{skip.echo}] integer; how many comment lines at the start of the
file to skip if \code{echo = TRUE}.
\item[\code{keep.source}] logical: should the source formatting be retained
when echo expressions, if possible?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Note that running code via \code{source} differs in a few respects
from entering it at the \R{} command line.  Since expressions are not
executed at the top level, auto-printing is not done.  So you will
need to include explicit \code{print} calls for things you want to be
printed (and remember that this includes plotting by \pkg{lattice},
FAQ Q7.22).  Since the complete file is parsed before any of it is
run, syntax errors result in none of the code being run. If an error
occurs in running a syntactically correct script, anything assigned
into the workspace by code that has been run will be kept (just as
from the command line), but diagnostic information such as
\code{\LinkA{traceback}{traceback}()} will contain additional calls to
\code{eval.with.vis}, an undocumented internal function.

All versions of \R{} accept input from a connection with end of line
marked by LF (as used on Unix), CRLF (as used on DOS/Windows) or CR
(as used on classic Mac OS) and map this to newline.  The final line
can be incomplete, that is missing the final end-of-line marker.

If \code{\LinkA{options}{options}}("keep.source") is true (the default in
interactive use), the source of functions is kept so they can be
listed exactly as input. This imposes a limit of 128K bytes on the
function size and a nesting limit of 265.  Use \code{keep.source =
  FALSE} when these limits might take effect: if exceeded they generate
an error.

This paragraph applies if \code{file} is a filename (rather than a
connection).  If \code{encoding = "unknown"}, an attempt is made to
guess the encoding.  The result of \code{\LinkA{localeToCharset}{localeToCharset}()} is
used as a guide.  If \code{encoding} has two or more elements, they
are tried in turn until the file/URL can be read without error in the
trial encoding.  If an actual \code{encoding} is specified (rather than the
default or \code{"unknown"}) then character strings in the result will be
translated to the current encoding and marked as such (see
\code{\LinkA{Encoding}{Encoding}}) in Latin-1 and UTF-8 locales.

If \code{file} is a connection (including one specified by \code{""},
it is not possible to re-encode the input inside \code{source}, and so
the \code{encoding} argument is just used to mark character strings in the
parsed input: see \code{\LinkA{parse}{parse}}.

Unlike input from a console, lines in the file or on a connection can
contain an unlimited number of characters.

When \code{skip.echo > 0}, that many comment lines at the start of
the file will not be echoed.  This does not affect the execution of
the code at all.  If there are executable lines within the first
\code{skip.echo} lines, echoing will start with the first of them.

If \code{echo} is true and a deparsed expression exceeds
\code{max.deparse.length}, that many characters are output followed by
\code{ .... [TRUNCATED] }.  
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{demo}{demo}} which uses \code{source};
\code{\LinkA{eval}{eval}}, \code{\LinkA{parse}{parse}} and \code{\LinkA{scan}{scan}};
\code{\LinkA{options}{options}("keep.source")}.

\code{\LinkA{sys.source}{sys.source}} which is a streamlined version to source a
file into an environment.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## If you want to source() a bunch of files, something like
## the following may be useful:
 sourceDir <- function(path, trace = TRUE, ...) {
    for (nm in list.files(path, pattern = "\\.[RrSsQq]$")) {
       if(trace) cat(nm,":")           
       source(file.path(path, nm), ...)
       if(trace) cat("\n")
    }
 }
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Special}{Special Functions of Mathematics}{Special}
\aliasA{beta}{Special}{beta}
\aliasA{choose}{Special}{choose}
\aliasA{digamma}{Special}{digamma}
\aliasA{factorial}{Special}{factorial}
\aliasA{gamma}{Special}{gamma}
\aliasA{lbeta}{Special}{lbeta}
\aliasA{lchoose}{Special}{lchoose}
\aliasA{lfactorial}{Special}{lfactorial}
\aliasA{lgamma}{Special}{lgamma}
\aliasA{psigamma}{Special}{psigamma}
\aliasA{trigamma}{Special}{trigamma}
\keyword{math}{Special}
%
\begin{Description}\relax
Special mathematical functions related to the beta and gamma
functions.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
beta(a, b)
lbeta(a, b)

gamma(x)
lgamma(x)
psigamma(x, deriv = 0)
digamma(x)
trigamma(x)

choose(n, k)
lchoose(n, k)
factorial(x)
lfactorial(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{a, b}] non-negative numeric vectors.
\item[\code{x, n}] numeric vectors.
\item[\code{k, deriv}] integer vectors.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The functions \code{beta} and \code{lbeta} return the beta function
and the natural logarithm of the beta function,
\deqn{B(a,b) = \frac{\Gamma(a)\Gamma(b)}{\Gamma(a+b)}.}{}
The formal definition is
\deqn{B(a, b) = \int_0^1 t^{a-1} (1-t)^{b-1} dt}{}
(Abramowitz and Stegun section 6.2.1, page 258).  Note that it is only
defined in \R{} for non-negative \code{a} and \code{b}, and is infinite
if either is zero.

The functions \code{gamma} and \code{lgamma} return the gamma function
\eqn{\Gamma(x)}{} and the natural logarithm of \emph{the absolute value of} the
gamma function.  The gamma function is defined by
(Abramowitz and Stegun section 6.1.1, page 255)
\deqn{\Gamma(x) = \int_0^\infty t^{x-1} e^{-t} dt}{}
for all real \code{x} except zero and negative integers (when
\code{NaN} is returned).
\code{factorial(x)} (\eqn{x!}{} for non-negative integer \code{x})
is defined to be \code{gamma(x+1)} and \code{lfactorial} to be
\code{lgamma(x+1)}.

The functions \code{digamma} and \code{trigamma} return the first and second
derivatives of the logarithm of the gamma function.
\code{psigamma(x, deriv)} (\code{deriv >= 0}) computes the
\code{deriv}-th derivative of \eqn{\psi(x)}{}.
\deqn{\code{digamma(x)} = \psi(x) = \frac{d}{dx}\ln\Gamma(x) =
    \frac{\Gamma'(x)}{\Gamma(x)}}{}
This is often called the `polygamma' function, e.g. in
Abramowitz and Stegun (section 6.4.1, page 260); and its higher
derivatives (\code{deriv = 2:4}) have occasionally been called
`tetragamma', `pentagamma', and `hexagamma'.

The functions \code{choose} and \code{lchoose} return binomial
coefficients and their logarithms.  Note that \code{choose(n,k)} is
defined for all real numbers \eqn{n}{} and integer \eqn{k}{}.  For \eqn{k
    \ge 1}{} as \eqn{n(n-1)\cdots(n-k+1) / k!}{},
as \eqn{1}{} for \eqn{k = 0}{} and as \eqn{0}{} for negative \eqn{k}{}.
Non-integer values of \code{k} are rounded to an integer, with a warning.
\\{} \code{choose(*,k)} uses direct arithmetic (instead of
\code{[l]gamma} calls) for small \code{k}, for speed and accuracy
reasons.  Note the function \code{\LinkA{combn}{combn}} (package
\pkg{utils}) for enumeration of all possible combinations.

The \code{gamma}, \code{lgamma}, \code{digamma} and \code{trigamma}
functions are generic: methods can be defined for them individually or
via the \code{\LinkA{Math}{S3groupGeneric}} group generic.
\end{Details}
%
\begin{Source}\relax
\code{gamma}, \code{lgamma}, \code{beta} and \code{lbeta} are based on
C translations of Fortran subroutines by W. Fullerton of Los Alamos
Scientific Laboratory (now available as part of SLATEC).

\code{digamma}, \code{trigamma} and \code{psigamma} are based on

Amos, D. E. (1983). A portable Fortran subroutine for
derivatives of the psi function, Algorithm 610,
\emph{ACM Transactions on Mathematical Software} \bold{9(4)}, 494--502.

\end{Source}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (For \code{gamma} and \code{lgamma}.)

Abramowitz, M. and Stegun, I. A. (1972)
\emph{Handbook of Mathematical Functions.} New York: Dover.
Chapter 6: Gamma and Related Functions.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{Arithmetic}{Arithmetic}} for simple, \code{\LinkA{sqrt}{sqrt}} for
miscellaneous mathematical functions and \code{\LinkA{Bessel}{Bessel}} for the
real Bessel functions.

For the incomplete gamma function see \code{\LinkA{pgamma}{pgamma}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

choose(5, 2)
for (n in 0:10) print(choose(n, k = 0:n))

factorial(100)
lfactorial(10000)

## gamma has 1st order poles at 0, -1, -2, ...
## this will generate loss of precision warnings, so turn off
op <- options("warn")
options(warn = -1)
x <- sort(c(seq(-3,4, length.out=201), outer(0:-3, (-1:1)*1e-6, "+")))
plot(x, gamma(x), ylim=c(-20,20), col="red", type="l", lwd=2,
     main=expression(Gamma(x)))
abline(h=0, v=-3:0, lty=3, col="midnightblue")
options(op)

x <- seq(.1, 4, length.out = 201); dx <- diff(x)[1]
par(mfrow = c(2, 3))
for (ch in c("", "l","di","tri","tetra","penta")) {
  is.deriv <- nchar(ch) >= 2
  nm <- paste(ch, "gamma", sep = "")
  if (is.deriv) {
    dy <- diff(y) / dx # finite difference
    der <- which(ch == c("di","tri","tetra","penta")) - 1
    nm2 <- paste("psigamma(*, deriv = ", der,")",sep='')
    nm  <- if(der >= 2) nm2 else paste(nm, nm2, sep = " ==\n")
    y <- psigamma(x, deriv=der)
  } else {
    y <- get(nm)(x)
  }
  plot(x, y, type = "l", main = nm, col = "red")
  abline(h = 0, col = "lightgray")
  if (is.deriv) lines(x[-1], dy, col = "blue", lty = 2)
}
par(mfrow = c(1, 1))

## "Extended" Pascal triangle:
fN <- function(n) formatC(n, width=2)
for (n in -4:10) cat(fN(n),":", fN(choose(n, k= -2:max(3,n+2))), "\n")

## R code version of choose()  [simplistic; warning for k < 0]:
mychoose <- function(r,k)
    ifelse(k <= 0, (k==0),
           sapply(k, function(k) prod(r:(r-k+1))) / factorial(k))
k <- -1:6
cbind(k=k, choose(1/2, k), mychoose(1/2, k))

## Binomial theorem for n=1/2 ;
## sqrt(1+x) = (1+x)^(1/2) = sum_{k=0}^Inf  choose(1/2, k) * x^k :
k <- 0:10 # 10 is sufficient for ~ 9 digit precision:
sqrt(1.25)
sum(choose(1/2, k)* .25^k)


\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{split}{Divide into Groups and Reassemble}{split}
\methaliasA{split.data.frame}{split}{split.data.frame}
\methaliasA{split.default}{split}{split.default}
\aliasA{split<\Rdash}{split}{split<.Rdash.}
\methaliasA{split<\Rdash.data.frame}{split}{split<.Rdash..data.frame}
\methaliasA{split<\Rdash.default}{split}{split<.Rdash..default}
\aliasA{unsplit}{split}{unsplit}
\keyword{category}{split}
%
\begin{Description}\relax
\code{split} divides the data in the vector \code{x} into the groups
defined by \code{f}.  The replacement forms replace values
corresponding to such a division.  \code{unsplit} reverses the effect of
\code{split}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
split(x, f, drop = FALSE, ...)
split(x, f, drop = FALSE, ...) <- value
unsplit(value, f, drop = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] vector or data frame containing values to be divided into groups.
\item[\code{f}] a `factor' in the sense that \code{\LinkA{as.factor}{as.factor}(f)}
defines the grouping, or a list of such factors in which case their
interaction is used for the grouping.
\item[\code{drop}] logical indicating if levels that do not occur should be dropped
(if \code{f} is a \code{factor} or a list).
\item[\code{value}] a list of vectors or data frames compatible with a
splitting of \code{x}. Recycling applies if the lengths do not match.
\item[\code{...}] further potential arguments passed to methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{split} and \code{split<-} are generic functions with default and
\code{data.frame} methods.
The data frame
method can also be used to split a matrix into a list of matrices,
and the replacement form likewise, provided they are invoked
explicitly.

\code{unsplit} works with lists of vectors or data frames (assumed to
have compatible structure, as if created by \code{split}). It puts
elements or rows back in the positions given by \code{f}. In the data
frame case, row names are obtained by unsplitting the row name
vectors from the elements of \code{value}.

\code{f} is recycled as necessary and if the length of \code{x} is not
a multiple of the length of \code{f} a warning is printed.

Any missing values in \code{f} are dropped together with the
corresponding values of \code{x}.
\end{Details}
%
\begin{Value}
The value returned from \code{split} is a list of vectors containing
the values for the groups.  The components of the list are named by
the levels of \code{f} (after converting to a factor, or if already a
factor and \code{drop=TRUE}, dropping unused levels).

The replacement forms return their right hand side.  \code{unsplit}
returns a vector or data frame for which \code{split(x, f)} equals
\code{value}

\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{cut}{cut}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats); require(graphics)
n <- 10; nn <- 100
g <- factor(round(n * stats::runif(n * nn)))
x <- rnorm(n * nn) + sqrt(as.numeric(g))
xg <- split(x, g)
boxplot(xg, col = "lavender", notch = TRUE, varwidth = TRUE)
sapply(xg, length)
sapply(xg, mean)

### Calculate z-scores by group

z <- unsplit(lapply(split(x, g), scale), g)
tapply(z, g, mean)

# or

z <- x
split(z, g) <- lapply(split(x, g), scale)
tapply(z, g, sd)

### data frame variation

## Notice that assignment form is not used since a variable is being added

g <- airquality$Month
l <- split(airquality, g)
l <- lapply(l, transform, Oz.Z = scale(Ozone))
aq2 <- unsplit(l, g)
head(aq2)
with(aq2, tapply(Oz.Z,  Month, sd, na.rm=TRUE))
 

### Split a matrix into a list by columns
ma <- cbind(x = 1:10, y = (-4:5)^2)
split(ma, col(ma))

split(1:10, 1:2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sprintf}{Use C-style String Formatting Commands}{sprintf}
\aliasA{gettextf}{sprintf}{gettextf}
\keyword{print}{sprintf}
\keyword{character}{sprintf}
%
\begin{Description}\relax
A wrapper for the C function \code{sprintf}, that returns a character
vector containing a formatted combination of text and variable values.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sprintf(fmt, ...)
gettextf(fmt, ..., domain = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{fmt}] a character vector of format strings, each of up to 8192 bytes.
\item[\code{...}] values to be passed into \code{fmt}.  Only logical,
integer, real and character vectors are supported, but some coercion
will be done: see the `Details' section.
\item[\code{domain}] see \code{\LinkA{gettext}{gettext}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{sprintf} is a wrapper for the system \code{sprintf} C-library
function.  Attempts are made to check that the mode of the values
passed match the format supplied, and \R{}'s special values (\code{NA},
\code{Inf}, \code{-Inf} and \code{NaN}) are handled correctly.

\code{gettextf} is a convenience function which provides C-style
string formatting with possible translation of the format string.

The arguments (including \code{fmt}) are recycled if possible a whole
number of times to the length of the longest, and then the formatting
is done in parallel.  As from \R{} 2.9.0 zero-length arguments are
allowed and will give a zero-length result.  All arguments are
evaluated even if unused, and hence some types (e.g., \code{"symbol"}
or \code{"language"}, see \code{\LinkA{typeof}{typeof}}) are not allowed.

The following is abstracted from Kernighan and Ritchie
(see References).  The string \code{fmt} contains normal characters,
which are passed through to the output string, and also conversion
specifications which operate on the arguments provided through
\code{...}.  The allowed conversion specifications start with a
\code{\%} and end with one of the letters in the set
\code{aAdifeEgGosxX\%}.  These letters denote the following types:

\begin{description}

\item[\code{d, i, o, x, X}] Integer value, \code{o} being octal,
\code{x} and \code{X} being hexadecimal (using the same case for
\code{a-f} as the code).  Numeric variables with exactly integer
values will be coerced to integer. Formats \code{d} and \code{i}
can also be used for logical variables, which will be converted to
\code{0}, \code{1} or \code{NA}.

\item[\code{f}] Double precision value, in ``\bold{f}ixed
point'' decimal notation of the form "[-]mmm.ddd".  The number of
decimal places ("d") is specified by the precision: the default is 6;
a precision of 0 suppresses the decimal point.  Non-finite values
are converted to \code{NA}, \code{NaN} or (perhaps a sign followed
by) \code{Inf}.

\item[\code{e, E}] Double precision value, in
``\bold{e}xponential'' decimal notation of the
form \code{[-]m.ddde[+-]xx} or \code{[-]m.dddE[+-]xx}.

\item[\code{g, G}] Double precision value, in \code{\%e} or
\code{\%E} format if the exponent is less than -4 or greater than or
equal to the precision, and \code{\%f} format otherwise.
(The precision (default 6) specifies the number of
\emph{significant} digits here, whereas in \code{\%f, \%e}, it is
the number of digits after the decimal point.)

\item[\code{a, A}] Double precision value, in binary notation of the
form \code{[-]0xh.hhhp[+-]d}.  This is a binary fraction
expressed in hex multiplied by a (decimal) power of 2.  The number
of hex digits after the decimal point is specified by the precision:
the default is enough digits to represent exactly the internal
binary representation.  Non-finite values are converted to \code{NA},
\code{NaN} or (perhaps a sign followed by) \code{Inf}.  Format
\code{\%a} uses lower-case for \code{x}, \code{p} and the hex
values: format \code{\%A} uses upper-case.

This might not be supported on all platforms as it is a feature of C99.
The format is not uniquely defined: although it would be possible
to make the leading \code{h} always zero or one, this is not
always done.  Most systems will suppress trailing zeros, but a few
do not.  On a well-written platform, for normal numbers there will
be a leading one before the decimal point plus (by default) 13
hexadecimal digits, hence 53 bits.  (The treatment of denormalized
numbers is very platform-dependent.)

\item[\code{s}] Character string.  Character \code{NA}s are
converted to \code{"NA"}.

\item[\code{\%}] Literal \code{\%} (none of the extra formatting
characters given below are permitted in this case).


\end{description}

Conversion by \code{\LinkA{as.character}{as.character}} is used for non-character
arguments with \code{s} and by \code{\LinkA{as.double}{as.double}} for
non-double arguments with \code{f, e, E, g, G}.  NB: the length is
determined before conversion, so do not rely on the internal
coercion if this would change the length.  The coercion is done only
once, so if \code{length(fmt) > 1} then all elements must expect the
same types of arguments.

In addition, between the initial \code{\%} and the terminating
conversion character there may be, in any order:

\begin{description}

\item[\code{m.n}] Two numbers separated by a period, denoting the
field width (\code{m}) and the precision (\code{n}).
\item[\code{-}] Left adjustment of converted argument in its field.
\item[\code{+}] Always print number with sign: by default only
negative numbers are printed with a sign.
\item[a space] Prefix a space if the first character is not a sign.
\item[\code{0}] For numbers, pad to the field width with leading zeros.
\item[\code{\#}] specifies ``alternate output'' for numbers, its
action depending on the type:
For \code{x} or \code{X}, \code{0x} or \code{0X} will be prefixed
to a non-zero result.  For \code{e}, \code{e}, \code{f}, \code{g}
and \code{G}, the output will always have a decimal point; for
\code{g} and \code{G}, trailing zeros will not be removed.


\end{description}

Further, immediately after \code{\%} may come \code{1\$} to \code{99\$}
to refer to numbered argument: this allows arguments to be
referenced out of order and is mainly intended for translators of
error messages.  If this is done it is best if all formats are
numbered: if not the unnumbered ones process the arguments in order.
See the examples.  This notation allows arguments to be used more than
once, in which case they must be used as the same type (integer,
double or character).

A field width or precision (but not both) may be indicated by an
asterisk \code{*}: in this case an argument specifies the desired
number.  A negative field width is taken as a '-' flag followed by a
positive field width.  A negative precision is treated as if the
precision were omitted.  The argument should be integer, but a double
argument will be coerced to integer.

There is a limit of 8192 bytes on elements of \code{fmt}, and on
strings included from a single \code{\%}\emph{letter} conversion
specification.

Field widths and precisions of \code{\%s} conversions are interpreted
as bytes, not characters, as described in the C standard.
\end{Details}
%
\begin{Value}
A character vector of length that of the longest input.  If any
element of \code{fmt} or any character argument is declared as UTF-8,
the element of the result will be in UTF-8 and have the encoding
declared as UTF-8.  Otherwise it will be in the current locale's
encoding.
\end{Value}
%
\begin{Section}{Warning}
The format string is passed down the OS's \code{sprintf} function, and
incorrect formats can cause the latter to crash the \R{} process .  \R{}
does perform sanity checks on the format, and since \R{} 2.10.0, we have
not seen crashes anymore.  But not all possible user errors on all
platforms have been tested, and some might be terminal.
\end{Section}
%
\begin{Author}\relax
Original code by Jonathan Rougier.
\end{Author}
%
\begin{References}\relax
Kernighan, B. W. and Ritchie, D. M. (1988)
\emph{The C Programming Language.} Second edition, Prentice Hall.
describes the format options in table B-1 in the Appendix.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{formatC}{formatC}} for a way of formatting vectors of numbers in a
similar fashion.

\code{\LinkA{paste}{paste}} for another way of creating a vector combining
text and values.

\code{\LinkA{gettext}{gettext}} for the mechanisms for the automated translation
of text.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## be careful with the format: most things in R are floats
## only integer-valued reals get coerced to integer.

sprintf("%s is %f feet tall\n", "Sven", 7.1)      # OK
try(sprintf("%s is %i feet tall\n", "Sven", 7.1)) # not OK
    sprintf("%s is %i feet tall\n", "Sven", 7  )  # OK

## use a literal % :

sprintf("%.0f%% said yes (out of a sample of size %.0f)", 66.666, 3)

## various formats of pi :

sprintf("%f", pi)
sprintf("%.3f", pi)
sprintf("%1.0f", pi)
sprintf("%5.1f", pi)
sprintf("%05.1f", pi)
sprintf("%+f", pi)
sprintf("% f", pi)
sprintf("%-10f", pi) # left justified
sprintf("%e", pi)
sprintf("%E", pi)
sprintf("%g", pi)
sprintf("%g",   1e6 * pi) # -> exponential
sprintf("%.9g", 1e6 * pi) # -> "fixed"
sprintf("%G", 1e-6 * pi)

## no truncation:
sprintf("%1.f",101)

## re-use one argument three times, show difference between %x and %X
xx <- sprintf("%1$d %1$x %1$X", 0:15)
xx <- matrix(xx, dimnames=list(rep("", 16), "%d%x%X"))
noquote(format(xx, justify="right"))

## More sophisticated:

sprintf("min 10-char string '%10s'",
        c("a", "ABC", "and an even longer one"))

n <- 1:18
sprintf(paste("e with %2d digits = %.",n,"g",sep=""), n, exp(1))

## Using arguments out of order
sprintf("second %2$1.0f, first %1$5.2f, third %3$1.0f", pi, 2, 3)

## Using asterisk for width or precision
sprintf("precision %.*f, width '%*.3f'", 3, pi, 8, pi)

## Asterisk and argument re-use, 'e' example reiterated:
sprintf("e with %1$2d digits = %2$.*1$g", n, exp(1))

## re-cycle arguments
sprintf("%s %d", "test", 1:3)

## binary output showing rounding/representation errors
x <- seq(0, 1.0, 0.1); y <- c(0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1)
cbind(x, sprintf("%a", x), sprintf("%a", y))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sQuote}{Quote Text}{sQuote}
\aliasA{dQuote}{sQuote}{dQuote}
\keyword{character}{sQuote}
%
\begin{Description}\relax
Single or double quote text by combining with appropriate single or
double left and right quotation marks.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sQuote(x)
dQuote(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object, to be coerced to a character vector.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The purpose of the functions is to provide a simple means of markup
for quoting text to be used in the R output, e.g., in warnings or
error messages.

The choice of the appropriate quotation marks depends on both the
locale and the available character sets.  Older Unix/X11 fonts
displayed the grave accent (ASCII code 0x60) and the apostrophe (0x27)
in a way that they could also be used as matching open and close
single quotation marks.  Using modern fonts, or non-Unix systems,
these characters no longer produce matching glyphs.  Unicode provides
left and right single quotation mark characters (U+2018 and U+2019);
if Unicode markup cannot be assumed to be available, it seems good
practice to use the apostrophe as a non-directional single quotation
mark.

Similarly, Unicode has left and right double quotation mark characters
(U+201C and U+201D); if only ASCII's typewriter characteristics can be
employed, than the ASCII quotation mark (0x22) should be used as both
the left and right double quotation mark.

Some other locales also have the directional quotation marks, notably
on Windows.  TeX uses grave and apostrophe for the directional single
quotation marks, and doubled grave and doubled apostrophe for the
directional double quotation marks.

What rendering is used depend on the \code{\LinkA{options}{options}} setting for
\code{useFancyQuotes}.  If this is \code{FALSE} then the undirectional
ASCII quotation style is used.  If this is \code{TRUE} (the default),
Unicode directional quotes are used are used where available
(currently, UTF-8 locales on Unix-alikes and all Windows locales
except \code{C}): if set to \code{"UTF-8"} UTF-8 markup is used
(whatever the current locale). If set to \code{"TeX"}, TeX-style
markup is used.  Finally, if this is set to a character vector of
length four, the first two entries are used for beginning and ending
single quotes and the second two for beginning and ending double
quotes: this can be used to implement non-English quoting conventions
such as the use of guillemets.

Where fancy quotes are used, you should be aware that they may not be
rendered correctly as not all fonts include the requisite glyphs: for
example some have directional single quotes but not directional double
quotes.
\end{Details}
%
\begin{Value}
A character vector in the current locale's encoding.
\end{Value}
%
\begin{References}\relax
Markus Kuhn, ``ASCII and Unicode quotation marks''.
\url{http://www.cl.cam.ac.uk/~mgk25/ucs/quotes.html}
\end{References}
%
\begin{SeeAlso}\relax
\code{Quotes} for quoting \R{} code.

\code{\LinkA{shQuote}{shQuote}} for quoting OS commands.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
op <- options("useFancyQuotes")
paste("argument", sQuote("x"), "must be non-zero")
options(useFancyQuotes = FALSE)
cat("\ndistinguish plain", sQuote("single"), "and",
    dQuote("double"), "quotes\n")
options(useFancyQuotes = TRUE)
cat("\ndistinguish fancy", sQuote("single"), "and",
    dQuote("double"), "quotes\n")
options(useFancyQuotes = "TeX")
cat("\ndistinguish TeX", sQuote("single"), "and",
    dQuote("double"), "quotes\n")
if(l10n_info()$`Latin-1`) {
    options(useFancyQuotes = c("\xab", "\xbb", "\xbf", "?"))
    cat("\n", sQuote("guillemet"), "and",
        dQuote("Spanish question"), "styles\n")
} else if(l10n_info()$`UTF-8`) {
    options(useFancyQuotes = c("\xc2\xab", "\xc2\xbb", "\xc2\xbf", "?"))
    cat("\n", sQuote("guillemet"), "and",
        dQuote("Spanish question"), "styles\n")
}
options(op)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{srcfile}{References to source files}{srcfile}
\aliasA{.isOpen}{srcfile}{.isOpen}
\aliasA{as.character.srcref}{srcfile}{as.character.srcref}
\aliasA{close.srcfile}{srcfile}{close.srcfile}
\aliasA{getSrcLines}{srcfile}{getSrcLines}
\aliasA{open.srcfile}{srcfile}{open.srcfile}
\aliasA{open.srcfilecopy}{srcfile}{open.srcfilecopy}
\aliasA{print.srcfile}{srcfile}{print.srcfile}
\aliasA{print.srcref}{srcfile}{print.srcref}
\aliasA{srcfile-class}{srcfile}{srcfile.Rdash.class}
\aliasA{srcfilecopy}{srcfile}{srcfilecopy}
\aliasA{srcfilecopy-class}{srcfile}{srcfilecopy.Rdash.class}
\aliasA{srcref}{srcfile}{srcref}
\aliasA{srcref-class}{srcfile}{srcref.Rdash.class}
\keyword{debugging}{srcfile}
\keyword{utilities}{srcfile}
%
\begin{Description}\relax
These functions are for working with source files.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
srcfile(filename, encoding = getOption("encoding"))
srcfilecopy(filename, lines)
getSrcLines(srcfile, first, last)
srcref(srcfile, lloc)
## S3 method for class 'srcfile':
print(x, ...)
## S3 method for class 'srcfile':
open(con, line, ...)
## S3 method for class 'srcfile':
close(con, ...)
## S3 method for class 'srcref':
print(x, useSource = TRUE, ...)
## S3 method for class 'srcref':
as.character(x, useSource = TRUE, ...)
.isOpen(srcfile)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{filename}]  The name of a file 
\item[\code{encoding}]  The character encoding to assume for the file 
\item[\code{lines}]  A character vector of source lines.  Other \R{} objects will be coerced
to character. 
\item[\code{srcfile}]  A \code{srcfile} object. 
\item[\code{first, last, line}]  Line numbers. 
\item[\code{lloc}]  A vector of four values giving a source location; see
`Details'.
\item[\code{x, con}]  An object of the appropriate type. 
\item[\code{useSource}]  Whether to read the \code{srcfile} to obtain the text of a \code{srcref}. 
\item[\code{...}]  Additional arguments to the methods; these will be ignored. 
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These functions and classes handle source code references.

The \code{srcfile} function produces an object of class
\code{srcfile}, which contains the name and directory of a source code
file, along with its timestamp, for use in source level debugging (not
yet implemented) and source echoing.  The encoding of the file is
saved; see \code{\LinkA{file}{file}} for a discussion of encodings, and
\code{\LinkA{iconvlist}{iconvlist}} for a list of allowable encodings on your platform.

The \code{srcfilecopy} function produces an object of the descendant
class \code{srcfilecopy}, which saves the source lines in a character
vector.

The \code{getSrcLines} function reads the specified lines from
\code{srcfile}.

The \code{srcref} function produces an object of class \code{srcref},
which describes a range of characters in a \code{srcfile}.  The \code{lloc}
value gives the following values:  \code{c(first\_line, first\_column, last\_line, last\_column)}.

Methods are defined for \code{print}, \code{open}, and \code{close}
for classes \code{srcfile} and \code{srcfilecopy}. The \code{open}
method opens its internal \code{file} connection at a particular line;
if it was already open, it will be repositioned to that line.

Methods are defined for \code{print} and \code{as.character} for class
\code{srcref}.  The \code{as.character} method will read the associated
source file to obtain the text corresponding to the reference.  If an
error occurs (e.g. the file no longer exists), text like
\code{<srcref: "file" chars 1:1 to 2:10>} will be returned instead,
indicating the \code{line:column} ranges of the first and last character.

Lists of \code{srcref} objects may be attached to expressions as the
\code{"srcref"} attribute.  (The list of \code{srcref} objects should be the same
length as the expression.)  By default, expressions are printed by
\code{\LinkA{print.default}{print.default}} using the associated \code{srcref}.  To
see deparsed code instead, call \code{\LinkA{print}{print}} with argument
\code{useSource = FALSE}.  If a \code{srcref} object
is printed with \code{useSource = FALSE}, the \code{<srcref: ...>}
record will be printed.

\code{.isOpen} is intended for internal use:  it checks whether the
connection associated with a \code{srcfile} object is open.
\end{Details}
%
\begin{Value}
\code{srcfile} returns a \code{srcfile} object.

\code{srcfilecopy} returns a \code{srcfilecopy} object.

\code{getSrcLines} returns a character vector of source code lines.

\code{srcref} returns a \code{srcref} object.
\end{Value}
%
\begin{Author}\relax
Duncan Murdoch
\end{Author}
%
\begin{Examples}
\begin{ExampleCode}
src <- srcfile(system.file("DESCRIPTION", package = "base"))
getSrcLines(src, 1, 4)
ref <- srcref(src, c(1, 1, 2, 1000))
ref
print(ref, useSource = FALSE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Startup}{Initialization at Start of an R Session}{Startup}
\aliasA{.First}{Startup}{.First}
\methaliasA{.First.sys}{Startup}{.First.sys}
\aliasA{.OptRequireMethods}{Startup}{.OptRequireMethods}
\aliasA{.Renviron}{Startup}{.Renviron}
\aliasA{.Rprofile}{Startup}{.Rprofile}
\aliasA{Renviron}{Startup}{Renviron}
\methaliasA{Renviron.site}{Startup}{Renviron.site}
\aliasA{Rprofile}{Startup}{Rprofile}
\methaliasA{Rprofile.site}{Startup}{Rprofile.site}
\aliasA{R\_DEFAULT\_PACKAGES}{Startup}{R.Rul.DEFAULT.Rul.PACKAGES}
\aliasA{R\_ENVIRON}{Startup}{R.Rul.ENVIRON}
\aliasA{R\_ENVIRON\_USER}{Startup}{R.Rul.ENVIRON.Rul.USER}
\aliasA{R\_PROFILE}{Startup}{R.Rul.PROFILE}
\aliasA{R\_PROFILE\_USER}{Startup}{R.Rul.PROFILE.Rul.USER}
\keyword{environment}{Startup}
%
\begin{Description}\relax
In \R{}, the startup mechanism is as follows.

Unless \option{--no-environ} was given on the command line, \R{}
searches for site and user files to process for setting environment
variables.  The name of the site file is the one pointed to by the
environment variable \env{R\_ENVIRON}; if this is unset or empty,
\file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/etc/Renviron.site} is used (if it exists, which it
does not in a `factory-fresh' installation).
The name of the user file can be specified by the \env{R\_ENVIRON\_USER}
environment variable; if this is unset, the user files searched for are
\file{.Renviron} in the current or in the user's home directory (in
that order).
See `Details' for how the files are read.

Then \R{} searches for the site-wide startup profile unless the command
line option \option{--no-site-file} was given.  The name of this file
is taken from the value of the \env{R\_PROFILE} environment variable.
If this variable is unset, the default is
\file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/etc/Rprofile.site}, which is used if it exists
(which it does not in a `factory-fresh' installation).
This code is sourced into the \pkg{base} package.  Users need to be
careful not to unintentionally overwrite objects in \pkg{base}, and it
is normally advisable to use \code{\LinkA{local}{local}} if code needs to be
executed: see the examples.

Then, unless \option{--no-init-file} was given, \R{} searches for a user
profile file.  The name of this file can be specified by the
\env{R\_PROFILE\_USER} environment variable.  If this is unset, a file
called \file{.Rprofile} in the current directory or in the user's
home directory (in that order) is searched for.  The user profile is
sourced into the user workspace.

Note that when the site and user profile files are sourced only the
\pkg{base} package is loaded, so objects in other packages need to be
referred to by e.g. \code{utils::dump.frames} or after explicitly
loading the package concerned.

It then loads a saved image of the user workspace from \file{.RData}
if there is one (unless \option{--no-restore-data} or
\option{--no-restore} was specified on the command line).

Next, if a function \code{.First} is found on the search path,
it is executed as \code{.First()}.  Finally, function
\code{.First.sys()} in the \pkg{base} package is run. This calls
\code{\LinkA{require}{require}} to attach the default packages specified by
\code{\LinkA{options}{options}("defaultPackages")}.  If the \pkg{methods}
package is included, this will have been attached earlier (by function
\code{.OptRequireMethods()}) so that name space initializations such
as those from the user workspace will proceed correctly.

A function \code{.First} (and \code{\LinkA{.Last}{.Last}}) can be defined in
appropriate \file{.Rprofile} or \file{Rprofile.site} files or have
been saved in \file{.RData}.  If you want a different set of packages
than the default ones when you start, insert a call to
\code{\LinkA{options}{options}} in the \file{.Rprofile} or \file{Rprofile.site}
file.  For example, \code{options(defaultPackages = character())} will
attach no extra packages on startup (only the \pkg{base} package) (or
set \code{R\_DEFAULT\_PACKAGES=NULL} as an environment variable before
running \R{}).  Using \code{options(defaultPackages = "")} or
\code{R\_DEFAULT\_PACKAGES=""} enforces the R \emph{system} default.

On front-ends which support it, the commands history is read from the
file specified by the environment variable \env{R\_HISTFILE} (default
\file{.Rhistory}) unless \option{--no-restore-history} was specified
(or \option{--no-restore}).

The command-line flag \option{--vanilla} implies
\option{--no-site-file}, \option{--no-init-file},
\option{--no-restore} and \option{--no-environ}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.First <- function() { ...... }

.Rprofile <startup file>
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
Note that there are two sorts of files used in startup:
\emph{environment files} which contain lists of environment variables
to be set, and \emph{profile files} which contain \R{} code.

Lines in a site or user environment file should be either comment
lines starting with \code{\#}, or lines of the form
\code{\var{name}=\var{value}}. The latter sets the environmental
variable \code{\var{name}} to \code{\var{value}}, overriding an
existing value.  If \code{\var{value}} contains an expression of the
form \code{\$\{foo-bar\}}, the value is that of the environmental
variable \code{foo} if that exists and is set to a non-empty value,
otherwise \code{bar}.  (If it is of the form \code{\$\{foo\}}, the
default is \code{""}.)  This construction can be nested, so \code{bar}
can be of the same form (as in \code{\$\{foo-\$\{bar-blah\}\}}).  Note that
the braces are essential: \code{\$HOME} will not be interpreted.

Leading and trailing white space in \code{\var{value}} are stripped.
\code{\var{value}} is then processed in a similar way to a Unix shell:
in particular the outermost level of (single or double) quotes is
stripped, and backslashes are removed except inside quotes.
\end{Details}
%
\begin{Note}\relax
The file \file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/etc/Renviron} is
always read very early in the start-up processing.  It contains
environment variables set by \R{} in the configure process.  Values in
that file can be overridden in site or user environment files: do not
change \file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/etc/Renviron} itself.
Note that this is distinct from
\file{\var{\LinkA{R\_HOME}{R.Rul.HOME}}/etc/Renviron.site}.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Last}{.Last}} for final actions at the close of an \R{} session.
\code{\LinkA{commandArgs}{commandArgs}} for accessing the command line arguments.

There are examples of using startup files to set defaults for graphics
devices in the help for
\code{\LinkA{X11}{X11}} and \code{\LinkA{quartz}{quartz}}.

\emph{An Introduction to R} for more command-line options: those
affecting memory management are covered in the help file for
\LinkA{Memory}{Memory}.

For profiling code, see \code{\LinkA{Rprof}{Rprof}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
## Example ~/.Renviron on Unix
R_LIBS=~/R/library
PAGER=/usr/local/bin/less

## Example .Renviron on Windows
R_LIBS=C:/R/library
MY_TCLTK="c:/Program Files/Tcl/bin"

## Example of setting R_DEFAULT_PACKAGES (from R CMD check)
R_DEFAULT_PACKAGES='utils,grDevices,graphics,stats'
# this loads the packages in the order given, so they appear on
# the search path in reverse order.

## Example of .Rprofile
options(width=65, digits=5)
options(show.signif.stars=FALSE)
setHook(packageEvent("grDevices", "onLoad"),
        function(...) grDevices::ps.options(horizontal=FALSE))
set.seed(1234)
.First <- function() cat("\n   Welcome to R!\n\n")
.Last <- function()  cat("\n   Goodbye!\n\n")

## Example of Rprofile.site
local({
  # add MASS to the default packages, set a CRAN mirror
  old <- getOption("defaultPackages"); r <- getOption("repos")
  r["CRAN"] <- "http://my.local.cran"
  options(defaultPackages = c(old, "MASS"), repos = r)
})

## if .Renviron contains
FOOBAR="coo\bar"doh\ex"abc\"def'"

## then we get
# > cat(Sys.getenv("FOOBAR"), "\n")
# coo\bardoh\exabc"def'

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{stop}{Stop Function Execution}{stop}
\aliasA{geterrmessage}{stop}{geterrmessage}
\keyword{environment}{stop}
\keyword{programming}{stop}
\keyword{error}{stop}
%
\begin{Description}\relax
\code{stop} stops execution of the current expression and executes
an error action.

\code{geterrmessage} gives the last error message.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
stop(..., call. = TRUE, domain = NULL)
geterrmessage()
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] zero or more objects which can be coerced to character
(and which are pasted together with no separator) or a single
condition object.
\item[\code{call.}] logical, indicating if the call should become part of the
error message.
\item[\code{domain}] see \code{\LinkA{gettext}{gettext}}. If \code{NA}, messages will
not be translated.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The error action is controlled by error handlers established within
the executing code and by the current default error handler set by
\code{options(error=)}.  The error is first signaled as if using
\code{\LinkA{signalCondition}{signalCondition}()}.  If there are no handlers or if all handlers
return, then the error message is printed (if
\code{options("show.error.messages")} is true) and the default error
handler is used.  The default behaviour (the \code{NULL}
error-handler) in interactive use is to return to the top level
prompt or the top level browser, and in non-interactive use to
(effectively) call \code{\LinkA{q}{q}("no", status=1, runLast=FALSE}).
The default handler stores the error message in a buffer; it can be
retrieved by \code{geterrmessage()}.  It also stores a trace of
the call stack that can be retrieved by \code{\LinkA{traceback}{traceback}()}.

Errors will be truncated to \code{getOption("warning.length")}
characters, default 1000.

If a condition object is supplied it should be the only argument, and
further arguments will be ignored, with a warning.
\end{Details}
%
\begin{Value}
\code{geterrmessage} gives the last error message, as a character string
ending in \code{"\bsl{}n"}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{warning}{warning}}, \code{\LinkA{try}{try}} to catch errors and retry,
and \code{\LinkA{options}{options}} for setting error handlers.
\code{\LinkA{stopifnot}{stopifnot}} for validity testing.  \code{tryCatch}
and \code{withCallingHandlers} can be used to establish custom handlers
while executing an expression.

\code{\LinkA{gettext}{gettext}} for the mechanisms for the automated translation
of messages.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
options(error = expression(NULL))
# don't stop on stop(.)  << Use with CARE! >>

iter <- 12
if(iter > 10) stop("too many iterations")

tst1 <- function(...) stop("dummy error")
tst1(1:10, long, calling, expression)

tst2 <- function(...) stop("dummy error", call. = FALSE)
tst2(1:10, longcalling, expression, but.not.seen.in.Error)

options(error = NULL)# revert to default
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{stopifnot}{Ensure the `Truth' of R Expressions}{stopifnot}
\keyword{environment}{stopifnot}
\keyword{programming}{stopifnot}
\keyword{error}{stopifnot}
%
\begin{Description}\relax
If any of the expressions in \code{...} are not \code{\LinkA{all}{all}}
\code{TRUE}, \code{\LinkA{stop}{stop}} is called, producing an error message
indicating the \emph{first} of the elements of \code{...} which were
not true.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
stopifnot(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] any number of (\code{\LinkA{logical}{logical}}) \R{} expressions,
which should evaluate to \code{\LinkA{TRUE}{TRUE}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This function is intended for use in regression tests or also argument
checking of functions, in particular to make them easier to read.

\code{stopifnot(A, B)} is conceptually equivalent to
\code{\{ if(any(is.na(A)) || !all(A)) stop(...) ;
           if(any(is.na(B)) || !all(B)) stop(...) \}}.
\end{Details}
%
\begin{Value}
(\code{\LinkA{NULL}{NULL}} if all statements in \code{...} are \code{TRUE}.)
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{stop}{stop}}, \code{\LinkA{warning}{warning}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
stopifnot(1 == 1, all.equal(pi, 3.14159265), 1 < 2) # all TRUE

m <- matrix(c(1,3,3,1), 2,2)
stopifnot(m == t(m), diag(m) == rep(1,2)) # all(.) |=>  TRUE

op <- options(error = expression(NULL))
# "disable stop(.)"  << Use with CARE! >>

stopifnot(all.equal(pi, 3.141593),  2 < 2, all(1:10 < 12), "a" < "b")
stopifnot(all.equal(pi, 3.1415927), 2 < 2, all(1:10 < 12), "a" < "b")

options(op)# revert to previous error handler
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{strptime}{Date-time Conversion Functions to and from Character}{strptime}
\aliasA{as.character.POSIXt}{strptime}{as.character.POSIXt}
\aliasA{format.POSIXct}{strptime}{format.POSIXct}
\aliasA{format.POSIXlt}{strptime}{format.POSIXlt}
\aliasA{ISOdate}{strptime}{ISOdate}
\aliasA{ISOdatetime}{strptime}{ISOdatetime}
\aliasA{strftime}{strptime}{strftime}
\keyword{utilities}{strptime}
\keyword{chron}{strptime}
%
\begin{Description}\relax
Functions to convert between character representations and objects of
classes \code{"POSIXlt"} and \code{"POSIXct"} representing calendar
dates and times.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
## S3 method for class 'POSIXct':
format(x, format = "", tz = "", usetz = FALSE, ...)
## S3 method for class 'POSIXlt':
format(x, format = "", usetz = FALSE, ...)

## S3 method for class 'POSIXt':
as.character(x, ...)

strftime(x, format="", tz = "", usetz = FALSE, ...)
strptime(x, format, tz = "")

ISOdatetime(year, month, day, hour, min, sec, tz = "")
ISOdate(year, month, day, hour = 12, min = 0, sec = 0, tz = "GMT")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An object to be converted.
\item[\code{tz}] A timezone specification to be used for the conversion.
System-specific (see \code{\LinkA{as.POSIXlt}{as.POSIXlt}}), but \code{""} is the
current time zone, and \code{"GMT"} is UTC.
\item[\code{format}] A character string.  The default is
\code{"\%Y-\%m-\%d \%H:\%M:\%S"} if any component has a time
component which is not midnight, and \code{"\%Y-\%m-\%d"}
otherwise.  If \code{\LinkA{options}{options}("digits.secs")} is set, up to
the specified number of digits will be printed for seconds.
\item[\code{...}] Further arguments to be passed from or to other methods.
\item[\code{usetz}] logical.  Should the timezone be appended to the output?
This is used in printing times, and as a workaround for problems with
using \code{"\%Z"} on most Linux systems.
\item[\code{year, month, day}] numerical values to specify a day.
\item[\code{hour, min, sec}] numerical values for a time within a day.
Fractional seconds are allowed.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{format} and \code{as.character} methods and \code{strftime}
convert objects from the classes \code{"POSIXlt"} and \code{"POSIXct"}
(not \code{strftime}) to character vectors.

\code{strptime} converts character strings to class \code{"POSIXlt"}:
its input \code{x} is first coerced to character if necessary.  Each
string is processed as far as necessary for the format specified: any
trailing characters are ignored.

\code{strftime} is a wrapper for \code{format.POSIXlt}, and it and
\code{format.POSIXct} first converts to class \code{"POSIXlt"} by
calling \code{\LinkA{as.POSIXlt}{as.POSIXlt}}.  Note that only that conversion
depends on the time zone.

The usual vector re-cycling rules are applied to \code{x} and
\code{format} so the answer will be of length that of the longer of the
vectors.

Locale-specific conversions to and from character strings are used
where appropriate and available.  This affects the names of the days
and months, the AM/PM indicator (if used) and the separators in
formats such as \code{\%x} and \code{\%X} (via the setting of the
\code{LC\_TIME} locale category).

The details of the formats are system-specific, but the following are
defined by the ISO C / POSIX standard for \code{strftime} and are
likely to be widely available.  A \emph{conversion specification} is
introduced by \code{\%}, usually followed by a single letter or
\code{O} or \code{E} and then a single letter.
Any character in the format string not part of a conversion specification
is interpreted literally (and \code{\%\%} gives \code{\%}).  Widely
implemented conversion specifications include
\begin{description}

\item[\code{\%a}] Abbreviated weekday name in the current
locale. (Also matches full name on input.)
\item[\code{\%A}] Full weekday name in the current locale.  (Also
matches abbreviated name on input.)
\item[\code{\%b}] Abbreviated month name in the current
locale. (Also matches full name on input.)
\item[\code{\%B}] Full month name in the current locale.  (Also
matches abbreviated name on input.)
\item[\code{\%c}] Date and time, locale-specific.
\item[\code{\%d}] Day of the month as decimal number (01--31).
\item[\code{\%H}] Hours as decimal number (00--23).
\item[\code{\%I}] Hours as decimal number (01--12).
\item[\code{\%j}] Day of year as decimal number (001--366).
\item[\code{\%m}] Month as decimal number (01--12).
\item[\code{\%M}] Minute as decimal number (00--59).
\item[\code{\%p}] AM/PM indicator in the locale.  Used in
conjunction with \code{\%I} and \bold{not} with \code{\%H}.  An
empty string in some locales.
\item[\code{\%S}] Second as decimal number (00--61), allowing for
up to two leap-seconds (but POSIX-compliant OSes will ignore leap
seconds).

\item[\code{\%U}] Week of the year as decimal number (00--53) using
Sunday as the first day 1 of the week (and typically with the
first Sunday of the year as day 1 of week 1).  The US convention.
\item[\code{\%w}] Weekday as decimal number (0--6, Sunday is 0).
\item[\code{\%W}] Week of the year as decimal number (00--53) using
Monday as the first day of week (and typically with the
first Monday of the year as day 1 of week 1). The UK convention.
\item[\code{\%x}] Date, locale-specific.
\item[\code{\%X}] Time, locale-specific.
\item[\code{\%y}] Year without century (00--99). If you use this on
input, which century you get is system-specific.  So don't!  Most often
values 00 to 68 are prefixed by 20 and 69 to 99 by 19 -- that is
the behaviour specified by the 2001 POSIX standard, but it does
also say `it is expected that in a future version of IEEE
Std 1003.1-2001 the default century inferred from a 2-digit year will
change'. 

\item[\code{\%Y}] Year with century.
\item[\code{\%z}] (output only.) Offset from Greenwich, so
\code{-0800} is 8 hours west of Greenwich.
\item[\code{\%Z}] (output only.) Time zone as a character
string (empty if not available).

\end{description}

Where leading zeros are shown they will be used on output but are
optional on input.

Also defined in the current standards but less widely implemented
(e.g. not for output on Windows) are
\begin{description}

\item[\code{\%C}] Century (00--99): the integer part of the year
divided by 100.
\item[\code{\%D}] Locale-specific date format such as
\code{\%m/\%d/\%y}: ISO C99 says it should be that exact format.
\item[\code{\%e}] Day of the month as decimal number (1--31), with
a leading space for a single-digit number.
\item[\code{\%F}] Equivalent to \%Y-\%m-\%d (the ISO 8601 date
format).
\item[\code{\%g}] The last two digits of the week-based year
(see \code{\%V}).  (Typically accepted but ignored on input.)
\item[\code{\%G}] The week-based year (see \code{\%V}) as a decimal
number.  (Typically accepted but ignored on input.)
\item[\code{\%h}] Equivalent to \code{\%b}.
\item[\code{\%k}] The 24-hour clock time with single digits preceded
by a blank.
\item[\code{\%l}] The 12-hour clock time with single digits preceded
by a blank.
\item[\code{\%n}] Newline on output, arbitrary whitespace on input.
\item[\code{\%r}] The 12-hour clock time (using the locale's AM or PM).
\item[\code{\%R}] Equivalent to \code{\%H:\%M}.
\item[\code{\%t}] Tab on output, arbitrary whitespace on input.
\item[\code{\%T}] Equivalent to \code{\%H:\%M:\%S}.
\item[\code{\%u}] Weekday as a decimal number (1--7, Monday is 1).
\item[\code{\%V}] Week of the year as decimal number (00--53) as
defined in ISO 8601.
If the week (starting on Monday) containing 1 January has four or
more days in the new year, then it is considered week 1.  Otherwise, it
is the last week of the previous year, and the next week is week
1.  (Typically accepted but ignored on input.)

\end{description}

For output (and possibly input) there are also \code{\%O[dHImMUVwWy]}
which may emit numbers in an alternative locale-dependent format
(e.g. roman numerals), and \code{\%E[cCyYxX]} which can use an
alternative `era' (e.g. a different religious calendar).  Which
of these are supported is OS-dependent.

Specific to \R{} is \code{\%OSn}, which for output gives the
seconds to \code{0 <= n <= 6} decimal places (and if \code{\%OS} is
not followed by a digit, it uses the setting of
\code{\LinkA{getOption}{getOption}("digits.secs")}, or if that is unset, \code{n = 3}).
Further, for \code{strptime} \code{\%OS} will input seconds including
fractional seconds.  Note that \code{\%S} ignores (and not rounds)
fractional parts on output.

The behaviour of other conversion specifications (and even if other
character sequences commencing with \code{\%} \emph{are} conversion
specifications) is system-specific.

\code{ISOdatetime} and \code{ISOdate} are convenience wrappers for
\code{strptime}, that differ only in their defaults and that
\code{ISOdate} sets a timezone.  (For dates without times it would be
better to use the \code{"\LinkA{Date}{Date}"} class.)
\end{Details}
%
\begin{Value}
The \code{format} methods and \code{strftime} return character vectors
representing the time.  \code{NA} times are returned as \code{NA\_character\_}.

\code{strptime} turns character representations into an object of
class \code{"\LinkA{POSIXlt}{POSIXlt}"}.  The timezone is used to set the
\code{isdst} component and to set the \code{"tzone"} attribute if
\code{tz != ""}.

\code{ISOdatetime} and \code{ISOdate} return an object of class
\code{"\LinkA{POSIXct}{POSIXct}"}.
\end{Value}
%
\begin{Note}\relax
The default formats follow the rules of the ISO 8601 international
standard which expresses a day as \code{"2001-02-28"} and a time as
\code{"14:01:02"} using leading zeroes as here.  The ISO form uses no
space to separate dates and times.

If the date string does not specify the date completely, the returned
answer may be system-specific.  The most common behaviour is to assume
that unspecified seconds, minutes or hours are zero, and a missing
year, month or day is the current one.  If it specifies a date
incorrectly, reliable implementations will give an error and the date
is reported as \code{NA}.  Unfortunately some common implementations
(such as \samp{glibc}) are unreliable and guess at the intended meaning.

If the timezone specified is invalid on your system, what happens is
system-specific but it will probably be ignored.

OS facilities will probably not print years before 1CE (aka 1AD)
correctly.

Remember that in most timezones some times do not occur and some occur
twice because of transitions to/from summer time.  What happens in
those cases is OS-specific.
\end{Note}
%
\begin{References}\relax
International Organization for Standardization (2004, 1988, 1997,
\dots)
\emph{ISO 8601. Data elements and interchange formats --
Information interchange -- Representation of dates and times.}
For links to versions available on-line see (at the time of writing)
\url{http://www.qsl.net/g1smd/isopdf.htm}; for information on the
current official version, see
\url{http://www.iso.org/iso/en/prods-services/popstds/datesandtime.html}.
\end{References}
%
\begin{SeeAlso}\relax
\LinkA{DateTimeClasses}{DateTimeClasses} for details of the date-time classes;
\code{\LinkA{locales}{locales}} to query or set a locale.

Your system's help pages on \code{strftime} and \code{strptime} to
see how to specify their formats.
(On some systems \code{strptime} is replaced by corrected code from
\samp{glibc}, when all the conversion specifications described here
are supported, but with no alternative number representation nor era
available in any locale.)
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## locale-specific version of date()
format(Sys.time(), "%a %b %d %X %Y %Z")

## time to sub-second accuracy (if supported by the OS)
format(Sys.time(), "%H:%M:%OS3")

## read in date info in format 'ddmmmyyyy'
## This will give NA(s) in some locales; setting the C locale
## as in the commented lines will overcome this on most systems.
## lct <- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
z <- strptime(x, "%d%b%Y")
## Sys.setlocale("LC_TIME", lct)
z

## read in date/time info in format 'm/d/y h:m:s'
dates <- c("02/27/92", "02/27/92", "01/14/92", "02/28/92", "02/01/92")
times <- c("23:03:20", "22:29:56", "01:03:30", "18:21:03", "16:56:26")
x <- paste(dates, times)
strptime(x, "%m/%d/%y %H:%M:%S")

## time with fractional seconds
z <- strptime("20/2/06 11:16:16.683", "%d/%m/%y %H:%M:%OS")
z # prints without fractional seconds
op <- options(digits.secs=3)
z
options(op)

## timezones are not portable, but 'EST5EDT' comes pretty close.
(x <- strptime(c("2006-01-08 10:07:52", "2006-08-07 19:33:02"),
               "%Y-%m-%d %H:%M:%S", tz="EST5EDT"))
attr(x, "tzone")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{strsplit}{Split the Elements of a Character Vector}{strsplit}
\keyword{character}{strsplit}
%
\begin{Description}\relax
Split the elements of a character vector \code{x} into substrings
according to the matches to substring \code{split} within them.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
strsplit(x, split, extended = TRUE, fixed = FALSE, perl = FALSE,
         useBytes = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] 
character vector, each element of which is to be split.  Other
inputs, including a factor, will give an error.

\item[\code{split}] 
character vector (or object which can be coerced to such)
containing \LinkA{regular expression}{regular expression}(s) (unless \code{fixed = TRUE})
to use for splitting.  If empty matches occur, in particular if
\code{split} has length 0, \code{x} is split into single characters.
If \code{split} has length greater than 1, it is re-cycled along
\code{x}.

\item[\code{extended}] 
logical.  If \code{TRUE} (the default), extended regular expression
matching is used, and if \code{FALSE} basic regular expressions are
used (these are deprecated).

\item[\code{fixed}] 
logical.  If \code{TRUE} match \code{split} exactly, otherwise
use regular expressions.  Has priority over \code{perl} and
\code{extended}.

\item[\code{perl}] 
logical.  Should perl-compatible regexps be used?
Has priority over \code{extended}.

\item[\code{useBytes}] logical.  If \code{TRUE} the matching is done
byte-by-byte rather than character-by-character, and inputs with
marked encodings are not converted.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Argument \code{split} will be coerced to character, so
you will see uses with \code{split = NULL} to mean
\code{split = character(0)}, including in the examples below.

Note that splitting into single characters can be done \emph{via}
\code{split = character(0)} or \code{split = ""}; the two are
equivalent. The definition of `character' here depends on the
locale: in a single-byte locale it is a byte, and in a multi-byte
locale it is the unit represented by a `wide character' (almost
always a Unicode point).


A missing value of \code{split} does not split the corresponding
element(s) of \code{x} at all.

The algorithm applied to each input string is
\begin{alltt}
    repeat \{
        if the string is empty
            break.
        if there is a match
            add the string to the left of the match to the output.
            remove the match and all to the left of it.
        else
            add the string to the output.
            break.
    \}
  \end{alltt}

Note that this means that if there is a match at the beginning of a
(non-empty) string, the first element of the output is \code{""}, but
if there is a match at the end of the string, the output is the same
as with the match removed. 
\end{Details}
%
\begin{Value}
A list of the same length as \code{x}, the \code{i}-th element of which
contains the vector of splits of \code{x[i]}.

If any element of \code{x} or \code{split} is declared to be in UTF-8
(see \code{\LinkA{Encoding}{Encoding}}, non-ASCII character strings in the result
will be in UTF-8 and have their encoding declared as UTF-8.  As from
\R{} 2.10.0, for \code{perl = TRUE, useBytes = FALSE} all strings in a
multibyte locale are translated to UTF-8.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{paste}{paste}} for the reverse,
\code{\LinkA{grep}{grep}} and \code{\LinkA{sub}{sub}} for string search and
manipulation; also \code{\LinkA{nchar}{nchar}}, \code{\LinkA{substr}{substr}}.

`\LinkA{regular expression}{regular expression}' for the details of the pattern
specification.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
noquote(strsplit("A text I want to display with spaces", NULL)[[1]])

x <- c(as = "asfef", qu = "qwerty", "yuiop[", "b", "stuff.blah.yech")
# split x on the letter e
strsplit(x, "e")

unlist(strsplit("a.b.c", "."))
## [1] "" "" "" "" ""
## Note that 'split' is a regexp!
## If you really want to split on '.', use
unlist(strsplit("a.b.c", "\\."))
## [1] "a" "b" "c"
## or
unlist(strsplit("a.b.c", ".", fixed = TRUE))

## a useful function: rev() for strings
strReverse <- function(x)
        sapply(lapply(strsplit(x, NULL), rev), paste, collapse="")
strReverse(c("abc", "Statistics"))

## get the first names of the members of R-core
a <- readLines(file.path(R.home("doc"),"AUTHORS"))[-(1:8)]
a <- a[(0:2)-length(a)]
(a <- sub(" .*","", a))
# and reverse them
strReverse(a)

## Note that final empty strings are not produced:
strsplit(paste(c("", "a", ""), collapse="#"), split="#")[[1]]
# [1] ""  "a"
## and also an empty string is only produced before a definite match:
strsplit("", " ")[[1]]    # character(0)
strsplit(" ", " ")[[1]]   # [1] ""
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{strtrim}{Trim Character Strings to Specified Widths}{strtrim}
\keyword{character}{strtrim}
\keyword{utilities}{strtrim}
%
\begin{Description}\relax
Trim character strings to specified display widths.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
strtrim(x, width)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character vector, or an object which can be coerced to a
character vector by \code{\LinkA{as.character}{as.character}}.
\item[\code{width}] Positive integer values: recycled to the length of \code{x}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
`Width' is interpreted as the display width in a monospaced
font.  What happens with non-printable characters (such as backspace, tab)
is implementation-dependent and may depend on the locale (e.g. they
may be included in the count or they may be omitted).

Using this function rather than \code{\LinkA{substr}{substr}} is important when
there might be double-width characters in character vectors
\end{Details}
%
\begin{Value}
A character vector of the same length and with the same attributes
as \code{x} (after possible coercion).

Elements of the result will be have the encoding declared as that of
the current locale (see \code{\LinkA{Encoding}{Encoding}} if the corresponding
input had a declared encoding and the current locale is either Latin-1
or UTF-8.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
strtrim(c("abcdef", "abcdef", "abcdef"), c(1,5,10))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{structure}{Attribute Specification}{structure}
\keyword{attribute}{structure}
\keyword{manip}{structure}
%
\begin{Description}\relax
\code{structure} returns the given object with further 
\LinkA{attributes}{attributes} set.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
structure(.Data, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{.Data}] an object which will have
various attributes attached to it.
\item[\code{...}] attributes, specified in \code{tag=value}
form, which will be attached to data.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Adding a  class \code{"factor"} will ensure that numeric codes are
given integer storage mode.

For historical reasons (these names are used when deparsing),
attributes \code{".Dim"}, \code{".Dimnames"}, \code{".Names"},
\code{".Tsp"} and \code{".Label"} are renamed to \code{"dim"},
\code{"dimnames"}, \code{"names"}, \code{"tsp"} and \code{"levels"}.

It is possible to give the same tag more than once, in which case the
last value assigned wins.  As with other ways of assigning attributes,
using \code{tag=NULL} removes attribute \code{tag} from \code{.Data} if
it is present.
\end{Details}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{attributes}{attributes}}, \code{\LinkA{attr}{attr}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
structure(1:6, dim = 2:3)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{strwrap}{Wrap Character Strings to Format Paragraphs}{strwrap}
\keyword{character}{strwrap}
%
\begin{Description}\relax
Each character string in the input is first split into paragraphs (or
lines containing whitespace only).  The paragraphs are then formatted
by breaking lines at word boundaries.  The target columns for wrapping
lines and the indentation of the first and all subsequent lines of a
paragraph can be controlled independently.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
strwrap(x, width = 0.9 * getOption("width"), indent = 0,
        exdent = 0, prefix = "", simplify = TRUE, initial = prefix)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character vector, or an object which can be converted to a
character vector by \code{\LinkA{as.character}{as.character}}.
\item[\code{width}] a positive integer giving the target column for wrapping
lines in the output.
\item[\code{indent}] a non-negative integer giving the indentation of the
first line in a paragraph.
\item[\code{exdent}] a non-negative integer specifying the indentation of
subsequent lines in paragraphs.
\item[\code{prefix, initial}] a character string to be used as prefix for
each line except the first, for which \code{initial} is used.
\item[\code{simplify}] a logical.  If \code{TRUE}, the result is a single
character vector of line text; otherwise, it is a list of the same
length as \code{x} the elements of which are character vectors of
line text obtained from the corresponding element of \code{x}.
(Hence, the result in the former case is obtained by unlisting that
of the latter.)
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Whitespace (space, tab or newline characters) in the input is
destroyed.  Double spaces after periods, question and explanation
marks (thought as representing sentence ends) are preserved.
Currently, possible sentence ends at line breaks are not considered
specially.

Indentation is relative to the number of characters in the prefix
string.
\end{Details}
%
\begin{Value}
A character vector in the current locale's encoding.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
## Read in file 'THANKS'.
x <- paste(readLines(file.path(R.home("doc"), "THANKS")), collapse = "\n")
## Split into paragraphs and remove the first three ones
x <- unlist(strsplit(x, "\n[ \t\n]*\n"))[-(1:3)]
## Join the rest
x <- paste(x, collapse = "\n\n")
## Now for some fun:
writeLines(strwrap(x, width = 60))
writeLines(strwrap(x, width = 60, indent = 5))
writeLines(strwrap(x, width = 60, exdent = 5))
writeLines(strwrap(x, prefix = "THANKS> "))

## Note that messages are wrapped AT the target column indicated by
## 'width' (and not beyond it).
## From an R-devel posting by J. Hosking <jh910@juno.com>.
x <- paste(sapply(sample(10, 100, replace=TRUE),
           function(x) substring("aaaaaaaaaa", 1, x)), collapse = " ")
sapply(10:40,
       function(m)
       c(target = m, actual = max(nchar(strwrap(x, m)))))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{subset}{Subsetting Vectors, Matrices and Data Frames}{subset}
\methaliasA{subset.data.frame}{subset}{subset.data.frame}
\methaliasA{subset.default}{subset}{subset.default}
\methaliasA{subset.matrix}{subset}{subset.matrix}
\keyword{manip}{subset}
%
\begin{Description}\relax
Return subsets of vectors, matrices or data frames which meet conditions.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
subset(x, ...)

## Default S3 method:
subset(x, subset, ...)

## S3 method for class 'matrix':
subset(x, subset, select, drop = FALSE, ...)

## S3 method for class 'data.frame':
subset(x, subset, select, drop = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be subsetted.
\item[\code{subset}] logical expression indicating elements or rows to keep:
missing values are taken as false.
\item[\code{select}] expression, indicating columns to select from a
data frame.
\item[\code{drop}] passed on to \code{[} indexing operator.
\item[\code{...}] further arguments to be passed to or from other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function, with methods supplied for matrices, data
frames and vectors (including lists).  Packages and users can add
further methods.

For ordinary vectors, the result is simply
\code{x[subset \& !is.na(subset)]}.

For data frames, the \code{subset} argument works on the rows.  Note
that \code{subset} will be evaluated in the data frame, so columns can
be referred to (by name) as variables in the expression (see the examples).

The \code{select} argument exists only for the methods for data frames
and matrices.  It works by first replacing column names in the
selection expression with the corresponding column numbers in the data
frame and then using the resulting integer vector to index the
columns.  This allows the use of the standard indexing conventions so
that for example ranges of columns can be specified easily, or single
columns can be dropped (see the examples).

The \code{drop} argument is passed on to the indexing method for
matrices and data frames: note that the default for matrices is
different from that for indexing.
\end{Details}
%
\begin{Value}
An object similar to \code{x} contain just the selected elements (for
a vector), rows and columns (for a matrix or data frame), and so on.
\end{Value}
%
\begin{Author}\relax
Peter Dalgaard and Brian Ripley
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{[}{[}}, 
\code{\LinkA{transform}{transform}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
subset(airquality, Temp > 80, select = c(Ozone, Temp))
subset(airquality, Day == 1, select = -Temp)
subset(airquality, select = Ozone:Wind)

with(airquality, subset(Ozone, Temp > 80))

## sometimes requiring a logical 'subset' argument is a nuisance
nm <- rownames(state.x77)
start_with_M <- nm %in% grep("^M", nm, value=TRUE)
subset(state.x77, start_with_M, Illiteracy:Murder)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{substitute}{Substituting and Quoting Expressions}{substitute}
\aliasA{quote}{substitute}{quote}
\keyword{programming}{substitute}
\keyword{data}{substitute}
%
\begin{Description}\relax
\code{substitute} returns the parse tree for the (unevaluated)
expression \code{expr}, substituting any variables bound in
\code{env}.

\code{quote} simply returns its argument. The argument is not evaluated
and can be any R expression.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
substitute(expr, env)
quote(expr)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] Any syntactically valid \R{} expression
\item[\code{env}] An environment or a list object.  Defaults to the
current evaluation environment.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The typical use of \code{substitute} is to create informative labels
for data sets and plots.
The \code{myplot} example below shows a simple use of this facility.
It uses the functions \code{\LinkA{deparse}{deparse}} and \code{substitute}
to create labels for a plot which are character string versions
of the actual arguments to the function \code{myplot}.

Substitution takes place by examining each component of the parse tree
as follows: If it is not a bound symbol in \code{env}, it is
unchanged. If it is a promise object, i.e., a formal argument to a
function or explicitly created using \code{\LinkA{delayedAssign}{delayedAssign}()},
the expression slot of the promise replaces the symbol. If it is an
ordinary variable, its value is substituted, unless \code{env} is
\code{\LinkA{.GlobalEnv}{.GlobalEnv}} in which case the symbol is left unchanged.

\code{substitute} and \code{quote} are both \LinkA{primitive}{primitive} functions so
positional matching is used and names of supplied arguments are
ignored.
\end{Details}
%
\begin{Value}
The \code{\LinkA{mode}{mode}} of the result is generally \code{"call"} but
may in principle be any type. In particular, single-variable
expressions have mode \code{"name"} and constants have the
appropriate base mode.
\end{Value}
%
\begin{Note}\relax
Substitute works on a purely lexical basis. There is no guarantee
that the resulting expression makes any sense.

Substituting and quoting often causes confusion when the argument is
\code{expression(...)}. The result is a call to the
\code{\LinkA{expression}{expression}} constructor function and needs to be evaluated
with \code{\LinkA{eval}{eval}} to give the actual expression object.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{missing}{missing}} for argument `missingness',
\code{\LinkA{bquote}{bquote}} for partial substitution,
\code{\LinkA{sQuote}{sQuote}} and \code{\LinkA{dQuote}{dQuote}} for adding quotation
marks to strings.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)
(s.e <- substitute(expression(a + b), list(a = 1)))  #> expression(1 + b)
(s.s <- substitute( a + b,            list(a = 1)))  #> 1 + b
c(mode(s.e), typeof(s.e)) #  "call", "language"
c(mode(s.s), typeof(s.s)) #   (the same)
# but:
(e.s.e <- eval(s.e))          #>  expression(1 + b)
c(mode(e.s.e), typeof(e.s.e)) #  "expression", "expression"

substitute(x <- x + 1, list(x=1)) # nonsense

myplot <- function(x, y)
    plot(x, y, xlab=deparse(substitute(x)),
         ylab=deparse(substitute(y)))

## Simple examples about lazy evaluation, etc:

f1 <- function(x, y = x)             { x <- x + 1; y }
s1 <- function(x, y = substitute(x)) { x <- x + 1; y }
s2 <- function(x, y) { if(missing(y)) y <- substitute(x); x <- x + 1; y }
a <- 10
f1(a)# 11
s1(a)# 11
s2(a)# a
typeof(s2(a))# "symbol"
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{substr}{Substrings of a Character Vector}{substr}
\aliasA{substr<\Rdash}{substr}{substr<.Rdash.}
\aliasA{substring}{substr}{substring}
\aliasA{substring<\Rdash}{substr}{substring<.Rdash.}
\keyword{character}{substr}
%
\begin{Description}\relax
Extract or replace substrings in a character vector.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
substr(x, start, stop)
substring(text, first, last = 1000000L)
substr(x, start, stop) <- value
substring(text, first, last = 1000000L) <- value
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, text}] a character vector.
\item[\code{start, first}] integer. The first element to be replaced.
\item[\code{stop, last}] integer. The last element to be replaced.
\item[\code{value}] a character vector, recycled if necessary.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{substring} is compatible with S, with \code{first} and
\code{last} instead of \code{start} and \code{stop}.
For vector arguments, it expands the arguments cyclically to the
length of the longest \emph{provided} none are of zero length.

When extracting, if \code{start} is larger than the string length then
\code{""} is returned.

For the extraction functions, \code{x} or \code{text} will be
converted to a character vector by \code{\LinkA{as.character}{as.character}} if it is not
already one.

For the replacement functions, if \code{start} is larger than the
string length then no replacement is done.  If the portion to be
replaced is longer than the replacement string, then only the
portion the length of the string is replaced.

If any argument is an \code{NA} element, the corresponding element of
the answer is \code{NA}.

Elements of the result will be have the encoding declared as that of
the current locale (see \code{\LinkA{Encoding}{Encoding}} if the corresponding
input had a declared encoding and the current locale is either Latin-1
or UTF-8.
\end{Details}
%
\begin{Value}
For \code{substr}, a character vector of the same length and with the
same attributes as \code{x} (after possible coercion).

For \code{substring}, a character vector of length the longest of the
arguments.  This will have names taken from \code{x} (if it has any
after coercion, repeated as needed), and other attributes copied from
\code{x} if it is the longest of the arguments).

Elements of \code{x} with a declared encoding (see
\code{\LinkA{Encoding}{Encoding}}) will be returned with the same encoding.
\end{Value}
%
\begin{Note}\relax
The S4 version of \code{substring<-} ignores \code{last}; this version
does not.

These functions are often used with \code{\LinkA{nchar}{nchar}} to truncate a
display.  That does not really work (you want to limit the width, not
the number of characters, so it would be better to use
\code{\LinkA{strtrim}{strtrim}}), but at least make sure you use
\code{nchar(type="c")} (the default since \R{} 2.6.0).
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (\code{substring}.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{strsplit}{strsplit}}, \code{\LinkA{paste}{paste}}, \code{\LinkA{nchar}{nchar}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
substr("abcdef",2,4)
substring("abcdef",1:6,1:6)
## strsplit is more efficient ...

substr(rep("abcdef",4),1:4,4:5)
x <- c("asfef", "qwerty", "yuiop[", "b", "stuff.blah.yech")
substr(x, 2, 5)
substring(x, 2, 4:6)

substring(x, 2) <- c("..", "+++")
x
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sum}{Sum of Vector Elements}{sum}
\keyword{arith}{sum}
%
\begin{Description}\relax
\code{sum} returns the sum of all the values
present in its arguments.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sum(..., na.rm = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] numeric or complex or logical vectors.
\item[\code{na.rm}] logical.  Should missing values be removed?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function: methods can be defined for it
directly or via the \code{\LinkA{Summary}{S3groupGeneric}} group generic.
For this to work properly, the arguments \code{...} should be
unnamed, and dispatch is on the first argument.

If \code{na.rm} is \code{FALSE} an \code{NA}
value in any of the arguments will cause
a value of \code{NA} to be returned, otherwise
\code{NA} values are ignored.

Logical true values are regarded as one, false values as zero.
For historical reasons, \code{NULL} is accepted and treated as if it
were \code{integer(0)}.
\end{Details}
%
\begin{Value}
The sum. If all of \code{...} are of type integer or logical, then
the sum is integer, and in that case the result will be \code{NA} (with a
warning) if integer overflow occurs.  Otherwise it is a length-one
numeric or complex vector.

\strong{NB:} the sum of an empty set is zero, by definition.
\end{Value}
%
\begin{Section}{S4 methods}
This is part of the S4 \code{\LinkA{Summary}{S4groupGeneric}}
group generic.  Methods for it must use the signature
\code{x, ..., na.rm}.

`\LinkA{plotmath}{plotmath}' for the use of \code{sum} in plot annotation.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{colSums}{colSums}} for row and column sums.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{summary}{Object Summaries}{summary}
\methaliasA{summary.data.frame}{summary}{summary.data.frame}
\methaliasA{summary.default}{summary}{summary.default}
\methaliasA{summary.factor}{summary}{summary.factor}
\methaliasA{summary.matrix}{summary}{summary.matrix}
\keyword{methods}{summary}
%
\begin{Description}\relax
\code{summary} is a generic function used to produce result summaries
of the results of various model fitting functions.  The function
invokes particular \code{\LinkA{methods}{methods}} which depend on the
\code{\LinkA{class}{class}} of the first argument.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
summary(object, ...)

## Default S3 method:
summary(object, ..., digits = max(3, getOption("digits")-3))
## S3 method for class 'data.frame':
summary(object, maxsum = 7,
       digits = max(3, getOption("digits")-3), ...)

## S3 method for class 'factor':
summary(object, maxsum = 100, ...)

## S3 method for class 'matrix':
summary(object, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] an object for which a summary is desired.
\item[\code{maxsum}] integer, indicating how many levels should be shown for
\code{\LinkA{factor}{factor}}s.
\item[\code{digits}] integer, used for number formatting with
\code{\LinkA{signif}{signif}()} (for \code{summary.default}) or
\code{\LinkA{format}{format}()} (for \code{summary.data.frame}).
\item[\code{...}] additional arguments affecting the summary produced.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For \code{\LinkA{factor}{factor}}s, the frequency of the first \code{maxsum - 1}
most frequent levels is shown, where the less frequent levels are
summarized in \code{"(Others)"} (resulting in \code{maxsum} frequencies).

The functions \code{summary.lm} and \code{summary.glm} are examples
of particular methods which summarize the results produced by
\code{\LinkA{lm}{lm}} and \code{\LinkA{glm}{glm}}.
\end{Details}
%
\begin{Value}
The form of the value returned by \code{summary} depends on the
class of its argument.  See the documentation of the particular
methods for details of what is produced by that method.
\end{Value}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical Models in S}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{anova}{anova}},
\code{\LinkA{summary.glm}{summary.glm}},
\code{\LinkA{summary.lm}{summary.lm}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
summary(attenu, digits = 4) #-> summary.data.frame(...), default precision
summary(attenu $ station, maxsum = 20) #-> summary.factor(...)

lst <- unclass(attenu$station) > 20 # logical with NAs
## summary.default() for logicals -- different from *.factor:
summary(lst)
summary(as.factor(lst))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{svd}{Singular Value Decomposition of a Matrix}{svd}
\aliasA{La.svd}{svd}{La.svd}
\keyword{algebra}{svd}
\keyword{array}{svd}
%
\begin{Description}\relax
Compute the singular-value decomposition of a rectangular matrix.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
svd(x, nu = min(n, p), nv = min(n, p), LINPACK = FALSE)

La.svd(x, nu = min(n, p), nv = min(n, p))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric, logical or complex matrix whose SVD decomposition
is to be computed.
\item[\code{nu}] the number of left  singular vectors to be computed.
This must between \code{0} and \code{n = nrow(x)}.
\item[\code{nv}] the number of right singular vectors to be computed.
This must be between \code{0} and \code{p = ncol(x)}.
\item[\code{LINPACK}] logical. Should LINPACK be used (for compatibility with
\R{} < 1.7.0)?  In this case \code{nu} must be \code{0},
\code{nrow(x)} or \code{ncol(x)}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The singular value decomposition plays an important role in many
statistical techniques.  \code{svd} and \code{La.svd} provide two
slightly different interfaces.  The main functions used are
the LAPACK routines DGESDD and ZGESVD; \code{svd(LINPACK = TRUE)}
provides an interface to the LINPACK routine DSVDC, purely for
backwards compatibility.

Computing the singular vectors is the slow part for large matrices.
The computation will be more efficient if \code{nu <= min(n, p)} and
\code{nv <= min(n, p)}, and even more efficient if one or both are zero.

Unsuccessful results from the underlying LAPACK code will result in an
error giving a positive error code: these can only be interpreted by
detailed study of the FORTRAN code.
\end{Details}
%
\begin{Value}
The SVD decomposition of the matrix as computed by LAPACK/LINPACK,
\deqn{ \bold{X = U D V'},}{} where \eqn{\bold{U}}{} and \eqn{\bold{V}}{} are
orthogonal, \eqn{\bold{V'}}{} means \emph{V transposed}, and
\eqn{\bold{D}}{} is a diagonal matrix with the singular
values \eqn{D_{ii}}{}.  Equivalently, \eqn{\bold{D = U' X V}}{},
which is verified in the examples, below.

The returned value is a list with components
\begin{ldescription}
\item[\code{d}] a vector containing the singular values of \code{x}, of
length \code{min(n, p)}.
\item[\code{u}] a matrix whose columns contain the left singular vectors of
\code{x}, present if \code{nu > 0}.  Dimension \code{c(n, nu)}.
\item[\code{v}] a matrix whose columns contain the right singular vectors of
\code{x}, present if \code{nv > 0}.  Dimension \code{c(p, nv)}.

\end{ldescription}
For \code{La.svd} the return value replaces \code{v} by \code{vt}, the
(conjugated if complex) transpose of \code{v}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Dongarra, J. J., Bunch, J. R., Moler, C. B. and Stewart, G. W. (1978)
\emph{LINPACK Users Guide.}  Philadelphia: SIAM Publications.

Anderson. E. and ten others (1999)
\emph{LAPACK Users' Guide}. Third Edition. SIAM.\\{}
Available on-line at
\url{http://www.netlib.org/lapack/lug/lapack_lug.html}.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{eigen}{eigen}}, \code{\LinkA{qr}{qr}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
hilbert <- function(n) { i <- 1:n; 1 / outer(i - 1, i, "+") }
X <- hilbert(9)[,1:6]
(s <- svd(X))
D <- diag(s$d)
s$u %*% D %*% t(s$v) #  X = U D V'
t(s$u) %*% X %*% s$v #  D = U' X V
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sweep}{Sweep out Array Summaries}{sweep}
\keyword{array}{sweep}
\keyword{iteration}{sweep}
%
\begin{Description}\relax
Return an array obtained from an input array by sweeping out a summary
statistic.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sweep(x, MARGIN, STATS, FUN="-", check.margin=TRUE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an array.
\item[\code{MARGIN}] a vector of indices giving the extents of \code{x}
which correspond to \code{STATS}.
\item[\code{STATS}] the summary statistic which is to be swept out.
\item[\code{FUN}] the function to be used to carry out the sweep.  In the
case of binary operators such as \code{"/"} etc., the function name
must backquoted or quoted. (\code{FUN} is found by a call to
\code{\LinkA{match.fun}{match.fun}}.)
\item[\code{check.margin}] logical.  If \code{TRUE} (the default), warn if the
length or dimensions of \code{STATS} do not match the specified
dimensions of \code{x}.  Set to \code{FALSE} for a small speed gain
when you \emph{know} that dimensions match.
\item[\code{...}] optional arguments to \code{FUN}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The consistency check among \code{STATS}, \code{MARGIN} and \code{x}
is stricter if \code{STATS} is an array than if it is a vector.
In the vector case, some kinds of recycling are allowed without a
warning. Use \code{sweep(x,MARGIN,as.array(STATS))} if \code{STATS}
is a vector and you want to be warned if any recycling occurs.
\end{Details}
%
\begin{Value}
An array with the same shape as \code{x}, but with the summary
statistics swept out.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{apply}{apply}} on which \code{sweep} used to be based;
\code{\LinkA{scale}{scale}} for centering and scaling.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats) # for median
med.att <- apply(attitude, 2, median)
sweep(data.matrix(attitude), 2, med.att)# subtract the column medians

## More sweeping:
A <- array(1:24, dim = 4:2)

## no warnings in normal use
sweep(A, 1, 5)
(A.min <- apply(A, 1, min)) # == 1:4
sweep(A, 1, A.min)
sweep(A, 1:2, apply(A, 1:2, median))

## warnings when mismatch
sweep(A, 1, 1:3)## STATS does not recycle
sweep(A, 1, 6:1)## STATS is longer

## exact recycling:
sweep(A, 1, 1:2)## no warning
sweep(A, 1, as.array(1:2))## warning
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{switch}{Select One of a List of Alternatives}{switch}
\keyword{programming}{switch}
%
\begin{Description}\relax
\code{switch} evaluates \code{EXPR} and accordingly chooses one of the
further arguments (in \code{...}).
\end{Description}
%
\begin{Usage}
\begin{verbatim}
switch(EXPR, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{EXPR}] an expression evaluating to a number or a character
string.
\item[\code{...}] the list of alternatives, given explicitly.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If the value of \code{EXPR} is an integer between 1 and
\code{nargs()-1} then the corresponding element of \code{...} is
evaluated and the result returned.

If \code{EXPR} returns a character string then that string is used to
match the names of the elements in \code{...}.  If there is an exact
match then that element is evaluated and returned if there is one,
otherwise the next element is chosen, e.g.,
\code{switch("cc", a=1, cc=, d=2)} evaluates to \code{2}.

In the case of no match, if there's a further argument in \code{switch}
that one is returned, otherwise \code{NULL}.
\end{Details}
%
\begin{Section}{Warning}
Beware of partial matching: an alternative \code{E = foo} will match
the first argument \code{EXPR} unless that is named. See the examples
for good practice in naming the first argument.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
centre <- function(x, type) {
  switch(type,
        mean = mean(x),
        median = median(x),
        trimmed = mean(x, trim = .1))
}
x <- rcauchy(10)
centre(x, "mean")
centre(x, "median")
centre(x, "trimmed")

ccc <- c("b","QQ","a","A","bb")
for(ch in ccc)
    cat(ch,":",switch(EXPR = ch, a=1,     b=2:3), "\n")
for(ch in ccc)
    cat(ch,":",switch(EXPR = ch, a=, A=1, b=2:3, "Otherwise: last"),"\n")

## Numeric EXPR don't allow an 'otherwise':
for(i in c(-1:3,9))  print(switch(i, 1,2,3,4))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Syntax}{Operator Syntax and Precedence}{Syntax}
\keyword{documentation}{Syntax}
\keyword{programming}{Syntax}
%
\begin{Description}\relax
Outlines \R{} syntax and gives the precedence of operators
\end{Description}
%
\begin{Details}\relax
The following unary and binary operators are defined.  They are listed
in precedence groups, from highest to lowest.

\Tabular{ll}{
\code{[ [[}& indexing\\{}
\code{:: :::}& access variables in a name space\\{}
\code{\$ @}& component / slot extraction\\{}
\code{\textasciicircum{}}& exponentiation (right to left)\\{}
\code{- +}& unary minus and plus\\{}
\code{:}& sequence operator\\{}
\code{\%any\%}& special operators\\{}
\code{* /}& multiply, divide\\{}
\code{+ -}& (binary) add, subtract\\{}
\code{< > <= >= == !=}& ordering and comparison\\{}
\code{!}& negation\\{}
\code{\&  \&\&}& and\\{}
\code{| ||}& or\\{}
\code{\textasciitilde{}}& as in formulae\\{}
\code{-> ->{}>}& rightwards assignment\\{}
\code{=}& assignment (right to left)\\{}
\code{<- <{}<-}& assignment (right to left)\\{}
\code{?}& help (unary and binary)\\{}
}
Within an expression operators of equal precedence are evaluated
from left to right except where indicated.

The links in the \bold{See Also} section cover most other aspects of
the basic syntax.
\end{Details}
%
\begin{Note}\relax
There are substantial precedence differences between \R{} and S.  In
particular, in S \code{?} has the same precedence as (binary) \code{+ -}
and \code{\& \&\& | ||} have equal precedence.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{Arithmetic}{Arithmetic}}, \code{\LinkA{Comparison}{Comparison}}, \code{\LinkA{Control}{Control}},
\code{\LinkA{Extract}{Extract}}, \code{\LinkA{Logic}{Logic}},
\code{\LinkA{NumericConstants}{NumericConstants}}, \code{\LinkA{Paren}{Paren}},
\code{\LinkA{Quotes}{Quotes}}, \code{\LinkA{Reserved}{Reserved}}.

The \emph{R Language Definition} manual.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{Sys.getenv}{Get Environment Variables}{Sys.getenv}
\keyword{environment}{Sys.getenv}
\keyword{utilities}{Sys.getenv}
%
\begin{Description}\relax
\code{Sys.getenv} obtains the values of the environment variables.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.getenv(x = NULL, unset = "")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character vector, or \code{NULL}.
\item[\code{unset}] a character string.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Both arguments will be coerced to character if necessary.

Setting \code{unset = NA} will enable unset variables and those set to
the value \code{""} to be distinguished, \emph{if the OS does}.
\end{Details}
%
\begin{Value}
A vector of the same length as \code{x}, with the variable names as
its \code{names} attribute.  Each element holds the value of the
environment variable named by the corresponding component of \code{x}
(or the value of \code{unset} if no environment variable with that
name was found).

On most platforms \code{Sys.getenv()} will return a named vector giving
the values of all the environment variables, sorted in the current
locale.  It may be confused by names containing \code{=} which some
platforms allow but POSIX does not.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.setenv}{Sys.setenv}},
\code{\LinkA{Sys.getlocale}{Sys.getlocale}} for the locale in use,
\code{\LinkA{getwd}{getwd}} for the working directory.

The help for `\LinkA{environment variables}{environment variables}' lists many of the
environment variables used by \R{}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## whether HOST is set will be shell-dependent e.g. Solaris' csh does not.
Sys.getenv(c("R_HOME", "R_PAPERSIZE", "R_PRINTCMD", "HOST"))

names(s <- Sys.getenv()) # all settings (the values could be very long)

## Language and Locale settings -- but rather use Sys.getlocale()
s[grep("^L(C|ANG)", names(s))]
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.getpid}{Get the Process ID of the R Session}{Sys.getpid}
\keyword{utilities}{Sys.getpid}
%
\begin{Description}\relax
Get the process ID of the \R{} Session.  It is guaranteed by the
operating system that two \R{} sessions running simultaneously will
have different IDs, but it is possible that \R{} sessions running at
different times will have the same ID.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.getpid()
\end{verbatim}
\end{Usage}
%
\begin{Value}
An integer, usually an integer between 1 and 32767 under
Unix-alikes and a small positive integer under Windows.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
Sys.getpid()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.glob}{Wildcard Expansion on File Paths}{Sys.glob}
\keyword{utilities}{Sys.glob}
\keyword{file}{Sys.glob}
%
\begin{Description}\relax
Function to do wildcard expansion (also known as `globbing') on
file paths.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.glob(paths, dirmark = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{paths}] character vector of patterns for relative or absolute
filepaths.  Missing values will be ignored.
\item[\code{dirmark}] logical: should matches to directories from patterns
that do not already end in \code{/}
have a slash appended?  May not be supported on all platforms.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This expands wildcards in file paths.  For precise details, see your
system's documentation on the \code{glob} system call.  There is a
POSIX 1003.2 standard (see
\url{http://www.opengroup.org/onlinepubs/009695399/functions/glob.html})
but some OSes will go beyond this.  The \R{} implementation will always
do tilde-expansion (see \code{\LinkA{path.expand}{path.expand}}).

All systems should interpret \code{*} (match zero or more characters),
\code{?} (match a single character) and (probably) \code{[} (begin a
character class or range).  If a filename starts with \code{.} this
must be matched explicitly.  By default paths ending in \code{/} will
be accepted and matched only to directories.

The rest of these details are indicative (and based on the POSIX
standard).

\code{[} begins a character class.  If the first character in
\code{[...]} is not \code{!}, this is a character class which matches
a single character against any of the characters specified.  The class
cannot be empty, so \code{]} can be included provided it is first.  If
the first character is \code{!}, the character class matches a single
character which is \emph{none} of the specified characters.

Character classes can include ranges such as \code{[A-Z]}: include
\code{-} as a character by having it first or last in a class.  (The
interpretation of ranges should be locale-specific, so the example is
not a good idea in an Estonian locale.)

One can remove the special meaning of \code{?}, \code{*}  and
\code{[} by preceding them by a backslash (except within a
character class).
\end{Details}
%
\begin{Value}
A character vector of matched file paths.  The order is
system-specific (but in the order of the elements of \code{paths}):
it is normally collated in either the current locale or in byte (ASCII) order.

Directory errors are normally ignored, so the matches are to
accessible file paths (but not necessarily accessible files).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{path.expand}{path.expand}}.

\LinkA{Quotes}{Quotes} for handling backslashes in character strings.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
Sys.glob(file.path(R.home(), "library", "*", "R", "*.rdx"))

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.info}{Extract System and User Information}{Sys.info}
\keyword{utilities}{Sys.info}
%
\begin{Description}\relax
Reports system and user information.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.info()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
This function is not implemented on all \R{} platforms, and returns
\code{NULL} when not available.  Where possible it is based on POSIX
system calls.

\code{Sys.info()} returns details of the platform \R{} is running on,
whereas \code{\LinkA{R.version}{R.version}} gives details of the platform \R{} was
built on: they may well be different.
\end{Details}
%
\begin{Value}
A character vector with fields
\begin{ldescription}
\item[\code{sysname}] The operating system.
\item[\code{release}] The OS release.
\item[\code{version}] The OS version.
\item[\code{nodename}] A name by which the machine is known on the network (if
any).
\item[\code{machine}] A concise description of the hardware.
\item[\code{login}] The user's login name, or \code{"unknown"} if it cannot be
ascertained.
\item[\code{user}] The name of the real user ID, or \code{"unknown"} if it
cannot be ascertained.
\end{ldescription}
The first five fields come from the \code{uname(2)} system call.  The
login name comes from \code{getlogin(2)}, and the user name from
\code{getpwuid(getuid())}
\end{Value}
%
\begin{Note}\relax
The meaning of OS `release' and `version' is
system-dependent and there is no guarantee that the node or
login or user names will be what you might reasonably expect.
(In particular on some Linux distributions the login name is unknown
from sessions with re-directed inputs.)
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Platform}{.Platform}}, and \code{\LinkA{R.version}{R.version}}.
\code{\LinkA{sessionInfo}{sessionInfo}()} gives a synopsis of both your system and
the \R{} session.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
Sys.info()
## An alternative (and probably better) way to get the login name on Unix
Sys.getenv("LOGNAME")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.localeconv}{Find Details of the Numerical and Monetary Representations
 in the Current Locale}{Sys.localeconv}
\aliasA{localeconv}{Sys.localeconv}{localeconv}
\keyword{utilities}{Sys.localeconv}
%
\begin{Description}\relax
Get details of the numerical and monetary representations in the
current locale.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.localeconv()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
These settings are usually controlled by the environment variables
\env{LC\_NUMERIC} and \env{LC\_MONETARY} and if not set the values of
\env{LC\_ALL} or \env{LANG}.

Normally \R{} is run without looking at the value of \env{LC\_NUMERIC},
so the decimal point remains '\code{.}'.  So the first three of these
components will not be useful unless you have set \env{LC\_NUMERIC} in
the current \R{} session.
\end{Details}
%
\begin{Value}
A character vector with 18 named components.  See your ISO C
documentation for details of the meaning.

It is possible to compile \R{} without support for locales, in which
case the value will be \code{NULL}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.setlocale}{Sys.setlocale}} for ways to set locales.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
Sys.localeconv()
## The results in the C locale are
##    decimal_point     thousands_sep          grouping   int_curr_symbol 
##              "."                ""                ""                "" 
##  currency_symbol mon_decimal_point mon_thousands_sep      mon_grouping 
##               ""                ""                ""                "" 
##    positive_sign     negative_sign   int_frac_digits       frac_digits 
##               ""                ""             "127"             "127" 
##    p_cs_precedes    p_sep_by_space     n_cs_precedes    n_sep_by_space 
##            "127"             "127"             "127"             "127" 
##      p_sign_posn       n_sign_posn 
##            "127"             "127"

## Now try your default locale (which might be "C").
## Not run: old <- Sys.getlocale()
Sys.setlocale(locale = "")
Sys.localeconv()
Sys.setlocale(locale = old)
## End(Not run)

## Not run: read.table("foo", dec=Sys.localeconv()["decimal_point"])
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sys.parent}{Functions to Access the Function Call Stack}{sys.parent}
\aliasA{parent.frame}{sys.parent}{parent.frame}
\aliasA{sys.call}{sys.parent}{sys.call}
\aliasA{sys.calls}{sys.parent}{sys.calls}
\aliasA{sys.frame}{sys.parent}{sys.frame}
\aliasA{sys.frames}{sys.parent}{sys.frames}
\aliasA{sys.function}{sys.parent}{sys.function}
\aliasA{sys.nframe}{sys.parent}{sys.nframe}
\aliasA{sys.on.exit}{sys.parent}{sys.on.exit}
\aliasA{sys.parents}{sys.parent}{sys.parents}
\aliasA{sys.status}{sys.parent}{sys.status}
\keyword{programming}{sys.parent}
\keyword{data}{sys.parent}
%
\begin{Description}\relax
These functions provide access to \code{\LinkA{environment}{environment}}s
(`frames' in S terminology) associated with functions further
up the calling stack.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sys.call(which = 0)
sys.frame(which = 0)
sys.nframe()
sys.function(which = 0)
sys.parent(n = 1)

sys.calls()
sys.frames()
sys.parents()
sys.on.exit()
sys.status()
parent.frame(n = 1)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{which}] the frame number if non-negative, the number of frames
to go back if negative.
\item[\code{n}] the number of generations to go back. (See the
`Details' section.)
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{\LinkA{.GlobalEnv}{.GlobalEnv}} is given number 0 in the list of frames.
Each subsequent function evaluation increases the frame stack by 1
and the call, function definition and the environment for evaluation
of that function are returned by \code{sys.call}, \code{sys.function}
and \code{sys.frame} with the appropriate index.

\code{sys.call}, \code{sys.frame} and \code{sys.function} accept
integer values for the argument \code{which}.  Non-negative values of
\code{which} are frame numbers whereas negative values are
counted back from the frame number of the current evaluation.

The parent frame of a function evaluation is the environment in which
the function was called.  It is not necessarily numbered one less than
the frame number of the current evaluation, nor is it the environment
within which the function was defined.  \code{sys.parent} returns the
number of the parent frame if \code{n} is 1 (the default), the
grandparent if \code{n} is 2, and so on.  See also the Note.

\code{sys.nframe} returns an integer, the number of the current frame
as described in the first paragraph.

\code{sys.calls} and \code{sys.frames} give a pairlist of all the
active calls and frames, respectively, and \code{sys.parents} returns
an integer vector of indices of the parent frames of each of those
frames.

Notice that even though the \code{sys.}\emph{xxx} functions (except
\code{sys.status}) are interpreted, their contexts are not counted nor
are they reported.  There is no access to them.

\code{sys.status()} returns a list with components \code{sys.calls},
\code{sys.parents} and \code{sys.frames}, the results of calls to
those three functions (which this will include the call to
\code{sys.status}: see the first example).

\code{sys.on.exit()} returns the expression stored for use by
\code{\LinkA{on.exit}{on.exit}} in the function currently being evaluated.
(Note that this differs from S, which returns a list of expressions
for the current frame and its parents.)

\code{parent.frame(n)} is a convenient shorthand for
\code{sys.frame(sys.parent(n))} (implemented slightly more efficiently).
\end{Details}
%
\begin{Value}
\code{sys.call} returns a call, \code{sys.function} a function
definition, and \code{sys.frame} and \code{parent.frame} return an
environment.

For the other functions, see the `Details' section.
\end{Value}
%
\begin{Note}\relax
Strictly, \code{sys.parent} and \code{parent.frame} refer to the
\emph{context} of the parent interpreted function.  So internal
functions (which may or may not set contexts and so may or may not
appear on the call stack) are not counted, and S3 methods can also do
surprising things.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole. (not \code{parent.frame}.)
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{eval}{eval}} for a usage of \code{sys.frame} and \code{parent.frame}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(utils)

## Note: the first two examples will give different results
## if run by example().
ff <- function(x) gg(x)
gg <- function(y) sys.status()
str(ff(1))

gg <- function(y) {
    ggg <- function() {
        cat("current frame is", sys.nframe(), "\n")
        cat("parents are", sys.parents(), "\n")
        print(sys.function(0)) # ggg
        print(sys.function(2)) # gg
    }
    if(y > 0) gg(y-1) else ggg()
}
gg(3)

t1 <- function() {
  aa <- "here"
  t2 <- function() {
    ## in frame 2 here
    cat("current frame is", sys.nframe(), "\n")
    str(sys.calls()) ## list with two components t1() and t2()
    cat("parents are frame numbers", sys.parents(), "\n") ## 0 1
    print(ls(envir=sys.frame(-1))) ## [1] "aa" "t2"
    invisible()
  }
  t2()
}
t1()

test.sys.on.exit <- function() {
  on.exit(print(1))
  ex <- sys.on.exit()
  str(ex)
  cat("exiting...\n")
}
test.sys.on.exit()
## gives 'language print(1)', prints 1 on exit

## An example where the parent is not the next frame up the stack
## since method dispatch uses a frame.
as.double.foo <- function(x)
{
    str(sys.calls())
    print(sys.frames())
    print(sys.parents())
    print(sys.frame(-1)); print(parent.frame())
    x
}
t2 <- function(x) as.double(x)
a <- structure(pi, class = "foo")
t2(a)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.readlink}{Read File Symbolic Links}{Sys.readlink}
\keyword{file}{Sys.readlink}
%
\begin{Description}\relax
Find out if a file path is a symbolic link, and if so what it is
linked to, \emph{via} the system call \code{readink}.

Symbolic links are a Unix concept, not implemented on Windows.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.readlink(paths)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{paths}] character vector of file paths.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character vector of the the same length as \code{paths}.  The
entries are the path of the file linked to, \code{""} if the path is
not a symbolic link, and \code{NA} if there is an error (e.g., the
path does not exist).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.symlink}{file.symlink}}, \code{\LinkA{file.info}{file.info}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{Sys.setenv}{Set or Unset Environment Variables}{Sys.setenv}
\aliasA{Sys.unsetenv}{Sys.setenv}{Sys.unsetenv}
\keyword{environment}{Sys.setenv}
\keyword{utilities}{Sys.setenv}
%
\begin{Description}\relax
\code{Sys.setenv} sets environment variables (for other processes
called from within \R{} or future calls to \code{\LinkA{Sys.getenv}{Sys.getenv}} from
this \R{} process).

\code{Sys.unsetenv} removes environment variables.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.setenv(...)

Sys.unsetenv(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] named arguments with values coercible to a character string.
\item[\code{x}] a character vector, or an object coercible to character.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The names \code{setenv} and \code{putenv} come from different Unix
traditions: \R{} also has \code{Sys.putenv}, but this is now deprecated.
The internal code uses \code{setenv} if available, otherwise \code{putenv}.

Non-standard \R{} names must be quoted in \code{Sys.setenv}:
see the examples.  Most platforms (and POSIX) do not allow names
containing \code{"="}.

There may be system-specific limits on the maximum length of the values
of individual environment variables or of all environment variables.
\end{Details}
%
\begin{Value}
A logical vector, with elements being true if (un)setting the
corresponding variable succeeded.  (For \code{Sys.unsetenv} this
includes attempting to remove a non-existent variable.)
\end{Value}
%
\begin{Note}\relax
Not all systems need support \code{Sys.setenv} (although all known
current platforms do) nor \code{Sys.unsetenv}.
If \code{Sys.unsetenv} is not supported, it will at least try to
set the value of the environment variable to \code{""}, with a 
warning.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.getenv}{Sys.getenv}}, \LinkA{Startup}{Startup} for ways to set environment
variables for the \R{} session.

\code{\LinkA{setwd}{setwd}} for the working directory.


The help for `\LinkA{environment variables}{environment variables}' lists many of the
environment variables used by \R{}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
print(Sys.setenv(R_TEST="testit", "A+C"=123))  # `A+C` could also be used
Sys.getenv("R_TEST")
Sys.unsetenv("R_TEST")  # may warn and not succeed
Sys.getenv("R_TEST", unset=NA)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.sleep}{Suspend Execution for a Time Interval}{Sys.sleep}
\keyword{utilities}{Sys.sleep}
%
\begin{Description}\relax
Suspend execution of \R{} expressions for a given number of seconds
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.sleep(time)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{time}] The time interval to suspend execution for, in seconds.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Using this function allows \R{} to be given very low priority and hence
not to interfere with more important foreground tasks. A typical use
is to allow a process launched from \R{} to set itself up and read its
input files before \R{} execution is resumed.

The intention is that this function suspends execution of \R{}
expressions but wakes the process up often enough to respond to GUI
events, typically every 0.5 seconds.

There is no guarantee that the process will sleep for the whole of the
specified interval, and it may well take slightly longer in real time
to resume execution.  The resolution of the time interval is
system-dependent, but will normally be down to 0.02 secs or better.
(On modern Unix-alikes it will be better than 1ms.)
\end{Details}
%
\begin{Value}
Invisible \code{NULL}.
\end{Value}
%
\begin{Note}\relax
This function may not be implemented on all systems.
\end{Note}
%
\begin{Examples}
\begin{ExampleCode}
testit <- function(x)
{
    p1 <- proc.time()
    Sys.sleep(x)
    proc.time() - p1 # The cpu usage should be negligible
}
testit(3.7)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{sys.source}{Parse and Evaluate Expressions from a File}{sys.source}
\keyword{file}{sys.source}
\keyword{utilities}{sys.source}
%
\begin{Description}\relax
Parses expressions in the given file, and then successively evaluates
them in the specified environment.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
sys.source(file, envir = baseenv(), chdir = FALSE,
           keep.source = getOption("keep.source.pkgs"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{file}] a character string naming the file to be read from
\item[\code{envir}] an \R{} object specifying the environment in which the
expressions are to be evaluated.  May also be a list or an integer.
The default value \code{NULL} corresponds to evaluation in the base
environment.  This is probably not what you want; you should
typically supply an explicit \code{envir} argument.
\item[\code{chdir}] logical; if \code{TRUE}, the \R{} working directory is
changed to the directory containing \code{file} for evaluating.
\item[\code{keep.source}] logical.  If \code{TRUE}, functions keep
their source including comments, see
\code{\LinkA{options}{options}(keep.source = *)} for more details.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
For large files, \code{keep.source = FALSE} may save quite a bit of
memory.

In order for the code being evaluated to use the correct environment
(for example, in global assignments), source code in packages should
call \code{\LinkA{topenv}{topenv}()}, which will return the name space, if any,
the environment set up by \code{sys.source}, or the global environment
if a saved image is being used.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{source}{source}}, and \code{\LinkA{library}{library}} which uses
\code{sys.source}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## a simple way to put some objects in an environment
## high on the search path
tmp <- tempfile()
writeLines("aaa <- pi", tmp)
env <- attach(NULL, name = "myenv")
sys.source(tmp, env)
unlink(tmp)
search()
aaa
detach("myenv")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.time}{Get Current Date and Time}{Sys.time}
\aliasA{Sys.Date}{Sys.time}{Sys.Date}
\keyword{utilities}{Sys.time}
\keyword{chron}{Sys.time}
%
\begin{Description}\relax
\code{Sys.time} and \code{Sys.Date} returns the system's idea of the
current date with and without time.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.time()
Sys.Date()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
\code{Sys.time} returns an absolute date-time value which can be
converted in various time zones and may return different days.

\code{Sys.Date} returns the day in the current timezone.
\end{Details}
%
\begin{Value}
\code{Sys.time} returns an object of class \code{"POSIXct"} (see
\LinkA{DateTimeClasses}{DateTimeClasses}).  On some systems it will have sub-second
accuracy, but on others it will increment in seconds.
On systems conforming to POSIX 1003.1-2001 the time will be reported
in microsecond increments.

\code{Sys.Date} returns an object of class \code{"Date"} (see \LinkA{Date}{Date}).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{date}{date}} for the system time in a fixed-format character
string; the elapsed time component of \code{\LinkA{proc.time}{proc.time}} 
for possibly finer resolution in changes in time.

\code{\LinkA{Sys.timezone}{Sys.timezone}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
Sys.time()
## print with possibly greater accuracy:
op <- options(digits.secs=6)
Sys.time()
options(op)

## locale-specific version of date()
format(Sys.time(), "%a %b %d %X %Y")

Sys.Date()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Sys.which}{Find Full Paths of Executables}{Sys.which}
\keyword{utilities}{Sys.which}
%
\begin{Description}\relax
This is an interface to the system command \code{which}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.which(names)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{names}] Character vector of names of possible executables.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The system command \code{which} reports on the full names of an
executable (including an executable script) found on the current path.

\end{Details}
%
\begin{Value}
A character vector of the same length as \code{names}, named by
\code{names}.  The elements are either the full path to the
executable/script or \code{""} if no executable of that name was
found.

\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
## the first two are likely to exist everywhere
## texi2dvi exists on most Unix-alikes and under MiKTeX
Sys.which(c("ftp", "ping", "texi2dvi", "this-does-not-exist"))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{system}{Invoke a System Command}{system}
\keyword{interface}{system}
\keyword{file}{system}
\keyword{utilities}{system}
%
\begin{Description}\relax
\code{system} invokes the OS command specified by \code{command}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
system(command, intern = FALSE, ignore.stderr = FALSE,
       wait = TRUE, input = NULL, show.output.on.console = TRUE,
       minimized = FALSE, invisible = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{command}] the system command to be invoked, as a string.
\item[\code{intern}] a logical (not \code{NA}) which indicates whether to
make the output of the command an \R{} object.
Not available unless \code{popen} is supported on the platform.

\item[\code{ignore.stderr}] a logical indicating whether error messages written
to \file{stderr} should be ignored.
\item[\code{wait}] a logical indicating whether the \R{} interpreter should
wait for the command to finish, or run it asynchronously.
This will be ignored (and the interpreter will always wait) if
\code{intern = TRUE}.
\item[\code{input}] if a character vector is supplied, this is copied one
string per line to a temporary file, and the standard input of
\code{command} is redirected to the file.
\item[\code{show.output.on.console, minimized, invisible}] arguments
that are accepted on other platforms but ignored on this one, with a
warning.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{command} is parsed as a command plus arguments separated by spaces.
So if the path to the command (or a filepath argument) contains
spaces, it must be quoted e.g. by \code{\LinkA{shQuote}{shQuote}}.


How the command is run differs by platform: Unix-alikes use a shell
(normally \file{/bin/sh}), and Windows executes the command directly
(extensions \file{.exe}, \file{.com}) or as a batch file (extensions
\file{.cmd} and \file{.bat}).
This means that redirection, pipes, \dots cannot be used on Windows,
which has a function \code{shell} for use when shell facilities are
needed.

If \code{intern} is \code{TRUE} then \code{popen} is used to invoke the
command and the output collected, line by line, into an \R{}
\code{\LinkA{character}{character}} vector.  If \code{intern} is \code{FALSE} then
the C function \code{system} is used to invoke the command.

The ordering of arguments after the first two has changed from time to
time: it is recommended to name all arguments after the first.
\end{Details}
%
\begin{Value}
If \code{intern = TRUE}, a character vector giving the output of the
command, one line per character string.  (Output lines of more than
8095 characters will be split.)  If the command could not be run or
gives an error
this will be reported on the shell's \file{stderr} (unless
\code{popen} is not supported, when there is an \R{} error).

If \code{intern = FALSE}, the return value is an error code (\code{0}
for success), given the invisible attribute (so needs to be printed
explicitly).  If the command could not be run for any reason, the
value is
\code{256*127 = 52512}.
Otherwise if \code{wait = TRUE} the value is
256 times
the error code returned by the command, and if \code{wait = FALSE} it
is \code{0} (the conventional success value).
\end{Value}
%
\begin{Section}{Stdout and stderr}
Error messages written to \file{stderr} will be sent by the shell to
the terminal unless \code{ignore.stderr = TRUE}.  They can be captured
(in the most likely shells) by
\begin{alltt}
    system("some command 2>&1", intern=TRUE)
\end{alltt}

What happens to output sent to \file{stdout} and \file{stderr} if
\code{intern = FALSE} is interface-specific, and it is unsafe to
assume that such messages will appear on a console (they do on the
Mac OS X console, but not on some others).
\end{Section}
%
\begin{Note}\relax
\code{wait} is implemented by appending \code{\&} to the command: this
is shell-dependent, but required by POSIX and so widely supported.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{.Platform}{.Platform}} for platform-specific variables.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# list all files in the current directory using the -F flag
## Not run: system("ls -F")

# t1 is a character vector, each one
# representing a separate line of output from who
# (if the platform has popen and who)
t1 <- try(system("who", intern = TRUE))

try(system("ls fizzlipuzzli", intern = TRUE, ignore.stderr = TRUE))
# empty since file doesn't exist
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{system.file}{Find Names of R System Files}{system.file}
\keyword{file}{system.file}
\keyword{utilities}{system.file}
%
\begin{Description}\relax
Finds the full file names of files in packages etc.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
system.file(..., package = "base", lib.loc = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] character strings, specifying subdirectory and file(s)
within some package.  The default, none, returns the
root of the package.  Wildcards are not supported.
\item[\code{package}] a character string with the name of a single package.
An error occurs if more than one package name is given.
\item[\code{lib.loc}] a character vector with path names of \R{} libraries, or
\code{NULL}.  The default value of \code{NULL} corresponds to all
libraries currently known.  If the default is used, the loaded
packages are searched before the libraries.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character vector of positive length, containing the file names
that matched \code{...}, or the empty string, \code{""}, if none
matched.  If matching the root of a package, there is no trailing
separator.

As a special case, \code{system.file()} gives the root of the
\pkg{base} package only.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{R.home}{R.home}} for the root directory of the \R{}
installation, \code{\LinkA{list.files}{list.files}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
system.file()                  # The root of the 'base' package
system.file(package = "stats") # The root of package 'stats'
system.file("INDEX")
system.file("help", "AnIndex", package = "splines")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{system.time}{CPU Time Used}{system.time}
\aliasA{unix.time}{system.time}{unix.time}
\keyword{utilities}{system.time}
%
\begin{Description}\relax
Return CPU (and other) times that \code{expr} used.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
system.time(expr, gcFirst = TRUE)
unix.time(expr, gcFirst = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] Valid \R{} expression to be timed.
\item[\code{gcFirst}] Logical - should a garbage collection be performed
immediately before the timing?  Default is \code{TRUE}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{system.time} calls the function \code{\LinkA{proc.time}{proc.time}},
evaluates \code{expr}, and then calls \code{proc.time} once more,
returning the difference between the two \code{proc.time} calls.

\code{unix.time} is an alias of \code{system.time}, for
compatibility with S.

Timings of evaluations of the same expression can vary considerably
depending on whether the evaluation triggers a garbage collection. When
\code{gcFirst} is \code{TRUE} a garbage collection (\code{\LinkA{gc}{gc}})
will be performed immediately before the evaluation of \code{expr}.
This will usually produce more consistent timings.
\end{Details}
%
\begin{Value}
A object of class \code{"proc\_time"}: see
\code{\LinkA{proc.time}{proc.time}} for details.
\end{Value}
%
\begin{Note}\relax
It is possible to compile \R{} without support for \code{system.time},
when the function will throw an error.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{proc.time}{proc.time}}, \code{\LinkA{time}{time}} which is for time series.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
system.time(for(i in 1:100) mad(runif(1000)))
## Not run: 
exT <- function(n = 1000) {
  # Purpose: Test if system.time works ok;   n: loop size
  system.time(for(i in 1:n) x <- mean(rt(1000, df=4)))
}
#-- Try to interrupt one of the following (using Ctrl-C / Escape):
exT()                 #- about 3 secs on a 1GHz PIII
system.time(exT())    #~ +/- same

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{t}{Matrix Transpose}{t}
\methaliasA{t.data.frame}{t}{t.data.frame}
\methaliasA{t.default}{t}{t.default}
\keyword{array}{t}
%
\begin{Description}\relax
Given a matrix or \code{\LinkA{data.frame}{data.frame}} \code{x},
\code{t} returns the transpose of \code{x}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
t(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a matrix or data frame, typically.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function for which methods can be written.  The
description here applies to the default and \code{"data.frame"} methods.

A data frame is first coerced to a matrix: see \code{\LinkA{as.matrix}{as.matrix}}.
When \code{x} is a vector, it is treated as a column, i.e., the
result is a 1-row matrix.
\end{Details}
%
\begin{Value}
A matrix, with \code{dim} and \code{dimnames} constructed
appropriately from those of \code{x}, and other attributes except
names copied across.
\end{Value}
%
\begin{Note}\relax
The \emph{conjugate} transpose of a complex matrix \eqn{A}{}, denoted
\eqn{A^H}{} or \eqn{A^*}{}, is computed as \code{\LinkA{Conj}{Conj}(t(A))}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{aperm}{aperm}} for permuting the dimensions of arrays.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
a <- matrix(1:30, 5,6)
ta <- t(a) ##-- i.e.,  a[i, j] == ta[j, i] for all i,j :
for(j in seq(ncol(a)))
  if(! all(a[, j] == ta[j, ])) stop("wrong transpose")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{table}{Cross Tabulation and Table Creation}{table}
\aliasA{as.data.frame.table}{table}{as.data.frame.table}
\aliasA{as.table}{table}{as.table}
\methaliasA{as.table.default}{table}{as.table.default}
\aliasA{is.table}{table}{is.table}
\aliasA{print.summary.table}{table}{print.summary.table}
\aliasA{summary.table}{table}{summary.table}
\keyword{category}{table}
%
\begin{Description}\relax
\code{table} uses the cross-classifying factors to build a contingency
table of the counts at each combination of factor levels.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
table(..., exclude = if (useNA == "no") c(NA, NaN), useNA = c("no", 
    "ifany", "always"), dnn = list.names(...), deparse.level = 1) 

as.table(x, ...)
is.table(x)

## S3 method for class 'table':
as.data.frame(x, row.names = NULL, ...,
              responseName = "Freq", stringsAsFactors = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] one of more objects which can be interpreted as factors
(including character strings), or a list (or data frame) whose
components can be so interpreted.  (For \code{as.table} and
\code{as.data.frame}, arguments passed to specific methods.)
\item[\code{exclude}] levels to remove
from all factors in \code{...}. If set to \code{NULL}, it implies
\code{useNA="always"}.
\item[\code{useNA}] whether to include extra \code{NA} levels in the table.
\item[\code{dnn}] the names to be given to the dimensions in the result (the
\emph{dimnames names}).
\item[\code{deparse.level}] controls how the default \code{dnn} is
constructed.  See details.
\item[\code{x}] an arbitrary \R{} object, or an object inheriting from class
\code{"table"} for the \code{as.data.frame} method.
\item[\code{row.names}] a character vector giving the row names for the data
frame.
\item[\code{responseName}] The name to be used for the column of
table entries, usually counts.
\item[\code{stringsAsFactors}] logical: should the classifying factors be
returned as factors (the default) or character vectors?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If the argument \code{dnn} is not supplied, the internal function
\code{list.names} is called to compute the `dimname names'.  If the
arguments in \code{...} are named, those names are used.  For the
remaining arguments, \code{deparse.level = 0} gives an empty name,
\code{deparse.level = 1} uses the supplied argument if it is a symbol,
and \code{deparse.level = 2} will deparse the argument.

Only when \code{exclude} is specified and non-NULL (i.e., not by
default), will \code{table} potentially drop levels of factor
arguments.

Both \code{exclude} and \code{useNA} operate on an "all or none"
basis.  If you want to control the dimensions of a multiway table
separately, modify each argument using \code{factor} or \code{addNA}.

The \code{summary} method for class \code{"table"} (used for objects
created by \code{table} or \code{\LinkA{xtabs}{xtabs}}) which gives basic
information and performs a chi-squared test for independence of
factors (note that the function \code{\LinkA{chisq.test}{chisq.test}} currently
only handles 2-d tables).
\end{Details}
%
\begin{Value}
\code{table()} returns a \emph{contingency table}, an object of
class \code{"table"}, an array of integer values.
Note that unlike S the result is always an array, a 1D array if one
factor is given.

\code{as.table} and \code{is.table} coerce to and test for contingency
table, respectively.

The \code{as.data.frame} method for objects inheriting from class
\code{"table"} can be used to convert the array-based representation
of a contingency table to a data frame containing the classifying
factors and the corresponding entries (the latter as component
named by \code{responseName}).  This is the inverse of \code{\LinkA{xtabs}{xtabs}}.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{tabulate}{tabulate}} is the underlying function and allows finer
control. 

Use \code{\LinkA{ftable}{ftable}} for printing (and more) of
multidimensional tables.  \code{\LinkA{margin.table}{margin.table}},
\code{\LinkA{prop.table}{prop.table}}, \code{\LinkA{addmargins}{addmargins}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats) # for rpois and xtabs
## Simple frequency distribution
table(rpois(100,5))
## Check the design:
with(warpbreaks, table(wool, tension))
table(state.division, state.region)

# simple two-way contingency table
with(airquality, table(cut(Temp, quantile(Temp)), Month))

a <- letters[1:3]
table(a, sample(a))                    # dnn is c("a", "")
table(a, sample(a), deparse.level = 0) # dnn is c("", "")
table(a, sample(a), deparse.level = 2) # dnn is c("a", "sample(a)")

## xtabs() <-> as.data.frame.table() :
UCBAdmissions ## already a contingency table
DF <- as.data.frame(UCBAdmissions)
class(tab <- xtabs(Freq ~ ., DF)) # xtabs & table
## tab *is* "the same" as the original table:
all(tab == UCBAdmissions)
all.equal(dimnames(tab), dimnames(UCBAdmissions))

a <- rep(c(NA, 1/0:3), 10)
table(a)
table(a, exclude=NULL)
b <- factor(rep(c("A","B","C"), 10))
table(b)
table(b, exclude="B")
d <- factor(rep(c("A","B","C"), 10), levels=c("A","B","C","D","E"))
table(d, exclude="B")
print(table(b,d), zero.print = ".")

## NA counting:
is.na(d) <- 3:4
d. <- addNA(d)
d.[1:7]
table(d.) # ", exclude = NULL" is not needed
## i.e., if you want to count the NA's of 'd', use
table(d, useNA="ifany")

## Two-way tables with NA counts. The 3rd variant is absurd, but shows
## something that cannot be done using exclude or useNA. 
with(airquality,
   table(OzHi=Ozone > 80, Month, useNA="ifany"))
with(airquality,
   table(OzHi=Ozone > 80, Month, useNA="always"))
with(airquality,
   table(OzHi=Ozone > 80, addNA(Month)))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{tabulate}{Tabulation for Vectors}{tabulate}
\keyword{arith}{tabulate}
%
\begin{Description}\relax
\code{tabulate} takes the integer-valued vector \code{bin} and counts
the number of times each integer occurs in it. 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
tabulate(bin, nbins = max(1, bin, na.rm = TRUE))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{bin}] a numeric vector (of positive integers), or a factor.
\item[\code{nbins}] the number of bins to be used.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{tabulate} is used as the basis of the \code{\LinkA{table}{table}} function.

If \code{bin} is a factor, its internal integer representation
is tabulated.

If the elements of \code{bin} are numeric but not integers,
they are truncated to the nearest integer.
\end{Details}
%
\begin{Value}
An integer vector (without names).  There is a bin for each of the
values \code{1, ..., nbins}; values outside that range and \code{NA}s
are (silently) ignored.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{table}{table}}, \code{\LinkA{factor}{factor}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
tabulate(c(2,3,5))
tabulate(c(2,3,3,5), nbins = 10)
tabulate(c(-2,0,2,3,3,5))  # -2 and 0 are ignored
tabulate(c(-2,0,2,3,3,5), nbins = 3)
tabulate(factor(letters[1:10]))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{tapply}{Apply a Function Over a ``Ragged'' Array}{tapply}
\keyword{iteration}{tapply}
\keyword{category}{tapply}
%
\begin{Description}\relax
Apply a function to each cell of a ragged array, that is to each
(non-empty) group of values given by a unique combination of the
levels of certain factors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
tapply(X, INDEX, FUN = NULL, ..., simplify = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{X}] an atomic object, typically a vector.
\item[\code{INDEX}] list of factors, each of same length as \code{X}.  The
elements are coerced to factors by \code{\LinkA{as.factor}{as.factor}}.
\item[\code{FUN}] the function to be applied, or \code{NULL}.  In the case of
functions like \code{+}, \code{\%*\%}, etc., the function name must
be backquoted or quoted.  If \code{FUN} is \code{NULL}, tapply
returns a vector which can be used to subscript the multi-way array
\code{tapply} normally produces.
\item[\code{...}] optional arguments to \code{FUN}: the Note section.
\item[\code{simplify}] If \code{FALSE}, \code{tapply} always returns an array
of mode \code{"list"}.  If \code{TRUE} (the default), then if
\code{FUN} always returns a scalar, \code{tapply} returns an array
with the mode of the scalar.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
If \code{FUN} is not \code{NULL}, it is passed to
\code{\LinkA{match.fun}{match.fun}}, and hence it can be a function or a symbol or
character string naming a function.

When \code{FUN} is present, \code{tapply} calls \code{FUN} for each
cell that has any data in it.  If \code{FUN} returns a single atomic
value for each such cell (e.g., functions \code{mean} or \code{var})
and when \code{simplify} is \code{TRUE}, \code{tapply} returns a
multi-way \LinkA{array}{array} containing the values, and \code{NA} for the
empty cells.  The array has the same number of dimensions as
\code{INDEX} has components; the number of levels in a dimension is
the number of levels (\code{nlevels()}) in the corresponding component
of \code{INDEX}.  Note that if the return value has a class (e.g. an
object of class \code{"\LinkA{Date}{Date}"}) the class is discarded.

Note that contrary to S, \code{simplify = TRUE} always returns an
array, possibly 1-dimensional.

If \code{FUN} does not return a single atomic value, \code{tapply}
returns an array of mode \code{\LinkA{list}{list}} whose components are the
values of the individual calls to \code{FUN}, i.e., the result is a
list with a \code{\LinkA{dim}{dim}} attribute.

When there is an array answer, its \code{\LinkA{dimnames}{dimnames}} are named by
the names of \code{INDEX} and are based on the levels of the grouping
factors (possibly after coercion).

For a list result, the elements corresponding to empty cells are
\code{NULL}.
\end{Value}
%
\begin{Note}\relax
Optional arguments to \code{FUN} supplied by the \code{...} argument
are not divided into cells.  It is therefore inappropriate for
\code{FUN} to expect additional arguments with the same length as
\code{X}.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
the convenience functions \code{\LinkA{by}{by}} and
\code{\LinkA{aggregate}{aggregate}} (using \code{tapply});
\code{\LinkA{apply}{apply}},
\code{\LinkA{lapply}{lapply}} with its versions
\code{\LinkA{sapply}{sapply}} and \code{\LinkA{mapply}{mapply}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats)
groups <- as.factor(rbinom(32, n = 5, prob = 0.4))
tapply(groups, groups, length) #- is almost the same as
table(groups)

## contingency table from data.frame : array with named dimnames
tapply(warpbreaks$breaks, warpbreaks[,-1], sum)
tapply(warpbreaks$breaks, warpbreaks[, 3, drop = FALSE], sum)

n <- 17; fac <- factor(rep(1:3, length = n), levels = 1:5)
table(fac)
tapply(1:n, fac, sum)
tapply(1:n, fac, sum, simplify = FALSE)
tapply(1:n, fac, range)
tapply(1:n, fac, quantile)

## example of ... argument: find quarterly means
tapply(presidents, cycle(presidents), mean, na.rm = TRUE)

ind <- list(c(1, 2, 2), c("A", "A", "B"))
table(ind)
tapply(1:3, ind) #-> the split vector
tapply(1:3, ind, sum)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{taskCallback}{Add or remove a top-level task callback}{taskCallback}
\aliasA{addTaskCallback}{taskCallback}{addTaskCallback}
\aliasA{removeTaskCallback}{taskCallback}{removeTaskCallback}
\keyword{environment}{taskCallback}
%
\begin{Description}\relax
\code{addTaskCallback} registers an R function
that is to be called each time a top-level task
is completed.

\code{removeTaskCallback} un-registers a function
that was registered earlier via \code{addTaskCallback}.

These provide low-level access to the internal/native
mechanism for managing task-completion actions.
One can use \code{\LinkA{taskCallbackManager}{taskCallbackManager}}
at the S-language level to manage S functions
that are called at the completion of each task.
This is easier and more direct.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
addTaskCallback(f, data = NULL, name = character(0))
removeTaskCallback(id)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{f}] the function that is to be invoked each time a top-level task
is successfully completed. This is called with 5 or 4 arguments
depending on whether \code{data} is specified or not, respectively.
The return value should be a logical value indicating whether to
keep the callback in the list of active callbacks or discard it.
\item[\code{data}] if specified, this is the 5-th argument in the call to the
callback function \code{f}.
\item[\code{id}] a string or an integer identifying the element in the
internal callback list to be removed.
Integer indices are 1-based, i.e the first element is 1.
The names of currently registered handlers is available
using \code{\LinkA{getTaskCallbackNames}{getTaskCallbackNames}}
and is also returned in a call to \code{\LinkA{addTaskCallback}{addTaskCallback}}.

\item[\code{name}] character: names to be used.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
Top-level tasks are individual expressions
rather than entire lines of input. Thus an input
line of the form \code{expression1 ; expression2}
will give rise to 2 top-level tasks.

A top-level task callback is called with the expression for the
top-level task, the result of the top-level task, a logical value
indicating whether it was successfully completed or not (always TRUE
at present), and a logical value indicating whether the result was
printed or not. If the \code{data} argument was specified in the call
to \code{addTaskCallback}, that value is given as the fifth argument.

The callback function should return a logical value.
If the value is FALSE, the callback is removed from the task
list and will not be called again by this mechanism.
If the function returns TRUE, it is kept in the list and
will be called on the completion of the next top-level task.
\end{Details}
%
\begin{Value}
\code{addTaskCallback} returns
an integer value giving  the position in the list
of task callbacks that this new callback occupies.
This is only the current position of the callback.
It can be used to remove the entry as long as
no other values are removed from earlier positions
in the list first.

\code{removeTaskCallback} returns a logical value
indicating whether the specified element was removed.
This can fail (i.e., return \code{FALSE})
if an incorrect name or index is given that does not
correspond to the name or position of an element in the list.
\end{Value}
%
\begin{Note}\relax
This is an experimental feature and the interface may be changed
in the future.

There is also C-level access to top-level task callbacks
to allow C routines rather than R functions be used.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{getTaskCallbackNames}{getTaskCallbackNames}}
\code{\LinkA{taskCallbackManager}{taskCallbackManager}}
\url{http://developer.r-project.org/TaskHandlers.pdf}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
 times <- function(total = 3, str="Task a") {
   ctr <- 0

   function(expr, value, ok, visible) {
    ctr <<- ctr + 1
    cat(str, ctr, "\n")
    if(ctr == total) {
      cat("handler removing itself\n")
    }
    return(ctr < total)
   }
 }

 # add the callback that will work for
 # 4 top-level tasks and then remove itself.
 n <- addTaskCallback(times(4))

 # now remove it, assuming it is still first in the list.
 removeTaskCallback(n)

## Not run: 
# There is no point in running this
# as 
 addTaskCallback(times(4))

 sum(1:10)
 sum(1:10)
 sum(1:10)
 sum(1:10)
 sum(1:10)

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{taskCallbackManager}{Create an R-level task callback manager}{taskCallbackManager}
\keyword{environment}{taskCallbackManager}
%
\begin{Description}\relax
This provides an entirely S-language mechanism
for managing callbacks or actions  that are invoked at
the conclusion of each top-level task.  Essentially,
we register a single R function from this manager
with the underlying, native
task-callback mechanism and this function handles invoking the other
R callbacks under the control of the manager.
The manager consists of a collection of functions that access shared
variables to manage the list of user-level callbacks.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
taskCallbackManager(handlers = list(), registered = FALSE,
                    verbose = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{handlers}] this can be a list of callbacks in which each element
is a list with  an element  named \code{"f"}
which is a callback function, and an optional
element named \code{"data"} which is the 5-th argument to be
supplied  to the callback when it is invoked.
Typically this argument is not specified, and one uses \code{add} to
register callbacks after the manager is created.
\item[\code{registered}] a logical value indicating whether
the \code{evaluate} function has already been registered
with the internal task callback mechanism.
This is usually \code{FALSE} and 
the first time a callback is added
via the \code{add} function, the
\code{evaluate} function is automatically registered.
One can control when the function is registered
by specifying \code{TRUE} for this argument
and calling \code{\LinkA{addTaskCallback}{addTaskCallback}} manually.

\item[\code{verbose}] a logical value, which if \code{TRUE},
causes information to be printed to the console
about certain activities this dispatch manager performs.
This is useful for debugging callbacks and the handler
itself.

\end{ldescription}
\end{Arguments}
%
\begin{Value}
A list containing 6 functions:
\begin{ldescription}
\item[\code{add}] register a callback with this manager, giving the
function, an optional 5-th argument, an optional name
by which the callback is stored in the list,
and a \code{register} argument which controls whether
the \code{evaluate} function is registered with the internal
C-level dispatch mechanism if necessary.
\item[\code{remove}] remove an element from the manager's collection
of callbacks, either by name or position/index.
\item[\code{evaluate}] the `real' callback function that is registered
with the C-level dispatch mechanism and which invokes each of the
R-level callbacks within this manager's control.
\item[\code{suspend}] a function to set the suspend state
of the manager. If it is suspended, none of the callbacks will be
invoked when a task is completed. One sets the state by specifying
a logical value for the \code{status} argument.

\item[\code{register}] a function to register the \code{evaluate}
function with the internal C-level dispatch mechanism. This is
done automatically by the \code{add} function, but can be called
manually.
\item[\code{callbacks}] returns the list of callbacks being maintained by this
manager.
\end{ldescription}
\end{Value}
%
\begin{Note}\relax
This is an experimental feature and the interface may be changed
in the future.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{addTaskCallback}{addTaskCallback}},
\code{\LinkA{removeTaskCallback}{removeTaskCallback}},
\code{\LinkA{getTaskCallbackNames}{getTaskCallbackNames}}\bsl{}
\url{http://developer.r-project.org/TaskHandlers.pdf}  
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# create the manager
h <- taskCallbackManager()

# add a callback
h$add(function(expr, value, ok, visible) {
                       cat("In handler\n")
                       return(TRUE)
                     }, name = "simpleHandler")

# look at the internal callbacks.
getTaskCallbackNames()

# look at the R-level callbacks
names(h$callbacks())

getTaskCallbackNames()
removeTaskCallback("R-taskCallbackManager")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{taskCallbackNames}{Query the names of the current internal top-level task callbacks}{taskCallbackNames}
\aliasA{getTaskCallbackNames}{taskCallbackNames}{getTaskCallbackNames}
\keyword{environment}{taskCallbackNames}
%
\begin{Description}\relax
This provides a way to get the names (or identifiers)
for the currently registered task callbacks
that are invoked at the conclusion of each top-level task.
These identifiers can be used to remove a callback.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getTaskCallbackNames()
\end{verbatim}
\end{Usage}
%
\begin{Value}
A character vector giving the name for each of the
registered callbacks which are invoked when
a top-level task is completed successfully.
Each name is the one used when registering
the callbacks and returned as the in the
call to \code{\LinkA{addTaskCallback}{addTaskCallback}}. 
\end{Value}
%
\begin{Note}\relax
One can use \code{\LinkA{taskCallbackManager}{taskCallbackManager}}
to manage user-level task callbacks,
i.e., S-language functions, entirely within
the S language and access the names
more directly.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{addTaskCallback}{addTaskCallback}},
\code{\LinkA{removeTaskCallback}{removeTaskCallback}},
\code{\LinkA{taskCallbackManager}{taskCallbackManager}}\bsl{}
\url{http://developer.r-project.org/TaskHandlers.pdf}  
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
 n <- addTaskCallback(function(expr, value, ok, visible) {
                        cat("In handler\n")
                        return(TRUE)
                      }, name = "simpleHandler")

 getTaskCallbackNames()

   # now remove it by name
 removeTaskCallback("simpleHandler")


 h <- taskCallbackManager()
 h$add(function(expr, value, ok, visible) {
                        cat("In handler\n")
                        return(TRUE)
                      }, name = "simpleHandler")
 getTaskCallbackNames()
 removeTaskCallback("R-taskCallbackManager")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{tempfile}{Create Names for Temporary Files}{tempfile}
\aliasA{tempdir}{tempfile}{tempdir}
\keyword{file}{tempfile}
%
\begin{Description}\relax
\code{tempfile} returns a vector of character strings which can be used as
names for temporary files.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
tempfile(pattern = "file", tmpdir = tempdir())
tempdir()
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{pattern}] a non-empty character vector giving the initial part
of the name.
\item[\code{tmpdir}] a non-empty character vector giving the directory name
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{pattern} has length greater than one then the result is of the
same length giving a temporary file name for each component of
\code{pattern}.

The names are very likely to be unique among calls to \code{tempfile}
in an \R{} session and across simultaneous \R{} sessions.  The filenames are
guaranteed not to be currently in use.

The file name is made of the pattern and a random suffix in hex.  By
default, the filenames will be in the directory given by
\code{tempdir()}.  This will be a subdirectory of the temporary
directory found by the following rule.  The environment
variables \env{TMPDIR}, \env{TMP} and \env{TEMP} are checked in turn
and the first found which points to a writable directory is used:
if none succeeds \file{/tmp} is used.
\end{Details}
%
\begin{Value}
For \code{tempfile} a character vector giving the names of possible
(temporary) files. Note that no files are generated by
\code{tempfile}.

For \code{tempdir}, the path of the per-session temporary directory.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{unlink}{unlink}} for deleting files.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
tempfile(c("ab", "a b c"))   # give file name with spaces in!

tempdir() # working on all platforms with quite platform dependent result
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{textConnection}{Text Connections}{textConnection}
\aliasA{textConnectionValue}{textConnection}{textConnectionValue}
\keyword{file}{textConnection}
\keyword{connection}{textConnection}
%
\begin{Description}\relax
Input and output text connections.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
textConnection(object, open = "r", local = FALSE,
               encoding = c("", "bytes", "UTF-8"))

textConnectionValue(con)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{object}] character.  A description of the connection. 
For an input this is an \R{} character vector object, and for an output
connection the name for the \R{} character vector to receive the
output, or \code{NULL} (for none).

\item[\code{open}] character.  Either \code{"r"} (or equivalently \code{""})
for an input connection or \code{"w"} or \code{"a"} for an output
connection.
\item[\code{local}] logical.  Used only for output connections.  If \code{TRUE},
output is assigned to a variable in the calling environment.  Otherwise
the global environment is used.
\item[\code{encoding}] character.  Used only for input connections.  How
marked strings in \code{object} should be handled: converted to the
current locale, used byte-by-byte or translated to UTF-8.
\item[\code{con}] An output text connection.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
An input text connection is opened and the character vector is copied
at time the connection object is created, and \code{close}
destroys the copy.

An output text connection is opened and creates an \R{} character vector
of the given name in the user's workspace or in the calling environment,
depending on the value of the \code{local} argument.  This object will at all
times hold the completed lines of output to the connection, and
\code{\LinkA{isIncomplete}{isIncomplete}} will indicate if there is an incomplete
final line.  Closing the connection will output the final line,
complete or not.  (A line is complete once it has been terminated by
end-of-line, represented by \code{"\bsl{}n"} in \R{}.)   The output character
vector has locked bindings (see \code{\LinkA{lockBinding}{lockBinding}}) until
\code{close} is called on the connection.  The character vector can
also be retrieved \emph{via} \code{textConnectionValue}, which is the
only way to do so if \code{object = NULL}.  If the current locale is
detected as Latin-1 or UTF-8, non-ASCII elements of the character vector
will be marked accordingly (see \code{Encoding}).

Opening a text connection with \code{mode = "a"} will attempt to
append to an existing character vector with the given name in the
user's workspace or the calling environment.  If none is found (even
if an object exists of the right name but the wrong type) a new
character vector will be created, with a warning.

You cannot \code{seek} on a text connection, and \code{seek} will
always return zero as the position.
\end{Details}
%
\begin{Value}
For \code{textConnection}, a connection object of class
\code{"textConnection"} which inherits from class \code{"connection"}.

For \code{textConnectionValue}, a character vector.
\end{Value}
%
\begin{Note}\relax
As output text connections keep the character vector up to date
line-by-line, they are relatively expensive to use, and it is often
better to use an anonymous \code{\LinkA{file}{file}()} connection to collect
output.

On (rare) platforms where \code{vsnprintf} does not return the needed
length of output there is a 100,000 character limit on the length of
line for output connections: longer lines will be truncated with a
warning.
\end{Note}
%
\begin{References}\relax
Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language.} Springer.\\{}
[S has input text connections only.]
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}, \code{\LinkA{showConnections}{showConnections}},
\code{\LinkA{pushBack}{pushBack}}, \code{\LinkA{capture.output}{capture.output}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
zz <- textConnection(LETTERS)
readLines(zz, 2)
scan(zz, "", 4)
pushBack(c("aa", "bb"), zz)
scan(zz, "", 4)
close(zz)

zz <- textConnection("foo", "w")
writeLines(c("testit1", "testit2"), zz)
cat("testit3 ", file=zz)
isIncomplete(zz)
cat("testit4\n", file=zz)
isIncomplete(zz)
close(zz)
foo

## Not run: # capture R output: use part of example from help(lm)
zz <- textConnection("foo", "w")
ctl <- c(4.17, 5.58, 5.18, 6.11, 4.5, 4.61, 5.17, 4.53, 5.33, 5.14)
trt <- c(4.81, 4.17, 4.41, 3.59, 5.87, 3.83, 6.03, 4.89, 4.32, 4.69)
group <- gl(2, 10, 20, labels = c("Ctl", "Trt"))
weight <- c(ctl, trt)
sink(zz)
anova(lm.D9 <- lm(weight ~ group))
cat("\nSummary of Residuals:\n\n")
summary(resid(lm.D9))
sink()
close(zz)
cat(foo, sep = "\n")

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{tilde}{Tilde Operator}{tilde}
\aliasA{\textasciitilde{}}{tilde}{.Rtilde.}
\keyword{models}{tilde}
%
\begin{Description}\relax
Tilde is used to separate the left- and right-hand sides in model formula.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
y ~ model
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{y, model}] symbolic expressions.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The left-hand side is optional, and one-sided formulae are used in
some contexts.
\end{Details}
%
\begin{References}\relax
Chambers, J. M. and Hastie, T. J. (1992)
\emph{Statistical models.}
Chapter 2 of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{formula}{formula}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{timezones}{Time Zones}{timezones}
\aliasA{Sys.timezone}{timezones}{Sys.timezone}
\aliasA{time zone}{timezones}{time zone}
\aliasA{time zones}{timezones}{time zones}
\aliasA{timezone}{timezones}{timezone}
\aliasA{TZ}{timezones}{TZ}
\keyword{utilities}{timezones}
\keyword{chron}{timezones}
%
\begin{Description}\relax
Information about time zones in \R{}.  \code{Sys.timezone} returns
the current time zone.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
Sys.timezone()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
Time zones are a system-specific topic, but in recent versions
of \R{} almost all \R{} platforms use the same underlying code, used by
Linux, Mac OS X, Solaris, AIX, FreeBSD, Sun Java >= 1.4 and Tcl >=
8.5, and supplied with \R{} on Windows.

It is not in general possible to retrieve the system's own name(s) for
the current timezone, but \code{Sys.timezone} will retrieve the name
it uses for the current time (and the name may differ depending on
whether daylight saving time is in effect).

On most platforms it is  possible to set the time zone via the
environment variable \env{TZ}: see the section on `Time zone
names' for suitable values.

Note that the principal difficulty with time zones is their individual
history: over the last 100 years places have changed their affiliation
between major time zones, have opted out of (or in to) DST in
various years or adopted rule changes late or not at all.  This often
involves tiny administrative units in the US/Canada: Iowa had 23
different implementations of DST in the 1960's!

Time zones did not come into use until the second half of the
nineteenth century, and DST was first introduced in the early
twentieth century, most widely during the First World War (in 1916).
The most common implementation of \code{POSIXct} is a signed 32-bit
integers and so only goes back to the end of 1901: on such systems \R{}
assumes that dates prior to that are in the same time zone as they
were in 1902.
\end{Details}
%
\begin{Value}
\code{Sys.timezone} returns an OS-specific character string, possibly
an empty string.  Typically this is an abbreviation such as \code{"EST"}. 
\end{Value}
%
\begin{Section}{Time zone names}
Where OSes describe their valid time zones can be obscure.  The help
for the C function \code{tzset} can be helpful, but it
can also be inaccurate.  There is a cumbersome POSIX specification
(listed under environment variable \env{TZ} at
\url{http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html}),
which is often at least partially supported, but there usually are
other more user-friendly ways to specify timezones.

Many systems make use of a timezone database compiled by Arthur Olson,
in which the preferred way to refer to a time zone by a location
(typically of a city) e.g. \code{Europe/London},
\code{America/Los\_Angeles}, \code{Pacific/Easter}.  Some traditional
designations are also allowed such as \code{EST5EDT} or
\code{GB}.  (Beware that some of these designations may not be what you
think: in particular \code{EST} is a time zone used in Canada
\emph{without} daylight savings time, and not \code{EST5EDT} nor
(Australian) Eastern Standard Time.)  The designation can also be an
optional colon prepended to the path to a file giving complied zone
information (and the examples above are all files in a system-specific
location).  See \url{http://www.twinsun.com/tz/tz-link.htm} for more
details and references.

For most Unix-alikes use the Olson databases.  The 
system-specific default location in the file system varies, e.g. 
\file{/usr/share/zoneinfo}, \file{/usr/etc/zoneinfo},
\file{/usr/lib/zoneinfo} or \file{/usr/share/lib/zoneinfo}.
\end{Section}
%
\begin{Note}\relax
There is currently (2007/8) considerable disruption over changes to
the timings of the DST transitions, aimed at energy conservation.
These often have short notice and time zone databases may not be up to
date (even if the OS has been updated recently).

Note that except on Windows, the operation of time zones is an OS
service, and even on Windows a third-party database is used and can be
updated (see the section on `Time zone names').  Incorrect
results will never be an \R{} issue, so please ensure that you have the
courtesy not to blame \R{} for them.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{Sys.time}{Sys.time}}, \code{\LinkA{as.POSIXlt}{as.POSIXlt}}.

\url{http://en.wikipedia.org/wiki/Time_zone} and
\url{http://www.twinsun.com/tz/tz-link.htm} for extensive sets of links.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
Sys.timezone()
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{toString}{Convert an R Object to a Character String}{toString}
\methaliasA{toString.default}{toString}{toString.default}
\keyword{utilities}{toString}
%
\begin{Description}\relax
This is a helper function for \code{\LinkA{format}{format}} to produce a single
character string describing an \R{} object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
toString(x, ...)

## Default S3 method:
toString(x, width = NULL, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] The object to be converted.
\item[\code{width}] Suggestion for the maximum field width.  Values of
\code{NULL} or \code{0} indicate no maximum.
The minimum value accepted is 6 and smaller values are taken as 6.
\item[\code{...}] Optional arguments passed to or from methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function for which methods can be written: only the
default method is described here.  Most methods should honor the
\code{width} argument to specify the maximum display width (as measured
by \code{\LinkA{nchar}{nchar}(type = "width")} of the result.

The default method first converts \code{x} to character and then
concatenates the elements separated by \code{", "}.
If \code{width} is supplied and is not \code{NULL}, the default method
returns the first \code{width - 4} characters of the result with
\code{....} appended, if the full result would use more than
\code{width} characters.
\end{Details}
%
\begin{Value}
A character vector of length 1 is returned.
\end{Value}
%
\begin{Author}\relax
 Robert Gentleman 
\end{Author}
%
\begin{SeeAlso}\relax
 \code{\LinkA{format}{format}} 
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c("a", "b", "aaaaaaaaaaa")
toString(x)
toString(x, width=8)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{trace}{Interactive Tracing and Debugging of Calls to a Function or Method}{trace}
\aliasA{.doTrace}{trace}{.doTrace}
\aliasA{.primTrace}{trace}{.primTrace}
\aliasA{.primUntrace}{trace}{.primUntrace}
\aliasA{tracingState}{trace}{tracingState}
\aliasA{untrace}{trace}{untrace}
\keyword{programming}{trace}
\keyword{debugging}{trace}
%
\begin{Description}\relax
A call to \code{trace} allows you to insert debugging code (e.g., a
call to \code{\LinkA{browser}{browser}} or \code{\LinkA{recover}{recover}}) at chosen
places in any function.  A call to \code{untrace} cancels the tracing.
Specified methods can be traced the same way, without tracing all
calls to the function.  Trace code can be any \R{} expression.  Tracing
can be temporarily turned on or off globally by calling \code{tracingState}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
trace(what, tracer, exit, at, print, signature,
      where = topenv(parent.frame()), edit = FALSE)
untrace(what, signature = NULL, where = topenv(parent.frame()))

tracingState(on = NULL)
.doTrace(expr, msg)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{what}] The name (quoted or not) of a function to be traced or
untraced.  For \code{untrace} or for \code{trace} with more than one
argument, more than one name can be given in the quoted form, and
the same action will be applied to each one.
\item[\code{tracer}] Either a function or an unevaluated expression.  The
function will be called or the expression will be evaluated either
at the beginning of the call, or before those steps in the call
specified by the argument \code{at}.
See the details section.
\item[\code{exit}]  Either a function or an unevaluated expression.  The
function will be called or the expression will be evaluated on
exiting the function.
See the details section.
\item[\code{at}] optional numeric vector or list.  If supplied, \code{tracer}
will be called just before the corresponding step in the body of the
function.
See the details section. 
\item[\code{print}] If \code{TRUE} (as per default), a descriptive line is
printed before any trace expression is evaluated.
\item[\code{signature}]  If this argument is supplied, it should be a
signature for a method for function \code{what}.  In this case, the
method, and \emph{not} the function itself, is traced.
\item[\code{edit}]  For complicated tracing, such as tracing within a loop
inside the function, you will need to insert the desired calls by
editing the body of the function.  If so, supply the \code{edit}
argument either as \code{TRUE}, or as the name of the editor you
want to use.  Then \code{trace()} will call \code{\LinkA{edit}{edit}} and
use the version of the function after you edit it. See the details
section for additional information.

\item[\code{where}] where to look for the function to be
traced; by default, the top-level environment of the call to
\code{trace}.

An important use of this argument is to trace a function when it
is called from a package with a name space.  The current name space mechanism
imports the functions to be called (with the exception of functions
in the base package).  The functions being called are \emph{not} the
same objects seen from the top-level (in general, the imported
packages may not even be attached).  Therefore, you must ensure that
the correct versions are being traced.  The way to do this is to set
argument \code{where} to a function in the name space.  The tracing
computations will then start looking in the environment of that
function (which will be the name space of the corresponding package).
(Yes, it's subtle, but the semantics here are central to how
name spaces work in R.)

\item[\code{on}] logical; a call to  the support function \code{tracingState} returns \code{TRUE}
if tracing is globally turned on, \code{FALSE} otherwise.  An
argument of one or the other of those values sets the state.  If the
tracing state is \code{FALSE}, none of the trace actions will
actually occur (used, for example, by debugging functions to shut
off tracing during debugging).
\item[\code{expr, msg}] arguments to the support function \code{.doTrace}, calls to
which are inserted into the modified function or method:
\code{expr} is the tracing action (such as a call to
\code{browser()}, and \code{msg} is a string identifying the
place where the trace action occurs.

\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{trace} function operates by constructing a revised version
of the function (or of the method, if \code{signature} is supplied),
and assigning the new object back where the original was found.
If only the \code{what} argument is given, a line of trace printing is
produced for each call to the function (back compatible with the
earlier version of \code{trace}).

The object constructed by \code{trace} is from a class that extends
\code{"function"} and which contains the original, untraced version.
A call to \code{untrace} re-assigns this version.

If the argument \code{tracer} or \code{exit} is the name of a
function, the tracing expression will be a call to that function, with
no arguments.  This is the easiest and most common case, with the
functions \code{\LinkA{browser}{browser}} and \code{\LinkA{recover}{recover}} the
likeliest candidates; the former browses in the frame of the function
being traced, and the latter allows browsing in any of the currently
active calls.

The \code{tracer} or \code{exit} argument can also be an unevaluated
expression (such as returned by a call to \code{\LinkA{quote}{quote}} or
\code{\LinkA{substitute}{substitute}}).  This expression itself is inserted in the
traced function, so it will typically involve arguments or local
objects in the traced function.  An expression of this form is useful
if you only want to interact when certain conditions apply (and in
this case you probably want to supply \code{print=FALSE} in the call
to \code{trace} also).

When the \code{at} argument is supplied, it can be a vector of
integers referring to the substeps of the body of the function (this
only works if the body of the function is enclosed in \code{\{ ...\}}.  In
this case \code{tracer} is \emph{not} called on entry, but instead
just before evaluating each of the steps listed in \code{at}.  (Hint:
you don't want to try to count the steps in the printed version of a
function; instead, look at \code{as.list(body(f))} to get the numbers
associated with the steps in function \code{f}.)

The \code{at} argument can also be a list of integer vectors.  In
this case, each vector refers to a step nested within another step of
the function.  For example, \code{at = list(c(3,4))}
will call the tracer just before the fourth step of the third step
of the function.  See the example below.

An intrinsic limitation in the \code{exit} argument is that it won't
work if the function itself uses \code{on.exit}, since the existing
calls will override the one supplied by \code{trace}.

Tracing does not nest.  Any call to \code{trace} replaces previously
traced versions of that function or method (except for edited
versions as discussed below), and \code{untrace} always
restores an untraced version.  (Allowing nested tracing has too many
potentials for confusion and for accidentally leaving traced versions
behind.)

When the \code{edit} argument is used repeatedly with no call to
\code{untrace} on the same function or method in between, the
previously edited version is retained. If you want to throw away
all the previous tracing and then edit, call \code{untrace} before the next
call to \code{trace}.  Editing may be combined with automatic
tracing; just supply the other arguments such as \code{tracer}, and
the \code{edit} argument as well.  The \code{edit=TRUE} argument
uses the default editor (see \code{\LinkA{edit}{edit}}).

Tracing primitive functions (builtins and specials) from the base
package works, but only by a special mechanism and not very
informatively.  Tracing a primitive causes the primitive to be
replaced by a function with argument \dots (only).  You can get a bit
of information out, but not much.  A warning message is issued when
\code{trace} is used on a primitive.

The practice of saving the traced version of the function back where
the function came from means that tracing carries over from one
session to another, \emph{if} the traced function is saved in the
session image.  (In the next session, \code{untrace} will remove the
tracing.)  On the other hand, functions that were in a package, not in
the global environment, are not saved in the image, so tracing expires
with the session for such functions.

Tracing a method is basically just like tracing a function, with the
exception that the traced version is stored by a call to
\code{\LinkA{setMethod}{setMethod}} rather than by direct assignment, and so is
the untraced version after a call to \code{untrace}.

The version of \code{trace} described here is largely compatible with
the version in S-Plus, although the two work by entirely different
mechanisms.  The S-Plus \code{trace} uses the session frame, with the
result that tracing never carries over from one session to another (\R{}
does not have a session frame).  Another relevant distinction has
nothing directly to do with \code{trace}:  The browser in S-Plus
allows changes to be made to the frame being browsed, and the changes
will persist after exiting the browser.  The \R{} browser allows changes,
but they disappear when the browser exits.  This may be relevant in
that the S-Plus version allows you to experiment with code changes
interactively, but the \R{} version does not.  (A future revision may
include a `destructive' browser for \R{}.)
\end{Details}
%
\begin{Value}
In the simple version (just the first argument), invisible \code{NULL}.
Otherwise, the traced function(s) name(s).  The relevant consequence is the
assignment that takes place.
\end{Value}
%
\begin{Note}\relax
The version of function tracing that includes any of the arguments
except for the function name requires the \pkg{methods} package
(because it uses special classes of objects to store and restore
versions of the traced functions).

If methods dispatch is not currently on, \code{trace} will load the
methods name space, but will not put the methods package on the search
list.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{browser}{browser}} and \code{\LinkA{recover}{recover}}, the likeliest
tracing functions;
also, \code{\LinkA{quote}{quote}} and \code{\LinkA{substitute}{substitute}} for
constructing general expressions.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics)

##  Very simple use
trace(sum)
hist(stats::rnorm(100)) # shows about 3-4 calls to sum()
untrace(sum)

if(.isMethodsDispatchOn()) { # non-simple use needs 'methods' package

f <- function(x, y) {
    y <- pmax(y, 0.001)
    if (x > 0) x ^ y else stop("x must be positive")
}

## arrange to call the browser on entering and exiting
## function f
trace("f", browser, exit = browser)

## instead, conditionally assign some data, and then browse
## on exit, but only then.  Don't bother me otherwise

trace("f", quote(if(any(y < 0)) yOrig <- y),
      exit = quote(if(exists("yOrig")) browser()),
      print = FALSE)
      
## Enter the browser just before stop() is called.  First, find
## the step numbers

as.list(body(f))
as.list(body(f)[[3]])

## Now call the browser there

trace("f", quote(browser()), at=list(c(3,4)))

## trace a utility function, with recover so we
## can browse in the calling functions as well.

trace("as.matrix", recover)

## turn off the tracing

untrace(c("f", "as.matrix"))

## Not run: 
## trace calls to the function lm() that come from
## the nlme package.
## (The function nlme is in that package, and the package
## has a name space, so the where= argument must be used
## to get the right version of lm)

trace(lm, exit = recover, where = nlme)

## End(Not run)
}
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{traceback}{Print Call Stacks}{traceback}
\aliasA{.Traceback}{traceback}{.Traceback}
\keyword{programming}{traceback}
%
\begin{Description}\relax
By default \code{traceback()} prints the call stack of the last
uncaught error, i.e., the sequence of calls that lead to the error.
This is useful when an error occurs with an unidentifiable error
message.  It can also be used to print arbitrary lists of deparsed
calls.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
traceback(x = NULL, max.lines = getOption("deparse.max.lines"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] \code{NULL} (default, meaning \code{.Traceback}),
or a list or pairlist of deparsed calls.
\item[\code{max.lines}] The maximum number of lines to be printed
\emph{per call}.  The default is unlimited.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The stack of the last uncaught error is stored as a list of deparsed
calls in \code{.Traceback}, which \code{traceback} prints in a
user-friendly format.  The stack of deparsed calls always contains all
function calls and all foreign function calls (such
as \code{\LinkA{.Call}{.Call}}): if profiling is in progress it will include
calls to some primitive functions.  (Calls to builtins are
included, but not to specials.)

Errors which are caught \emph{via} \code{\LinkA{try}{try}} or
\code{\LinkA{tryCatch}{tryCatch}} do not generate a traceback, so what is printed
is the call sequence for the last uncaught error, and not necessarily
for the last error.
\end{Details}
%
\begin{Value}
\code{traceback()} returns nothing, but prints the deparsed call stack
deepest call first.  The calls may print on more than one line, and
the first line for each call is labelled by the frame number.  The
number of lines printed per call can be limited via \code{max.lines}.
\end{Value}
%
\begin{Section}{Warning}
It is undocumented where \code{.Traceback} is stored nor that it is
visible, and this is subject to change.  Prior to \R{} 2.4.0 it was
stored in the workspace, but no longer.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
foo <- function(x) { print(1); bar(2) }
bar <- function(x) { x + a.variable.which.does.not.exist }
## Not run: 
foo(2) # gives a strange error
traceback()
## End(Not run)
## 2: bar(2)
## 1: foo(2)
bar
## Ah, this is the culprit ...
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{tracemem}{Trace Copying of Objects}{tracemem}
\aliasA{retracemem}{tracemem}{retracemem}
\aliasA{untracemem}{tracemem}{untracemem}
\keyword{utilities}{tracemem}
%
\begin{Description}\relax
This function marks an object so that a message is printed whenever the
internal function \code{duplicate} is called.   This happens when two
objects share the same memory  and one of them is modified.  It is a
major cause of hard-to-predict memory use in R.  
\end{Description}
%
\begin{Usage}
\begin{verbatim}
tracemem(x)
untracemem(x)
retracemem(x, previous = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] An R object, not a function or environment or \code{NULL}.
\item[\code{previous}] A value as returned by \code{tracemem} or \code{retracemem}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This functionality is optional, determined at compilation, because it
makes R run a little more slowly even when no objects are being
traced. \code{tracemem} and \code{untracemem} give errors when R is not
compiled with memory profiling; \code{retracemem} does not (so it can be
left in code during development).

When an object is traced any copying of the object by the C function
\code{duplicate} or by arithmetic or mathematical operations produces a
message to standard output.  The message consists of the string
\code{tracemem}, the identifying strings for the object being copied and
the new object being created, and a stack trace showing where the
duplication occurred.  \code{retracemem()} is used to indicate that a
variable should be considered a copy of a previous variable (e.g. after
subscripting).

The messages can be turned off with \code{\LinkA{tracingState}{tracingState}}.

It is not possible to trace functions, as this would conflict with
\code{\LinkA{trace}{trace}} and it is not useful to trace \code{NULL},
environments, promises, weak references, or external pointer objects, as
these are not duplicated.

These functions are \LinkA{primitive}{primitive} and use positional matching of
arguments.
\end{Details}
%
\begin{Value}
A character string for identifying the object in the trace output (an
address in hex enclosed in angle brackets), or \code{NULL} (invisibly
for \code{untracemem}).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{trace}{trace}}, \code{\LinkA{Rprofmem}{Rprofmem}}

\url{http://developer.r-project.org/memory-profiling.html}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
a <- 1:10
tracemem(a)
## b and a share memory
b <- a
b[1] <- 1
untracemem(a)

## copying in lm
d <- stats::rnorm(10)
tracemem(d)
lm(d ~ a+log(b))

## f is not a copy and is not traced
f <- d[-1]
f+1
## indicate that f should be traced as a copy of d
retracemem(f, retracemem(d))
f+1

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{transform}{Transform an Object, for Example a Data Frame}{transform}
\methaliasA{transform.data.frame}{transform}{transform.data.frame}
\methaliasA{transform.default}{transform}{transform.default}
\keyword{manip}{transform}
%
\begin{Description}\relax
\code{transform} is a generic function, which---at least
currently---only does anything useful with
data frames. \code{transform.default} converts its first argument to
a data frame if possible and calls \code{transform.data.frame}. 
\end{Description}
%
\begin{Usage}
\begin{verbatim}
transform(`_data`, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{\_data}] The object to be transformed
\item[\code{...}] Further arguments of the form \code{tag=value}
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The \code{...} arguments to \code{transform.data.frame} are tagged
vector expressions, which are evaluated in the data frame
\code{\_data}.  The tags are matched against \code{names(\_data)}, and for
those that match, the value replace the corresponding variable in
\code{\_data}, and the others are appended to \code{\_data}.
\end{Details}
%
\begin{Value}
The modified value of \code{\_data}.
\end{Value}
%
\begin{Note}\relax
Prior to R 2.3.0, the first argument was named \code{x}, but this
caused trouble if people wanted to create a variable of that name.
Names starting with an underscore are syntactically invalid, so the
current choice should be less problematic.

If some of the values are not vectors of the appropriate length,
you deserve whatever you get!
\end{Note}
%
\begin{Author}\relax
Peter Dalgaard
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{subset}{subset}},
\code{\LinkA{list}{list}},
\code{\LinkA{data.frame}{data.frame}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
transform(airquality, Ozone = -Ozone)
transform(airquality, new = -Ozone, Temp = (Temp-32)/1.8)

attach(airquality)
transform(Ozone, logOzone = log(Ozone)) # marginally interesting ...
detach(airquality)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{Trig}{Trigonometric Functions}{Trig}
\aliasA{acos}{Trig}{acos}
\aliasA{asin}{Trig}{asin}
\aliasA{atan}{Trig}{atan}
\aliasA{atan2}{Trig}{atan2}
\aliasA{cos}{Trig}{cos}
\aliasA{sin}{Trig}{sin}
\aliasA{tan}{Trig}{tan}
\keyword{math}{Trig}
%
\begin{Description}\relax
These functions give the obvious trigonometric functions.  They
respectively compute the cosine, sine, tangent, arc-cosine, arc-sine,
arc-tangent, and the two-argument arc-tangent.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
cos(x)
sin(x)
tan(x)
acos(x)
asin(x)
atan(x)
atan2(y, x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x, y}] numeric or complex vectors.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The arc-tangent of two arguments \code{atan2(y, x)} returns the angle
between the x-axis and the vector from the origin to \eqn{(x, y)}{},
i.e., for positive arguments \code{atan2(y, x) == atan(y/x)}.

Angles are in radians, not degrees (i.e., a right angle is
\eqn{\pi/2}{}).

All except \code{atan2} are generic functions: methods can be defined
for them individually or via the \code{\LinkA{Math}{S3groupGeneric}}
group generic.
\end{Details}
%
\begin{Section}{Complex values}
For the inverse trigonometric functions, branch cuts are defined as in
Abramowitz and Stegun, figure 4.4, page 79.  Continuity on the
branch cuts is standard.

For \code{asin()} and \code{acos()}, there are two cuts, both along
the real axis: \eqn{\left(-\infty, -1\right]}{} and
\eqn{\left[1, \infty\right)}{}.  Functions \code{asin()}
and \code{acos()} are continuous from above on the interval
\eqn{\left(-\infty, -1\right]}{} and continuous from
below on \eqn{\left[1, \infty\right)}{}.

For \code{atan()} there are two cuts, both along the pure imaginary
axis: \eqn{\left(-\infty i, -1i\right]}{} and
\eqn{\left[1i, \infty i\right)}{}.  It is continuous
from the left on the interval
\eqn{\left(-\infty i, -1i\right]}{} and from the
right on the interval \eqn{\left[1i, \infty i\right)}{}.
\end{Section}
%
\begin{Section}{S4 methods}
All except \code{atan2} are S4 generic functions: methods can be defined
for them individually or via the
\code{\LinkA{Math}{S4groupGeneric}} group generic.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.

Abramowitz, M. and Stegun, I. A. (1972). \emph{Handbook of
Mathematical Functions,} New York: Dover.\\{}
Chapter 4. Elementary Transcendental Functions: Logarithmic,
Exponential, Circular and Hyperbolic Functions

\end{References}
\inputencoding{latin1}
\HeaderA{try}{Try an Expression Allowing Error Recovery}{try}
\keyword{programming}{try}
%
\begin{Description}\relax
\code{try} is a wrapper to run an expression that might fail and allow
the user's code to handle error-recovery.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
try(expr, silent = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{expr}] an \R{} expression to try.
\item[\code{silent}] logical: should the report of error messages be suppressed?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{try} evaluates an expression and traps any errors that occur
during the evaluation.  If an error occurs then the error
message is printed to the \code{stderr} connection unless
\code{options("show.error.messages")} is false or
the call includes \code{silent = TRUE}.  The error message is also
stored in a buffer where it can be retrieved by
\code{geterrmessage}. (This should not be needed as the value returned
in case of an error contains the error message.)

\code{try} is implemented using \code{\LinkA{tryCatch}{tryCatch}}; for
programming, instead of \code{try(expr, silent=TRUE)}, something like
\code{tryCatch(expr, error = function(e) e)} (or other simple
error handler functions) may be more efficient and flexible.
\end{Details}
%
\begin{Value}
The value of the expression if \code{expr} is evaluated without error,
but an invisible object of class \code{"try-error"} containing the
error message if it fails.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{options}{options}} for setting error handlers and suppressing the
printing of error messages;
\code{\LinkA{geterrmessage}{geterrmessage}} for retrieving the last error message.
\code{\LinkA{tryCatch}{tryCatch}} provides another means of catching and handling
errors.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## this example will not work correctly in example(try), but
## it does work correctly if pasted in
options(show.error.messages = FALSE)
try(log("a"))
print(.Last.value)
options(show.error.messages = TRUE)

## alternatively,
print(try(log("a"), TRUE))

## run a simulation, keep only the results that worked.
set.seed(123)
x <- stats::rnorm(50)
doit <- function(x)
{
    x <- sample(x, replace=TRUE)
    if(length(unique(x)) > 30) mean(x)
    else stop("too few unique points")
}
## alternative 1
res <- lapply(1:100, function(i) try(doit(x), TRUE))
## alternative 2
## Not run: res <- vector("list", 100)
for(i in 1:100) res[[i]] <- try(doit(x), TRUE)
## End(Not run)
unlist(res[sapply(res, function(x) !inherits(x, "try-error"))])
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{typeof}{The Type of an Object}{typeof}
\aliasA{type}{typeof}{type}
\keyword{attribute}{typeof}
%
\begin{Description}\relax
\code{typeof} determines the (\R{} internal)
type or storage mode of any object
\end{Description}
%
\begin{Usage}
\begin{verbatim}
typeof(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] any \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
A character string.  The possible values are listed in the structure
\code{TypeTable} in \file{src/main/util.c}. Current values are
the vector types \code{"logical"}, \code{"integer"}, \code{"double"},
\code{"complex"}, \code{"character"}, \code{"raw"} and \code{"list"},
\code{"NULL"},
\code{"closure"} (function), \code{"special"} and \code{"builtin"}
(basic functions and operators), \code{"environment"}, \code{"S4"}
(some S4 objects) and others that are unlikely to be seen at user
level (\code{"symbol"}, \code{"pairlist"}, \code{"promise"},
\code{"language"}, \code{"char"}, \code{"..."}, \code{"any"},
\code{"expression"}, \code{"externalptr"}, \code{"bytecode"} and
\code{"weakref"}).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{mode}{mode}}, \code{\LinkA{storage.mode}{storage.mode}}.

\code{\LinkA{isS4}{isS4}} to determine if an object has an S4 class.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
typeof(2)
mode(2)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{unique}{Extract Unique Elements}{unique}
\methaliasA{unique.array}{unique}{unique.array}
\methaliasA{unique.data.frame}{unique}{unique.data.frame}
\methaliasA{unique.default}{unique}{unique.default}
\methaliasA{unique.matrix}{unique}{unique.matrix}
\keyword{manip}{unique}
\keyword{logic}{unique}
%
\begin{Description}\relax
\code{unique} returns a vector, data frame or array like \code{x}
but with duplicate elements/rows removed.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
unique(x, incomparables = FALSE, ...)

## Default S3 method:
unique(x, incomparables = FALSE, fromLast = FALSE, ...)

## S3 method for class 'matrix':
unique(x, incomparables = FALSE, MARGIN = 1,
       fromLast = FALSE, ...)

## S3 method for class 'array':
unique(x, incomparables = FALSE, MARGIN = 1,
       fromLast = FALSE, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a vector or a data frame or an array or \code{NULL}.
\item[\code{incomparables}] a vector of values that cannot be compared.
\code{FALSE} is a special value, meaning that all values can be
compared, and may be the only value accepted for methods other than
the default.  It will be coerced internally to the same type as
\code{x}.
\item[\code{fromLast}] logical indicating if duplication should be considered
from the last, i.e., the last (or rightmost) of identical elements will
be kept.  This only matters for \code{\LinkA{names}{names}} or
\code{\LinkA{dimnames}{dimnames}}.
\item[\code{...}] arguments for particular methods.
\item[\code{MARGIN}] the array margin to be held fixed: a single integer.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a generic function with methods for vectors, data frames and
arrays (including matrices).

The array method calculates for each element of the dimension
specified by \code{MARGIN} if the remaining dimensions are identical
to those for an earlier element (in row-major order).  This would most
commonly be used for matrices to find unique rows (the default) or columns
(with \code{MARGIN = 2}).

Note that unlike the Unix command \code{uniq} this omits
\emph{duplicated} and not just \emph{repeated} elements/rows.  That
is, an element is omitted if it is identical to any previous element
and not just if it is the same as the immediately previous one.
(For the latter, see \code{\LinkA{rle}{rle}}).

Missing values are regarded as equal, but \code{NaN} is not equal to
\code{NA\_real\_}.

Values in \code{incomparables} will never be marked as duplicated.
This is intended to be used for a fairly small set of values and will
not be efficient for a very large set.
\end{Details}
%
\begin{Value}
For a vector, an object of the same type of \code{x}, but with only
one copy of each duplicated element.  No attributes are copied (so
the result has no names).

For a data frame, a data frame is returned with the same columns but
possibly fewer rows (and with row names from the first occurrences of
the unique rows).

A matrix or array is subsetted by \code{[, drop = FALSE]}, so
dimensions and dimnames are copied appropriately, and the result
always has the same number of dimensions as \code{x}.
\end{Value}
%
\begin{Section}{Warning}
Using this for lists is potentially slow, especially if the elements
are not atomic vectors (see \code{\LinkA{vector}{vector}}) or differ only
in their attributes.  In the worst case it is \eqn{O(n^2)}{}.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{duplicated}{duplicated}} which gives the indices of duplicated
elements.

\code{\LinkA{rle}{rle}} which is the equivalent of the Unix \code{uniq -c}
command.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c(3:5, 11:8, 8 + 0:5)
(ux <- unique(x))
(u2 <- unique(x, fromLast = TRUE)) # different order
stopifnot(identical(sort(ux), sort(u2)))

length(unique(sample(100, 100, replace=TRUE)))
## approximately 100(1 - 1/e) = 63.21

unique(iris)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{unlink}{Delete Files and Directories}{unlink}
\keyword{file}{unlink}
%
\begin{Description}\relax
\code{unlink} deletes the file(s) or directories specified by \code{x}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
unlink(x, recursive = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a character vector with the names of the file(s) or
directories to be deleted.
Wildcards (normally \file{*} and \file{?}) are allowed.
\item[\code{recursive}] logical. Should directories be deleted
recursively?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If \code{recursive = FALSE} directories are not deleted,
not even empty ones.

On most platforms `file' includes symbolic links, fifos and sockets.
Some earlier versions of \R{} would bot try to remove broken symbolic links.

Wildcard expansion is done by the internal code of
\code{\LinkA{Sys.glob}{Sys.glob}}. Wildcards never match a leading \file{.} in
the filename, and files \file{.} and \file{..} will never be
considered for deletion.
Wildcards will only be expanded if the system supports it.  Most
systems will support not only \file{*} and \file{?}) but character
classes such as \file{[a-z]} (see the \code{man} pages for
\code{glob}).  The metacharacters \code{* ? [} can occur in Unix
filenames, and this makes it difficult to use \code{unlink} to delete
such files (see  \code{\LinkA{file.remove}{file.remove}}), although escaping the
metacharacters by backslashes usually works.  If a
metacharacter matches nothing it is considered as a literal character.

\code{recursive = TRUE} is not supported on all platforms, and may be
ignored, with a warning.
\end{Details}
%
\begin{Value}
\code{0} for success, \code{1} for failure.
Not deleting a non-existent file is not a failure, nor is being unable
to delete a directory if \code{recursive = FALSE}.  However, missing
values in \code{x} are regarded as failures.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{file.remove}{file.remove}}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{unlist}{Flatten Lists}{unlist}
\keyword{list}{unlist}
\keyword{manip}{unlist}
%
\begin{Description}\relax
Given a list structure \code{x}, \code{unlist} simplifies it to
produce a vector which contains all the atomic components
which occur in \code{x}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
unlist(x, recursive = TRUE, use.names = TRUE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object, typically a list or vector.
\item[\code{recursive}] logical.  Should unlisting be applied to list
components of \code{x}?
\item[\code{use.names}] logical.  Should names be preserved?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{unlist} is generic: you can write methods to handle
specific classes of objects, see \LinkA{InternalMethods}{InternalMethods},
and note, e.g., \code{\LinkA{relist}{relist}} with the \code{unlist} method
for \code{relistable} objects.

If \code{recursive = FALSE}, the function will not recurse beyond the
first level items in \code{x}.

Factors are treated specially.  If all non-list elements of \code{x}
are factors (or ordered factors) then the result will be a factor with
levels the union of the level sets of the elements, in the order the
levels occur in the level sets of the elements (which means that if
all the elements have the same level set, that is the level set of the
result).

\code{x} can be an atomic vector, but then \code{unlist} does nothing useful,
not even drop names.

By default, \code{unlist} tries to retain the naming
information present in \code{x}.  If \code{use.names = FALSE} all
naming information is dropped.

Where possible the list elements are coerced to a common mode during
the unlisting, and so the result often ends up as a character
vector.  Vectors will be coerced to the highest type of the components
in the hierarchy NULL < raw < logical < integer < real < complex < character
< list < expression: pairlists are treated as lists.

A list is a (generic) vector, and the simplified vector might still be
a list (and might be unchanged).  Non-vector elements of the list
(for example language elements such as names, formulas and calls)
are not coerced, and so a list containing one or more of these remains a
list.  (The effect of unlisting an \code{\LinkA{lm}{lm}} fit is a list which
has individual residuals as components.)
\end{Details}
%
\begin{Value}
\code{NULL} or an expression or a vector of an appropriate mode to
hold the list components.

The output type is determined from the highest type
of the components in the hierarchy NULL < raw < logical < integer < real <
complex < character < list < expression, after coercion of pairlists
to lists.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{c}{c}}, \code{\LinkA{as.list}{as.list}}, \code{\LinkA{relist}{relist}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
unlist(options())
unlist(options(), use.names=FALSE)

l.ex <- list(a = list(1:5, LETTERS[1:5]), b = "Z", c = NA)
unlist(l.ex, recursive = FALSE)
unlist(l.ex, recursive = TRUE)

l1 <- list(a="a", b=2, c=pi+2i)
unlist(l1) # a character vector
l2 <- list(a="a", b=as.name("b"), c=pi+2i)
unlist(l2) # remains a list
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{unname}{Remove `names' or `dimnames'}{unname}
\keyword{utilities}{unname}
%
\begin{Description}\relax
Remove the \code{\LinkA{names}{names}} or \code{\LinkA{dimnames}{dimnames}} attribute of
an \R{} object.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
unname(obj, force = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{obj}] an \R{} object.
\item[\code{force}] logical; if true, the \code{dimnames} are even removed
from \code{\LinkA{data.frame}{data.frame}}s.
\emph{This argument is currently \bold{experimental} and hence
might change!}
\end{ldescription}
\end{Arguments}
%
\begin{Value}
Object as \code{obj} but without \code{\LinkA{names}{names}} or
\code{\LinkA{dimnames}{dimnames}}.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
require(graphics); require(stats)

## Answering a question on R-help (14 Oct 1999):
col3 <- 750+ 100*rt(1500, df = 3)
breaks <- factor(cut(col3,breaks=360+5*(0:155)))
z <- table(breaks)
z[1:5] # The names are larger than the data ...
barplot(unname(z), axes= FALSE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{UseMethod}{Class Methods}{UseMethod}
\aliasA{.Class}{UseMethod}{.Class}
\aliasA{.Generic}{UseMethod}{.Generic}
\aliasA{.Method}{UseMethod}{.Method}
\aliasA{NextMethod}{UseMethod}{NextMethod}
\aliasA{S3Methods}{UseMethod}{S3Methods}
\keyword{methods}{UseMethod}
%
\begin{Description}\relax
\R{} possesses a simple generic function mechanism which can be used for
an object-oriented style of programming.  Method dispatch takes place
based on the class(es) of the first argument to the generic function or of
the object supplied as an argument to \code{UseMethod} or \code{NextMethod}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
UseMethod(generic, object)

NextMethod(generic = NULL, object = NULL, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{generic}] a character string naming a function (and not a
built-in operator).  Required for \code{UseMethod}.
\item[\code{object}] for \code{UseMethod}: an object whose class will
determine the method to be dispatched.  Defaults to the first
argument of the enclosing function.
\item[\code{...}] further arguments to be passed to the next method.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
An \R{} object is a data object which has a \code{class}
attribute (and this can be tested by \code{\LinkA{is.object}{is.object}}).
A class attribute is a character vector giving the names of
the classes from which the object \emph{inherits}.
If the object does not have a class attribute, it has an implicit
class.  Matrices and arrays have class \code{"matrix"}
or\code{"array"} followed by the class of the underlying vector.
Most vectors have class the result of \code{\LinkA{mode}{mode}(x)}, except
that integer vectors have class \code{c("integer", "numeric")} and
real vectors have class \code{c("double", "numeric")}.

When a function calling \code{UseMethod("fun")} is applied to an
object with class attribute \code{c("first", "second")}, the system
searches for a function called \code{fun.first} and, if it finds it,
applies it to the object.  If no such function is found a function
called \code{fun.second} is tried.  If no class name produces a
suitable function, the function \code{fun.default} is used, if it
exists, or an error results.

Function \code{\LinkA{methods}{methods}} can be used to find out about the
methods for a particular generic function or class.

\code{UseMethod} is a primitive function so positional matching is
used and names of supplied arguments are ignored.  It is not the only
means of dispatch of methods, for there are \LinkA{internal generic}{internal generic}
and \LinkA{group generic}{group generic} functions.  \code{UseMethod} currently
dispatches on the implicit class even for arguments that are not
objects, but the other means of dispatch do not.

\code{NextMethod} invokes the next method (determined by the
class vector, either of the object supplied to the generic, or of
the first argument to the function containing \code{NextMethod} if a
method was invoked directly).  Normally \code{NextMethod} is used with
only one argument, \code{generic}, but if further arguments are
supplied these modify the call to the next method.

\code{NextMethod} should not be called except in methods called by
\code{UseMethod} or from internal generics (see
\LinkA{InternalGenerics}{InternalGenerics}).  In particular it will not work inside
anonymous calling functions (e.g. \code{get("print.ts")(AirPassengers)}).

Name spaces can register methods for generic functions.  To support
this, \code{UseMethod} and \code{NextMethod} search for methods in
two places: first in the environment in which the generic function
is called, and then in the registration data base for the
environment in which the generic is defined (typically a name space).
So methods for a generic function need to be available in the
environment of the call to the generic, or they must be registered.
(It does not matter whether they are visible in the environment in
which the generic is defined.)
\end{Details}
%
\begin{Section}{Technical Details}
Now for some obscure details that need to appear somewhere.  These
comments will be slightly different than those in Chambers(1992).
(See also the draft `R Language Definition'.)
\code{UseMethod} creates a new function call with
arguments matched as they came in to the generic.  Any local variables
defined before the call to \code{UseMethod} are retained (unlike S).  Any
statements after the call to \code{UseMethod} will not be evaluated as
\code{UseMethod} does not return.  \code{UseMethod} can be called with
more than two arguments: a warning will be given and additional
arguments ignored.  (They are not completely ignored in S.)  If it is
called with just one argument, the class of the first argument of the
enclosing function is used as \code{object}: unlike S this is the first
actual argument passed and not the current value of the object of that
name.

\code{NextMethod} works by creating a special call frame for the next
method.  If no new arguments are supplied, the arguments will be the
same in number, order and name as those to the current method but
their values will be promises to evaluate their name in the current
method and environment.  Any named arguments matched to \code{...}
are handled specially: they either replace existing arguments of the
same name or are appended to the argument list.  They are passed on as
the promise that was supplied as an argument to the current
environment. (S does this differently!)  If they have been evaluated
in the current (or a previous environment) they remain evaluated.
(This is a complex area, and subject to change: see the draft
`R Language Definition'.)

The search for methods for \code{NextMethod} is slightly different
from that for \code{UseMethod}.   Finding no \code{fun.default} is not
necessarily an error, as the search continues to the generic
itself. This is to pick up an \LinkA{internal generic}{internal generic} like \code{[}
which has no separate default method, and succeeds only if the generic
is a \LinkA{primitive}{primitive} function or a wrapper for a
\code{\LinkA{.Internal}{.Internal}} function of the same name.  (When a primitive
is called as the default method, argument matching may not work as
described above due to the different semantics of primitives.)

You will see objects such as \code{.Generic}, \code{.Method}, and
\code{.Class} used in methods.  These are set in the environment
within which the method is evaluated by the dispatch mechanism, which
is as follows:
\begin{enumerate}

\item Find the context for the calling function (the generic): this
gives us the unevaluated arguments for the original call.
\item Evaluate the object (usually an argument) to be used for
dispatch, and find a method (possibly the default method) or throw
an error.
\item Create an environment for evaluating the method and insert
special variables (see below) into that environment.  Also copy any
variables in the environment of the generic that are not formal (or
actual) arguments.
\item Fix up the argument list to be the arguments of the call
matched to the formals of the method.

\end{enumerate}

\code{.Generic} is a length-one character vector naming the generic function.

\code{.Method} is a character vector (normally of length one) naming
the method function.  (For functions in the group generic
\code{\LinkA{Ops}{S3groupGeneric}} it is of length two.)

\code{.Class} is a character vector of classes used to find the next
method.  \code{NextMethod} adds an attribute \code{"previous"} to
\code{.Class} giving the \code{.Class} last used for dispatch, and
shifts \code{.Class} along to that used for dispatch.

\code{.GenericCallEnv} and \code{.GenericDefEnv} are the environments
of the call to be generic and defining the generic respectively.  (The
latter is used to find methods registered for the generic.)

Note that \code{.Class} is set when the generic is called, and is
unchanged if the class of the dispatching argument is changed in a
method.  It is possible to change the method that \code{NextMethod}
would dispatch by manipulating \code{.Class}, but `this is not
recommended unless you understand the inheritance mechanism
thoroughly' (Chambers \& Hastie, 1992, p. 469).
\end{Section}
%
\begin{Note}\relax
This scheme is called \emph{S3} (S version 3).  For new projects,
it is recommended to use the more flexible and robust \emph{S4} scheme
provided in the \pkg{methods} package.
\end{Note}
%
\begin{References}\relax
Chambers, J. M. (1992)
\emph{Classes and methods: object-oriented programming in S.}
Appendix A of \emph{Statistical Models in S}
eds J. M. Chambers and T. J. Hastie, Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
The draft `R Language Definition'.

\code{\LinkA{methods}{methods}}, \code{\LinkA{class}{class}},
\code{\LinkA{getS3method}{getS3method}}, \code{\LinkA{is.object}{is.object}}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{userhooks}{Functions to Get and Set Hooks for Load, Attach, Detach and Unload}{userhooks}
\aliasA{.userHooksEnv}{userhooks}{.userHooksEnv}
\aliasA{getHook}{userhooks}{getHook}
\aliasA{packageEvent}{userhooks}{packageEvent}
\aliasA{setHook}{userhooks}{setHook}
\keyword{utilities}{userhooks}
%
\begin{Description}\relax
These functions allow users to set actions to be taken before packages
are attached/detached and name spaces are (un)loaded.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
getHook(hookName)
setHook(hookName, value,
        action = c("append", "prepend", "replace"))

packageEvent(pkgname,
             event = c("onLoad", "attach", "detach", "onUnload"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{hookName}] character string: the hook name
\item[\code{pkgname}] character string: the package/name space name.
\item[\code{event}] character string: an event for the package
\item[\code{value}] A function, or for \code{action="replace"}, \code{NULL}.
\item[\code{action}] The action to be taken.  The names can be abbreviated.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{setHook} provides a general mechanism for users to register
hooks, a list of functions to be called from system (or user)
functions.  The initial set of hooks is associated with events on
packages/name spaces: these hooks are named via calls to \code{packageEvent}.

To remove a hook completely, call \code{setHook(hookName, NULL, "replace")}.

When an \R{} package is attached by \code{\LinkA{library}{library}}, it can call
initialization code via a function \code{.First.lib}, and when it is
\code{\LinkA{detach}{detach}}-ed it can tidy up via a function \code{.Last.lib}.
Users can add their own initialization code via the hooks provided by
these functions, functions which will be called as
\code{funname(pkgname, pkgpath)} inside a \code{\LinkA{try}{try}}
call.  (The attach hook is called after \code{.First.lib} and the detach
hook before \code{.Last.lib}.)

If a package has a name space, there are two further actions, when the
name space is loaded (before being attached and after \code{.onLoad} is
called ) and when it is unloaded (after being detached and before
\code{.onUnload}).  Note that code in these hooks is run without the
package being on the search path, so objects in the package need to be
referred to using the double colon operator as in the example.
(Unlike \code{.onLoad}, the user hook is run after the name space has
been sealed.)

Hooks are normally run in the order shown by \code{getHook},
but the \code{"detach"} and \code{"onUnload"} hooks are run
in reverse order so the default for package events is to add hooks
`inside' existing ones.

Note that when an \R{} session is finished, packages are not detached and
name spaces are not unloaded, so the corresponding hooks will not be
run.

The hooks are stored in the environment \code{.userHooksEnv} in the
base package, with `mangled' names.
\end{Details}
%
\begin{Value}
For \code{getHook} function, a list of functions (possible empty).
For \code{setHook} function, no return value.
For \code{packageEvent}, the derived hook name (a character string).
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{library}{library}}, \code{\LinkA{detach}{detach}}, \code{\LinkA{loadNamespace}{loadNamespace}}.

Other hooks may be added later: \code{\LinkA{plot.new}{plot.new}} and
\code{\LinkA{persp}{persp}} already have them.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
setHook(packageEvent("grDevices", "onLoad"),
        function(...) grDevices::ps.options(horizontal=FALSE)) 
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{utf8Conversion}{Convert to or from UTF-8-encoded Character Vectors}{utf8Conversion}
\aliasA{intToUtf8}{utf8Conversion}{intToUtf8}
\aliasA{utf8ToInt}{utf8Conversion}{utf8ToInt}
\keyword{character}{utf8Conversion}
\keyword{utilities}{utf8Conversion}
%
\begin{Description}\relax
Conversion of UTF-8 encoded character vectors to and from integer vectors.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
utf8ToInt(x)
intToUtf8(x, multiple = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] object to be converted.
\item[\code{multiple}] logical: should the conversion be to a single
character string or multiple individual characters?
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
These will work in any locale, including on machines that do not
otherwise support multi-byte character sets.
\end{Details}
%
\begin{Value}
\code{utf8ToInt} converts a length-one character string encoded in
UTF-8 to an integer vector of (numeric) UTF-8 code points.

\code{intToUtf8} converts a vector of (numeric) UTF-8 code points
either to a single character string or a character vector of single
characters.  (For a single character string \code{0} is silently
omitted: otherwise \code{0} is mapped to \code{""}.  Non-integral
numeric values are truncated to integers.)  The
\code{\LinkA{Encoding}{Encoding}} is declared as \code{"UTF-8"}.
\end{Value}
%
\begin{Examples}
\begin{ExampleCode}
## Not run: 
## will only display in some locales and fonts
intToUtf8(0x03B2L) # Greek beta

## End(Not run)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{vector}{Vectors}{vector}
\aliasA{as.vector}{vector}{as.vector}
\methaliasA{as.vector.factor}{vector}{as.vector.factor}
\aliasA{atomic}{vector}{atomic}
\aliasA{is.vector}{vector}{is.vector}
\keyword{classes}{vector}
%
\begin{Description}\relax
\code{vector} produces a vector of the given length and mode.

\code{as.vector}, a generic, attempts to coerce its argument into a
vector of mode \code{mode} (the default is to coerce to whichever mode
is most convenient).

\code{is.vector} returns \code{TRUE} if \code{x} is a vector of the
specified mode having no attributes other than names.  It returns
\code{FALSE} otherwise.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
vector(mode = "logical", length = 0)
as.vector(x, mode = "any")
is.vector(x, mode = "any")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{mode}] A character string giving an atomic mode or \code{"list"},
or (not for \code{vector}) \code{"any"}.
\item[\code{length}] A non-negative integer specifying the desired length.
\item[\code{x}] An object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The atomic modes are \code{"logical"}, \code{"integer"}, \code{"numeric"},
\code{"complex"}, \code{"character"} and \code{"raw"}.

If \code{mode = "any"}, \code{is.vector} returns \code{TRUE} for
modes logical, integer, real, complex, character, raw, list or
expression. It returns \code{FALSE} if \code{x} has any attributes
except names.  (This is incompatible with S.)  On the other hand,
\code{as.vector} removes \emph{all} attributes including names for
results of atomic mode.

Note that factors are \emph{not} vectors;  \code{is.vector} returns
\code{FALSE} and \code{as.vector} converts to a character vector for
\code{mode = "any"}.
\end{Details}
%
\begin{Value}
For \code{vector}, a vector of the given length and mode.  Logical
vector elements are initialized to \code{FALSE}, numeric vector
elements to \code{0}, character vector elements to \code{""}, raw
vector elements to \code{nul} bytes and list elements to \code{NULL}.

All attributes are removed from the answer if it is of an atomic mode.
\end{Value}
%
\begin{Note}\relax
\code{as.vector} and \code{is.vector} are quite distinct from the
meaning of the formal class \code{"vector"} in the \pkg{methods}
package, and hence \code{\LinkA{as}{as}(x, "vector")} and
\code{\LinkA{is}{is}(x, "vector")}.

\code{mode}s of \code{"symbol"}, \code{"pairlist"} and
\code{"expression"} are allowed but have long been undocumented.
\end{Note}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{c}{c}}, \code{\LinkA{is.numeric}{is.numeric}}, \code{\LinkA{is.list}{is.list}}, etc.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
df <- data.frame(x=1:3, y=5:7)
## Not run: ## Error:
  as.vector(data.frame(x=1:3, y=5:7), mode="numeric")

## End(Not run)

x <- c(a = 1, b = 2)
is.vector(x)
as.vector(x)
all.equal(x, as.vector(x)) ## FALSE


###-- All the following are TRUE:
is.list(df)
! is.vector(df)
! is.vector(df, mode="list")

is.vector(list(), mode="list")
is.vector(NULL,   mode="NULL")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{warning}{Warning Messages}{warning}
\aliasA{suppressWarnings}{warning}{suppressWarnings}
\keyword{programming}{warning}
\keyword{error}{warning}
%
\begin{Description}\relax
Generates a warning message that corresponds to its argument(s) and
(optionally) the expression or function from which it was called.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
warning(..., call. = TRUE, immediate. = FALSE, domain = NULL)
suppressWarnings(expr)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] zero or more objects which can be coerced to character
(and which are pasted together with no separator) or a single
condition object.
\item[\code{call.}] logical, indicating if the call should become part of the
warning message.
\item[\code{immediate.}] logical, indicating if the call should be output
immediately, even if \code{\LinkA{getOption}{getOption}("warn") <= 0}.
\item[\code{expr}] expression to evaluate.
\item[\code{domain}] see \code{\LinkA{gettext}{gettext}}. If \code{NA}, messages will
not be translated.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The result \emph{depends} on the value of
\code{\LinkA{options}{options}("warn")} and on handlers established in the
executing code.

If a condition object is supplied it should be the only argument, and
further arguments will be ignored, with a message.

\code{warning} signals a warning condition by (effectively) calling
\code{signalCondition}.  If there are no handlers or if all handlers
return, then the value of \code{warn = \LinkA{getOption}{getOption}("warn")} is
used to determine the appropriate action.  If \code{warn} is negative
warnings are ignored; if it is zero they are stored and printed after
the top--level function has completed; if it is one they are printed
as they occur and if it is 2 (or larger) warnings are turned into
errors. Calling \code{warning(immediate. = TRUE)} turns \code{warn <=
    0} into \code{warn = 1} for this call only.


If \code{warn} is zero (the default), a read-only variable
\code{last.warning} is created.  It contains the warnings which can be
printed via a call to \code{\LinkA{warnings}{warnings}}.

Warnings will be truncated to \code{\LinkA{getOption}{getOption}("warning.length")}
characters, default 1000, indicated by \code{[... truncated]}.

While the warning is being processed, a \code{muffleWarning} restart
is available.  If this restart is invoked with \code{invokeRestart},
then \code{warning} returns immediately.

An attempt is made to coerce other types of inputs to \code{warning}
to character vectors.

\code{suppressWarnings} evaluates its expression in a context that
ignores all warnings.
\end{Details}
%
\begin{Value}
The warning message as \code{\LinkA{character}{character}} string, invisibly.
\end{Value}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{stop}{stop}} for fatal errors,
\code{\LinkA{message}{message}} for diagnostic messages,
\code{\LinkA{warnings}{warnings}},
and \code{\LinkA{options}{options}} with argument \code{warn=}.

\code{\LinkA{gettext}{gettext}} for the mechanisms for the automated translation
of messages.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}

testit <- function() warning("testit")
testit() ## shows call
testit <- function() warning("problem in testit", call. = FALSE)
testit() ## no call
suppressWarnings(warning("testit"))

\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{warnings}{Print Warning Messages}{warnings}
\aliasA{last.warning}{warnings}{last.warning}
\aliasA{print.warnings}{warnings}{print.warnings}
\keyword{programming}{warnings}
\keyword{error}{warnings}
%
\begin{Description}\relax
\code{warnings} and its \code{print} method print the
variable \code{last.warning} in a pleasing form.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
warnings(...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{...}] arguments to be passed to \code{\LinkA{cat}{cat}}.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
See the description of \code{\LinkA{options}{options}("warn")} for the
circumstances under which there is a \code{last.warning} object and
\code{warnings()} is used.  In essence this is if \code{options(warn =
    0)} and \code{warning} has been called at least once.

It is possible that \code{last.warning} refers to the last recorded
warning and not to the last warning, for example if \code{options(warn)} has
been changed or if a catastrophic error occurred. 
\end{Details}
%
\begin{Section}{Warning}
It is undocumented where \code{last.warning} is stored nor that it is
visible, and this is subject to change.  Prior to \R{} 2.4.0 it was
stored in the workspace, but no longer.
\end{Section}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{\LinkA{warning}{warning}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
## NB this example is intended to be pasted in,
##    rather than run by example()
ow <- options("warn")
for(w in -1:1) {
   options(warn = w); cat("\n warn =",w,"\n")
   for(i in 1:3) { cat(i,"..\n"); m <- matrix(1:7, 3,4) }
}
warnings()
options(ow) # reset
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{weekdays}{Extract Parts of a POSIXt or Date Object}{weekdays}
\aliasA{julian}{weekdays}{julian}
\methaliasA{julian.Date}{weekdays}{julian.Date}
\methaliasA{julian.POSIXt}{weekdays}{julian.POSIXt}
\aliasA{months}{weekdays}{months}
\methaliasA{months.Date}{weekdays}{months.Date}
\methaliasA{months.POSIXt}{weekdays}{months.POSIXt}
\aliasA{quarters}{weekdays}{quarters}
\methaliasA{quarters.Date}{weekdays}{quarters.Date}
\methaliasA{quarters.POSIXt}{weekdays}{quarters.POSIXt}
\methaliasA{weekdays.Date}{weekdays}{weekdays.Date}
\methaliasA{weekdays.POSIXt}{weekdays}{weekdays.POSIXt}
\keyword{chron}{weekdays}
%
\begin{Description}\relax
Extract the weekday, month or quarter, or the Julian time
(days since some origin).  These are generic functions: the methods
for the internal date-time classes are documented here.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
weekdays(x, abbreviate)
## S3 method for class 'POSIXt':
weekdays(x, abbreviate = FALSE)
## S3 method for class 'Date':
weekdays(x, abbreviate = FALSE)

months(x, abbreviate)
## S3 method for class 'POSIXt':
months(x, abbreviate = FALSE)
## S3 method for class 'Date':
months(x, abbreviate = FALSE)

quarters(x, abbreviate)
## S3 method for class 'POSIXt':
quarters(x, ...)
## S3 method for class 'Date':
quarters(x, ...)

julian(x, ...)
## S3 method for class 'POSIXt':
julian(x, origin = as.POSIXct("1970-01-01", tz="GMT"), ...)
## S3 method for class 'Date':
julian(x, origin = as.Date("1970-01-01"), ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an object inheriting from class \code{"POSIXt"} or \code{"Date"}.
\item[\code{abbreviate}] logical.  Should the names be abbreviated?
\item[\code{origin}] an length-one object inheriting from class
\code{"POSIXt"} or \code{"Date"}.
\item[\code{...}] arguments for other methods.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
\code{weekdays} and \code{months} return a character
vector of names in the locale in use.

\code{quarters} returns a character vector of \code{"Q1"} to
\code{"Q4"}.

\code{julian} returns the number of days (possibly fractional)
since the origin, with the origin as a \code{"origin"} attribute.
\end{Value}
%
\begin{Note}\relax
Other components such as the day of the month or the year are
very easy to compute: just use \code{\LinkA{as.POSIXlt}{as.POSIXlt}} and extract
the relevant component.
\end{Note}
%
\begin{SeeAlso}\relax
\code{\LinkA{DateTimeClasses}{DateTimeClasses}}, \code{\LinkA{Date}{Date}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
weekdays(.leap.seconds)
months(.leap.seconds)
quarters(.leap.seconds)

## Julian Day Number (JDN, http://en.wikipedia.org/wiki/Julian_day)
## is the number of days since noon UTC on the first day of 4317 BC.
julian(Sys.Date(), -2440588) # for a day
floor(as.numeric(julian(Sys.time())) + 2440587.5) # for a date-time
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{which}{Which indices are TRUE?}{which}
\keyword{logic}{which}
\keyword{attribute}{which}
%
\begin{Description}\relax
Give the \code{TRUE} indices of a logical object, allowing for array
indices.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
which(x, arr.ind = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a \code{\LinkA{logical}{logical}} vector or array.  \code{\LinkA{NA}{NA}}s
are allowed and omitted (treated as if \code{FALSE}).
\item[\code{arr.ind}] logical; should \bold{arr}ay \bold{ind}ices be returned
when \code{x} is an array?
\end{ldescription}
\end{Arguments}
%
\begin{Value}
If \code{arr.ind == FALSE} (the default), an integer vector with
\code{length} equal to \code{sum(x)}, i.e., to the number of
\code{TRUE}s in \code{x}; Basically, the result is
\code{(1:length(x))[x]}.

If \code{arr.ind == TRUE} and \code{x} is an \code{\LinkA{array}{array}} (has
a \code{\LinkA{dim}{dim}} attribute), the result is a matrix whose rows each
are the indices of one element of \code{x}; see Examples below.
\end{Value}
%
\begin{Author}\relax
Werner Stahel and Peter Holzer \email{holzer@stat.math.ethz.ch},
for the array case.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{Logic}{Logic}}, \code{\LinkA{which.min}{which.min}} for the index of
the minimum or maximum, and \code{\LinkA{match}{match}} for the first index of
an element in a vector, i.e., for a scalar \code{a}, \code{match(a,x)}
is equivalent to  \code{min(which(x == a))} but much more efficient.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
which(LETTERS == "R")
which(ll <- c(TRUE,FALSE,TRUE,NA,FALSE,FALSE,TRUE))#> 1 3 7
names(ll) <- letters[seq(ll)]
which(ll)
which((1:12)%%2 == 0) # which are even?
which(1:10 > 3, arr.ind=TRUE)

( m <- matrix(1:12,3,4) )
which(m %% 3 == 0)
which(m %% 3 == 0, arr.ind=TRUE)
rownames(m) <- paste("Case",1:3, sep="_")
which(m %% 5 == 0, arr.ind=TRUE)

dim(m) <- c(2,2,3); m
which(m %% 3 == 0, arr.ind=FALSE)
which(m %% 3 == 0, arr.ind=TRUE)

vm <- c(m)
dim(vm) <- length(vm) #-- funny thing with  length(dim(...)) == 1
which(vm %% 3 == 0, arr.ind=TRUE)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{which.min}{Where is the Min() or Max() ?}{which.min}
\aliasA{which.max}{which.min}{which.max}
\keyword{utilities}{which.min}
%
\begin{Description}\relax
Determines the location, i.e., index of the (first) minimum or maximum
of a numeric vector.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
which.min(x)
which.max(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] numeric (integer or double) vector, whose
\code{\LinkA{min}{min}} or \code{\LinkA{max}{max}} is searched for.
\end{ldescription}
\end{Arguments}
%
\begin{Value}
Missing and \code{NaN} values are discarded.

an \code{\LinkA{integer}{integer}} of length 1 or 0 (iff \code{x} has no
non-\code{NA}s), giving the index of the \emph{first} minimum or
maximum respectively of \code{x}.

If this extremum is unique (or empty), the results are the same as
(but more efficient than) \code{which(x == min(x))} or
\code{which(x == max(x))} respectively.
\end{Value}
%
\begin{Author}\relax
Martin Maechler
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{which}{which}}, \code{\LinkA{max.col}{max.col}}, \code{\LinkA{max}{max}}, etc.

\code{\LinkA{which.is.max}{which.is.max}} in package \pkg{nnet} differs in
breaking ties at random (and having a `fuzz' in the definition
of ties).
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- c(1:4,0:5,11)
which.min(x)
which.max(x)

## it *does* work with NA's present, by discarding them:
presidents[1:30]
range(presidents, na.rm = TRUE)
which.min(presidents) # 28
which.max(presidents) #  2
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{with}{Evaluate an Expression in a Data Environment}{with}
\methaliasA{with.default}{with}{with.default}
\aliasA{within}{with}{within}
\methaliasA{within.data.frame}{with}{within.data.frame}
\methaliasA{within.list}{with}{within.list}
\keyword{data}{with}
\keyword{programming}{with}
%
\begin{Description}\relax
Evaluate an \R{} expression in an environment constructed from data,
possibly modifying the original data.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
with(data, expr, ...)
within(data, expr, ...)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{data}] data to use for constructing an environment. For the
default \code{with} method this may be an environment, a list, a
data frame, or an integer as in \code{sys.call}. For \code{within},
it can be a list or a data frame.
\item[\code{expr}] expression to evaluate.
\item[\code{...}] arguments to be passed to future methods.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{with} is a generic function that evaluates \code{expr} in a
local environment constructed from \code{data}.  The environment has
the caller's environment as its parent.  This is useful for
simplifying calls to modeling functions.  (Note: if \code{data} is
already an environment then this is used with its existing parent.)

Note that assignments within \code{expr} take place in the constructed
environment and not in the user's workspace.

\code{within} is similar, except that it examines the environment
after the evaluation of \code{expr} and makes the corresponding
modifications to \code{data} (this may fail in the data frame case if
objects are created which cannot be stored in a data frame), and
returns it.  \code{within} can be used as an alternative to
\code{transform}.
\end{Details}
%
\begin{Value}
For \code{with}, the value of the evaluated \code{expr}.  For
\code{within}, the modified object.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{evalq}{evalq}}, \code{\LinkA{attach}{attach}}, \code{\LinkA{assign}{assign}},
\code{\LinkA{transform}{transform}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
require(stats); require(graphics)
#examples from glm:
## Not run: 
library(MASS)
with(anorexia, {
    anorex.1 <- glm(Postwt ~ Prewt + Treat + offset(Prewt),
                    family = gaussian)
    summary(anorex.1)
})

## End(Not run)



aq <- within(airquality, {     # Notice that multiple vars can be changed
    lOzone<-log(Ozone)
    Month<-factor(month.abb[Month])
    cTemp <- round((Temp - 32) * 5/9, 1) # From Fahrenheit to Celsius
    rm(Day, Temp)
})
head(aq)

with(data.frame(u = c(5,10,15,20,30,40,60,80,100),
                lot1 = c(118,58,42,35,27,25,21,19,18),
                lot2 = c(69,35,26,21,18,16,13,12,12)),
    list(summary(glm(lot1 ~ log(u), family = Gamma)),
         summary(glm(lot2 ~ log(u), family = Gamma))))

# example from boxplot:
with(ToothGrowth, {
    boxplot(len ~ dose, boxwex = 0.25, at = 1:3 - 0.2,
            subset = (supp == "VC"), col = "yellow",
            main = "Guinea Pigs' Tooth Growth",
            xlab = "Vitamin C dose mg",
            ylab = "tooth length", ylim = c(0,35))
    boxplot(len ~ dose, add = TRUE, boxwex = 0.25, at = 1:3 + 0.2,
            subset = supp == "OJ", col = "orange")
    legend(2, 9, c("Ascorbic acid", "Orange juice"),
           fill = c("yellow", "orange"))
})

# alternate form that avoids subset argument:
with(subset(ToothGrowth, supp == "VC"),
     boxplot(len ~ dose, boxwex = 0.25, at = 1:3 - 0.2,
             col = "yellow", main = "Guinea Pigs' Tooth Growth",
             xlab = "Vitamin C dose mg",
             ylab = "tooth length", ylim = c(0,35)))
with(subset(ToothGrowth,  supp == "OJ"),
     boxplot(len ~ dose, add = TRUE, boxwex = 0.25, at = 1:3 + 0.2,
             col = "orange"))
legend(2, 9, c("Ascorbic acid", "Orange juice"),
       fill = c("yellow", "orange"))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{withVisible}{Return both a value and its visibility}{withVisible}
\keyword{programming}{withVisible}
%
\begin{Description}\relax
This function evaluates an expression, returning it in a two element list
containing its value and a flag showing whether it would automatically print.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
withVisible(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}]  An expression to be evaluated. 
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
The argument is evaluated in the caller's context.
\end{Details}
%
\begin{Value}
\begin{ldescription}
\item[\code{value }] The value of \code{x} after evaluation.
\item[\code{visible }] logical; whether the value would auto-print.
\end{ldescription}
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{invisible}{invisible}}, \code{\LinkA{eval}{eval}}
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
x <- 1
withVisible(x <- 1)
x
withVisible(x)

# Wrap the call in evalq() for special handling

df <- data.frame(a=1:5, b=1:5)
evalq(withVisible(a + b), envir=df)
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{write}{Write Data to a File}{write}
\keyword{file}{write}
\keyword{connection}{write}
%
\begin{Description}\relax
The data (usually a matrix) \code{x} are written to file \code{file}.
If \code{x} is a two-dimensional matrix you need to transpose it to get the
columns in \code{file} the same as those in the internal representation.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
write(x, file = "data",
      ncolumns = if(is.character(x)) 1 else 5,
      append = FALSE, sep = " ")
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] the data to be written out.
\item[\code{file}] A connection, or a character string naming the file to write to.
If \code{""}, print to the standard output connection.
If it is \code{"|cmd"}, the output is piped to the command given
by \file{cmd}.

\item[\code{ncolumns}] the number of columns to write the data in.
\item[\code{append}] if \code{TRUE} the data \code{x} are appended to the
connection.
\item[\code{sep}] a string used to separate columns.  Using \code{sep = "\bsl{}t"}
gives tab delimited output; default is \code{" "}.
\end{ldescription}
\end{Arguments}
%
\begin{References}\relax
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
\emph{The New S Language}.
Wadsworth \& Brooks/Cole.
\end{References}
%
\begin{SeeAlso}\relax
\code{write} is a wrapper for \code{\LinkA{cat}{cat}}, which gives further
details on the format used.

\code{\LinkA{save}{save}} for writing any \R{} objects,
\code{\LinkA{write.table}{write.table}} for data frames,
and \code{\LinkA{scan}{scan}} for reading data.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
# create a 2 by 5 matrix
x <- matrix(1:10,ncol=5)

# the file data contains x, two rows, five cols
# 1 3 5 7 9 will form the first row
write(t(x))

# Writing to the "console" 'tab-delimited'
# two rows, five cols but the first row is 1 2 3 4 5
write(x, "", sep = "\t")
unlink("data") # tidy up
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{writeLines}{Write Lines to a Connection}{writeLines}
\keyword{file}{writeLines}
\keyword{connection}{writeLines}
%
\begin{Description}\relax
Write text lines to a connection.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
writeLines(text, con = stdout(), sep = "\n", useBytes = FALSE)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{text}] A character vector
\item[\code{con}] A connection object or a character string.
\item[\code{sep}] character. A string to be written to the connection after
each line of text.
\item[\code{useBytes}] logical.  See `Details'.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
If the \code{con} is a character string, the function calls
\code{\LinkA{file}{file}} to obtain a file connection which is opened for
the duration of the function call.

If the connection is open it is written from its current position.
If it is not open, it is opened for the duration of the call in
\code{"wt"} mode and then closed again.

Normally \code{writeLines} is used with a text-mode  connection, and the
default separator is converted to the normal separator for that
platform (LF on Unix/Linux, CRLF on Windows).  For more control, open
a binary connection and specify the precise value you want written to
the file in \code{sep}.  For even more control, use
\code{\LinkA{writeChar}{writeChar}} on a binary connection.

\code{useBytes} is for expert use.  Normally (when false) character
strings with marked encodings are converted to the current encoding
before being passed to the connection (which might do further
re-encoding).  \code{useBytes = TRUE} suppresses the re-encoding of
marked strings so they are passed byte-by-byte to the connection.:
this can be useful when strings have already been re-encoded by
e.g. \code{\LinkA{iconv}{iconv}}.
\end{Details}
%
\begin{SeeAlso}\relax
\code{\LinkA{connections}{connections}}, \code{\LinkA{writeChar}{writeChar}}, \code{\LinkA{writeBin}{writeBin}},
\code{\LinkA{readLines}{readLines}}, \code{\LinkA{cat}{cat}}
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{xtfrm}{Auxiliary Function for Sorting and Ranking}{xtfrm}
\methaliasA{xtfrm.Date}{xtfrm}{xtfrm.Date}
\methaliasA{xtfrm.default}{xtfrm}{xtfrm.default}
\methaliasA{xtfrm.factor}{xtfrm}{xtfrm.factor}
\methaliasA{xtfrm.POSIXct}{xtfrm}{xtfrm.POSIXct}
\methaliasA{xtfrm.POSIXlt}{xtfrm}{xtfrm.POSIXlt}
\methaliasA{xtfrm.Surv}{xtfrm}{xtfrm.Surv}
\keyword{univar}{xtfrm}
\keyword{manip}{xtfrm}
%
\begin{Description}\relax
A generic auxiliary function that produces a numeric vector which
will sort in the same order as \code{x}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
xtfrm(x)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] an \R{} object.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
This is a special case of ranking, but as a less general function than
\code{\LinkA{rank}{rank}} is more suitable to be made generic.  The default
method is equivalent to \code{rank(x, ties.method="min",
    na.last="keep")}, so \code{NA} values are given rank \code{NA} and
all tied values are given equal integer rank.

The \code{\LinkA{factor}{factor}} method extracts the codes.  The
\code{\LinkA{Surv}{Surv}} method sorts first on times and then on
status code(s).

The default method will make use of \code{==} and \code{>} methods
for the class of \code{x[i]} (for integers \code{i}), and the
\code{is.na} method for the class of \code{x}, but might be rather
slow when doing so.
\end{Details}
%
\begin{Value}
A numeric (usually integer) vector of the same length as \code{x}.
\end{Value}
%
\begin{SeeAlso}\relax
\code{\LinkA{rank}{rank}}, \code{\LinkA{sort}{sort}}, \code{\LinkA{order}{order}}.
\end{SeeAlso}
\inputencoding{latin1}
\HeaderA{zapsmall}{Rounding of Numbers}{zapsmall}
\keyword{arith}{zapsmall}
%
\begin{Description}\relax
\code{zapsmall} determines a \code{digits} argument \code{dr} for
calling \code{round(x, digits = dr)} such that values close to
zero (compared with the maximal absolute value) are `zapped',
i.e., treated as \code{0}.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
zapsmall(x, digits = getOption("digits"))
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{x}] a numeric or complex vector.
\item[\code{digits}] integer indicating the precision to be used.
\end{ldescription}
\end{Arguments}
%
\begin{References}\relax
Chambers, J. M. (1998)
\emph{Programming with Data. A Guide to the S Language}.
Springer.
\end{References}
%
\begin{Examples}
\begin{ExampleCode}
x2 <- pi * 100^(-1:3)
print(x2 / 1000, digits=4)
zapsmall(x2 / 1000, digits=4)

zapsmall(exp(1i*0:4*pi/2))
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{zpackages}{Listing of Packages}{zpackages}
\aliasA{.packages}{zpackages}{.packages}
\keyword{data}{zpackages}
%
\begin{Description}\relax
\code{.packages} returns information about package availability.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.packages(all.available = FALSE, lib.loc = NULL)
\end{verbatim}
\end{Usage}
%
\begin{Arguments}
\begin{ldescription}
\item[\code{all.available}] logical; if \code{TRUE} return a character vector
of all available packages in \code{lib.loc}.
\item[\code{lib.loc}] a character vector describing the location of \R{}
library trees to search through, or \code{NULL}.  The default value
of \code{NULL} corresponds to all libraries currently known.
\end{ldescription}
\end{Arguments}
%
\begin{Details}\relax
\code{.packages()} returns the names of the currently
attached packages \emph{invisibly} whereas
\code{.packages(all.available = TRUE)} gives (visibly) \emph{all}
packages available in the library location path \code{lib.loc}.

For a package to be regarded as being available it must have valid
metadata (and hence be an installed package).
\end{Details}
%
\begin{Value}
A character vector of package base names, invisible unless
\code{all.available = TRUE}.
\end{Value}
%
\begin{Author}\relax
R core;
Guido Masarotto for the \code{all.available=TRUE} part of
\code{.packages}.
\end{Author}
%
\begin{SeeAlso}\relax
\code{\LinkA{library}{library}}, \code{\LinkA{.libPaths}{.libPaths}}.
\end{SeeAlso}
%
\begin{Examples}
\begin{ExampleCode}
(.packages())               # maybe just "base"
.packages(all.available = TRUE) # return all available as character vector
require(splines)
(.packages())               # "splines", too
detach("package:splines")
\end{ExampleCode}
\end{Examples}
\inputencoding{latin1}
\HeaderA{zutils}{Miscellaneous Internal/Programming Utilities}{zutils}
\aliasA{.standard\_regexps}{zutils}{.standard.Rul.regexps}
\keyword{utilities}{zutils}
%
\begin{Description}\relax
Miscellaneous internal/programming utilities.
\end{Description}
%
\begin{Usage}
\begin{verbatim}
.standard_regexps()
\end{verbatim}
\end{Usage}
%
\begin{Details}\relax
\code{.standard\_regexps} returns a list of `standard' regexps,
including elements named \code{valid\_package\_name} and
\code{valid\_package\_version} with the obvious meanings.  The regexps
are not anchored.
\end{Details}
\clearpage
